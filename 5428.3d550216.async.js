"use strict";(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[5428],{8549:function(V,K,o){var t=o(88028),p=o(2595),D=o(22481),v=o(51282),l=o(50959),I=o(84875),W=o.n(I),g=o(93355),y=o(41491),u=o(36484),m=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],i=l.forwardRef(function(n,d){var E=n.className,P=n.component,w=n.viewBox,f=n.spin,L=n.rotate,k=n.tabIndex,b=n.onClick,C=n.children,j=(0,v.Z)(n,m),U=l.useRef(),R=(0,g.x1)(U,d);(0,u.Kp)(!!(P||C),"Should have `component` prop or `children`."),(0,u.C3)(U);var T=l.useContext(y.Z),x=T.prefixCls,B=x===void 0?"anticon":x,Z=T.rootClassName,N=W()(Z,B,E),H=W()((0,D.Z)({},"".concat(B,"-spin"),!!f)),Y=L?{msTransform:"rotate(".concat(L,"deg)"),transform:"rotate(".concat(L,"deg)")}:void 0,e=(0,p.Z)((0,p.Z)({},u.vD),{},{className:H,style:Y,viewBox:w});w||delete e.viewBox;var s=function(){return P?l.createElement(P,e,C):C?((0,u.Kp)(!!w||l.Children.count(C)===1&&l.isValidElement(C)&&l.Children.only(C).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),l.createElement("svg",(0,t.Z)({},e,{viewBox:w}),C)):null},c=k;return c===void 0&&b&&(c=-1),l.createElement("span",(0,t.Z)({role:"img"},j,{ref:R,tabIndex:c,onClick:b,className:N}),s())});i.displayName="AntdIcon",K.Z=i},56845:function(V,K,o){o.d(K,{i:function(){return W}});var t=o(11163),p=o(80713),D=o(31043),v=o(296),l=o(56907),I,W=class extends t._{constructor({chains:g,options:y}={}){const u={name:"MetaMask",shimDisconnect:!0,getProvider(){function m(n){if(n!=null&&n.isMetaMask&&!(n.isBraveWallet&&!n._events&&!n._state)&&!n.isApexWallet&&!n.isAvalanche&&!n.isBitKeep&&!n.isBlockWallet&&!n.isCoin98&&!n.isFordefi&&!n.isMathWallet&&!(n.isOkxWallet||n.isOKExWallet)&&!(n.isOneInchIOSWallet||n.isOneInchAndroidWallet)&&!n.isOpera&&!n.isPortal&&!n.isRabby&&!n.isDefiant&&!n.isTokenPocket&&!n.isTokenary&&!n.isZeal&&!n.isZerion)return n}if(typeof window>"u")return;const i=window.ethereum;return i!=null&&i.providers?i.providers.find(m):m(i)},...y};super({chains:g,options:u}),this.id="metaMask",this.shimDisconnectKey=`${this.id}.shimDisconnect`,(0,D.Ko)(this,I,void 0),(0,D.qx)(this,I,u.UNSTABLE_shimOnConnectSelectAccount)}async connect({chainId:g}={}){var y,u,m,i;try{const n=await this.getProvider();if(!n)throw new p.N;n.on&&(n.on("accountsChanged",this.onAccountsChanged),n.on("chainChanged",this.onChainChanged),n.on("disconnect",this.onDisconnect)),this.emit("message",{type:"connecting"});let d=null;if((0,D.ac)(this,I)&&((y=this.options)!=null&&y.shimDisconnect)&&!((u=this.storage)!=null&&u.getItem(this.shimDisconnectKey))&&(d=await this.getAccount().catch(()=>null),!!d))try{await n.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),d=await this.getAccount()}catch(f){if(this.isUserRejectedRequestError(f))throw new v.ab(f);if(f.code===new v.pT(f).code)throw f}if(!d){const w=await n.request({method:"eth_requestAccounts"});d=(0,l.K)(w[0])}let E=await this.getChainId(),P=this.isChainUnsupported(E);return g&&E!==g&&(E=(await this.switchChain(g)).id,P=this.isChainUnsupported(E)),(m=this.options)!=null&&m.shimDisconnect&&((i=this.storage)==null||i.setItem(this.shimDisconnectKey,!0)),{account:d,chain:{id:E,unsupported:P},provider:n}}catch(n){throw this.isUserRejectedRequestError(n)?new v.ab(n):n.code===-32002?new v.pT(n):n}}};I=new WeakMap},22949:function(V,K,o){o.d(K,{z:function(){return Y}});var t=o(31043),p=o(3332),D=o(56907),v=o(296),l=o(9474),I=o(86427),W=o(30460),g="eip155",y="store",u="requestedChains",m="wallet_addEthereumChain",i,n,d,E,P,w,f,L,k,b,C,j,U,R,T,x,B,Z,N,H,Y=class extends t.wR{constructor(e){super({...e,options:{isNewChainsStale:!0,...e.options}}),(0,t.Ko)(this,d),(0,t.Ko)(this,P),(0,t.Ko)(this,f),(0,t.Ko)(this,k),(0,t.Ko)(this,C),(0,t.Ko)(this,U),(0,t.Ko)(this,T),(0,t.Ko)(this,B),(0,t.Ko)(this,N),this.id="walletConnect",this.name="WalletConnect",this.ready=!0,(0,t.Ko)(this,i,void 0),(0,t.Ko)(this,n,void 0),this.onAccountsChanged=s=>{s.length===0?this.emit("disconnect"):this.emit("change",{account:(0,D.K)(s[0])})},this.onChainChanged=s=>{const c=Number(s),r=this.isChainUnsupported(c);this.emit("change",{chain:{id:c,unsupported:r}})},this.onDisconnect=()=>{(0,t.U9)(this,U,R).call(this,[]),this.emit("disconnect")},this.onDisplayUri=s=>{this.emit("message",{type:"display_uri",data:s})},this.onConnect=()=>{this.emit("connect",{})},(0,t.U9)(this,d,E).call(this)}async connect({chainId:e,pairingTopic:s}={}){var c,r,a,_,A;try{let h=e;if(!h){const S=(c=this.storage)==null?void 0:c.getItem(y),O=(_=(a=(r=S==null?void 0:S.state)==null?void 0:r.data)==null?void 0:a.chain)==null?void 0:_.id;O&&!this.isChainUnsupported(O)?h=O:h=(A=this.chains[0])==null?void 0:A.id}if(!h)throw new Error("No chains found on connector.");const M=await this.getProvider();(0,t.U9)(this,k,b).call(this);const z=(0,t.U9)(this,f,L).call(this);if(M.session&&z&&await M.disconnect(),!M.session||z){const S=this.chains.filter(O=>O.id!==h).map(O=>O.id);this.emit("message",{type:"connecting"}),await M.connect({pairingTopic:s,chains:[h],optionalChains:S.length?S:void 0}),(0,t.U9)(this,U,R).call(this,this.chains.map(({id:O})=>O))}const $=await M.enable(),G=(0,D.K)($[0]),F=await this.getChainId(),Q=this.isChainUnsupported(F);return{account:G,chain:{id:F,unsupported:Q}}}catch(h){throw/user rejected/i.test(h==null?void 0:h.message)?new v.ab(h):h}}async disconnect(){const e=await this.getProvider();try{await e.disconnect()}catch(s){if(!/No matching key/i.test(s.message))throw s}finally{(0,t.U9)(this,C,j).call(this),(0,t.U9)(this,U,R).call(this,[])}}async getAccount(){const{accounts:e}=await this.getProvider();return(0,D.K)(e[0])}async getChainId(){const{chainId:e}=await this.getProvider();return e}async getProvider({chainId:e}={}){return(0,t.ac)(this,i)||await(0,t.U9)(this,d,E).call(this),e&&await this.switchChain(e),(0,t.ac)(this,i)}async getWalletClient({chainId:e}={}){const[s,c]=await Promise.all([this.getProvider({chainId:e}),this.getAccount()]),r=this.chains.find(a=>a.id===e);if(!s)throw new Error("provider is required.");return(0,l.K)({account:c,chain:r,transport:(0,I.P)(s)})}async isAuthorized(){try{const[e,s]=await Promise.all([this.getAccount(),this.getProvider()]),c=(0,t.U9)(this,f,L).call(this);if(!e)return!1;if(c&&s.session){try{await s.disconnect()}catch{}return!1}return!0}catch{return!1}}async switchChain(e){var c,r;const s=this.chains.find(a=>a.id===e);if(!s)throw new v.x3(new Error("chain not found on connector."));try{const a=await this.getProvider(),_=(0,t.U9)(this,B,Z).call(this),A=(0,t.U9)(this,N,H).call(this);if(!_.includes(e)&&A.includes(m)){await a.request({method:m,params:[{chainId:(0,W.eC)(s.id),blockExplorerUrls:[(r=(c=s.blockExplorers)==null?void 0:c.default)==null?void 0:r.url],chainName:s.name,nativeCurrency:s.nativeCurrency,rpcUrls:[...s.rpcUrls.default.http]}]});const M=(0,t.U9)(this,T,x).call(this);M.push(e),(0,t.U9)(this,U,R).call(this,M)}return await a.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,W.eC)(e)}]}),s}catch(a){const _=typeof a=="string"?a:a==null?void 0:a.message;throw/user rejected request/i.test(_)?new v.ab(a):new v.x3(a)}}};i=new WeakMap,n=new WeakMap,d=new WeakSet,E=async function(){return!(0,t.ac)(this,n)&&typeof window<"u"&&(0,t.qx)(this,n,(0,t.U9)(this,P,w).call(this)),(0,t.ac)(this,n)},P=new WeakSet,w=async function(){const{EthereumProvider:e,OPTIONAL_EVENTS:s,OPTIONAL_METHODS:c}=await o.e(5217).then(o.bind(o,85217)),[r,...a]=this.chains.map(({id:_})=>_);if(r){const{projectId:_,showQrModal:A=!0,qrModalOptions:h,metadata:M,relayUrl:z}=this.options;(0,t.qx)(this,i,await e.init({showQrModal:A,qrModalOptions:h,projectId:_,optionalMethods:c,optionalEvents:s,chains:[r],optionalChains:a.length?a:void 0,rpcMap:Object.fromEntries(this.chains.map($=>[$.id,$.rpcUrls.default.http[0]])),metadata:M,relayUrl:z}))}},f=new WeakSet,L=function(){if((0,t.U9)(this,N,H).call(this).includes(m)||!this.options.isNewChainsStale)return!1;const s=(0,t.U9)(this,T,x).call(this),c=this.chains.map(({id:a})=>a),r=(0,t.U9)(this,B,Z).call(this);return r.length&&!r.some(a=>c.includes(a))?!1:!c.every(a=>s.includes(a))},k=new WeakSet,b=function(){(0,t.ac)(this,i)&&((0,t.U9)(this,C,j).call(this),(0,t.ac)(this,i).on("accountsChanged",this.onAccountsChanged),(0,t.ac)(this,i).on("chainChanged",this.onChainChanged),(0,t.ac)(this,i).on("disconnect",this.onDisconnect),(0,t.ac)(this,i).on("session_delete",this.onDisconnect),(0,t.ac)(this,i).on("display_uri",this.onDisplayUri),(0,t.ac)(this,i).on("connect",this.onConnect))},C=new WeakSet,j=function(){(0,t.ac)(this,i)&&((0,t.ac)(this,i).removeListener("accountsChanged",this.onAccountsChanged),(0,t.ac)(this,i).removeListener("chainChanged",this.onChainChanged),(0,t.ac)(this,i).removeListener("disconnect",this.onDisconnect),(0,t.ac)(this,i).removeListener("session_delete",this.onDisconnect),(0,t.ac)(this,i).removeListener("display_uri",this.onDisplayUri),(0,t.ac)(this,i).removeListener("connect",this.onConnect))},U=new WeakSet,R=function(e){var s;(s=this.storage)==null||s.setItem(u,e)},T=new WeakSet,x=function(){var e;return((e=this.storage)==null?void 0:e.getItem(u))??[]},B=new WeakSet,Z=function(){var r,a,_;if(!(0,t.ac)(this,i))return[];const e=(r=(0,t.ac)(this,i).session)==null?void 0:r.namespaces;return e?((_=(a=(0,p.fK)(e)[g])==null?void 0:a.chains)==null?void 0:_.map(A=>parseInt(A.split(":")[1]||"")))??[]:[]},N=new WeakSet,H=function(){var r,a;if(!(0,t.ac)(this,i))return[];const e=(r=(0,t.ac)(this,i).session)==null?void 0:r.namespaces;return e?((a=(0,p.fK)(e)[g])==null?void 0:a.methods)??[]:[]}},8851:function(V,K,o){o.d(K,{I:function(){return t}});function t(){return function(p){return p.rpcUrls.public.http[0]?{chain:p,rpcUrls:p.rpcUrls.public}:null}}}}]);
