(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[7794,4855,985],{99221:function(_e,ge,e){"use strict";e.r(ge),e.d(ge,{BitcoinWeb3ConfigProvider:function(){return l},UnisatWallet:function(){return Xe},XverseWallet:function(){return X},useBitcoinWallet:function(){return D}});var Ae=e(90228),g=e.n(Ae),be=e(87999),J=e.n(be),Ye=e(48305),O=e.n(Ye),q=e(50959),$=q.createContext({}),D=function(){var v=q.useContext($);return v},_=e(11188),ce=e(17069),V=e.n(ce),Re=e(25298),Pe=e.n(Re),Ge=e(82092),y=e.n(Ge),We=e(38698),Ke=e(11827),De=e.n(Ke),me=e(11527),Fe=De()({hostname:"mempool.space"}),se=Fe.bitcoin.addresses,we=function(v){return{value:BigInt(v),decimals:8,symbol:"BTC",icon:(0,me.jsx)(We.BitcoinCircleColorful,{})}},Le=function(){var L=J()(g()().mark(function v(c){var d,h,p,s;return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,se.getAddress({address:c});case 2:return d=r.sent,h=d.chain_stats,p=h.funded_txo_sum,s=h.spent_txo_count,r.abrupt("return",we(p-s));case 5:case"end":return r.stop()}},v)}));return function(c){return L.apply(this,arguments)}}(),He=V()(function L(v){var c=this;Pe()(this,L),y()(this,"name",void 0),y()(this,"provider",void 0),y()(this,"account",void 0),y()(this,"connect",J()(g()().mark(function d(){var h;return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(c.provider){s.next=2;break}return s.abrupt("return");case 2:return s.prev=2,s.next=5,c.provider.requestAccounts();case 5:h=s.sent,c.account={address:h[0]},s.next=12;break;case 9:throw s.prev=9,s.t0=s.catch(2),s.t0;case 12:return s.abrupt("return");case 13:case"end":return s.stop()}},d,null,[[2,9]])}))),y()(this,"getBalance",J()(g()().mark(function d(){var h,p,s;return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c.provider){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,c.provider.getBalance();case 4:return h=r.sent,p=h.confirmed,s=we(p),r.abrupt("return",s);case 8:case"end":return r.stop()}},d)}))),y()(this,"signMessage",function(){var d=J()(g()().mark(function h(p){var s;return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c.provider){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,c.provider.signMessage(p);case 4:return s=r.sent,r.abrupt("return",s);case 6:case"end":return r.stop()}},h)}));return function(h){return d.apply(this,arguments)}}()),y()(this,"sendTransfer",function(){var d=J()(g()().mark(function h(p,s,W){var r;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c.provider){u.next=2;break}return u.abrupt("return");case 2:return r="",u.prev=3,u.next=6,c.provider.sendBitcoin(p,s,W);case 6:r=u.sent,u.next=12;break;case 9:throw u.prev=9,u.t0=u.catch(3),u.t0;case 12:return u.abrupt("return",r);case 13:case"end":return u.stop()}},h,null,[[3,9]])}));return function(h,p,s){return d.apply(this,arguments)}}()),this.name=v,this.provider=window.unisat,this.account=void 0}),B=e(99561),j=V()(function L(v){var c=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"XverseProviders.BitcoinProvider";Pe()(this,L),y()(this,"name",void 0),y()(this,"provider",void 0),y()(this,"account",void 0),y()(this,"payment",void 0),y()(this,"connect",J()(g()().mark(function h(){var p,s,W,r;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(c.provider){u.next=2;break}return u.abrupt("return");case 2:return u.next=4,(0,B.request)("getAccounts",{purposes:[B.AddressPurpose.Ordinals,B.AddressPurpose.Payment]});case 4:if(p=u.sent,p.status!=="error"){u.next=7;break}throw new Error(p.error.message);case 7:s=O()(p.result,2),W=s[0],r=s[1],c.account={address:W.address},c.payment=r.address;case 10:case"end":return u.stop()}},h)}))),y()(this,"getBalance",J()(g()().mark(function h(){var p;return g()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(c.payment){W.next=2;break}return W.abrupt("return");case 2:return W.next=4,Le(c.payment);case 4:return p=W.sent,W.abrupt("return",p);case 6:case"end":return W.stop()}},h)}))),y()(this,"signMessage",function(){var h=J()(g()().mark(function p(s){var W,r;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(!((W=c.account)!==null&&W!==void 0&&W.address)||!c.provider)){u.next=2;break}return u.abrupt("return");case 2:return u.next=4,(0,B.request)("signMessage",{address:c.account.address,message:s});case 4:if(r=u.sent,r.status!=="success"){u.next=9;break}return u.abrupt("return",r.result.signature);case 9:throw new Error(r.error.message);case 10:case"end":return u.stop()}},p)}));return function(p){return h.apply(this,arguments)}}()),y()(this,"sendTransfer",function(){var h=J()(g()().mark(function p(s,W){var r,N;return g()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return r="",U.prev=1,U.next=4,(0,B.request)("sendTransfer",{recipients:[{address:s,amount:W}]});case 4:if(N=U.sent,N.status!=="success"){U.next=9;break}r=N.result.txid,U.next=10;break;case 9:throw new Error(N.error.message);case 10:U.next=15;break;case 12:throw U.prev=12,U.t0=U.catch(1),U.t0;case 15:return U.abrupt("return",r);case 16:case"end":return U.stop()}},p,null,[[1,12]])}));return function(p,s){return h.apply(this,arguments)}}()),this.name=v,this.provider=(0,B.getProviderById)(d)}),ne=function(v){var c=v.children,d=v.locale,h=v.wallets,p=v.selectWallet,s=v.balance,W=D(),r=W.getBalance,N=W.account,u=(0,q.useState)(),U=O()(u,2),Ee=U[0],je=U[1];return(0,q.useEffect)(function(){s&&(r==null||r().then(function(de){return je(de)}))},[s,r]),(0,me.jsx)(_.Web3ConfigProvider,{addressPrefix:!1,locale:d,availableWallets:h,balance:Ee,account:N,connect:function(){var de=J()(g()().mark(function Me(ve){return g()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:p(ve);case 1:case"end":return fe.stop()}},Me)}));return function(Me){return de.apply(this,arguments)}}(),disconnect:J()(g()().mark(function de(){return g()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:p(null);case 1:case"end":return ve.stop()}},de)})),children:c})},l=function(v){var c=v.children,d=v.wallets,h=d===void 0?[]:d,p=v.balance,s=p===void 0?!1:p,W=v.locale,r=(0,q.useState)({}),N=O()(r,2),u=N[0],U=N[1],Ee=(0,q.useState)([]),je=O()(Ee,2),de=je[0],Me=je[1];(0,q.useEffect)(function(){h.length!==0&&Me(h.map(function(Ie){return Ie.create()}))},[h]);var ve=function(){var Ie=J()(g()().mark(function fe(ze){var Ze,Ne;return g()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(ze){Ce.next=3;break}return u&&U({}),Ce.abrupt("return");case 3:return Ne=(Ze=de.find(function(Je){return Je.name===ze.name}))===null||Ze===void 0?void 0:Ze.adapter,Ce.next=6,Ne==null?void 0:Ne.connect();case 6:U(Ne);case 7:case"end":return Ce.stop()}},fe)}));return function(ze){return Ie.apply(this,arguments)}}();return(0,me.jsx)($.Provider,{value:u,children:(0,me.jsx)(ne,{selectWallet:ve,wallets:de,balance:s,locale:W,children:c})})},Q=e(28134),M=e(26068),te=e.n(M),ie=function(v,c){return{adapter:v,create:function(){return te()(te()({},c),{},{adapter:v,hasWalletReady:function(){return Promise.resolve(!!v.provider)},hasExtensionInstalled:function(){return Promise.resolve(!!v.provider)}})}}},Xe=function(){return ie(new He(Q.metadata_Unisat.name),Q.metadata_Unisat)},X=function(){return ie(new j(Q.metadata_Xverse.name),Q.metadata_Xverse)}},57473:function(_e,ge,e){"use strict";e.r(ge),e.d(ge,{CoinbaseWallet:function(){return $.CoinbaseWallet},EthersWeb3ConfigProvider:function(){return y},ImToken:function(){return $.ImToken},MetaMask:function(){return $.MetaMask},OkxWallet:function(){return $.OkxWallet},SafeheronWallet:function(){return $.SafeheronWallet},TokenPocket:function(){return $.TokenPocket},UniversalWallet:function(){return $.UniversalWallet},clientToProvider:function(){return me},clientToSigner:function(){return Le},useEthersProvider:function(){return Fe},useEthersSigner:function(){return He}});var Ae=e(26068),g=e.n(Ae),be=e(15558),J=e.n(be),Ye=e(67825),O=e.n(Ye),q=e(50959),$=e(92621),D=e(25844),_=e(86255),ce=e(1148),V=e(44037),Re=e(12601),Pe=e(11527),Ge=["children","walletConnect"],y=function(j){var ne,l=j.children,Q=j.walletConnect,M=O()(j,Ge),te=q.useMemo(function(){var X;return((X=M.chains)!==null&&X!==void 0?X:[$.Mainnet]).map(function(L){var v,c=(v=Object.values(ce).find(function(d){return d.id===L.id}))!==null&&v!==void 0?v:null;return c!=null&&c.id||console.warn("Chain ".concat(L.id," is not supported")),c}).filter(function(L){return L!==null})},[(ne=M.chains)===null||ne===void 0?void 0:ne.map(function(X){return X.id}).join()]),ie=q.useMemo(function(){var X,L=J()((X=M.wallets)!==null&&X!==void 0?X:[]);return Q&&Q.projectId&&L.push((0,$.WalletConnect)()),L},[M.wallets,Q]),Xe=q.useMemo(function(){var X,L=Object.fromEntries(te.map(function(d){return[d.id,(0,D.d)()]})),v=[V.L()];if(((X=M.wallets)!==null&&X!==void 0?X:[]).forEach(function(d){d.name&&v.push(V.L({target:d.name}))}),Q&&Q.projectId){var c;v.push(Re.a(g()(g()({},Q),{},{showQrModal:(c=Q.useWalletConnectOfficialModal)!==null&&c!==void 0?c:!1})))}return(0,_._)({chains:te,transports:L,connectors:v})},[te,Q,M.wallets]);return(0,Pe.jsx)($.WagmiWeb3ConfigProvider,g()(g()({},M),{},{config:Xe,wallets:ie,children:l}))},We=e(10327),Ke=e(26654),De=e(53689);function me(B){var j,ne=B.chain,l=B.transport,Q={chainId:ne.id,name:ne.name,ensAddress:(j=ne.contracts)===null||j===void 0||(j=j.ensRegistry)===null||j===void 0?void 0:j.address};if(l.type==="fallback"){var M=l.transports.map(function(te){var ie=te.value;return new We.r6(ie==null?void 0:ie.url,Q)});return M.length===1?M[0]:new Ke.H(M)}return new We.r6(l.url,Q)}function Fe(){var B=(0,De.m)();return(0,q.useMemo)(function(){return B?me(B):null},[B])}var se=e(65178),we=e(9921);function Le(B){var j,ne=B.account,l=B.chain,Q=B.transport,M={chainId:l.id,name:l.name,ensAddress:(j=l.contracts)===null||j===void 0||(j=j.ensRegistry)===null||j===void 0?void 0:j.address},te=new se.Q(Q,M),ie=new We.C1(te,ne.address);return ie}function He(){var B=(0,we.L)(),j=B.data;return(0,q.useMemo)(function(){return j?Le(j):null},[j])}},22843:function(_e,ge,e){"use strict";e.r(ge),e.d(ge,{BackpackWallet:function(){return cn},CoinbaseWallet:function(){return ln},OKXWallet:function(){return on},PhantomWallet:function(){return un},SolanaWeb3ConfigProvider:function(){return Ce},StandardWalletFactory:function(){return Ve},TrustWallet:function(){return sn},WalletAdapterNetwork:function(){return J.Q},WalletConnectWallet:function(){return dn},WalletConnectWalletFactory:function(){return nn},WalletFactory:function(){return Je},solana:function(){return De},solanaDevnet:function(){return me},solanaTestnet:function(){return Fe},useAnchorWallet:function(){return g.z},useConnection:function(){return be.R},useWallet:function(){return Ae.O}});var Ae=e(75975),g=e(21497),be=e(56986),J=e(87911),Ye=e(26068),O=e.n(Ye),q=e(48305),$=e.n(q),D=e(50959),_=e(11188),ce=e(38698),V=e(11527),Re={id:_.SolanaChainIds.MainnetBeta,name:"Solana",icon:(0,V.jsx)(ce.SolanaColorful,{}),browser:{icon:(0,V.jsx)(ce.SolanaColorful,{}),getBrowserLink:(0,_.createGetBrowserLink)("https://explorer.solana.com")},nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9}},Pe={id:_.SolanaChainIds.Devnet,name:"Solana Devnet",icon:(0,V.jsx)(ce.SolanaColorful,{}),browser:{icon:(0,V.jsx)(ce.SolanaColorful,{}),getBrowserLink:(0,_.createGetBrowserLink)("https://explorer.solana.com/?cluster=devnet")},nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9}},Ge={id:_.SolanaChainIds.Testnet,name:"Solana Testnet",icon:(0,V.jsx)(ce.SolanaColorful,{}),browser:{icon:(0,V.jsx)(ce.SolanaColorful,{}),getBrowserLink:(0,_.createGetBrowserLink)("https://explorer.solana.com/?cluster=testnet")},nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9}},y=e(36933),We=e(82218),Ke=e(60791),De={id:_.SolanaChainIds.MainnetBeta,name:"Solana",network:"mainnet-beta",rpcUrls:{default:"https://api.mainnet-beta.solana.com"}},me={id:_.SolanaChainIds.Devnet,name:"Solana Devnet",network:"devnet",rpcUrls:{default:"https://api.devnet.solana.com"}},Fe={id:_.SolanaChainIds.Testnet,name:"Solana Testnet",network:"testnet",rpcUrls:{default:"https://api.testnet.solana.com"}},se=e(35373),we=function(a){return a===se.i1.Installed||a===se.i1.Loadable},Le=function(a){return!!a.isWalletConnect},He=function(a){return a.adapter!==void 0},B=e(15558),j=e.n(B),ne=e(90228),l=e.n(ne),Q=e(87999),M=e.n(Q),te=e(2978),ie=e(36520),Xe=e(25298),X=e.n(Xe),L=e(17069),v=e.n(L),c=e(62657),d=e.n(c),h=e(21742),p=e.n(h),s=e(83136),W=e.n(s),r=e(82092),N=e.n(r),u=e(10258),U=e(35715),Ee=e(9408),je=e(86190),de=e(11565),Me=e.n(de),ve=e(36379).lW,Ie="WalletConnect",fe=N()(N()({},"mainnet-beta","solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"),"devnet","solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"),ze=function(K){p()(Y,K);var a=W()(Y);function Y(){var i;return X()(this,Y),i=a.call(this),N()(d()(i),"name",Ie),N()(d()(i),"url","https://walletconnect.org"),N()(d()(i),"icon","data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+"),N()(d()(i),"supportedTransactionVersions",new Set(["legacy",0])),N()(d()(i),"_publicKey",void 0),N()(d()(i),"_connecting",void 0),N()(d()(i),"_walletProvider",void 0),N()(d()(i),"_getWalletConnectProvider",void 0),N()(d()(i),"_getWalletConnectConfigGetter",void 0),N()(d()(i),"_readyState",typeof window>"u"?se.i1.Unsupported:se.i1.Loadable),N()(d()(i),"_disconnected",function(){var C=i._walletProvider;C&&(C.off("session_delete",i._disconnected),i._walletProvider=void 0,i._publicKey=void 0,i.emit("error",new y.at),i.emit("disconnect"))}),i._connecting=!1,i}return v()(Y,[{key:"publicKey",get:function(){return this._publicKey||null}},{key:"connecting",get:function(){return this._connecting}},{key:"readyState",get:function(){return this._readyState}},{key:"setWalletConnectProviderGetter",value:function(C){this._getWalletConnectProvider=function(){return C()}}},{key:"setWalletConnectConfigGetter",value:function(C){this._getWalletConnectConfigGetter=C}},{key:"connect",value:function(){var i=M()(l()().mark(function E(){var f,T,t,k,w,I,Z,F;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(this.connected||this.connecting)){n.next=3;break}return n.abrupt("return");case 3:if(this._readyState===se.i1.Loadable){n.next=5;break}throw new y.OZ;case 5:if(t=(f=this._getWalletConnectConfigGetter)===null||f===void 0?void 0:f.call(this),t){n.next=8;break}throw new Error("WalletConnect config not available");case 8:if(k=t.currentChain&&fe[t.currentChain.network],k){n.next=11;break}throw new y.$w("Chain not supported");case 11:return this._connecting=!0,n.next=14,(T=this._getWalletConnectProvider)===null||T===void 0?void 0:T.call(this);case 14:if(w=n.sent,w){n.next=17;break}throw new Error("WalletConnect provider not available");case 17:return this._walletProvider=w,n.prev=18,I=this._walletProvider.client.session.map.size>0,n.next=22,w.connect({namespaces:{solana:{chains:[k],methods:["solana_signMessage","solana_signTransaction"],events:[],rpcMap:N()({},(0,je.DQe)(k).reference,t.rpcEndpoint)}},skipPairing:I});case 22:n.next=27;break;case 24:throw n.prev=24,n.t0=n.catch(18),new y.$w(n.t0===null||n.t0===void 0?void 0:n.t0.message,n.t0);case 27:w.on("session_delete",this._disconnected),Z=(0,je.cwA)(this._walletProvider.session.namespaces.solana.accounts[0]),F=Z.address,this._publicKey=new Ee.nh(F),this.emit("connect",this.publicKey),n.next=37;break;case 33:throw n.prev=33,n.t1=n.catch(0),this.emit("error",n.t1),n.t1;case 37:return n.prev=37,this._connecting=!1,n.finish(37);case 40:case"end":return n.stop()}},E,this,[[0,33,37,40],[18,24]])}));function C(){return i.apply(this,arguments)}return C}()},{key:"disconnect",value:function(){var i=M()(l()().mark(function E(){var f;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f=this._walletProvider,!f){t.next=13;break}return f.off("session_delete",this._disconnected),this._walletProvider=void 0,this._publicKey=void 0,t.prev=5,t.next=8,f.disconnect();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),this.emit("error",new y.UG(t.t0===null||t.t0===void 0?void 0:t.t0.message,t.t0));case 13:this.emit("disconnect");case 14:case"end":return t.stop()}},E,this,[[5,10]])}));function C(){return i.apply(this,arguments)}return C}()},{key:"signTransaction",value:function(){var i=M()(l()().mark(function E(f){var T,t,k,w,I,Z,F,R,n;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,t=this._walletProvider,t){o.next=4;break}throw new y.oS;case 4:if(this.publicKey){o.next=6;break}throw new y.Nx;case 6:return k=(T=this._getWalletConnectConfigGetter)===null||T===void 0||(T=T.call(this).currentChain)===null||T===void 0?void 0:T.network,w=k&&fe[k],(0,u.W)(f)?(I=ve.from(f.serialize()).toString("base64"),f.version==="legacy"&&(Z=Ee.YW.from(f.serialize()))):(I=f.serialize({requireAllSignatures:!1,verifySignatures:!1}).toString("base64"),Z=f),o.prev=9,o.next=12,t.request({method:"solana_signTransaction",params:O()(O()({pubkey:(F=this.publicKey)===null||F===void 0?void 0:F.toString()},Z),{},{transaction:I})},w);case 12:return R=o.sent,n=R.signature,f.addSignature(this.publicKey,ve.from(Me().decode(n))),o.abrupt("return",f);case 18:throw o.prev=18,o.t0=o.catch(9),new y.PY(o.t0===null||o.t0===void 0?void 0:o.t0.message,o.t0);case 21:o.next=27;break;case 23:throw o.prev=23,o.t1=o.catch(0),this.emit("error",o.t1),o.t1;case 27:case"end":return o.stop()}},E,this,[[0,23],[9,18]])}));function C(E){return i.apply(this,arguments)}return C}()},{key:"signMessage",value:function(){var i=M()(l()().mark(function E(f){var T,t,k,w,I,Z,F;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t=this._walletProvider,t){n.next=4;break}throw new y.oS;case 4:return k=(T=this._getWalletConnectConfigGetter)===null||T===void 0||(T=T.call(this).currentChain)===null||T===void 0?void 0:T.network,w=k&&fe[k],n.prev=6,n.next=9,t.request({method:"solana_signMessage",params:{pubkey:(I=this.publicKey)===null||I===void 0?void 0:I.toString(),message:Me().encode(f)}},w);case 9:return Z=n.sent,F=Z.signature,n.abrupt("return",Me().decode(F));case 14:throw n.prev=14,n.t0=n.catch(6),new y.fk(n.t0===null||n.t0===void 0?void 0:n.t0.message,n.t0);case 17:n.next=23;break;case 19:throw n.prev=19,n.t1=n.catch(0),this.emit("error",n.t1),n.t1;case 23:case"end":return n.stop()}},E,this,[[0,19],[6,14]])}));function C(E){return i.apply(this,arguments)}return C}()}]),Y}(U.sz),Ze=function(a){var Y,i,C=(0,Ae.O)(),E=C.publicKey,f=C.connected,T=C.connect,t=C.select,k=C.disconnect,w=C.wallet,I=C.wallets,Z=(0,be.R)(),F=Z.connection,R=(0,D.useRef)(),n=(0,D.useState)(),he=$()(n,2),o=he[0],$e=he[1],ae=(0,D.useState)(),ue=$()(ae,2),Be=ue[0],pe=ue[1],Te=(0,D.useState)(function(){var m,S;return(m=w==null||(S=w.adapter)===null||S===void 0?void 0:S.name)!==null&&m!==void 0?m:null}),Ue=$()(Te,2),xe=Ue[0],qe=Ue[1];(0,D.useEffect)(function(){if(!(E&&f)){pe(void 0);return}pe({address:E.toBase58()})},[E,f,w==null||(Y=w.adapter)===null||Y===void 0?void 0:Y.name]),(0,D.useEffect)(function(){R.current&&f&&(R.current.resolve(),R.current=void 0)},[f]),(0,D.useEffect)(function(){if(a.connectionError){var m;(m=R.current)===null||m===void 0||m.reject(a.connectionError),R.current=void 0}},[a.connectionError]),(0,D.useEffect)(function(){if(a.balance&&F&&E){var m=function(){var S=M()(l()().mark(function A(){var b;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,F.getBalance(E);case 2:b=P.sent,$e(BigInt(b));case 4:case"end":return P.stop()}},A)}));return function(){return S.apply(this,arguments)}}();m()}},[F,E,a.balance]),(0,D.useEffect)(function(){var m;if(w!=null&&(m=w.adapter)!==null&&m!==void 0&&m.name){if(!we(w.adapter.readyState)){t(null);return}T()}else f&&k()},[w==null||(i=w.adapter)===null||i===void 0?void 0:i.name,f]);var ee=(0,D.useMemo)(function(){return a.availableChains.map(function(m){var S,A=(S=a.chainAssets)===null||S===void 0?void 0:S.find(function(b){return b.id===m.id});return A!=null&&A.id?O()(O()(O()({},m),A),{},{id:A.id,name:A.name,icon:A.icon}):(console.error("Can not find chain ".concat(m.id,", SolanaWeb3ConfigProvider only support Solana")),null)}).filter(function(m){return m!==null})},[a.availableChains,a.chainAssets]),Se=(0,D.useMemo)(function(){var m=a.availableWallets.map(function(b){var z,P=I==null||(z=I.find(function(H){return H.adapter.name===b.name}))===null||z===void 0?void 0:z.adapter,x=P instanceof ze;return O()(O()({},b),{},{hasExtensionInstalled:x?void 0:M()(l()().mark(function H(){return l()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(P==null?void 0:P.readyState)===se.i1.Installed);case 1:case"end":return G.stop()}},H)})),hasWalletReady:function(){var H=M()(l()().mark(function G(){return l()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",we(P==null?void 0:P.readyState));case 1:case"end":return le.stop()}},G)}));function oe(){return H.apply(this,arguments)}return oe}()})});if(!a.autoAddRegisteredWallets)return m;var S=m.map(function(b){return b.name}),A=I.filter(function(b){return!S.includes(b.adapter.name)}).map(function(b){var z=b.adapter;return{name:z.name,icon:z.icon,remark:z.name,hasExtensionInstalled:function(){var P=M()(l()().mark(function H(){return l()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",z.readyState===se.i1.Installed);case 1:case"end":return G.stop()}},H)}));function x(){return P.apply(this,arguments)}return x}(),hasWalletReady:function(){var P=M()(l()().mark(function H(){return l()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",we(z.readyState));case 1:case"end":return G.stop()}},H)}));function x(){return P.apply(this,arguments)}return x}()}});return[].concat(j()(m),j()(A))},[a.availableWallets,I,a.autoAddRegisteredWallets]),ke=(0,D.useMemo)(function(){return ee.find(function(m){var S;return m.id===((S=a.currentChain)===null||S===void 0?void 0:S.id)})},[a.currentChain,ee]),re=ke==null?void 0:ke.nativeCurrency;return(0,V.jsx)(_.Web3ConfigProvider,{locale:a.locale,account:Be,chain:ke,balance:a.balance?{symbol:re==null?void 0:re.symbol,decimals:re==null?void 0:re.decimals,value:o,icon:re==null?void 0:re.icon}:void 0,addressPrefix:!1,availableChains:ee,availableWallets:Se,switchChain:function(){var m=M()(l()().mark(function S(A){var b,z;return l()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:z=ee.find(function(H){return H.id===A.id}),(b=a.onCurrentChainChange)===null||b===void 0||b.call(a,z??ee[0]),t(xe);case 3:case"end":return x.stop()}},S)}));return function(S){return m.apply(this,arguments)}}(),connect:function(){var m=M()(l()().mark(function S(A,b){var z,P,x,H,oe;return l()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return(b==null?void 0:b.connectType)==="qrCode"&&t(null),H=new Promise(function(le,an){P=le,x=an}),R.current={promise:H,resolve:P,reject:x},oe=(z=A==null?void 0:A.name)!==null&&z!==void 0?z:null,t(oe),qe(oe),ye.abrupt("return",H);case 7:case"end":return ye.stop()}},S)}));return function(S,A){return m.apply(this,arguments)}}(),disconnect:M()(l()().mark(function m(){return l()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:k();case 1:case"end":return A.stop()}},m)})),getNFTMetadata:function(){var m=M()(l()().mark(function S(A){var b,z,P,x,H,oe,G,ye,le;return l()().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return H=A.address,oe=new te.I(F),G=oe.nfts(),ye=new ie.PublicKey(H),Qe.next=6,G.findByMint({mintAddress:ye});case 6:return le=Qe.sent,Qe.abrupt("return",{name:(b=le.json)===null||b===void 0?void 0:b.name,image:(z=le.json)===null||z===void 0?void 0:z.image,description:(P=le.json)===null||P===void 0?void 0:P.description,attributes:(x=le.json)===null||x===void 0?void 0:x.attributes});case 8:case"end":return Qe.stop()}},S)}));return function(S){return m.apply(this,arguments)}}(),children:a.children})},Ne=function(a){var Y=(0,D.useState)([]),i=$()(Y,2),C=i[0],E=i[1],f=(0,D.useState)(!1),T=$()(f,2),t=T[0],k=T[1],w=(0,D.useState)(null),I=$()(w,2),Z=I[0],F=I[1],R=en(C),n=(0,D.useCallback)(M()(l()().mark(function he(){var o;return l()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!Z){ae.next=2;break}return ae.abrupt("return",Promise.resolve(Z));case 2:return o=new Promise(function(ue){E(function(Be){return[].concat(j()(Be),[ue])})}),ae.abrupt("return",o);case 4:case"end":return ae.stop()}},he)})),[Z]);return(0,D.useEffect)(function(){t||!a||(k(!0),Promise.all([e.e(8809),e.e(3325)]).then(e.bind(e,83325)).then(function(){var he=M()(l()().mark(function o($e){var ae,ue;return l()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return ae=$e.UniversalProvider,pe.next=3,ae.init(a);case 3:ue=pe.sent,F(ue),R.current.forEach(function(Te){Te(ue)});case 6:case"end":return pe.stop()}},o)}));return function(o){return he.apply(this,arguments)}}()))},[t,R,a]),(0,D.useEffect)(function(){return function(){k(!1)}},[]),n};function en(K){var a=(0,D.useRef)(K);return a.current=K,a}var Ce=function(a){var Y=a.locale,i=a.chains,C=i===void 0?[De]:i,E=a.wallets,f=E===void 0?[]:E,T=a.balance,t=a.rpcProvider,k=a.connectionConfig,w=a.autoConnect,I=a.walletConnect,Z=a.autoAddRegisteredWallets,F=a.children,R=a.walletProviderProps,n=(0,D.useState)(C[0]),he=$()(n,2),o=he[0],$e=he[1],ae=(0,D.useState)(),ue=$()(ae,2),Be=ue[0],pe=ue[1],Te=Ne(I),Ue=(0,D.useMemo)(function(){return typeof t=="function"?t(o):(o??De).rpcUrls.default},[t,o]),xe=f.map(function(ee){return ee.create(Te)}),qe=(0,D.useMemo)(function(){return f.filter(He).map(function(ee){return Le(ee)&&(ee.adapter.setWalletConnectProviderGetter(Te),ee.adapter.setWalletConnectConfigGetter(function(){return{walletConnect:I,currentChain:o,rpcEndpoint:Ue}})),ee.adapter})},[o,Ue,I,Te,f]);return(0,V.jsx)(We.U,{endpoint:Ue,config:k,children:(0,V.jsx)(Ke.n,O()(O()({wallets:qe,autoConnect:w},R),{},{onError:function(Se,ke){var re;Se instanceof y.$w&&pe(Se),R==null||(re=R.onError)===null||re===void 0||re.call(R,Se,ke)},children:(0,V.jsx)(Ze,{locale:Y,chainAssets:[Re,Pe,Ge],availableWallets:xe,balance:T,currentChain:o,onCurrentChainChange:function(Se){return $e(Se)},availableChains:C,connectionError:Be,autoAddRegisteredWallets:Z,children:F})}))})},Je=function(a,Y){return{adapter:a,create:function(){return O()(O()({},Y),{},{name:a.name,remark:Y.remark,adapter:a})}}},Ve=function(a){return{create:function(){return O()(O()({},a),{},{isStandardWallet:!0})}}},nn=function(a,Y){return{isWalletConnect:!0,adapter:a,create:function(C){return O()(O()({},Y),{},{name:a.name,remark:Y.remark,adapter:a,getQrCode:C?M()(l()().mark(function E(){var f;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:if(f=t.sent,f){t.next=5;break}return t.abrupt("return",Promise.reject(new Error("WalletConnect is not available")));case 5:return t.abrupt("return",new Promise(function(k){f.on("display_uri",function(w){k({uri:w})})}));case 6:case"end":return t.stop()}},E)})):void 0})}}},Oe=e(28134),rn=e(36503),tn=e(77892),ln=function(){return Je(new rn.A,Oe.metadata_CoinbaseWallet)},sn=function(){return Je(new tn.H,Oe.metadata_Trust)},un=function(){return Ve(Oe.metadata_Phantom)},on=function(){return Ve(Oe.metadata_OkxWallet)},cn=function(){return Ve(Oe.metadata_Backpack)},dn=function(){return nn(new ze,Oe.metadata_WalletConnect)}},85898:function(){},44087:function(){},10985:function(){},11314:function(){},79391:function(){},81388:function(){},33517:function(){},44085:function(){},65660:function(){},84232:function(){},14050:function(){},87942:function(){},82880:function(){},81401:function(){},60573:function(){},74094:function(){},72185:function(){}}]);
