(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[9623],{61326:function(Xe,$,L){"use strict";var G;G={value:!0},G=G=G=$.Xx=G=G=$._w=$.aP=$.KS=G=$.jQ=void 0;const pe=L(4883),Ie=L(21318),ht=L(49644);$.jQ=64,G=32,$.KS=64,$.aP=32;function J(F){const M=new Float64Array(16);if(F)for(let T=0;T<F.length;T++)M[T]=F[T];return M}const Pe=new Uint8Array(32);Pe[0]=9;const Ne=J(),H=J([1]),ee=J([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),se=J([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Le=J([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),xe=J([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Me=J([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function oe(F,M){for(let T=0;T<16;T++)F[T]=M[T]|0}function gt(F){let M=1;for(let T=0;T<16;T++){let l=F[T]+M+65535;M=Math.floor(l/65536),F[T]=l-M*65536}F[0]+=M-1+37*(M-1)}function nr(F,M,T){const l=~(T-1);for(let E=0;E<16;E++){const ge=l&(F[E]^M[E]);F[E]^=ge,M[E]^=ge}}function lt(F,M){const T=J(),l=J();for(let E=0;E<16;E++)l[E]=M[E];gt(l),gt(l),gt(l);for(let E=0;E<2;E++){T[0]=l[0]-65517;for(let Oe=1;Oe<15;Oe++)T[Oe]=l[Oe]-65535-(T[Oe-1]>>16&1),T[Oe-1]&=65535;T[15]=l[15]-32767-(T[14]>>16&1);const ge=T[15]>>16&1;T[14]&=65535,nr(l,T,1-ge)}for(let E=0;E<16;E++)F[2*E]=l[E]&255,F[2*E+1]=l[E]>>8}function yt(F,M){let T=0;for(let l=0;l<32;l++)T|=F[l]^M[l];return(1&T-1>>>8)-1}function hr(F,M){const T=new Uint8Array(32),l=new Uint8Array(32);return lt(T,F),lt(l,M),yt(T,l)}function sr(F){const M=new Uint8Array(32);return lt(M,F),M[0]&1}function lr(F,M){for(let T=0;T<16;T++)F[T]=M[2*T]+(M[2*T+1]<<8);F[15]&=32767}function tt(F,M,T){for(let l=0;l<16;l++)F[l]=M[l]+T[l]}function k(F,M,T){for(let l=0;l<16;l++)F[l]=M[l]-T[l]}function te(F,M,T){let l,E,ge=0,Oe=0,rt=0,mt=0,it=0,st=0,Ke=0,Zt=0,kt=0,Vt=0,ft=0,Ft=0,Ct=0,ot=0,at=0,wt=0,Ze=0,er=0,or=0,Mt=0,gr=0,jt=0,Ir=0,Ar=0,Vr=0,tr=0,ni=0,mi=0,Oi=0,Ri=0,si=0,$t=T[0],Ut=T[1],Dt=T[2],xt=T[3],rr=T[4],We=T[5],zt=T[6],ar=T[7],ir=T[8],Bt=T[9],Wt=T[10],_t=T[11],qt=T[12],St=T[13],Pt=T[14],Ot=T[15];l=M[0],ge+=l*$t,Oe+=l*Ut,rt+=l*Dt,mt+=l*xt,it+=l*rr,st+=l*We,Ke+=l*zt,Zt+=l*ar,kt+=l*ir,Vt+=l*Bt,ft+=l*Wt,Ft+=l*_t,Ct+=l*qt,ot+=l*St,at+=l*Pt,wt+=l*Ot,l=M[1],Oe+=l*$t,rt+=l*Ut,mt+=l*Dt,it+=l*xt,st+=l*rr,Ke+=l*We,Zt+=l*zt,kt+=l*ar,Vt+=l*ir,ft+=l*Bt,Ft+=l*Wt,Ct+=l*_t,ot+=l*qt,at+=l*St,wt+=l*Pt,Ze+=l*Ot,l=M[2],rt+=l*$t,mt+=l*Ut,it+=l*Dt,st+=l*xt,Ke+=l*rr,Zt+=l*We,kt+=l*zt,Vt+=l*ar,ft+=l*ir,Ft+=l*Bt,Ct+=l*Wt,ot+=l*_t,at+=l*qt,wt+=l*St,Ze+=l*Pt,er+=l*Ot,l=M[3],mt+=l*$t,it+=l*Ut,st+=l*Dt,Ke+=l*xt,Zt+=l*rr,kt+=l*We,Vt+=l*zt,ft+=l*ar,Ft+=l*ir,Ct+=l*Bt,ot+=l*Wt,at+=l*_t,wt+=l*qt,Ze+=l*St,er+=l*Pt,or+=l*Ot,l=M[4],it+=l*$t,st+=l*Ut,Ke+=l*Dt,Zt+=l*xt,kt+=l*rr,Vt+=l*We,ft+=l*zt,Ft+=l*ar,Ct+=l*ir,ot+=l*Bt,at+=l*Wt,wt+=l*_t,Ze+=l*qt,er+=l*St,or+=l*Pt,Mt+=l*Ot,l=M[5],st+=l*$t,Ke+=l*Ut,Zt+=l*Dt,kt+=l*xt,Vt+=l*rr,ft+=l*We,Ft+=l*zt,Ct+=l*ar,ot+=l*ir,at+=l*Bt,wt+=l*Wt,Ze+=l*_t,er+=l*qt,or+=l*St,Mt+=l*Pt,gr+=l*Ot,l=M[6],Ke+=l*$t,Zt+=l*Ut,kt+=l*Dt,Vt+=l*xt,ft+=l*rr,Ft+=l*We,Ct+=l*zt,ot+=l*ar,at+=l*ir,wt+=l*Bt,Ze+=l*Wt,er+=l*_t,or+=l*qt,Mt+=l*St,gr+=l*Pt,jt+=l*Ot,l=M[7],Zt+=l*$t,kt+=l*Ut,Vt+=l*Dt,ft+=l*xt,Ft+=l*rr,Ct+=l*We,ot+=l*zt,at+=l*ar,wt+=l*ir,Ze+=l*Bt,er+=l*Wt,or+=l*_t,Mt+=l*qt,gr+=l*St,jt+=l*Pt,Ir+=l*Ot,l=M[8],kt+=l*$t,Vt+=l*Ut,ft+=l*Dt,Ft+=l*xt,Ct+=l*rr,ot+=l*We,at+=l*zt,wt+=l*ar,Ze+=l*ir,er+=l*Bt,or+=l*Wt,Mt+=l*_t,gr+=l*qt,jt+=l*St,Ir+=l*Pt,Ar+=l*Ot,l=M[9],Vt+=l*$t,ft+=l*Ut,Ft+=l*Dt,Ct+=l*xt,ot+=l*rr,at+=l*We,wt+=l*zt,Ze+=l*ar,er+=l*ir,or+=l*Bt,Mt+=l*Wt,gr+=l*_t,jt+=l*qt,Ir+=l*St,Ar+=l*Pt,Vr+=l*Ot,l=M[10],ft+=l*$t,Ft+=l*Ut,Ct+=l*Dt,ot+=l*xt,at+=l*rr,wt+=l*We,Ze+=l*zt,er+=l*ar,or+=l*ir,Mt+=l*Bt,gr+=l*Wt,jt+=l*_t,Ir+=l*qt,Ar+=l*St,Vr+=l*Pt,tr+=l*Ot,l=M[11],Ft+=l*$t,Ct+=l*Ut,ot+=l*Dt,at+=l*xt,wt+=l*rr,Ze+=l*We,er+=l*zt,or+=l*ar,Mt+=l*ir,gr+=l*Bt,jt+=l*Wt,Ir+=l*_t,Ar+=l*qt,Vr+=l*St,tr+=l*Pt,ni+=l*Ot,l=M[12],Ct+=l*$t,ot+=l*Ut,at+=l*Dt,wt+=l*xt,Ze+=l*rr,er+=l*We,or+=l*zt,Mt+=l*ar,gr+=l*ir,jt+=l*Bt,Ir+=l*Wt,Ar+=l*_t,Vr+=l*qt,tr+=l*St,ni+=l*Pt,mi+=l*Ot,l=M[13],ot+=l*$t,at+=l*Ut,wt+=l*Dt,Ze+=l*xt,er+=l*rr,or+=l*We,Mt+=l*zt,gr+=l*ar,jt+=l*ir,Ir+=l*Bt,Ar+=l*Wt,Vr+=l*_t,tr+=l*qt,ni+=l*St,mi+=l*Pt,Oi+=l*Ot,l=M[14],at+=l*$t,wt+=l*Ut,Ze+=l*Dt,er+=l*xt,or+=l*rr,Mt+=l*We,gr+=l*zt,jt+=l*ar,Ir+=l*ir,Ar+=l*Bt,Vr+=l*Wt,tr+=l*_t,ni+=l*qt,mi+=l*St,Oi+=l*Pt,Ri+=l*Ot,l=M[15],wt+=l*$t,Ze+=l*Ut,er+=l*Dt,or+=l*xt,Mt+=l*rr,gr+=l*We,jt+=l*zt,Ir+=l*ar,Ar+=l*ir,Vr+=l*Bt,tr+=l*Wt,ni+=l*_t,mi+=l*qt,Oi+=l*St,Ri+=l*Pt,si+=l*Ot,ge+=38*Ze,Oe+=38*er,rt+=38*or,mt+=38*Mt,it+=38*gr,st+=38*jt,Ke+=38*Ir,Zt+=38*Ar,kt+=38*Vr,Vt+=38*tr,ft+=38*ni,Ft+=38*mi,Ct+=38*Oi,ot+=38*Ri,at+=38*si,E=1,l=ge+E+65535,E=Math.floor(l/65536),ge=l-E*65536,l=Oe+E+65535,E=Math.floor(l/65536),Oe=l-E*65536,l=rt+E+65535,E=Math.floor(l/65536),rt=l-E*65536,l=mt+E+65535,E=Math.floor(l/65536),mt=l-E*65536,l=it+E+65535,E=Math.floor(l/65536),it=l-E*65536,l=st+E+65535,E=Math.floor(l/65536),st=l-E*65536,l=Ke+E+65535,E=Math.floor(l/65536),Ke=l-E*65536,l=Zt+E+65535,E=Math.floor(l/65536),Zt=l-E*65536,l=kt+E+65535,E=Math.floor(l/65536),kt=l-E*65536,l=Vt+E+65535,E=Math.floor(l/65536),Vt=l-E*65536,l=ft+E+65535,E=Math.floor(l/65536),ft=l-E*65536,l=Ft+E+65535,E=Math.floor(l/65536),Ft=l-E*65536,l=Ct+E+65535,E=Math.floor(l/65536),Ct=l-E*65536,l=ot+E+65535,E=Math.floor(l/65536),ot=l-E*65536,l=at+E+65535,E=Math.floor(l/65536),at=l-E*65536,l=wt+E+65535,E=Math.floor(l/65536),wt=l-E*65536,ge+=E-1+37*(E-1),E=1,l=ge+E+65535,E=Math.floor(l/65536),ge=l-E*65536,l=Oe+E+65535,E=Math.floor(l/65536),Oe=l-E*65536,l=rt+E+65535,E=Math.floor(l/65536),rt=l-E*65536,l=mt+E+65535,E=Math.floor(l/65536),mt=l-E*65536,l=it+E+65535,E=Math.floor(l/65536),it=l-E*65536,l=st+E+65535,E=Math.floor(l/65536),st=l-E*65536,l=Ke+E+65535,E=Math.floor(l/65536),Ke=l-E*65536,l=Zt+E+65535,E=Math.floor(l/65536),Zt=l-E*65536,l=kt+E+65535,E=Math.floor(l/65536),kt=l-E*65536,l=Vt+E+65535,E=Math.floor(l/65536),Vt=l-E*65536,l=ft+E+65535,E=Math.floor(l/65536),ft=l-E*65536,l=Ft+E+65535,E=Math.floor(l/65536),Ft=l-E*65536,l=Ct+E+65535,E=Math.floor(l/65536),Ct=l-E*65536,l=ot+E+65535,E=Math.floor(l/65536),ot=l-E*65536,l=at+E+65535,E=Math.floor(l/65536),at=l-E*65536,l=wt+E+65535,E=Math.floor(l/65536),wt=l-E*65536,ge+=E-1+37*(E-1),F[0]=ge,F[1]=Oe,F[2]=rt,F[3]=mt,F[4]=it,F[5]=st,F[6]=Ke,F[7]=Zt,F[8]=kt,F[9]=Vt,F[10]=ft,F[11]=Ft,F[12]=Ct,F[13]=ot,F[14]=at,F[15]=wt}function fe(F,M){te(F,M,M)}function ye(F,M){const T=J();let l;for(l=0;l<16;l++)T[l]=M[l];for(l=253;l>=0;l--)fe(T,T),l!==2&&l!==4&&te(T,T,M);for(l=0;l<16;l++)F[l]=T[l]}function we(F,M){const T=J();let l;for(l=0;l<16;l++)T[l]=M[l];for(l=250;l>=0;l--)fe(T,T),l!==1&&te(T,T,M);for(l=0;l<16;l++)F[l]=T[l]}function Z(F,M){const T=J(),l=J(),E=J(),ge=J(),Oe=J(),rt=J(),mt=J(),it=J(),st=J();k(T,F[1],F[0]),k(st,M[1],M[0]),te(T,T,st),tt(l,F[0],F[1]),tt(st,M[0],M[1]),te(l,l,st),te(E,F[3],M[3]),te(E,E,se),te(ge,F[2],M[2]),tt(ge,ge,ge),k(Oe,l,T),k(rt,ge,E),tt(mt,ge,E),tt(it,l,T),te(F[0],Oe,rt),te(F[1],it,mt),te(F[2],mt,rt),te(F[3],Oe,it)}function R(F,M,T){for(let l=0;l<4;l++)nr(F[l],M[l],T)}function I(F,M){const T=J(),l=J(),E=J();ye(E,M[2]),te(T,M[0],E),te(l,M[1],E),lt(F,l),F[31]^=sr(T)<<7}function S(F,M,T){oe(F[0],Ne),oe(F[1],H),oe(F[2],H),oe(F[3],Ne);for(let l=255;l>=0;--l){const E=T[l/8|0]>>(l&7)&1;R(F,M,E),Z(M,F),Z(F,F),R(F,M,E)}}function ve(F,M){const T=[J(),J(),J(),J()];oe(T[0],Le),oe(T[1],xe),oe(T[2],H),te(T[3],Le,xe),S(F,T,M)}function Se(F){if(F.length!==$.aP)throw new Error(`ed25519: seed must be ${$.aP} bytes`);const M=(0,Ie.hash)(F);M[0]&=248,M[31]&=127,M[31]|=64;const T=new Uint8Array(32),l=[J(),J(),J(),J()];ve(l,M),I(T,l);const E=new Uint8Array(64);return E.set(F),E.set(T,32),{publicKey:T,secretKey:E}}$._w=Se;function X(F){const M=(0,pe.randomBytes)(32,F),T=Se(M);return(0,ht.wipe)(M),T}G=X;function ne(F){if(F.length!==$.KS)throw new Error(`ed25519: secret key must be ${$.KS} bytes`);return new Uint8Array(F.subarray(32))}G=ne;const ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function re(F,M){let T,l,E,ge;for(l=63;l>=32;--l){for(T=0,E=l-32,ge=l-12;E<ge;++E)M[E]+=T-16*M[l]*ie[E-(l-32)],T=Math.floor((M[E]+128)/256),M[E]-=T*256;M[E]+=T,M[l]=0}for(T=0,E=0;E<32;E++)M[E]+=T-(M[31]>>4)*ie[E],T=M[E]>>8,M[E]&=255;for(E=0;E<32;E++)M[E]-=T*ie[E];for(l=0;l<32;l++)M[l+1]+=M[l]>>8,F[l]=M[l]&255}function vt(F){const M=new Float64Array(64);for(let T=0;T<64;T++)M[T]=F[T];for(let T=0;T<64;T++)F[T]=0;re(F,M)}function Et(F,M){const T=new Float64Array(64),l=[J(),J(),J(),J()],E=(0,Ie.hash)(F.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const ge=new Uint8Array(64);ge.set(E.subarray(32),32);const Oe=new Ie.SHA512;Oe.update(ge.subarray(32)),Oe.update(M);const rt=Oe.digest();Oe.clean(),vt(rt),ve(l,rt),I(ge,l),Oe.reset(),Oe.update(ge.subarray(0,32)),Oe.update(F.subarray(32)),Oe.update(M);const mt=Oe.digest();vt(mt);for(let it=0;it<32;it++)T[it]=rt[it];for(let it=0;it<32;it++)for(let st=0;st<32;st++)T[it+st]+=mt[it]*E[st];return re(ge.subarray(32),T),ge}$.Xx=Et;function ze(F,M){const T=J(),l=J(),E=J(),ge=J(),Oe=J(),rt=J(),mt=J();return oe(F[2],H),lr(F[1],M),fe(E,F[1]),te(ge,E,ee),k(E,E,F[2]),tt(ge,F[2],ge),fe(Oe,ge),fe(rt,Oe),te(mt,rt,Oe),te(T,mt,E),te(T,T,ge),we(T,T),te(T,T,E),te(T,T,ge),te(T,T,ge),te(F[0],T,ge),fe(l,F[0]),te(l,l,ge),hr(l,E)&&te(F[0],F[0],Me),fe(l,F[0]),te(l,l,ge),hr(l,E)?-1:(sr(F[0])===M[31]>>7&&k(F[0],Ne,F[0]),te(F[3],F[0],F[1]),0)}function ii(F,M,T){const l=new Uint8Array(32),E=[J(),J(),J(),J()],ge=[J(),J(),J(),J()];if(T.length!==$.jQ)throw new Error(`ed25519: signature must be ${$.jQ} bytes`);if(ze(ge,F))return!1;const Oe=new Ie.SHA512;Oe.update(T.subarray(0,32)),Oe.update(F),Oe.update(M);const rt=Oe.digest();return vt(rt),S(E,ge,rt),ve(ge,T.subarray(32)),Z(E,ge),I(l,E),!yt(T,l)}G=ii;function Pi(F){let M=[J(),J(),J(),J()];if(ze(M,F))throw new Error("Ed25519: invalid public key");let T=J(),l=J(),E=M[1];tt(T,H,E),k(l,H,E),ye(l,l),te(T,T,l);let ge=new Uint8Array(32);return lt(ge,T),ge}G=Pi;function It(F){const M=(0,Ie.hash)(F.subarray(0,32));M[0]&=248,M[31]&=127,M[31]|=64;const T=new Uint8Array(M.subarray(0,32));return(0,ht.wipe)(M),T}G=It},21318:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0});var G=L(6050),pe=L(49644);$.DIGEST_LENGTH=64,$.BLOCK_SIZE=128;var Ie=function(){function Ne(){this.digestLength=$.DIGEST_LENGTH,this.blockSize=$.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Ne.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},Ne.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Ne.prototype.clean=function(){pe.wipe(this._buffer),pe.wipe(this._tempHi),pe.wipe(this._tempLo),this.reset()},Ne.prototype.update=function(H,ee){if(ee===void 0&&(ee=H.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var se=0;if(this._bytesHashed+=ee,this._bufferLength>0){for(;this._bufferLength<$.BLOCK_SIZE&&ee>0;)this._buffer[this._bufferLength++]=H[se++],ee--;this._bufferLength===this.blockSize&&(J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ee>=this.blockSize&&(se=J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,H,se,ee),ee%=this.blockSize);ee>0;)this._buffer[this._bufferLength++]=H[se++],ee--;return this},Ne.prototype.finish=function(H){if(!this._finished){var ee=this._bytesHashed,se=this._bufferLength,Le=ee/536870912|0,xe=ee<<3,Me=ee%128<112?128:256;this._buffer[se]=128;for(var oe=se+1;oe<Me-8;oe++)this._buffer[oe]=0;G.writeUint32BE(Le,this._buffer,Me-8),G.writeUint32BE(xe,this._buffer,Me-4),J(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Me),this._finished=!0}for(var oe=0;oe<this.digestLength/8;oe++)G.writeUint32BE(this._stateHi[oe],H,oe*8),G.writeUint32BE(this._stateLo[oe],H,oe*8+4);return this},Ne.prototype.digest=function(){var H=new Uint8Array(this.digestLength);return this.finish(H),H},Ne.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Ne.prototype.restoreState=function(H){return this._stateHi.set(H.stateHi),this._stateLo.set(H.stateLo),this._bufferLength=H.bufferLength,H.buffer&&this._buffer.set(H.buffer),this._bytesHashed=H.bytesHashed,this._finished=!1,this},Ne.prototype.cleanSavedState=function(H){pe.wipe(H.stateHi),pe.wipe(H.stateLo),H.buffer&&pe.wipe(H.buffer),H.bufferLength=0,H.bytesHashed=0},Ne}();$.SHA512=Ie;var ht=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function J(Ne,H,ee,se,Le,xe,Me){for(var oe=ee[0],gt=ee[1],nr=ee[2],lt=ee[3],yt=ee[4],hr=ee[5],sr=ee[6],lr=ee[7],tt=se[0],k=se[1],te=se[2],fe=se[3],ye=se[4],we=se[5],Z=se[6],R=se[7],I,S,ve,Se,X,ne,ie,re;Me>=128;){for(var vt=0;vt<16;vt++){var Et=8*vt+xe;Ne[vt]=G.readUint32BE(Le,Et),H[vt]=G.readUint32BE(Le,Et+4)}for(var vt=0;vt<80;vt++){var ze=oe,ii=gt,Pi=nr,It=lt,F=yt,M=hr,T=sr,l=lr,E=tt,ge=k,Oe=te,rt=fe,mt=ye,it=we,st=Z,Ke=R;if(I=lr,S=R,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=(yt>>>14|ye<<32-14)^(yt>>>18|ye<<32-18)^(ye>>>41-32|yt<<32-(41-32)),S=(ye>>>14|yt<<32-14)^(ye>>>18|yt<<32-18)^(yt>>>41-32|ye<<32-(41-32)),X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,I=yt&hr^~yt&sr,S=ye&we^~ye&Z,X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,I=ht[vt*2],S=ht[vt*2+1],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,I=Ne[vt%16],S=H[vt%16],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ve=ie&65535|re<<16,Se=X&65535|ne<<16,I=ve,S=Se,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=(oe>>>28|tt<<32-28)^(tt>>>34-32|oe<<32-(34-32))^(tt>>>39-32|oe<<32-(39-32)),S=(tt>>>28|oe<<32-28)^(oe>>>34-32|tt<<32-(34-32))^(oe>>>39-32|tt<<32-(39-32)),X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,I=oe&gt^oe&nr^gt&nr,S=tt&k^tt&te^k&te,X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,l=ie&65535|re<<16,Ke=X&65535|ne<<16,I=It,S=rt,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ve,S=Se,X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,It=ie&65535|re<<16,rt=X&65535|ne<<16,gt=ze,nr=ii,lt=Pi,yt=It,hr=F,sr=M,lr=T,oe=l,k=E,te=ge,fe=Oe,ye=rt,we=mt,Z=it,R=st,tt=Ke,vt%16===15)for(var Et=0;Et<16;Et++)I=Ne[Et],S=H[Et],X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=Ne[(Et+9)%16],S=H[(Et+9)%16],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ve=Ne[(Et+1)%16],Se=H[(Et+1)%16],I=(ve>>>1|Se<<32-1)^(ve>>>8|Se<<32-8)^ve>>>7,S=(Se>>>1|ve<<32-1)^(Se>>>8|ve<<32-8)^(Se>>>7|ve<<32-7),X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ve=Ne[(Et+14)%16],Se=H[(Et+14)%16],I=(ve>>>19|Se<<32-19)^(Se>>>61-32|ve<<32-(61-32))^ve>>>6,S=(Se>>>19|ve<<32-19)^(ve>>>61-32|Se<<32-(61-32))^(Se>>>6|ve<<32-6),X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,Ne[Et]=ie&65535|re<<16,H[Et]=X&65535|ne<<16}I=oe,S=tt,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[0],S=se[0],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[0]=oe=ie&65535|re<<16,se[0]=tt=X&65535|ne<<16,I=gt,S=k,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[1],S=se[1],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[1]=gt=ie&65535|re<<16,se[1]=k=X&65535|ne<<16,I=nr,S=te,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[2],S=se[2],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[2]=nr=ie&65535|re<<16,se[2]=te=X&65535|ne<<16,I=lt,S=fe,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[3],S=se[3],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[3]=lt=ie&65535|re<<16,se[3]=fe=X&65535|ne<<16,I=yt,S=ye,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[4],S=se[4],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[4]=yt=ie&65535|re<<16,se[4]=ye=X&65535|ne<<16,I=hr,S=we,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[5],S=se[5],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[5]=hr=ie&65535|re<<16,se[5]=we=X&65535|ne<<16,I=sr,S=Z,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[6],S=se[6],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[6]=sr=ie&65535|re<<16,se[6]=Z=X&65535|ne<<16,I=lr,S=R,X=S&65535,ne=S>>>16,ie=I&65535,re=I>>>16,I=ee[7],S=se[7],X+=S&65535,ne+=S>>>16,ie+=I&65535,re+=I>>>16,ne+=X>>>16,ie+=ne>>>16,re+=ie>>>16,ee[7]=lr=ie&65535|re<<16,se[7]=R=X&65535|ne<<16,xe+=128,Me-=128}return xe}function Pe(Ne){var H=new Ie;H.update(Ne);var ee=H.digest();return H.clean(),ee}$.hash=Pe},72165:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.isBrowserCryptoAvailable=$.getSubtleCrypto=$.getBrowerCrypto=void 0;function G(){return(L.g===null||L.g===void 0?void 0:L.g.crypto)||(L.g===null||L.g===void 0?void 0:L.g.msCrypto)||{}}$.getBrowerCrypto=G;function pe(){const ht=G();return ht.subtle||ht.webkitSubtle}$.getSubtleCrypto=pe;function Ie(){return!!G()&&!!pe()}$.isBrowserCryptoAvailable=Ie},73027:function(Xe,$,L){"use strict";var G=L(14224);Object.defineProperty($,"__esModule",{value:!0}),$.isBrowser=$.isNode=$.isReactNative=void 0;function pe(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}$.isReactNative=pe;function Ie(){return typeof G<"u"&&typeof G.versions<"u"&&typeof G.versions.node<"u"}$.isNode=Ie;function ht(){return!pe()&&!Ie()}$.isBrowser=ht},88497:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0});const G=L(16054);G.__exportStar(L(72165),$),G.__exportStar(L(73027),$)},49623:function(Xe,$,L){"use strict";L.d($,{EthereumProvider:function(){return am}});var G=L(72100),pe=L.n(G),Ie=L(11541),ht=L(45306),J=L(4883),Pe=L(76846),Ne=L(9267),H=L(5105),ee=L(14224),se=function(o,t,r){if(r||arguments.length===2)for(var s=0,u=t.length,f;s<u;s++)(f||!(s in t))&&(f||(f=Array.prototype.slice.call(t,0,s)),f[s]=t[s]);return o.concat(f||Array.prototype.slice.call(t))},Le=function(){function o(t,r,s){this.name=t,this.version=r,this.os=s,this.type="browser"}return o}(),xe=function(){function o(t){this.version=t,this.type="node",this.name="node",this.os=ee.platform}return o}(),Me=function(){function o(t,r,s,u){this.name=t,this.version=r,this.os=s,this.bot=u,this.type="bot-device"}return o}(),oe=function(){function o(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return o}(),gt=function(){function o(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return o}(),nr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,lt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,yt=3,hr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",nr]],sr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function lr(o){return o?te(o):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new gt:typeof navigator<"u"?te(navigator.userAgent):ye()}function tt(o){return o!==""&&hr.reduce(function(t,r){var s=r[0],u=r[1];if(t)return t;var f=u.exec(o);return!!f&&[s,f]},!1)}function k(o){var t=tt(o);return t?t[0]:null}function te(o){var t=tt(o);if(!t)return null;var r=t[0],s=t[1];if(r==="searchbot")return new oe;var u=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);u?u.length<yt&&(u=se(se([],u,!0),we(yt-u.length),!0)):u=[];var f=u.join("."),g=fe(o),_=lt.exec(o);return _&&_[1]?new Me(r,f,g,_[1]):new Le(r,f,g)}function fe(o){for(var t=0,r=sr.length;t<r;t++){var s=sr[t],u=s[0],f=s[1],g=f.exec(o);if(g)return u}return null}function ye(){var o=typeof ee<"u"&&ee.version;return o?new xe(ee.version.slice(1)):null}function we(o){for(var t=[],r=0;r<o;r++)t.push("0");return t}var Z=L(46196),R=L(73079),I=L(42669),S=L(75280),ve=L(35014),Se=L(14224);const X=":";function ne(o){const[t,r]=o.split(X);return{namespace:t,reference:r}}function ie(o){const{namespace:t,reference:r}=o;return[t,r].join(X)}function re(o){const[t,r,s]=o.split(X);return{namespace:t,reference:r,address:s}}function vt(o){const{namespace:t,reference:r,address:s}=o;return[t,r,s].join(X)}function Et(o,t){const r=[];return o.forEach(s=>{const u=t(s);r.includes(u)||r.push(u)}),r}function ze(o){const{address:t}=re(o);return t}function ii(o){const{namespace:t,reference:r}=re(o);return ie({namespace:t,reference:r})}function Pi(o,t){const{namespace:r,reference:s}=ne(t);return vt({namespace:r,reference:s,address:o})}function It(o){return Et(o,ze)}function F(o){return Et(o,ii)}function M(o,t=[]){const r=[];return Object.keys(o).forEach(s=>{if(t.length&&!t.includes(s))return;const u=o[s];r.push(...u.accounts)}),r}function T(o,t=[]){const r=[];return Object.keys(o).forEach(s=>{if(t.length&&!t.includes(s))return;const u=o[s];r.push(...F(u.accounts))}),r}function l(o,t=[]){const r=[];return Object.keys(o).forEach(s=>{if(t.length&&!t.includes(s))return;const u=o[s];r.push(...E(s,u))}),r}function E(o,t){return o.includes(":")?[o]:t.chains||[]}const ge=o=>o==null?void 0:o.split(":"),Oe=o=>{const t=o&&ge(o);if(t)return t[3]},rt=o=>{const t=o&&ge(o);if(t)return t[2]+":"+t[3]},mt=o=>{const t=o&&ge(o);if(t)return t.pop()},it=(o,t)=>{const r=`${o.domain} wants you to sign in with your Ethereum account:`,s=mt(t),u=o.statement,f=`URI: ${o.aud}`,g=`Version: ${o.version}`,_=`Chain ID: ${Oe(t)}`,A=`Nonce: ${o.nonce}`,w=`Issued At: ${o.iat}`,C=o.resources&&o.resources.length>0?`Resources:
${o.resources.map(N=>`- ${N}`).join(`
`)}`:void 0;return[r,s,"",u,"",f,g,_,A,w,C].filter(N=>N!=null).join(`
`)},st="base10",Ke="base16",Zt="base64pad",kt="utf8",Vt=0,ft=1,Ft=0,Ct=1,ot=12,at=32;function wt(){const o=Ne.Au();return{privateKey:(0,H.BB)(o.secretKey,Ke),publicKey:(0,H.BB)(o.publicKey,Ke)}}function Ze(){const o=(0,J.randomBytes)(at);return(0,H.BB)(o,Ke)}function er(o,t){const r=Ne.gi((0,H.mL)(o,Ke),(0,H.mL)(t,Ke),!0),s=new ht.t(Pe.mE,r).expand(at);return(0,H.BB)(s,Ke)}function or(o){const t=(0,Pe.vp)((0,H.mL)(o,Ke));return(0,H.BB)(t,Ke)}function Mt(o){const t=(0,Pe.vp)((0,H.mL)(o,kt));return(0,H.BB)(t,Ke)}function gr(o){return(0,H.mL)(`${o}`,st)}function jt(o){return Number((0,H.BB)(o,st))}function Ir(o){const t=gr(typeof o.type<"u"?o.type:Vt);if(jt(t)===ft&&typeof o.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof o.senderPublicKey<"u"?(0,H.mL)(o.senderPublicKey,Ke):void 0,s=typeof o.iv<"u"?(0,H.mL)(o.iv,Ke):(0,J.randomBytes)(ot),u=new Ie.OK((0,H.mL)(o.symKey,Ke)).seal(s,(0,H.mL)(o.message,kt));return Vr({type:t,sealed:u,iv:s,senderPublicKey:r})}function Ar(o){const t=new Ie.OK((0,H.mL)(o.symKey,Ke)),{sealed:r,iv:s}=tr(o.encoded),u=t.open(s,r);if(u===null)throw new Error("Failed to decrypt");return(0,H.BB)(u,kt)}function Vr(o){if(jt(o.type)===ft){if(typeof o.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,H.BB)((0,H.zo)([o.type,o.senderPublicKey,o.iv,o.sealed]),Zt)}return(0,H.BB)((0,H.zo)([o.type,o.iv,o.sealed]),Zt)}function tr(o){const t=(0,H.mL)(o,Zt),r=t.slice(Ft,Ct),s=Ct;if(jt(r)===ft){const _=s+at,A=_+ot,w=t.slice(s,_),C=t.slice(_,A),N=t.slice(A);return{type:r,sealed:N,iv:C,senderPublicKey:w}}const u=s+ot,f=t.slice(s,u),g=t.slice(u);return{type:r,sealed:g,iv:f}}function ni(o,t){const r=tr(o);return mi({type:jt(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?(0,H.BB)(r.senderPublicKey,Ke):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function mi(o){const t=(o==null?void 0:o.type)||Vt;if(t===ft){if(typeof(o==null?void 0:o.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(o==null?void 0:o.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:o==null?void 0:o.senderPublicKey,receiverPublicKey:o==null?void 0:o.receiverPublicKey}}function Oi(o){return o.type===ft&&typeof o.senderPublicKey=="string"&&typeof o.receiverPublicKey=="string"}var Ri=Object.defineProperty,si=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Dt=(o,t,r)=>t in o?Ri(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,xt=(o,t)=>{for(var r in t||(t={}))$t.call(t,r)&&Dt(o,r,t[r]);if(si)for(var r of si(t))Ut.call(t,r)&&Dt(o,r,t[r]);return o};const rr="ReactNative",We={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},zt=" ",ar=":",ir="/",Bt=2,Wt=1e3,_t="js";function qt(){return typeof Se<"u"&&typeof Se.versions<"u"&&typeof Se.versions.node<"u"}function St(){return!(0,R.getDocument)()&&!!(0,R.getNavigator)()&&navigator.product===rr}function Pt(){return!qt()&&!!(0,R.getNavigator)()}function Ot(){return St()?We.reactNative:qt()?We.node:Pt()?We.browser:We.unknown}function na(){var o;try{return St()&&typeof L.g<"u"&&typeof(L.g==null?void 0:L.g.Application)<"u"?(o=L.g.Application)==null?void 0:o.applicationId:void 0}catch{return}}function oi(o,t){let r=S.parse(o);return r=xt(xt({},r),t),o=S.stringify(r),o}function sa(){return(0,I.D)()||{name:"",description:"",url:"",icons:[""]}}function xu(o,t){var r;const s=Ot(),u={protocol:o,version:t,env:s};return s==="browser"&&(u.host=((r=he())==null?void 0:r.host)||"unknown"),u}function oa(){if(Ot()===We.reactNative&&typeof L.g<"u"&&typeof(L.g==null?void 0:L.g.Platform)<"u"){const{OS:r,Version:s}=L.g.Platform;return[r,s].join("-")}const o=lr();if(o===null)return"unknown";const t=o.os?o.os.replace(" ","").toLowerCase():"unknown";return o.type==="browser"?[t,o.name,o.version].join("-"):[t,o.version].join("-")}function aa(){var o;const t=Ot();return t===We.browser?[t,((o=(0,R.getLocation)())==null?void 0:o.host)||"unknown"].join(":"):t}function ca(o,t,r){const s=oa(),u=aa();return[[o,t].join("-"),[_t,r].join("-"),s,u].join("/")}function Ai({protocol:o,version:t,relayUrl:r,sdkVersion:s,auth:u,projectId:f,useOnCloseEvent:g,bundleId:_}){const A=r.split("?"),w=ca(o,t,s),C={auth:u,ua:w,projectId:f,useOnCloseEvent:g||void 0,origin:_||void 0},N=oi(A[1]||"",C);return A[0]+"?"+N}function Su(o){let t=(o.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?o.split("://")[1]:o;return t=t==="wss"?"https":"http",[t,r].join("://")}function Pu(o,t,r){if(!o[t]||typeof o[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function ua(o,t=Bt){return Tn(o.split(ir),t)}function Ou(o){return ua(o).join(zt)}function Ci(o,t){return o.filter(r=>t.includes(r)).length===o.length}function Tn(o,t=Bt){return o.slice(Math.max(o.length-t,0))}function js(o){return Object.fromEntries(o.entries())}function $s(o){return new Map(Object.entries(o))}function Ti(o,t){const r={};return Object.keys(o).forEach(s=>{r[s]=t(o[s])}),r}const Ru=o=>o;function ha(o){return o.trim().replace(/^\w/,t=>t.toUpperCase())}function Au(o){return o.split(zt).map(t=>ha(t)).join(zt)}function Qi(o=Z.FIVE_MINUTES,t){const r=(0,Z.toMiliseconds)(o||Z.FIVE_MINUTES);let s,u,f;return{resolve:g=>{f&&s&&(clearTimeout(f),s(g))},reject:g=>{f&&u&&(clearTimeout(f),u(g))},done:()=>new Promise((g,_)=>{f=setTimeout(()=>{_(new Error(t))},r),s=g,u=_})}}function dn(o,t,r){return new Promise(async(s,u)=>{const f=setTimeout(()=>u(new Error(r)),t);try{const g=await o;s(g)}catch(g){u(g)}clearTimeout(f)})}function Us(o,t){if(typeof t=="string"&&t.startsWith(`${o}:`))return t;if(o.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(o.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${o}`)}function Nn(o){return Us("topic",o)}function la(o){return Us("id",o)}function Yi(o){const[t,r]=o.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")s.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))s.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return s}function Cr(o,t){return(0,Z.fromMiliseconds)((t||Date.now())+(0,Z.toMiliseconds)(o))}function ai(o){return Date.now()>=(0,Z.toMiliseconds)(o)}function Ht(o,t){return`${o}${t?`:${t}`:""}`}function Wr(o=[],t=[]){return[...new Set([...o,...t])]}async function fa({id:o,topic:t,wcDeepLink:r}){try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r;let u=s==null?void 0:s.href;if(typeof u!="string")return;u.endsWith("/")&&(u=u.slice(0,-1));const f=`${u}/wc?requestId=${o}&sessionTopic=${t}`,g=Ot();g===We.browser?f.startsWith("https://")?window.open(f,"_blank","noreferrer noopener"):window.open(f,"_self","noreferrer noopener"):g===We.reactNative&&typeof(L.g==null?void 0:L.g.Linking)<"u"&&await L.g.Linking.openURL(f)}catch(s){console.error(s)}}async function da(o,t){try{return await o.getItem(t)||(Pt()?localStorage.getItem(t):void 0)}catch(r){console.error(r)}}const zs="irn";function es(o){return(o==null?void 0:o.relay)||{protocol:zs}}function Dn(o){const t=ve.RELAY_JSONRPC[o];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${o}`);return t}var Bs=Object.defineProperty,pn=Object.getOwnPropertySymbols,Xi=Object.prototype.hasOwnProperty,pa=Object.prototype.propertyIsEnumerable,qs=(o,t,r)=>t in o?Bs(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,wi=(o,t)=>{for(var r in t||(t={}))Xi.call(t,r)&&qs(o,r,t[r]);if(pn)for(var r of pn(t))pa.call(t,r)&&qs(o,r,t[r]);return o};function ga(o,t="-"){const r={},s="relay"+t;return Object.keys(o).forEach(u=>{if(u.startsWith(s)){const f=u.replace(s,""),g=o[u];r[f]=g}}),r}function Hs(o){o=o.includes("wc://")?o.replace("wc://",""):o,o=o.includes("wc:")?o.replace("wc:",""):o;const t=o.indexOf(":"),r=o.indexOf("?")!==-1?o.indexOf("?"):void 0,s=o.substring(0,t),u=o.substring(t+1,r).split("@"),f=typeof r<"u"?o.substring(r):"",g=S.parse(f);return{protocol:s,topic:ya(u[0]),version:parseInt(u[1],10),symKey:g.symKey,relay:ga(g)}}function ya(o){return o.startsWith("//")?o.substring(2):o}function va(o,t="-"){const r="relay",s={};return Object.keys(o).forEach(u=>{const f=r+t+u;o[u]&&(s[f]=o[u])}),s}function ma(o){return`${o.protocol}:${o.topic}@${o.version}?`+S.stringify(wi({symKey:o.symKey},va(o.relay)))}var Ni=Object.defineProperty,Ks=Object.defineProperties,wa=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,ks=(o,t,r)=>t in o?Ni(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,Vs=(o,t)=>{for(var r in t||(t={}))_a.call(t,r)&&ks(o,r,t[r]);if(gn)for(var r of gn(t))ts.call(t,r)&&ks(o,r,t[r]);return o},Ws=(o,t)=>Ks(o,wa(t));function Di(o){const t=[];return o.forEach(r=>{const[s,u]=r.split(":");t.push(`${s}:${u}`)}),t}function yn(o){const t=[];return Object.values(o).forEach(r=>{t.push(...Di(r.accounts))}),t}function Gs(o,t){const r=[];return Object.values(o).forEach(s=>{Di(s.accounts).includes(t)&&r.push(...s.methods)}),r}function ba(o,t){const r=[];return Object.values(o).forEach(s=>{Di(s.accounts).includes(t)&&r.push(...s.events)}),r}function Ea(o,t){const r=Qs(o,t);if(r)throw new Error(r.message);const s={};for(const[u,f]of Object.entries(o))s[u]={methods:f.methods,events:f.events,chains:f.accounts.map(g=>`${g.split(":")[0]}:${g.split(":")[1]}`)};return s}function Cu(o){const{proposal:{requiredNamespaces:t,optionalNamespaces:r={}},supportedNamespaces:s}=o,u=V(t),f=V(r),g={};Object.keys(s).forEach(w=>{const C=s[w].chains,N=s[w].methods,B=s[w].events,ce=s[w].accounts;C.forEach(Y=>{if(!ce.some(me=>me.includes(Y)))throw new Error(`No accounts provided for chain ${Y} in namespace ${w}`)}),g[w]={chains:C,methods:N,events:B,accounts:ce}});const _=Ia(t,g,"approve()");if(_)throw new Error(_.message);const A={};return!Object.keys(t).length&&!Object.keys(r).length?g:(Object.keys(u).forEach(w=>{const C=s[w].chains.filter(Y=>{var me,Ce;return(Ce=(me=u[w])==null?void 0:me.chains)==null?void 0:Ce.includes(Y)}),N=s[w].methods.filter(Y=>{var me,Ce;return(Ce=(me=u[w])==null?void 0:me.methods)==null?void 0:Ce.includes(Y)}),B=s[w].events.filter(Y=>{var me,Ce;return(Ce=(me=u[w])==null?void 0:me.events)==null?void 0:Ce.includes(Y)}),ce=C.map(Y=>s[w].accounts.filter(me=>me.includes(`${Y}:`))).flat();A[w]={chains:C,methods:N,events:B,accounts:ce}}),Object.keys(f).forEach(w=>{var C,N,B,ce,Y,me;if(!s[w])return;const Ce=(N=(C=f[w])==null?void 0:C.chains)==null?void 0:N.filter($e=>s[w].chains.includes($e)),Ve=s[w].methods.filter($e=>{var Ye,Jt;return(Jt=(Ye=f[w])==null?void 0:Ye.methods)==null?void 0:Jt.includes($e)}),Gt=s[w].events.filter($e=>{var Ye,Jt;return(Jt=(Ye=f[w])==null?void 0:Ye.events)==null?void 0:Jt.includes($e)}),Ge=Ce==null?void 0:Ce.map($e=>s[w].accounts.filter(Ye=>Ye.includes(`${$e}:`))).flat();A[w]={chains:Wr((B=A[w])==null?void 0:B.chains,Ce),methods:Wr((ce=A[w])==null?void 0:ce.methods,Ve),events:Wr((Y=A[w])==null?void 0:Y.events,Gt),accounts:Wr((me=A[w])==null?void 0:me.accounts,Ge)}}),A)}function v(o){return o.includes(":")}function x(o){return v(o)?o.split(":")[0]:o}function V(o){var t,r,s;const u={};if(!Rt(o))return u;for(const[f,g]of Object.entries(o)){const _=v(f)?[f]:g.chains,A=g.methods||[],w=g.events||[],C=x(f);u[C]=Ws(Vs({},u[C]),{chains:Wr(_,(t=u[C])==null?void 0:t.chains),methods:Wr(A,(r=u[C])==null?void 0:r.methods),events:Wr(w,(s=u[C])==null?void 0:s.events)})}return u}const ue={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},dt={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function z(o,t){const{message:r,code:s}=dt[o];return{message:t?`${r} ${t}`:r,code:s}}function Re(o,t){const{message:r,code:s}=ue[o];return{message:t?`${r} ${t}`:r,code:s}}function ct(o,t){return Array.isArray(o)?typeof t<"u"&&o.length?o.every(t):!0:!1}function Rt(o){return Object.getPrototypeOf(o)===Object.prototype&&Object.keys(o).length}function je(o){return typeof o>"u"}function Qe(o,t){return t&&je(o)?!0:typeof o=="string"&&!!o.trim().length}function xr(o,t){return t&&je(o)?!0:typeof o=="number"&&!isNaN(o)}function fr(o,t){const{requiredNamespaces:r}=t,s=Object.keys(o.namespaces),u=Object.keys(r);let f=!0;return Ci(u,s)?(s.forEach(g=>{const{accounts:_,methods:A,events:w}=o.namespaces[g],C=Di(_),N=r[g];(!Ci(E(g,N),C)||!Ci(N.methods,A)||!Ci(N.events,w))&&(f=!1)}),f):!1}function yr(o){return Qe(o,!1)&&o.includes(":")?o.split(":").length===2:!1}function Tr(o){if(Qe(o,!1)&&o.includes(":")){const t=o.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&yr(r)}}return!1}function _i(o){if(Qe(o,!1))try{return typeof new URL(o)<"u"}catch{return!1}return!1}function ci(o){var t;return(t=o==null?void 0:o.proposer)==null?void 0:t.publicKey}function Li(o){return o==null?void 0:o.topic}function Js(o,t){let r=null;return Qe(o==null?void 0:o.publicKey,!1)||(r=z("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function vn(o){let t=!0;return ct(o)?o.length&&(t=o.every(r=>Qe(r,!1))):t=!1,t}function Ln(o,t,r){let s=null;return ct(t)&&t.length?t.forEach(u=>{s||yr(u)||(s=Re("UNSUPPORTED_CHAINS",`${r}, chain ${u} should be a string and conform to "namespace:chainId" format`))}):yr(o)||(s=Re("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function Bd(o,t,r){let s=null;return Object.entries(o).forEach(([u,f])=>{if(s)return;const g=Ln(u,E(u,f),`${t} ${r}`);g&&(s=g)}),s}function qd(o,t){let r=null;return ct(o)?o.forEach(s=>{r||Tr(s)||(r=Re("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Re("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Hd(o,t){let r=null;return Object.values(o).forEach(s=>{if(r)return;const u=qd(s==null?void 0:s.accounts,`${t} namespace`);u&&(r=u)}),r}function Kd(o,t){let r=null;return vn(o==null?void 0:o.methods)?vn(o==null?void 0:o.events)||(r=Re("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Re("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Tu(o,t){let r=null;return Object.values(o).forEach(s=>{if(r)return;const u=Kd(s,`${t}, namespace`);u&&(r=u)}),r}function kd(o,t,r){let s=null;if(o&&Rt(o)){const u=Tu(o,t);u&&(s=u);const f=Bd(o,t,r);f&&(s=f)}else s=z("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}function Qs(o,t){let r=null;if(o&&Rt(o)){const s=Tu(o,t);s&&(r=s);const u=Hd(o,t);u&&(r=u)}else r=z("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Nu(o){return Qe(o.protocol,!0)}function Vd(o,t){let r=!1;return t&&!o?r=!0:o&&ct(o)&&o.length&&o.forEach(s=>{r=Nu(s)}),r}function Wd(o){return typeof o=="number"}function Nr(o){return typeof o<"u"&&typeof o!==null}function Gd(o){return!(!o||typeof o!="object"||!o.code||!xr(o.code,!1)||!o.message||!Qe(o.message,!1))}function Jd(o){return!(je(o)||!Qe(o.method,!1))}function Qd(o){return!(je(o)||je(o.result)&&je(o.error)||!xr(o.id,!1)||!Qe(o.jsonrpc,!1))}function Yd(o){return!(je(o)||!Qe(o.name,!1))}function Du(o,t){return!(!yr(t)||!yn(o).includes(t))}function Xd(o,t,r){return Qe(r,!1)?Gs(o,t).includes(r):!1}function Zd(o,t,r){return Qe(r,!1)?ba(o,t).includes(r):!1}function Ia(o,t,r){let s=null;const u=ep(o),f=tp(t),g=Object.keys(u),_=Object.keys(f),A=Lu(Object.keys(o)),w=Lu(Object.keys(t)),C=A.filter(N=>!w.includes(N));return C.length&&(s=z("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${C.toString()}
      Received: ${Object.keys(t).toString()}`)),Ci(g,_)||(s=z("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${g.toString()}
      Approved: ${_.toString()}`)),Object.keys(t).forEach(N=>{if(!N.includes(":")||s)return;const B=Di(t[N].accounts);B.includes(N)||(s=z("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${N}
        Required: ${N}
        Approved: ${B.toString()}`))}),g.forEach(N=>{s||(Ci(u[N].methods,f[N].methods)?Ci(u[N].events,f[N].events)||(s=z("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${N}`)):s=z("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${N}`))}),s}function ep(o){const t={};return Object.keys(o).forEach(r=>{var s;r.includes(":")?t[r]=o[r]:(s=o[r].chains)==null||s.forEach(u=>{t[u]={methods:o[r].methods,events:o[r].events}})}),t}function Lu(o){return[...new Set(o.map(t=>t.includes(":")?t.split(":")[0]:t))]}function tp(o){const t={};return Object.keys(o).forEach(r=>{if(r.includes(":"))t[r]=o[r];else{const s=Di(o[r].accounts);s==null||s.forEach(u=>{t[u]={accounts:o[r].accounts.filter(f=>f.includes(`${u}:`)),methods:o[r].methods,events:o[r].events}})}}),t}function rp(o,t){return xr(o,!1)&&o<=t.max&&o>=t.min}function Fu(){const o=Ot();return new Promise(t=>{switch(o){case We.browser:t(ip());break;case We.reactNative:t(np());break;case We.node:t(sp());break;default:t(!0)}})}function ip(){return Pt()&&(navigator==null?void 0:navigator.onLine)}async function np(){if(St()&&typeof L.g<"u"&&L.g!=null&&L.g.NetInfo){const o=await(L.g==null?void 0:L.g.NetInfo.fetch());return o==null?void 0:o.isConnected}return!0}function sp(){return!0}function op(o){switch(Ot()){case We.browser:ap(o);break;case We.reactNative:cp(o);break;case We.node:break}}function ap(o){!St()&&Pt()&&(window.addEventListener("online",()=>o(!0)),window.addEventListener("offline",()=>o(!1)))}function cp(o){var t;St()&&typeof L.g<"u"&&L.g!=null&&L.g.NetInfo&&((t=L.g)==null||t.NetInfo.addEventListener(r=>o(r==null?void 0:r.isConnected)))}const xa={};class Ys{static get(t){return xa[t]}static set(t,r){xa[t]=r}static delete(t){delete xa[t]}}const up=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,hp=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,lp=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function fp(o,t){if(o==="__proto__"||o==="constructor"&&t&&typeof t=="object"&&"prototype"in t){dp(o);return}return t}function dp(o){console.warn(`[destr] Dropping "${o}" key to prevent prototype pollution.`)}function rs(o,t={}){if(typeof o!="string")return o;const r=o.trim();if(o[0]==='"'&&o.at(-1)==='"'&&!o.includes("\\"))return r.slice(1,-1);if(r.length<=9){const s=r.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!lp.test(o)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return o}try{if(up.test(o)||hp.test(o)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(o,fp)}return JSON.parse(o)}catch(s){if(t.strict)throw s;return o}}function iS(o,t={}){return rs(o,{...t,strict:!0})}var Sa=L(55872).Buffer;function pp(o){return!o||typeof o.then!="function"?Promise.resolve(o):o}function dr(o,...t){try{return pp(o(...t))}catch(r){return Promise.reject(r)}}function gp(o){const t=typeof o;return o===null||t!=="object"&&t!=="function"}function yp(o){const t=Object.getPrototypeOf(o);return!t||t.isPrototypeOf(Object)}function Xs(o){if(gp(o))return String(o);if(yp(o)||Array.isArray(o))return JSON.stringify(o);if(typeof o.toJSON=="function")return Xs(o.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Mu(){if(typeof Sa===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Pa="base64:";function vp(o){if(typeof o=="string")return o;Mu();const t=Sa.from(o).toString("base64");return Pa+t}function mp(o){return typeof o!="string"||!o.startsWith(Pa)?o:(Mu(),Sa.from(o.slice(Pa.length),"base64"))}const wp=null;function nS(o,t){if(t=is(t),!t)return o;const r={...o};for(const s of wp)r[s]=(u="",...f)=>o[s](t+u,...f);return r.getKeys=(s="",...u)=>o.getKeys(t+s,...u).then(f=>f.map(g=>g.slice(t.length))),r}function Dr(o){return o?o.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function _p(...o){return Dr(o.join(":"))}function is(o){return o=Dr(o),o?o+":":""}function sS(o){return o}const bp="memory",Ep=()=>{const o=new Map;return{name:bp,options:{},hasItem(t){return o.has(t)},getItem(t){return o.get(t)??null},getItemRaw(t){return o.get(t)??null},setItem(t,r){o.set(t,r)},setItemRaw(t,r){o.set(t,r)},removeItem(t){o.delete(t)},getKeys(){return Array.from(o.keys())},clear(){o.clear()},dispose(){o.clear()}}};function Ip(o={}){const t={mounts:{"":o.driver||Ep()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=w=>{for(const C of t.mountpoints)if(w.startsWith(C))return{base:C,relativeKey:w.slice(C.length),driver:t.mounts[C]};return{base:"",relativeKey:w,driver:t.mounts[""]}},s=(w,C)=>t.mountpoints.filter(N=>N.startsWith(w)||C&&w.startsWith(N)).map(N=>({relativeBase:w.length>N.length?w.slice(N.length):void 0,mountpoint:N,driver:t.mounts[N]})),u=(w,C)=>{if(t.watching){C=Dr(C);for(const N of t.watchListeners)N(w,C)}},f=async()=>{if(!t.watching){t.watching=!0;for(const w in t.mounts)t.unwatch[w]=await ju(t.mounts[w],u,w)}},g=async()=>{if(t.watching){for(const w in t.unwatch)await t.unwatch[w]();t.unwatch={},t.watching=!1}},_=(w,C,N)=>{const B=new Map,ce=Y=>{let me=B.get(Y.base);return me||(me={driver:Y.driver,base:Y.base,items:[]},B.set(Y.base,me)),me};for(const Y of w){const me=typeof Y=="string",Ce=Dr(me?Y:Y.key),Ve=me?void 0:Y.value,Gt=me||!Y.options?C:{...C,...Y.options},Ge=r(Ce);ce(Ge).items.push({key:Ce,value:Ve,relativeKey:Ge.relativeKey,options:Gt})}return Promise.all([...B.values()].map(Y=>N(Y))).then(Y=>Y.flat())},A={hasItem(w,C={}){w=Dr(w);const{relativeKey:N,driver:B}=r(w);return dr(B.hasItem,N,C)},getItem(w,C={}){w=Dr(w);const{relativeKey:N,driver:B}=r(w);return dr(B.getItem,N,C).then(ce=>rs(ce))},getItems(w,C){return _(w,C,N=>N.driver.getItems?dr(N.driver.getItems,N.items.map(B=>({key:B.relativeKey,options:B.options})),C).then(B=>B.map(ce=>({key:_p(N.base,ce.key),value:rs(ce.value)}))):Promise.all(N.items.map(B=>dr(N.driver.getItem,B.relativeKey,B.options).then(ce=>({key:B.key,value:rs(ce)})))))},getItemRaw(w,C={}){w=Dr(w);const{relativeKey:N,driver:B}=r(w);return B.getItemRaw?dr(B.getItemRaw,N,C):dr(B.getItem,N,C).then(ce=>mp(ce))},async setItem(w,C,N={}){if(C===void 0)return A.removeItem(w);w=Dr(w);const{relativeKey:B,driver:ce}=r(w);ce.setItem&&(await dr(ce.setItem,B,Xs(C),N),ce.watch||u("update",w))},async setItems(w,C){await _(w,C,async N=>{N.driver.setItems&&await dr(N.driver.setItems,N.items.map(B=>({key:B.relativeKey,value:Xs(B.value),options:B.options})),C),N.driver.setItem&&await Promise.all(N.items.map(B=>dr(N.driver.setItem,B.relativeKey,Xs(B.value),B.options)))})},async setItemRaw(w,C,N={}){if(C===void 0)return A.removeItem(w,N);w=Dr(w);const{relativeKey:B,driver:ce}=r(w);if(ce.setItemRaw)await dr(ce.setItemRaw,B,C,N);else if(ce.setItem)await dr(ce.setItem,B,vp(C),N);else return;ce.watch||u("update",w)},async removeItem(w,C={}){typeof C=="boolean"&&(C={removeMeta:C}),w=Dr(w);const{relativeKey:N,driver:B}=r(w);B.removeItem&&(await dr(B.removeItem,N,C),(C.removeMeta||C.removeMata)&&await dr(B.removeItem,N+"$",C),B.watch||u("remove",w))},async getMeta(w,C={}){typeof C=="boolean"&&(C={nativeOnly:C}),w=Dr(w);const{relativeKey:N,driver:B}=r(w),ce=Object.create(null);if(B.getMeta&&Object.assign(ce,await dr(B.getMeta,N,C)),!C.nativeOnly){const Y=await dr(B.getItem,N+"$",C).then(me=>rs(me));Y&&typeof Y=="object"&&(typeof Y.atime=="string"&&(Y.atime=new Date(Y.atime)),typeof Y.mtime=="string"&&(Y.mtime=new Date(Y.mtime)),Object.assign(ce,Y))}return ce},setMeta(w,C,N={}){return this.setItem(w+"$",C,N)},removeMeta(w,C={}){return this.removeItem(w+"$",C)},async getKeys(w,C={}){w=is(w);const N=s(w,!0);let B=[];const ce=[];for(const Y of N){const Ce=(await dr(Y.driver.getKeys,Y.relativeBase,C)).map(Ve=>Y.mountpoint+Dr(Ve)).filter(Ve=>!B.some(Gt=>Ve.startsWith(Gt)));ce.push(...Ce),B=[Y.mountpoint,...B.filter(Ve=>!Ve.startsWith(Y.mountpoint))]}return w?ce.filter(Y=>Y.startsWith(w)&&!Y.endsWith("$")):ce.filter(Y=>!Y.endsWith("$"))},async clear(w,C={}){w=is(w),await Promise.all(s(w,!1).map(async N=>{if(N.driver.clear)return dr(N.driver.clear,N.relativeBase,C);if(N.driver.removeItem){const B=await N.driver.getKeys(N.relativeBase||"",C);return Promise.all(B.map(ce=>N.driver.removeItem(ce,C)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(w=>$u(w)))},async watch(w){return await f(),t.watchListeners.push(w),async()=>{t.watchListeners=t.watchListeners.filter(C=>C!==w),t.watchListeners.length===0&&await g()}},async unwatch(){t.watchListeners=[],await g()},mount(w,C){if(w=is(w),w&&t.mounts[w])throw new Error(`already mounted at ${w}`);return w&&(t.mountpoints.push(w),t.mountpoints.sort((N,B)=>B.length-N.length)),t.mounts[w]=C,t.watching&&Promise.resolve(ju(C,u,w)).then(N=>{t.unwatch[w]=N}).catch(console.error),A},async unmount(w,C=!0){w=is(w),!(!w||!t.mounts[w])&&(t.watching&&w in t.unwatch&&(t.unwatch[w](),delete t.unwatch[w]),C&&await $u(t.mounts[w]),t.mountpoints=t.mountpoints.filter(N=>N!==w),delete t.mounts[w])},getMount(w=""){w=Dr(w)+":";const C=r(w);return{driver:C.driver,base:C.base}},getMounts(w="",C={}){return w=Dr(w),s(w,C.parents).map(B=>({driver:B.driver,base:B.mountpoint}))}};return A}async function oS(o,t){t=normalizeBaseKey(t);const r=await o.getKeys(t),s={};return await Promise.all(r.map(async u=>{s[u.slice(t.length)]=await o.getItem(u)})),s}async function aS(o,t,r=""){r=normalizeBaseKey(r),await Promise.all(Object.entries(t).map(s=>o.setItem(r+s[0],s[1])))}function ju(o,t,r){return o.watch?o.watch((s,u)=>t(s,r+u)):()=>{}}async function $u(o){typeof o.dispose=="function"&&await dr(o.dispose)}const cS={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"};function Lr(o){return new Promise((t,r)=>{o.oncomplete=o.onsuccess=()=>t(o.result),o.onabort=o.onerror=()=>r(o.error)})}function Uu(o,t){const r=indexedDB.open(o);r.onupgradeneeded=()=>r.result.createObjectStore(t);const s=Lr(r);return(u,f)=>s.then(g=>f(g.transaction(t,u).objectStore(t)))}let Oa;function ui(){return Oa||(Oa=Uu("keyval-store","keyval")),Oa}function zu(o,t=ui()){return t("readonly",r=>Lr(r.get(o)))}function xp(o,t,r=ui()){return r("readwrite",s=>(s.put(t,o),Lr(s.transaction)))}function uS(o,t=ui()){return t("readwrite",r=>(o.forEach(s=>r.put(s[1],s[0])),Lr(r.transaction)))}function hS(o,t=ui()){return t("readonly",r=>Promise.all(o.map(s=>Lr(r.get(s)))))}function lS(o,t,r=ui()){return r("readwrite",s=>new Promise((u,f)=>{s.get(o).onsuccess=function(){try{s.put(t(this.result),o),u(Lr(s.transaction))}catch(g){f(g)}}}))}function Sp(o,t=ui()){return t("readwrite",r=>(r.delete(o),Lr(r.transaction)))}function fS(o,t=ui()){return t("readwrite",r=>(o.forEach(s=>r.delete(s)),Lr(r.transaction)))}function Pp(o=ui()){return o("readwrite",t=>(t.clear(),Lr(t.transaction)))}function Ra(o,t){return o.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Lr(o.transaction)}function Op(o=ui()){return o("readonly",t=>{if(t.getAllKeys)return Lr(t.getAllKeys());const r=[];return Ra(t,s=>r.push(s.key)).then(()=>r)})}function dS(o=ui()){return o("readonly",t=>{if(t.getAll)return Lr(t.getAll());const r=[];return Ra(t,s=>r.push(s.value)).then(()=>r)})}function pS(o=ui()){return o("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([Lr(t.getAllKeys()),Lr(t.getAll())]).then(([s,u])=>s.map((f,g)=>[f,u[g]]));const r=[];return o("readonly",s=>Ra(s,u=>r.push([u.key,u.value])).then(()=>r))})}const Rp=o=>JSON.stringify(o,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),Ap=o=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=o.replace(t,'$1"$2n"$3');return JSON.parse(r,(s,u)=>typeof u=="string"&&u.match(/^\d+n$/)?BigInt(u.substring(0,u.length-1)):u)};function ns(o){if(typeof o!="string")throw new Error(`Cannot safe json parse value of type ${typeof o}`);try{return Ap(o)}catch{return o}}function mn(o){return typeof o=="string"?o:Rp(o)||""}function gS(o){return o}const Cp="idb-keyval";var Tp=(o={})=>{const t=o.base&&o.base.length>0?`${o.base}:`:"",r=u=>t+u;let s;return o.dbName&&o.storeName&&(s=Uu(o.dbName,o.storeName)),{name:Cp,options:o,async hasItem(u){return!(typeof await zu(r(u),s)>"u")},async getItem(u){return await zu(r(u),s)??null},setItem(u,f){return xp(r(u),f,s)},removeItem(u){return Sp(r(u),s)},getKeys(){return Op(s)},clear(){return Pp(s)}}};const Np="WALLET_CONNECT_V2_INDEXED_DB",Dp="keyvaluestorage";class Lp{constructor(){this.indexedDb=Ip({driver:Tp({dbName:Np,storeName:Dp})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const r=await this.indexedDb.getItem(t);if(r!==null)return r}async setItem(t,r){await this.indexedDb.setItem(t,mn(r))}async removeItem(t){await this.indexedDb.removeItem(t)}}var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof L.g<"u"?L.g:typeof self<"u"?self:{},Zs={exports:{}};(function(){let o;function t(){}o=t,o.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},o.prototype.setItem=function(r,s){this[r]=String(s)},o.prototype.removeItem=function(r){delete this[r]},o.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},o.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},o.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Aa<"u"&&Aa.localStorage?Zs.exports=Aa.localStorage:typeof window<"u"&&window.localStorage?Zs.exports=window.localStorage:Zs.exports=new t})();function Fp(o){var t;return[o[0],ns((t=o[1])!=null?t:"")]}class Mp{constructor(){this.localStorage=Zs.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Fp)}async getItem(t){const r=this.localStorage.getItem(t);if(r!==null)return ns(r)}async setItem(t,r){this.localStorage.setItem(t,mn(r))}async removeItem(t){this.localStorage.removeItem(t)}}const jp="wc_storage_version",Bu=1,$p=async(o,t,r)=>{const s=jp,u=await t.getItem(s);if(u&&u>=Bu){r(t);return}const f=await o.getKeys();if(!f.length){r(t);return}const g=[];for(;f.length;){const _=f.shift();if(!_)continue;const A=_.toLowerCase();if(A.includes("wc@")||A.includes("walletconnect")||A.includes("wc_")||A.includes("wallet_connect")){const w=await o.getItem(_);await t.setItem(_,w),g.push(_)}}await t.setItem(s,Bu),r(t),Up(o,g)},Up=async(o,t)=>{t.length&&t.forEach(async r=>{await o.removeItem(r)})};class zp{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new Mp;this.storage=t;try{const r=new Lp;$p(t,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,r){return await this.initialize(),this.storage.setItem(t,r)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),t())},20)})}}var ss=L(37875),ke=L(71315),Fn=L(36900);class Bp extends Fn.q{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class yS{constructor(t,r,s){this.core=t,this.logger=r}}class qp extends Fn.q{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Hp{constructor(t,r){this.logger=t,this.core=r}}class Kp extends Fn.q{constructor(t,r){super(),this.relayer=t,this.logger=r}}class kp extends Fn.q{constructor(t){super()}}class Vp{constructor(t,r,s,u){this.core=t,this.logger=r,this.name=s}}class vS{constructor(){this.map=new Map}}class Wp extends Fn.q{constructor(t,r){super(),this.relayer=t,this.logger=r}}class mS{constructor(t,r){this.core=t,this.logger=r}}class Gp extends Fn.q{constructor(t,r){super(),this.core=t,this.logger=r}}class wS{constructor(t,r){this.logger=t,this.core=r}}class Jp{constructor(t,r){this.projectId=t,this.logger=r}}class _S extends null{constructor(){super()}}class Qp{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class bS extends null{constructor(){super()}}class Yp{constructor(t){this.client=t}}var qu=L(61326);const Xp="EdDSA",Zp="JWT",Hu=".",Ku="base64url",eg="utf8",tg="utf8",rg=":",ig="did",ng="key",ku="base58btc",sg="z",og="K36",ES=32,ag=32;var cg=L(22772),Ca=L(89682),Ta=L(37573);function eo(o){return safeJsonParse(toString(fromString(o,JWT_ENCODING),JSON_ENCODING))}function to(o){return(0,Ca.B)((0,Ta.m)(mn(o),eg),Ku)}function Vu(o){const t=(0,Ta.m)(og,ku),r=sg+(0,Ca.B)((0,cg.z)([t,o]),ku);return[ig,ng,r].join(rg)}function IS(o){const[t,r,s]=o.split(DID_DELIMITER);if(t!==DID_PREFIX||r!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(s.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const f=fromString(s.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(f.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const _=f.slice(2);if(_.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return _}function ug(o){return(0,Ca.B)(o,Ku)}function hg(o){return fromString(o,JWT_ENCODING)}function lg(o){return(0,Ta.m)([to(o.header),to(o.payload)].join(Hu),tg)}function xS(o){const t=toString(o,DATA_ENCODING).split(JWT_DELIMITER),r=eo(t[0]),s=eo(t[1]);return{header:r,payload:s}}function fg(o){return[to(o.header),to(o.payload),ug(o.signature)].join(Hu)}function SS(o){const t=o.split(JWT_DELIMITER),r=eo(t[0]),s=eo(t[1]),u=hg(t[2]),f=fromString(t.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:r,payload:s,signature:u,data:f}}function Wu(o=(0,J.randomBytes)(ag)){return qu._w(o)}async function dg(o,t,r,s,u=(0,Z.fromMiliseconds)(Date.now())){const f={alg:Xp,typ:Zp},g=Vu(s.publicKey),_=u+r,A={iss:g,sub:o,aud:t,iat:u,exp:_},w=lg({header:f,payload:A}),C=qu.Xx(s.secretKey,w);return fg({header:f,payload:A,signature:C})}async function PS(o){const{header:t,payload:r,data:s,signature:u}=decodeJWT(o);if(t.alg!==JWT_IRIDIUM_ALG||t.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const f=decodeIss(r.iss);return ed25519.verify(f,s,u)}var OS=L(42995);const pg="PARSE_ERROR",gg="INVALID_REQUEST",yg="METHOD_NOT_FOUND",vg="INVALID_PARAMS",Gu="INTERNAL_ERROR",Na="SERVER_ERROR",mg=[-32700,-32600,-32601,-32602,-32603],RS=null,os={[pg]:{code:-32700,message:"Parse error"},[gg]:{code:-32600,message:"Invalid Request"},[yg]:{code:-32601,message:"Method not found"},[vg]:{code:-32602,message:"Invalid params"},[Gu]:{code:-32603,message:"Internal error"},[Na]:{code:-32e3,message:"Server error"}},Ju=Na;function AS(o){return o<=SERVER_ERROR_CODE_RANGE[0]&&o>=SERVER_ERROR_CODE_RANGE[1]}function Qu(o){return mg.includes(o)}function wg(o){return typeof o=="number"}function Yu(o){return Object.keys(os).includes(o)?os[o]:os[Ju]}function Xu(o){const t=Object.values(os).find(r=>r.code===o);return t||os[Ju]}function CS(o){if(typeof o.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof o.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!wg(o.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${o.error.code}`};if(Qu(o.error.code)){const t=Xu(o.error.code);if(t.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&o.error.message===t.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${o.error.code}`}}return{valid:!0}}function Zu(o,t,r){return o.message.includes("getaddrinfo ENOTFOUND")||o.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):o}var _g=L(88497);const TS=null;function Da(o=3){const t=Date.now()*Math.pow(10,o),r=Math.floor(Math.random()*Math.pow(10,o));return t+r}function eh(o=6){return BigInt(Da(o))}function Mn(o,t,r){return{id:r||Da(),jsonrpc:"2.0",method:o,params:t}}function La(o,t){return{id:o,jsonrpc:"2.0",result:t}}function ro(o,t,r){return{id:o,jsonrpc:"2.0",error:bg(t,r)}}function bg(o,t){return typeof o>"u"?Yu(Gu):(typeof o=="string"&&(o=Object.assign(Object.assign({},Yu(Na)),{message:o})),typeof t<"u"&&(o.data=t),Qu(o.code)&&(o=Xu(o.code)),o)}class Eg{}class NS extends null{constructor(t){super()}}class Ig extends Eg{constructor(){super()}}class xg extends Ig{constructor(t){super()}}const Sg="^https?:",Pg="^wss?:";function Og(o){const t=o.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function th(o,t){const r=Og(o);return typeof r>"u"?!1:new RegExp(t).test(r)}function rh(o){return th(o,Sg)}function ih(o){return th(o,Pg)}function Rg(o){return new RegExp("wss?://localhost(:d{2,5})?").test(o)}function nh(o){return typeof o=="object"&&"id"in o&&"jsonrpc"in o&&o.jsonrpc==="2.0"}function Fa(o){return nh(o)&&"method"in o}function io(o){return nh(o)&&(Fi(o)||hi(o))}function Fi(o){return"result"in o}function hi(o){return"error"in o}function DS(o){return"error"in o&&o.valid===!1}class Mi extends xg{constructor(t){super(t),this.events=new G.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Mn(t.method,t.params||[],t.id||eh().toString()),r)}async requestStrict(t,r){return new Promise(async(s,u)=>{if(!this.connection.connected)try{await this.open()}catch(f){u(f)}this.events.on(`${t.id}`,f=>{hi(f)?u(f.error):s(f.result)});try{await this.connection.send(t,r)}catch(f){u(f)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),io(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var LS=null,FS=null;const Ag=()=>typeof WebSocket<"u"?WebSocket:typeof L.g<"u"&&typeof L.g.WebSocket<"u"?L.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:L(85783),Cg=()=>typeof WebSocket<"u"||typeof L.g<"u"&&typeof L.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",sh=o=>o.split("?")[0],oh=10,Tg=Ag();class Ng{constructor(t){if(this.url=t,this.events=new G.EventEmitter,this.registering=!1,!ih(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(mn(t))}catch(r){this.onError(t.id,r)}}register(t=this.url){if(!ih(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,u)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),u(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return u(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const u=new URLSearchParams(t).get("origin"),f=(0,_g.isReactNative)()?{headers:{origin:u}}:{rejectUnauthorized:!Rg(t)},g=new Tg(t,[],f);Cg()?g.onerror=_=>{const A=_;s(this.emitError(A.error))}:g.on("error",_=>{s(this.emitError(_))}),g.onopen=()=>{this.onOpen(g),r(g)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?ns(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),u=s.message||s.toString(),f=ro(t,u);this.events.emit("payload",f)}parseError(t,r=this.url){return Zu(t,sh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>oh&&this.events.setMaxListeners(oh)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for host: ${sh(this.url)}`));return this.events.emit("register_error",r),r}}var Dg=L(5899),Lg=L.n(Dg);function Fg(o,t){if(o.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var u=0;u<o.length;u++){var f=o.charAt(u),g=f.charCodeAt(0);if(r[g]!==255)throw new TypeError(f+" is ambiguous");r[g]=u}var _=o.length,A=o.charAt(0),w=Math.log(_)/Math.log(256),C=Math.log(256)/Math.log(_);function N(Y){if(Y instanceof Uint8Array||(ArrayBuffer.isView(Y)?Y=new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):Array.isArray(Y)&&(Y=Uint8Array.from(Y))),!(Y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Y.length===0)return"";for(var me=0,Ce=0,Ve=0,Gt=Y.length;Ve!==Gt&&Y[Ve]===0;)Ve++,me++;for(var Ge=(Gt-Ve)*C+1>>>0,$e=new Uint8Array(Ge);Ve!==Gt;){for(var Ye=Y[Ve],Jt=0,Qt=Ge-1;(Ye!==0||Jt<Ce)&&Qt!==-1;Qt--,Jt++)Ye+=256*$e[Qt]>>>0,$e[Qt]=Ye%_>>>0,Ye=Ye/_>>>0;if(Ye!==0)throw new Error("Non-zero carry");Ce=Jt,Ve++}for(var Sr=Ge-Ce;Sr!==Ge&&$e[Sr]===0;)Sr++;for(var tn=A.repeat(me);Sr<Ge;++Sr)tn+=o.charAt($e[Sr]);return tn}function B(Y){if(typeof Y!="string")throw new TypeError("Expected String");if(Y.length===0)return new Uint8Array;var me=0;if(Y[me]!==" "){for(var Ce=0,Ve=0;Y[me]===A;)Ce++,me++;for(var Gt=(Y.length-me)*w+1>>>0,Ge=new Uint8Array(Gt);Y[me];){var $e=r[Y.charCodeAt(me)];if($e===255)return;for(var Ye=0,Jt=Gt-1;($e!==0||Ye<Ve)&&Jt!==-1;Jt--,Ye++)$e+=_*Ge[Jt]>>>0,Ge[Jt]=$e%256>>>0,$e=$e/256>>>0;if($e!==0)throw new Error("Non-zero carry");Ve=Ye,me++}if(Y[me]!==" "){for(var Qt=Gt-Ve;Qt!==Gt&&Ge[Qt]===0;)Qt++;for(var Sr=new Uint8Array(Ce+(Gt-Qt)),tn=Ce;Qt!==Gt;)Sr[tn++]=Ge[Qt++];return Sr}}}function ce(Y){var me=B(Y);if(me)return me;throw new Error(`Non-${t} character`)}return{encode:N,decodeUnsafe:B,decode:ce}}var Mg=Fg,jg=Mg;const ah=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")},$g=o=>new TextEncoder().encode(o),Ug=o=>new TextDecoder().decode(o);class zg{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Bg{constructor(t,r,s){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return ch(this,t)}}class qg{constructor(t){this.decoders=t}or(t){return ch(this,t)}decode(t){const r=t[0],s=this.decoders[r];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ch=(o,t)=>new qg({...o.decoders||{[o.prefix]:o},...t.decoders||{[t.prefix]:t}});class Hg{constructor(t,r,s,u){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=u,this.encoder=new zg(t,r,s),this.decoder=new Bg(t,r,u)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const no=({name:o,prefix:t,encode:r,decode:s})=>new Hg(o,t,r,s),as=({prefix:o,name:t,alphabet:r})=>{const{encode:s,decode:u}=jg(r,t);return no({prefix:o,name:t,encode:s,decode:f=>ah(u(f))})},Kg=(o,t,r,s)=>{const u={};for(let C=0;C<t.length;++C)u[t[C]]=C;let f=o.length;for(;o[f-1]==="=";)--f;const g=new Uint8Array(f*r/8|0);let _=0,A=0,w=0;for(let C=0;C<f;++C){const N=u[o[C]];if(N===void 0)throw new SyntaxError(`Non-${s} character`);A=A<<r|N,_+=r,_>=8&&(_-=8,g[w++]=255&A>>_)}if(_>=r||255&A<<8-_)throw new SyntaxError("Unexpected end of data");return g},kg=(o,t,r)=>{const s=t[t.length-1]==="=",u=(1<<r)-1;let f="",g=0,_=0;for(let A=0;A<o.length;++A)for(_=_<<8|o[A],g+=8;g>r;)g-=r,f+=t[u&_>>g];if(g&&(f+=t[u&_<<r-g]),s)for(;f.length*r&7;)f+="=";return f},vr=({name:o,prefix:t,bitsPerChar:r,alphabet:s})=>no({prefix:t,name:o,encode(u){return kg(u,s,r)},decode(u){return Kg(u,s,r,o)}}),Vg=no({prefix:"\0",name:"identity",encode:o=>Ug(o),decode:o=>$g(o)});var Wg=Object.freeze({__proto__:null,identity:Vg});const Gg=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jg=Object.freeze({__proto__:null,base2:Gg});const Qg=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yg=Object.freeze({__proto__:null,base8:Qg});const Xg=as({prefix:"9",name:"base10",alphabet:"0123456789"});var Zg=Object.freeze({__proto__:null,base10:Xg});const ey=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ty=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ry=Object.freeze({__proto__:null,base16:ey,base16upper:ty});const iy=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ny=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),sy=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oy=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ay=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cy=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),uy=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hy=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ly=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var fy=Object.freeze({__proto__:null,base32:iy,base32upper:ny,base32pad:sy,base32padupper:oy,base32hex:ay,base32hexupper:cy,base32hexpad:uy,base32hexpadupper:hy,base32z:ly});const dy=as({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),py=as({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var gy=Object.freeze({__proto__:null,base36:dy,base36upper:py});const yy=as({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vy=as({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var my=Object.freeze({__proto__:null,base58btc:yy,base58flickr:vy});const wy=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_y=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),by=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ey=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Iy=Object.freeze({__proto__:null,base64:wy,base64pad:_y,base64url:by,base64urlpad:Ey});const uh=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),xy=uh.reduce((o,t,r)=>(o[r]=t,o),[]),Sy=uh.reduce((o,t,r)=>(o[t.codePointAt(0)]=r,o),[]);function Py(o){return o.reduce((t,r)=>(t+=xy[r],t),"")}function Oy(o){const t=[];for(const r of o){const s=Sy[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Ry=no({prefix:"\u{1F680}",name:"base256emoji",encode:Py,decode:Oy});var Ay=Object.freeze({__proto__:null,base256emoji:Ry}),Cy=lh,hh=128,Ty=127,Ny=~Ty,Dy=Math.pow(2,31);function lh(o,t,r){t=t||[],r=r||0;for(var s=r;o>=Dy;)t[r++]=o&255|hh,o/=128;for(;o&Ny;)t[r++]=o&255|hh,o>>>=7;return t[r]=o|0,lh.bytes=r-s+1,t}var Ly=Ma,Fy=128,fh=127;function Ma(o,s){var r=0,s=s||0,u=0,f=s,g,_=o.length;do{if(f>=_)throw Ma.bytes=0,new RangeError("Could not decode varint");g=o[f++],r+=u<28?(g&fh)<<u:(g&fh)*Math.pow(2,u),u+=7}while(g>=Fy);return Ma.bytes=f-s,r}var My=Math.pow(2,7),jy=Math.pow(2,14),$y=Math.pow(2,21),Uy=Math.pow(2,28),zy=Math.pow(2,35),By=Math.pow(2,42),qy=Math.pow(2,49),Hy=Math.pow(2,56),Ky=Math.pow(2,63),ky=function(o){return o<My?1:o<jy?2:o<$y?3:o<Uy?4:o<zy?5:o<By?6:o<qy?7:o<Hy?8:o<Ky?9:10},Vy={encode:Cy,decode:Ly,encodingLength:ky},dh=Vy;const ph=(o,t,r=0)=>(dh.encode(o,t,r),t),gh=o=>dh.encodingLength(o),ja=(o,t)=>{const r=t.byteLength,s=gh(o),u=s+gh(r),f=new Uint8Array(u+r);return ph(o,f,0),ph(r,f,s),f.set(t,u),new Wy(o,r,t,f)};class Wy{constructor(t,r,s,u){this.code=t,this.size=r,this.digest=s,this.bytes=u}}const yh=({name:o,code:t,encode:r})=>new Gy(o,t,r);class Gy{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?ja(this.code,r):r.then(s=>ja(this.code,s))}else throw Error("Unknown type, must be binary type")}}const vh=o=>async t=>new Uint8Array(await crypto.subtle.digest(o,t)),Jy=yh({name:"sha2-256",code:18,encode:vh("SHA-256")}),Qy=yh({name:"sha2-512",code:19,encode:vh("SHA-512")});var Yy=Object.freeze({__proto__:null,sha256:Jy,sha512:Qy});const mh=0,Xy="identity",wh=ah;var Zy=Object.freeze({__proto__:null,identity:{code:mh,name:Xy,encode:wh,digest:o=>ja(mh,wh(o))}});new TextEncoder,new TextDecoder;const _h={...Wg,...Jg,...Yg,...Zg,...ry,...fy,...gy,...my,...Iy,...Ay};({...Yy,...Zy});function bh(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}function ev(o=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?bh(globalThis.Buffer.allocUnsafe(o)):new Uint8Array(o)}function Eh(o,t,r,s){return{name:o,prefix:t,encoder:{name:o,prefix:t,encode:r},decoder:{decode:s}}}const Ih=Eh("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),$a=Eh("ascii","a",o=>{let t="a";for(let r=0;r<o.length;r++)t+=String.fromCharCode(o[r]);return t},o=>{o=o.substring(1);const t=ev(o.length);for(let r=0;r<o.length;r++)t[r]=o.charCodeAt(r);return t}),tv={utf8:Ih,"utf-8":Ih,hex:_h.base16,latin1:$a,ascii:$a,binary:$a,..._h};function rv(o,t="utf8"){const r=tv[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?bh(globalThis.Buffer.from(o,"utf-8")):r.decoder.decode(`${r.prefix}${o}`)}const xh="wc",iv=2,Ua="core",Zi=`${xh}@2:${Ua}:`,nv={name:Ua,logger:"error"},sv={database:":memory:"},ov="crypto",Sh="client_ed25519_seed",av=Z.ONE_DAY,cv="keychain",uv="0.3",hv="messages",lv="0.3",fv=Z.SIX_HOURS,dv="publisher",Ph="irn",pv="error",Oh="wss://relay.walletconnect.com",Rh="wss://relay.walletconnect.org",gv="relayer",_r={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},yv="_subscription",ji={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},vv=Z.ONE_SECOND,$S={database:":memory:"},mv="2.10.6",wv=1e4,_v="0.3",bv="WALLETCONNECT_CLIENT_ID",li={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},US=null,Ev="subscription",Iv="0.3",xv=Z.FIVE_SECONDS*1e3,Sv="pairing",Pv="0.3",zS=null,cs={wc_pairingDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:0},res:{ttl:Z.ONE_DAY,prompt:!1,tag:0}}},us={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},bi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Ov="history",Rv="0.3",Av="expirer",Gr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Cv="0.3",BS=null,za="verify-api",jn="https://verify.walletconnect.com",Ba="https://verify.walletconnect.org",Tv=[jn,Ba];class Nv{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=cv,this.version=uv,this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,u)=>{this.isInitialized(),this.keychain.set(s,u),await this.persist()},this.get=s=>{this.isInitialized();const u=this.keychain.get(s);if(typeof u>"u"){const{message:f}=z("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(f)}return u},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=(0,ke.generateChildLogger)(r,this.name)}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,js(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?$s(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Dv{constructor(t,r,s){this.core=t,this.logger=r,this.name=ov,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=u=>(this.isInitialized(),this.keychain.has(u)),this.getClientId=async()=>{this.isInitialized();const u=await this.getClientSeed(),f=Wu(u);return Vu(f.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const u=wt();return this.setPrivateKey(u.publicKey,u.privateKey)},this.signJWT=async u=>{this.isInitialized();const f=await this.getClientSeed(),g=Wu(f),_=Ze();return await dg(_,u,av,g)},this.generateSharedKey=(u,f,g)=>{this.isInitialized();const _=this.getPrivateKey(u),A=er(_,f);return this.setSymKey(A,g)},this.setSymKey=async(u,f)=>{this.isInitialized();const g=f||or(u);return await this.keychain.set(g,u),g},this.deleteKeyPair=async u=>{this.isInitialized(),await this.keychain.del(u)},this.deleteSymKey=async u=>{this.isInitialized(),await this.keychain.del(u)},this.encode=async(u,f,g)=>{this.isInitialized();const _=mi(g),A=mn(f);if(Oi(_)){const B=_.senderPublicKey,ce=_.receiverPublicKey;u=await this.generateSharedKey(B,ce)}const w=this.getSymKey(u),{type:C,senderPublicKey:N}=_;return Ir({type:C,symKey:w,message:A,senderPublicKey:N})},this.decode=async(u,f,g)=>{this.isInitialized();const _=ni(f,g);if(Oi(_)){const A=_.receiverPublicKey,w=_.senderPublicKey;u=await this.generateSharedKey(A,w)}try{const A=this.getSymKey(u),w=Ar({symKey:A,encoded:f});return ns(w)}catch(A){this.logger.error(`Failed to decode message from topic: '${u}', clientId: '${await this.getClientId()}'`),this.logger.error(A)}},this.getPayloadType=u=>{const f=tr(u);return jt(f.type)},this.getPayloadSenderPublicKey=u=>{const f=tr(u);return f.senderPublicKey?(0,H.BB)(f.senderPublicKey,Ke):void 0},this.core=t,this.logger=(0,ke.generateChildLogger)(r,this.name),this.keychain=s||new Nv(this.core,this.logger)}get context(){return(0,ke.getLoggerContext)(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(Sh)}catch{t=Ze(),await this.keychain.set(Sh,t)}return rv(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Lv extends Hp{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=hv,this.version=lv,this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,u)=>{this.isInitialized();const f=Mt(u);let g=this.messages.get(s);return typeof g>"u"&&(g={}),typeof g[f]<"u"||(g[f]=u,this.messages.set(s,g),await this.persist()),f},this.get=s=>{this.isInitialized();let u=this.messages.get(s);return typeof u>"u"&&(u={}),u},this.has=(s,u)=>{this.isInitialized();const f=this.get(s),g=Mt(u);return typeof f[g]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=(0,ke.generateChildLogger)(t,this.name),this.core=r}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,js(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?$s(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Fv extends Kp{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new G.EventEmitter,this.name=dv,this.queue=new Map,this.publishTimeout=(0,Z.toMiliseconds)(Z.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,u,f)=>{var g;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:u,opts:f}});try{const _=(f==null?void 0:f.ttl)||fv,A=es(f),w=(f==null?void 0:f.prompt)||!1,C=(f==null?void 0:f.tag)||0,N=(f==null?void 0:f.id)||eh().toString(),B={topic:s,message:u,opts:{ttl:_,relay:A,prompt:w,tag:C,id:N}},ce=setTimeout(()=>this.queue.set(N,B),this.publishTimeout);try{await await dn(this.rpcPublish(s,u,_,A,w,C,N),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(N),this.relayer.events.emit(_r.publish,B)}catch(Y){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(g=f==null?void 0:f.internal)!=null&&g.throwOnFailedPublish)throw this.removeRequestFromQueue(N),Y;return}finally{clearTimeout(ce)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:u,opts:f}})}catch(_){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(_),_}},this.on=(s,u)=>{this.events.on(s,u)},this.once=(s,u)=>{this.events.once(s,u)},this.off=(s,u)=>{this.events.off(s,u)},this.removeListener=(s,u)=>{this.events.removeListener(s,u)},this.relayer=t,this.logger=(0,ke.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,ke.getLoggerContext)(this.logger)}rpcPublish(t,r,s,u,f,g,_){var A,w,C,N;const B={method:Dn(u.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:f,tag:g},id:_};return je((A=B.params)==null?void 0:A.prompt)&&((w=B.params)==null||delete w.prompt),je((C=B.params)==null?void 0:C.tag)&&((N=B.params)==null||delete N.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:B}),this.relayer.request(B)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:s,opts:u}=t;await this.publish(r,s,u)})}registerEventListeners(){this.relayer.core.heartbeat.on(ss.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(_r.connection_stalled);return}this.checkQueue()}),this.relayer.on(_r.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class Mv{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const u=s.filter(f=>f!==r);if(!u.length){this.map.delete(t);return}this.map.set(t,u)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var jv=Object.defineProperty,$v=Object.defineProperties,Uv=Object.getOwnPropertyDescriptors,Ah=Object.getOwnPropertySymbols,zv=Object.prototype.hasOwnProperty,Bv=Object.prototype.propertyIsEnumerable,Ch=(o,t,r)=>t in o?jv(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,hs=(o,t)=>{for(var r in t||(t={}))zv.call(t,r)&&Ch(o,r,t[r]);if(Ah)for(var r of Ah(t))Bv.call(t,r)&&Ch(o,r,t[r]);return o},qa=(o,t)=>$v(o,Uv(t));class qv extends Wp{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new Mv,this.events=new G.EventEmitter,this.name=Ev,this.version=Iv,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Zi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,u)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:u}});try{const f=es(u),g={topic:s,relay:f};this.pending.set(s,g);const _=await this.rpcSubscribe(s,f);return this.onSubscribe(_,g),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:u}}),_}catch(f){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(f),f}},this.unsubscribe=async(s,u)=>{await this.restartToComplete(),this.isInitialized(),typeof(u==null?void 0:u.id)<"u"?await this.unsubscribeById(s,u.id,u):await this.unsubscribeByTopic(s,u)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((u,f)=>{const g=new Z.Watch;g.start(this.pendingSubscriptionWatchLabel);const _=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(_),g.stop(this.pendingSubscriptionWatchLabel),u(!0)),g.elapsed(this.pendingSubscriptionWatchLabel)>=xv&&(clearInterval(_),g.stop(this.pendingSubscriptionWatchLabel),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,u)=>{this.events.on(s,u)},this.once=(s,u)=>{this.events.once(s,u)},this.off=(s,u)=>{this.events.off(s,u)},this.removeListener=(s,u)=>{this.events.removeListener(s,u)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=(0,ke.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const s=this.topicMap.get(t);await Promise.all(s.map(async u=>await this.unsubscribeById(t,u,r)))}async unsubscribeById(t,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const u=es(s);await this.rpcUnsubscribe(t,r,u);const f=Re("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,f),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(u){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(u),u}}async rpcSubscribe(t,r){const s={method:Dn(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await dn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(_r.connection_stalled)}return Mt(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,s={method:Dn(r.protocol).batchSubscribe,params:{topics:t.map(u=>u.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await dn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(_r.connection_stalled)}}rpcUnsubscribe(t,r,s){const u={method:Dn(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u}),this.relayer.request(u)}onSubscribe(t,r){this.setSubscription(t,qa(hs({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,hs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,hs({},r)),this.topicMap.set(r.topic,t),this.events.emit(li.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=z("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(li.deleted,qa(hs({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(li.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(li.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);ct(r)&&this.onBatchSubscribe(r.map((s,u)=>qa(hs({},t[u]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(ss.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(_r.connect,async()=>{await this.onConnect()}),this.relayer.on(_r.disconnect,()=>{this.onDisconnect()}),this.events.on(li.created,async t=>{const r=li.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(li.deleted,async t=>{const r=li.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var Hv=Object.defineProperty,Th=Object.getOwnPropertySymbols,Kv=Object.prototype.hasOwnProperty,kv=Object.prototype.propertyIsEnumerable,Nh=(o,t,r)=>t in o?Hv(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,Vv=(o,t)=>{for(var r in t||(t={}))Kv.call(t,r)&&Nh(o,r,t[r]);if(Th)for(var r of Th(t))kv.call(t,r)&&Nh(o,r,t[r]);return o};class Wv extends kp{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new G.EventEmitter,this.name=gv,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(_r.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(_r.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(ji.payload,this.onPayloadHandler),this.provider.on(ji.connect,this.onConnectHandler),this.provider.on(ji.disconnect,this.onDisconnectHandler),this.provider.on(ji.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?(0,ke.generateChildLogger)(t.logger,this.name):(0,ke.pino)((0,ke.getDefaultLoggerOptions)({level:t.logger||pv})),this.messages=new Lv(this.logger,t.core),this.subscriber=new qv(this,this.logger),this.publisher=new Fv(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||Oh,this.projectId=t.projectId,this.bundleId=na(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Rh}...`),await this.restartTransport(Rh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},wv)}get context(){return(0,ke.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,s){this.isInitialized(),await this.publisher.publish(t,r,s),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){var s;this.isInitialized();let u=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";if(u)return u;let f;const g=_=>{_.topic===t&&(this.subscriber.off(li.created,g),f())};return await Promise.all([new Promise(_=>{f=_,this.subscriber.on(li.created,g)}),new Promise(async _=>{u=await this.subscriber.subscribe(t,r),_()})]),u}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await dn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(li.resubscribed,()=>{r()})}),new Promise(async(r,s)=>{try{await dn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(u){s(u);return}r()})])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.provider.events.emit(ji.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Fu())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Mi(new Ng(Ai({sdkVersion:mv,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:s}=t;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(t){const{topic:r,message:s}=t;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const u=this.messages.has(r,s);return u&&this.logger.debug(`Ignoring duplicate message: ${s}`),u}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Fa(t)){if(!t.method.endsWith(yv))return;const r=t.params,{topic:s,message:u,publishedAt:f}=r.data,g={topic:s,message:u,publishedAt:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Vv({type:"event",event:r.id},g)),this.events.emit(r.id,g),await this.acknowledgePayload(t),await this.onMessageEvent(g)}else io(t)&&this.events.emit(_r.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(_r.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=La(t.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(ji.payload,this.onPayloadHandler),this.provider.off(ji.connect,this.onConnectHandler),this.provider.off(ji.disconnect,this.onDisconnectHandler),this.provider.off(ji.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(_r.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let t=await Fu();op(async r=>{this.initialized&&t!==r&&(t=r,r?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(_r.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},(0,Z.toMiliseconds)(vv)))}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Gv=Object.defineProperty,Dh=Object.getOwnPropertySymbols,Jv=Object.prototype.hasOwnProperty,Qv=Object.prototype.propertyIsEnumerable,Lh=(o,t,r)=>t in o?Gv(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,Fh=(o,t)=>{for(var r in t||(t={}))Jv.call(t,r)&&Lh(o,r,t[r]);if(Dh)for(var r of Dh(t))Qv.call(t,r)&&Lh(o,r,t[r]);return o};class so extends Vp{constructor(t,r,s,u=Zi,f=void 0){super(t,r,s,u),this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version=_v,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(g=>{this.getKey&&g!==null&&!je(g)?this.map.set(this.getKey(g),g):ci(g)?this.map.set(g.id,g):Li(g)&&this.map.set(g.topic,g)}),this.cached=[],this.initialized=!0)},this.set=async(g,_)=>{this.isInitialized(),this.map.has(g)?await this.update(g,_):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:g,value:_}),this.map.set(g,_),await this.persist())},this.get=g=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:g}),this.getData(g)),this.getAll=g=>(this.isInitialized(),g?this.values.filter(_=>Object.keys(g).every(A=>Lg()(_[A],g[A]))):this.values),this.update=async(g,_)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:g,update:_});const A=Fh(Fh({},this.getData(g)),_);this.map.set(g,A),await this.persist()},this.delete=async(g,_)=>{this.isInitialized(),this.map.has(g)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:g,reason:_}),this.map.delete(g),await this.persist())},this.logger=(0,ke.generateChildLogger)(r,this.name),this.storagePrefix=u,this.getKey=f}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:s}=z("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Yv{constructor(t,r){this.core=t,this.logger=r,this.name=Sv,this.version=Pv,this.events=new(pe()),this.initialized=!1,this.storagePrefix=Zi,this.ignoredPayloadTypes=[ft],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Ze(),u=await this.core.crypto.setSymKey(s),f=Cr(Z.FIVE_MINUTES),g={protocol:Ph},_={topic:u,expiry:f,relay:g,active:!1},A=ma({protocol:this.core.protocol,version:this.core.version,topic:u,symKey:s,relay:g});return await this.pairings.set(u,_),await this.core.relayer.subscribe(u),this.core.expirer.set(u,f),{topic:u,uri:A}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:u,symKey:f,relay:g}=Hs(s.uri);let _;if(this.pairings.keys.includes(u)&&(_=this.pairings.get(u),_.active))throw new Error(`Pairing already exists: ${u}. Please try again with a new connection URI.`);const A=Cr(Z.FIVE_MINUTES),w={topic:u,relay:g,expiry:A,active:!1};return await this.pairings.set(u,w),this.core.expirer.set(u,A),s.activatePairing&&await this.activate({topic:u}),this.events.emit(us.create,w),this.core.crypto.keychain.has(u)||(await this.core.crypto.setSymKey(f,u),await this.core.relayer.subscribe(u,{relay:g})),w},this.activate=async({topic:s})=>{this.isInitialized();const u=Cr(Z.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:u}),this.core.expirer.set(s,u)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:u}=s;if(this.pairings.keys.includes(u)){const f=await this.sendRequest(u,"wc_pairingPing",{}),{done:g,resolve:_,reject:A}=Qi();this.events.once(Ht("pairing_ping",f),({error:w})=>{w?A(w):_()}),await g()}},this.updateExpiry=async({topic:s,expiry:u})=>{this.isInitialized(),await this.pairings.update(s,{expiry:u})},this.updateMetadata=async({topic:s,metadata:u})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:u})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:u}=s;this.pairings.keys.includes(u)&&(await this.sendRequest(u,"wc_pairingDelete",Re("USER_DISCONNECTED")),await this.deletePairing(u))},this.sendRequest=async(s,u,f)=>{const g=Mn(u,f),_=await this.core.crypto.encode(s,g),A=cs[u].req;return this.core.history.set(s,g),this.core.relayer.publish(s,_,A),g.id},this.sendResult=async(s,u,f)=>{const g=La(s,f),_=await this.core.crypto.encode(u,g),A=await this.core.history.get(u,s),w=cs[A.request.method].res;await this.core.relayer.publish(u,_,w),await this.core.history.resolve(g)},this.sendError=async(s,u,f)=>{const g=ro(s,f),_=await this.core.crypto.encode(u,g),A=await this.core.history.get(u,s),w=cs[A.request.method]?cs[A.request.method].res:cs.unregistered_method.res;await this.core.relayer.publish(u,_,w),await this.core.history.resolve(g)},this.deletePairing=async(s,u)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Re("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),u?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(u=>ai(u.expiry));await Promise.all(s.map(u=>this.deletePairing(u.topic)))},this.onRelayEventRequest=s=>{const{topic:u,payload:f}=s;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(u,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(u,f);default:return this.onUnknownRpcMethodRequest(u,f)}},this.onRelayEventResponse=async s=>{const{topic:u,payload:f}=s,g=(await this.core.history.get(u,f.id)).request.method;switch(g){case"wc_pairingPing":return this.onPairingPingResponse(u,f);default:return this.onUnknownRpcMethodResponse(g)}},this.onPairingPingRequest=async(s,u)=>{const{id:f}=u;try{this.isValidPing({topic:s}),await this.sendResult(f,s,!0),this.events.emit(us.ping,{id:f,topic:s})}catch(g){await this.sendError(f,s,g),this.logger.error(g)}},this.onPairingPingResponse=(s,u)=>{const{id:f}=u;setTimeout(()=>{Fi(u)?this.events.emit(Ht("pairing_ping",f),{}):hi(u)&&this.events.emit(Ht("pairing_ping",f),{error:u.error})},500)},this.onPairingDeleteRequest=async(s,u)=>{const{id:f}=u;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(us.delete,{id:f,topic:s})}catch(g){await this.sendError(f,s,g),this.logger.error(g)}},this.onUnknownRpcMethodRequest=async(s,u)=>{const{id:f,method:g}=u;try{if(this.registeredMethods.includes(g))return;const _=Re("WC_METHOD_UNSUPPORTED",g);await this.sendError(f,s,_),this.logger.error(_)}catch(_){await this.sendError(f,s,_),this.logger.error(_)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Re("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var u;if(!Nr(s)){const{message:g}=z("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(g)}if(!_i(s.uri)){const{message:g}=z("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(g)}const f=Hs(s.uri);if(!((u=f==null?void 0:f.relay)!=null&&u.protocol)){const{message:g}=z("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(g)}if(!(f!=null&&f.symKey)){const{message:g}=z("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(g)}},this.isValidPing=async s=>{if(!Nr(s)){const{message:f}=z("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(f)}const{topic:u}=s;await this.isValidPairingTopic(u)},this.isValidDisconnect=async s=>{if(!Nr(s)){const{message:f}=z("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(f)}const{topic:u}=s;await this.isValidPairingTopic(u)},this.isValidPairingTopic=async s=>{if(!Qe(s,!1)){const{message:u}=z("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(u)}if(!this.pairings.keys.includes(s)){const{message:u}=z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(u)}if(ai(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:u}=z("EXPIRED",`pairing topic: ${s}`);throw new Error(u)}},this.core=t,this.logger=(0,ke.generateChildLogger)(r,this.name),this.pairings=new so(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,ke.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(_r.message,async t=>{const{topic:r,message:s}=t;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const u=await this.core.crypto.decode(r,s);try{Fa(u)?(this.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):io(u)&&(await this.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.core.history.delete(r,u.id))}catch(f){this.logger.error(f)}})}registerExpirerEvents(){this.core.expirer.on(Gr.expired,async t=>{const{topic:r}=Yi(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(us.expire,{topic:r}))})}}class Xv extends qp{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new G.EventEmitter,this.name=Ov,this.version=Rv,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,u,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:u,chainId:f}),this.records.has(u.id))return;const g={id:u.id,topic:s,request:{method:u.method,params:u.params||null},chainId:f,expiry:Cr(Z.THIRTY_DAYS)};this.records.set(g.id,g),this.events.emit(bi.created,g)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const u=await this.getRecord(s.id);typeof u.response>"u"&&(u.response=hi(s)?{error:s.error}:{result:s.result},this.records.set(u.id,u),this.events.emit(bi.updated,u))},this.get=async(s,u)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:u}),await this.getRecord(u)),this.delete=(s,u)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:u}),this.values.forEach(f=>{if(f.topic===s){if(typeof u<"u"&&f.id!==u)return;this.records.delete(f.id),this.events.emit(bi.deleted,f)}})},this.exists=async(s,u)=>(this.isInitialized(),this.records.has(u)?(await this.getRecord(u)).topic===s:!1),this.on=(s,u)=>{this.events.on(s,u)},this.once=(s,u)=>{this.events.once(s,u)},this.off=(s,u)=>{this.events.off(s,u)},this.removeListener=(s,u)=>{this.events.removeListener(s,u)},this.logger=(0,ke.generateChildLogger)(r,this.name)}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:Mn(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=z("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(bi.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(bi.created,t=>{const r=bi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(bi.updated,t=>{const r=bi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(bi.deleted,t=>{const r=bi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(ss.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{(0,Z.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Zv extends Gp{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new G.EventEmitter,this.name=Av,this.version=Cv,this.cached=[],this.initialized=!1,this.storagePrefix=Zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const u=this.formatTarget(s);return typeof this.getExpiration(u)<"u"}catch{return!1}},this.set=(s,u)=>{this.isInitialized();const f=this.formatTarget(s),g={target:f,expiry:u};this.expirations.set(f,g),this.checkExpiry(f,g),this.events.emit(Gr.created,{target:f,expiration:g})},this.get=s=>{this.isInitialized();const u=this.formatTarget(s);return this.getExpiration(u)},this.del=s=>{if(this.isInitialized(),this.has(s)){const u=this.formatTarget(s),f=this.getExpiration(u);this.expirations.delete(u),this.events.emit(Gr.deleted,{target:u,expiration:f})}},this.on=(s,u)=>{this.events.on(s,u)},this.once=(s,u)=>{this.events.once(s,u)},this.off=(s,u)=>{this.events.off(s,u)},this.removeListener=(s,u)=>{this.events.removeListener(s,u)},this.logger=(0,ke.generateChildLogger)(r,this.name)}get context(){return(0,ke.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return Nn(t);if(typeof t=="number")return la(t);const{message:r}=z("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Gr.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=z("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=z("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;(0,Z.toMiliseconds)(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Gr.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(ss.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Gr.created,t=>{const r=Gr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Gr.expired,t=>{const r=Gr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Gr.deleted,t=>{const r=Gr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}}}class e0 extends Jp{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=za,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||St()||!Pt())return;const u=this.getVerifyUrl(s==null?void 0:s.verifyUrl);this.verifyUrl!==u&&this.removeIframe(),this.verifyUrl=u;try{await this.createIframe()}catch(f){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(f)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Ba;try{await this.createIframe()}catch(f){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(f),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const u=this.getVerifyUrl(s==null?void 0:s.verifyUrl);let f;try{f=await this.fetchAttestation(s.attestationId,u)}catch(g){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${u}`),this.logger.info(g),f=await this.fetchAttestation(s.attestationId,Ba)}return f},this.fetchAttestation=async(s,u)=>{this.logger.info(`resolving attestation: ${s} from url: ${u}`);const f=this.startAbortTimer(Z.ONE_SECOND*2),g=await fetch(`${u}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(f),g.status===200?await g.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var u;try{if(!this.iframe)return;(u=this.iframe.contentWindow)==null||u.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const u=f=>{f.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",u),s())};await Promise.race([new Promise(f=>{if(document.getElementById(za))return f();window.addEventListener("message",u);const g=document.createElement("iframe");g.id=za,g.src=`${this.verifyUrl}/${this.projectId}`,g.style.display="none",document.body.append(g),this.iframe=g,s=f}),new Promise((f,g)=>setTimeout(()=>{window.removeEventListener("message",u),g("verify iframe load timeout")},(0,Z.toMiliseconds)(Z.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let u=s||jn;return Tv.includes(u)||(this.logger.info(`verify url: ${u}, not included in trusted list, assigning default: ${jn}`),u=jn),u},this.logger=(0,ke.generateChildLogger)(r,this.name),this.verifyUrl=jn,this.abortController=new AbortController,this.isDevEnv=qt()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,ke.getLoggerContext)(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,Z.toMiliseconds)(t))}}var t0=Object.defineProperty,Mh=Object.getOwnPropertySymbols,r0=Object.prototype.hasOwnProperty,i0=Object.prototype.propertyIsEnumerable,jh=(o,t,r)=>t in o?t0(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,$h=(o,t)=>{for(var r in t||(t={}))r0.call(t,r)&&jh(o,r,t[r]);if(Mh)for(var r of Mh(t))i0.call(t,r)&&jh(o,r,t[r]);return o};class Ha extends Bp{constructor(t){super(t),this.protocol=xh,this.version=iv,this.name=Ua,this.events=new G.EventEmitter,this.initialized=!1,this.on=(s,u)=>this.events.on(s,u),this.once=(s,u)=>this.events.once(s,u),this.off=(s,u)=>this.events.off(s,u),this.removeListener=(s,u)=>this.events.removeListener(s,u),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||Oh,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:(0,ke.pino)((0,ke.getDefaultLoggerOptions)({level:(t==null?void 0:t.logger)||nv.logger}));this.logger=(0,ke.generateChildLogger)(r,this.name),this.heartbeat=new ss.HeartBeat,this.crypto=new Dv(this,this.logger,t==null?void 0:t.keychain),this.history=new Xv(this,this.logger),this.expirer=new Zv(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new zp($h($h({},sv),t==null?void 0:t.storageOptions)),this.relayer=new Wv({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Yv(this,this.logger),this.verify=new e0(this.projectId||"",this.logger)}static async init(t){const r=new Ha(t);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(bv,s),r}get context(){return(0,ke.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const n0=Ha,Uh="wc",zh=2,Bh="client",Ka=`${Uh}@${zh}:${Bh}:`,ka={name:Bh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},qS={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},HS={database:":memory:"},qh="WALLETCONNECT_DEEPLINK_CHOICE",KS={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},kS="history",VS="0.3",s0="proposal",WS=null,Hh="Proposal expired",o0="session",oo=Z.SEVEN_DAYS,a0="engine",ls={wc_sessionPropose:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Z.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Z.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Z.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Z.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Z.THIRTY_SECONDS,prompt:!1,tag:1115}}},Va={min:Z.FIVE_MINUTES,max:Z.SEVEN_DAYS},$i={idle:"IDLE",active:"ACTIVE"},c0="request",u0=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var h0=Object.defineProperty,l0=Object.defineProperties,f0=Object.getOwnPropertyDescriptors,Kh=Object.getOwnPropertySymbols,d0=Object.prototype.hasOwnProperty,p0=Object.prototype.propertyIsEnumerable,kh=(o,t,r)=>t in o?h0(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,Fr=(o,t)=>{for(var r in t||(t={}))d0.call(t,r)&&kh(o,r,t[r]);if(Kh)for(var r of Kh(t))p0.call(t,r)&&kh(o,r,t[r]);return o},fs=(o,t)=>l0(o,f0(t));class g0 extends Yp{constructor(t){super(t),this.name=a0,this.events=new(pe()),this.initialized=!1,this.ignoredPayloadTypes=[ft],this.requestQueue={state:$i.idle,queue:[]},this.sessionRequestQueue={state:$i.idle,queue:[]},this.requestQueueDelay=Z.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ls)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,Z.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const s=fs(Fr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:u,requiredNamespaces:f,optionalNamespaces:g,sessionProperties:_,relays:A}=s;let w=u,C,N=!1;if(w&&(N=this.client.core.pairing.pairings.get(w).active),!w||!N){const{topic:Ge,uri:$e}=await this.client.core.pairing.create();w=Ge,C=$e}const B=await this.client.core.crypto.generateKeyPair(),ce=Fr({requiredNamespaces:f,optionalNamespaces:g,relays:A??[{protocol:Ph}],proposer:{publicKey:B,metadata:this.client.metadata}},_&&{sessionProperties:_}),{reject:Y,resolve:me,done:Ce}=Qi(Z.FIVE_MINUTES,Hh);if(this.events.once(Ht("session_connect"),async({error:Ge,session:$e})=>{if(Ge)Y(Ge);else if($e){$e.self.publicKey=B;const Ye=fs(Fr({},$e),{requiredNamespaces:$e.requiredNamespaces,optionalNamespaces:$e.optionalNamespaces});await this.client.session.set($e.topic,Ye),await this.setExpiry($e.topic,$e.expiry),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:$e.peer.metadata}),me(Ye)}}),!w){const{message:Ge}=z("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(Ge)}const Ve=await this.sendRequest({topic:w,method:"wc_sessionPropose",params:ce}),Gt=Cr(Z.FIVE_MINUTES);return await this.setProposal(Ve,Fr({id:Ve,expiry:Gt},ce)),{uri:C,approval:Ce}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:u,namespaces:f,sessionProperties:g}=r,_=this.client.proposal.get(s);let{pairingTopic:A,proposer:w,requiredNamespaces:C,optionalNamespaces:N}=_;A=A||"",Rt(C)||(C=Ea(f,"approve()"));const B=await this.client.core.crypto.generateKeyPair(),ce=w.publicKey,Y=await this.client.core.crypto.generateSharedKey(B,ce);A&&s&&(await this.client.core.pairing.updateMetadata({topic:A,metadata:w.metadata}),await this.sendResult({id:s,topic:A,result:{relay:{protocol:u??"irn"},responderPublicKey:B}}),await this.client.proposal.delete(s,Re("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:A}));const me=Fr({relay:{protocol:u??"irn"},namespaces:f,requiredNamespaces:C,optionalNamespaces:N,pairingTopic:A,controller:{publicKey:B,metadata:this.client.metadata},expiry:Cr(oo)},g&&{sessionProperties:g});await this.client.core.relayer.subscribe(Y),await this.sendRequest({topic:Y,method:"wc_sessionSettle",params:me,throwOnFailedPublish:!0});const Ce=fs(Fr({},me),{topic:Y,pairingTopic:A,acknowledged:!1,self:me.controller,peer:{publicKey:w.publicKey,metadata:w.metadata},controller:B});return await this.client.session.set(Y,Ce),await this.setExpiry(Y,Cr(oo)),{topic:Y,acknowledged:()=>new Promise(Ve=>setTimeout(()=>Ve(this.client.session.get(Y)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:s,reason:u}=r,{pairingTopic:f}=this.client.proposal.get(s);f&&(await this.sendError(s,f,u),await this.client.proposal.delete(s,Re("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:u}=r,f=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:u}}),{done:g,resolve:_,reject:A}=Qi();return this.events.once(Ht("session_update",f),({error:w})=>{w?A(w):_()}),await this.client.session.update(s,{namespaces:u}),{acknowledged:g}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,u=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:f,resolve:g,reject:_}=Qi();return this.events.once(Ht("session_extend",u),({error:A})=>{A?_(A):g()}),await this.setExpiry(s,Cr(oo)),{acknowledged:f}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:u,topic:f,expiry:g}=r,_=Da(),{done:A,resolve:w,reject:C}=Qi(g,"Request expired. Please try again.");return this.events.once(Ht("session_request",_),({error:N,result:B})=>{N?C(N):w(B)}),await Promise.all([new Promise(async N=>{await this.sendRequest({clientRpcId:_,topic:f,method:"wc_sessionRequest",params:{request:u,chainId:s},expiry:g,throwOnFailedPublish:!0}).catch(B=>C(B)),this.client.events.emit("session_request_sent",{topic:f,request:u,chainId:s,id:_}),N()}),new Promise(async N=>{const B=await da(this.client.core.storage,qh);fa({id:_,topic:f,wcDeepLink:B}),N()}),A()]).then(N=>N[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:u}=r,{id:f}=u;Fi(u)?await this.sendResult({id:f,topic:s,result:u.result,throwOnFailedPublish:!0}):hi(u)&&await this.sendError(f,s,u.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const u=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:f,resolve:g,reject:_}=Qi();this.events.once(Ht("session_ping",u),({error:A})=>{A?_(A):g()}),await f()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:u,chainId:f}=r;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:u,chainId:f}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Re("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>fr(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),u=this.client.core.pairing.pairings.getAll().filter(f=>{var g,_;return((g=f.peerMetadata)==null?void 0:g.url)&&((_=f.peerMetadata)==null?void 0:_.url)===r.peer.metadata.url&&f.topic&&f.topic!==s.topic});if(u.length===0)return;this.client.logger.info(`Cleaning up ${u.length} duplicate pairing(s)`),await Promise.all(u.map(f=>this.client.core.pairing.disconnect({topic:f.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:u}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Re("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(qh).catch(f=>this.client.logger.warn(f))},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,Re("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,u=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),u?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(f=>f.id!==r),u&&(this.sessionRequestQueue.state=$i.idle)},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=ls.wc_sessionRequest.req.ttl,{id:u,topic:f,params:g,verifyContext:_}=r;await this.client.pendingRequest.set(u,{id:u,topic:f,params:g,verifyContext:_}),s&&this.client.core.expirer.set(u,Cr(s))},this.sendRequest=async r=>{const{topic:s,method:u,params:f,expiry:g,relayRpcId:_,clientRpcId:A,throwOnFailedPublish:w}=r,C=Mn(u,f,A);if(Pt()&&u0.includes(u)){const ce=Mt(JSON.stringify(C));this.client.core.verify.register({attestationId:ce})}const N=await this.client.core.crypto.encode(s,C),B=ls[u].req;return g&&(B.ttl=g),_&&(B.id=_),this.client.core.history.set(s,C),w?(B.internal=fs(Fr({},B.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,N,B)):this.client.core.relayer.publish(s,N,B).catch(ce=>this.client.logger.error(ce)),C.id},this.sendResult=async r=>{const{id:s,topic:u,result:f,throwOnFailedPublish:g}=r,_=La(s,f),A=await this.client.core.crypto.encode(u,_),w=await this.client.core.history.get(u,s),C=ls[w.request.method].res;g?(C.internal=fs(Fr({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(u,A,C)):this.client.core.relayer.publish(u,A,C).catch(N=>this.client.logger.error(N)),await this.client.core.history.resolve(_)},this.sendError=async(r,s,u)=>{const f=ro(r,u),g=await this.client.core.crypto.encode(s,f),_=await this.client.core.history.get(s,r),A=ls[_.request.method].res;this.client.core.relayer.publish(s,g,A),await this.client.core.history.resolve(f)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(u=>{ai(u.expiry)&&r.push(u.topic)}),this.client.proposal.getAll().forEach(u=>{ai(u.expiry)&&s.push(u.id)}),await Promise.all([...r.map(u=>this.deleteSession(u)),...s.map(u=>this.deleteProposal(u))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===$i.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=$i.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=$i.idle},this.processRequest=r=>{const{topic:s,payload:u}=r,f=u.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(s,u);case"wc_sessionSettle":return this.onSessionSettleRequest(s,u);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,u);case"wc_sessionExtend":return this.onSessionExtendRequest(s,u);case"wc_sessionPing":return this.onSessionPingRequest(s,u);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,u);case"wc_sessionRequest":return this.onSessionRequest(s,u);case"wc_sessionEvent":return this.onSessionEventRequest(s,u);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:u}=r,f=(await this.client.core.history.get(s,u.id)).request.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeResponse(s,u);case"wc_sessionSettle":return this.onSessionSettleResponse(s,u);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,u);case"wc_sessionExtend":return this.onSessionExtendResponse(s,u);case"wc_sessionPing":return this.onSessionPingResponse(s,u);case"wc_sessionRequest":return this.onSessionRequestResponse(s,u);default:return this.client.logger.info(`Unsupported response method ${f}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:u}=z("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(u)},this.onSessionProposeRequest=async(r,s)=>{const{params:u,id:f}=s;try{this.isValidConnect(Fr({},s.params));const g=Cr(Z.FIVE_MINUTES),_=Fr({id:f,pairingTopic:r,expiry:g},u);await this.setProposal(f,_);const A=Mt(JSON.stringify(s)),w=await this.getVerifyContext(A,_.proposer.metadata);this.client.events.emit("session_proposal",{id:f,params:_,verifyContext:w})}catch(g){await this.sendError(f,r,g),this.client.logger.error(g)}},this.onSessionProposeResponse=async(r,s)=>{const{id:u}=s;if(Fi(s)){const{result:f}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:f});const g=this.client.proposal.get(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:g});const _=g.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:_});const A=f.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:A});const w=await this.client.core.crypto.generateSharedKey(_,A);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:w});const C=await this.client.core.relayer.subscribe(w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:C}),await this.client.core.pairing.activate({topic:r})}else hi(s)&&(await this.client.proposal.delete(u,Re("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:u,params:f}=s;try{this.isValidSessionSettleRequest(f);const{relay:g,controller:_,expiry:A,namespaces:w,requiredNamespaces:C,optionalNamespaces:N,sessionProperties:B,pairingTopic:ce}=s.params,Y=Fr({topic:r,relay:g,expiry:A,namespaces:w,acknowledged:!0,pairingTopic:ce,requiredNamespaces:C,optionalNamespaces:N,controller:_.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:_.publicKey,metadata:_.metadata}},B&&{sessionProperties:B});await this.sendResult({id:s.id,topic:r,result:!0}),this.events.emit(Ht("session_connect"),{session:Y}),this.cleanupDuplicatePairings(Y)}catch(g){await this.sendError(u,r,g),this.client.logger.error(g)}},this.onSessionSettleResponse=async(r,s)=>{const{id:u}=s;Fi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ht("session_approve",u),{})):hi(s)&&(await this.client.session.delete(r,Re("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",u),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:u,id:f}=s;try{const g=`${r}_session_update`,_=Ys.get(g);if(_&&this.isRequestOutOfSync(_,f)){this.client.logger.info(`Discarding out of sync request - ${f}`);return}this.isValidUpdate(Fr({topic:r},u)),await this.client.session.update(r,{namespaces:u.namespaces}),await this.sendResult({id:f,topic:r,result:!0}),this.client.events.emit("session_update",{id:f,topic:r,params:u}),Ys.set(g,f)}catch(g){await this.sendError(f,r,g),this.client.logger.error(g)}},this.isRequestOutOfSync=(r,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,s)=>{const{id:u}=s;Fi(s)?this.events.emit(Ht("session_update",u),{}):hi(s)&&this.events.emit(Ht("session_update",u),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:u}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Cr(oo)),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_extend",{id:u,topic:r})}catch(f){await this.sendError(u,r,f),this.client.logger.error(f)}},this.onSessionExtendResponse=(r,s)=>{const{id:u}=s;Fi(s)?this.events.emit(Ht("session_extend",u),{}):hi(s)&&this.events.emit(Ht("session_extend",u),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:u}=s;try{this.isValidPing({topic:r}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_ping",{id:u,topic:r})}catch(f){await this.sendError(u,r,f),this.client.logger.error(f)}},this.onSessionPingResponse=(r,s)=>{const{id:u}=s;setTimeout(()=>{Fi(s)?this.events.emit(Ht("session_ping",u),{}):hi(s)&&this.events.emit(Ht("session_ping",u),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:u}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(f=>{this.client.core.relayer.once(_r.publish,async()=>{f(await this.deleteSession(r))})}),this.sendResult({id:u,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:u,topic:r})}catch(f){this.client.logger.error(f)}},this.onSessionRequest=async(r,s)=>{const{id:u,params:f}=s;try{this.isValidRequest(Fr({topic:r},f));const g=Mt(JSON.stringify(Mn("wc_sessionRequest",f,u))),_=this.client.session.get(r),A=await this.getVerifyContext(g,_.peer.metadata),w={id:u,topic:r,params:f,verifyContext:A};await this.setPendingSessionRequest(w),this.addSessionRequestToSessionRequestQueue(w),this.processSessionRequestQueue()}catch(g){await this.sendError(u,r,g),this.client.logger.error(g)}},this.onSessionRequestResponse=(r,s)=>{const{id:u}=s;Fi(s)?this.events.emit(Ht("session_request",u),{result:s.result}):hi(s)&&this.events.emit(Ht("session_request",u),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:u,params:f}=s;try{const g=`${r}_session_event_${f.event.name}`,_=Ys.get(g);if(_&&this.isRequestOutOfSync(_,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidEmit(Fr({topic:r},f)),this.client.events.emit("session_event",{id:u,topic:r,params:f}),Ys.set(g,u)}catch(g){await this.sendError(u,r,g),this.client.logger.error(g)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=$i.idle,this.processSessionRequestQueue()},(0,Z.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===$i.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=$i.active,this.client.events.emit("session_request",r)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=r=>{if(r.active)return;const s=this.client.proposal.getAll().find(u=>u.pairingTopic===r.topic);s&&this.onSessionProposeRequest(r.topic,Mn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async r=>{if(!Nr(r)){const{message:A}=z("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(A)}const{pairingTopic:s,requiredNamespaces:u,optionalNamespaces:f,sessionProperties:g,relays:_}=r;if(je(s)||await this.isValidPairingTopic(s),!Vd(_,!0)){const{message:A}=z("MISSING_OR_INVALID",`connect() relays: ${_}`);throw new Error(A)}!je(u)&&Rt(u)!==0&&this.validateNamespaces(u,"requiredNamespaces"),!je(f)&&Rt(f)!==0&&this.validateNamespaces(f,"optionalNamespaces"),je(g)||this.validateSessionProps(g,"sessionProperties")},this.validateNamespaces=(r,s)=>{const u=kd(r,"connect()",s);if(u)throw new Error(u.message)},this.isValidApprove=async r=>{if(!Nr(r))throw new Error(z("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:u,relayProtocol:f,sessionProperties:g}=r;await this.isValidProposalId(s);const _=this.client.proposal.get(s),A=Qs(u,"approve()");if(A)throw new Error(A.message);const w=Ia(_.requiredNamespaces,u,"approve()");if(w)throw new Error(w.message);if(!Qe(f,!0)){const{message:C}=z("MISSING_OR_INVALID",`approve() relayProtocol: ${f}`);throw new Error(C)}je(g)||this.validateSessionProps(g,"sessionProperties")},this.isValidReject=async r=>{if(!Nr(r)){const{message:f}=z("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(f)}const{id:s,reason:u}=r;if(await this.isValidProposalId(s),!Gd(u)){const{message:f}=z("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(u)}`);throw new Error(f)}},this.isValidSessionSettleRequest=r=>{if(!Nr(r)){const{message:w}=z("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(w)}const{relay:s,controller:u,namespaces:f,expiry:g}=r;if(!Nu(s)){const{message:w}=z("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(w)}const _=Js(u,"onSessionSettleRequest()");if(_)throw new Error(_.message);const A=Qs(f,"onSessionSettleRequest()");if(A)throw new Error(A.message);if(ai(g)){const{message:w}=z("EXPIRED","onSessionSettleRequest()");throw new Error(w)}},this.isValidUpdate=async r=>{if(!Nr(r)){const{message:A}=z("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(A)}const{topic:s,namespaces:u}=r;await this.isValidSessionTopic(s);const f=this.client.session.get(s),g=Qs(u,"update()");if(g)throw new Error(g.message);const _=Ia(f.requiredNamespaces,u,"update()");if(_)throw new Error(_.message)},this.isValidExtend=async r=>{if(!Nr(r)){const{message:u}=z("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(u)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!Nr(r)){const{message:A}=z("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(A)}const{topic:s,request:u,chainId:f,expiry:g}=r;await this.isValidSessionTopic(s);const{namespaces:_}=this.client.session.get(s);if(!Du(_,f)){const{message:A}=z("MISSING_OR_INVALID",`request() chainId: ${f}`);throw new Error(A)}if(!Jd(u)){const{message:A}=z("MISSING_OR_INVALID",`request() ${JSON.stringify(u)}`);throw new Error(A)}if(!Xd(_,f,u.method)){const{message:A}=z("MISSING_OR_INVALID",`request() method: ${u.method}`);throw new Error(A)}if(g&&!rp(g,Va)){const{message:A}=z("MISSING_OR_INVALID",`request() expiry: ${g}. Expiry must be a number (in seconds) between ${Va.min} and ${Va.max}`);throw new Error(A)}},this.isValidRespond=async r=>{if(!Nr(r)){const{message:f}=z("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(f)}const{topic:s,response:u}=r;if(await this.isValidSessionTopic(s),!Qd(u)){const{message:f}=z("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(u)}`);throw new Error(f)}},this.isValidPing=async r=>{if(!Nr(r)){const{message:u}=z("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(u)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!Nr(r)){const{message:_}=z("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(_)}const{topic:s,event:u,chainId:f}=r;await this.isValidSessionTopic(s);const{namespaces:g}=this.client.session.get(s);if(!Du(g,f)){const{message:_}=z("MISSING_OR_INVALID",`emit() chainId: ${f}`);throw new Error(_)}if(!Yd(u)){const{message:_}=z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(_)}if(!Zd(g,f,u.name)){const{message:_}=z("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(_)}},this.isValidDisconnect=async r=>{if(!Nr(r)){const{message:u}=z("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(u)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const u={verified:{verifyUrl:s.verifyUrl||jn,validation:"UNKNOWN",origin:s.url||""}};try{const f=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});f&&(u.verified.origin=f.origin,u.verified.isScam=f.isScam,u.verified.validation=f.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.info(f)}return this.client.logger.info(`Verify context: ${JSON.stringify(u)}`),u},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(u=>{if(!Qe(u,!1)){const{message:f}=z("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(u)}`);throw new Error(f)}})}}async isInitialized(){if(!this.initialized){const{message:t}=z("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(_r.message,async t=>{const{topic:r,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const u=await this.client.core.crypto.decode(r,s);try{Fa(u)?(this.client.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):io(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.client.core.history.delete(r,u.id)):this.onRelayEventUnknownPayload({topic:r,payload:u})}catch(f){this.client.logger.error(f)}})}registerExpirerEvents(){this.client.core.expirer.on(Gr.expired,async t=>{const{topic:r,id:s}=Yi(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,z("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(us.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!Qe(t,!1)){const{message:r}=z("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=z("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(ai(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=z("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!Qe(t,!1)){const{message:r}=z("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=z("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(ai(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=z("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Qe(t,!1)){const{message:r}=z("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=z("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!Wd(t)){const{message:r}=z("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=z("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(ai(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=z("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class y0 extends so{constructor(t,r){super(t,r,s0,Ka),this.core=t,this.logger=r}}class v0 extends so{constructor(t,r){super(t,r,o0,Ka),this.core=t,this.logger=r}}class m0 extends so{constructor(t,r){super(t,r,c0,Ka,s=>s.id),this.core=t,this.logger=r}}class Wa extends Qp{constructor(t){super(t),this.protocol=Uh,this.version=zh,this.name=ka.name,this.events=new G.EventEmitter,this.on=(s,u)=>this.events.on(s,u),this.once=(s,u)=>this.events.once(s,u),this.off=(s,u)=>this.events.off(s,u),this.removeListener=(s,u)=>this.events.removeListener(s,u),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(u){throw this.logger.error(u.message),u}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(u){throw this.logger.error(u.message),u}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(u){throw this.logger.error(u.message),u}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(u){throw this.logger.error(u.message),u}},this.update=async s=>{try{return await this.engine.update(s)}catch(u){throw this.logger.error(u.message),u}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(u){throw this.logger.error(u.message),u}},this.request=async s=>{try{return await this.engine.request(s)}catch(u){throw this.logger.error(u.message),u}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(u){throw this.logger.error(u.message),u}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(u){throw this.logger.error(u.message),u}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(u){throw this.logger.error(u.message),u}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(u){throw this.logger.error(u.message),u}},this.find=s=>{try{return this.engine.find(s)}catch(u){throw this.logger.error(u.message),u}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||ka.name,this.metadata=(t==null?void 0:t.metadata)||sa();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:(0,ke.pino)((0,ke.getDefaultLoggerOptions)({level:(t==null?void 0:t.logger)||ka.logger}));this.core=(t==null?void 0:t.core)||new n0(t),this.logger=(0,ke.generateChildLogger)(r,this.name),this.session=new v0(this.core,this.logger),this.proposal=new y0(this.core,this.logger),this.pendingRequest=new m0(this.core,this.logger),this.engine=new g0(this)}static async init(t){const r=new Wa(t);return await r.initialize(),r}get context(){return(0,ke.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const GS=null;var w0=L(52830),Vh=L.n(w0);const Wh={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Gh=10;class Jh{constructor(t,r=!1){if(this.url=t,this.disableProviderPing=r,this.events=new G.EventEmitter,this.isAvailable=!1,this.registering=!1,!rh(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,r){this.isAvailable||await this.register();try{const s=mn(t),f=await(await Vh()(this.url,Object.assign(Object.assign({},Wh),{body:s}))).json();this.onPayload({data:f})}catch(s){this.onError(t.id,s)}}async register(t=this.url){if(!rh(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,u)=>{this.events.once("register_error",f=>{this.resetMaxListeners(),u(f)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return u(new Error("HTTP connection is missing or invalid"));s()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const r=mn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Vh()(t,Object.assign(Object.assign({},Wh),{body:r}))}this.onOpen()}catch(r){const s=this.parseError(r);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?ns(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),u=s.message||s.toString(),f=ro(t,u);this.events.emit("payload",f)}parseError(t,r=this.url){return Zu(t,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Gh&&this.events.setMaxListeners(Gh)}}var _0=Jh,wn=_0;const Qh="error",b0="wss://relay.walletconnect.com",E0="wc",I0="universal_provider",Yh=`${E0}@2:${I0}:`,x0="https://rpc.walletconnect.com/v1/",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof L.g<"u"?L.g:typeof self<"u"?self:{},Ga={exports:{}};(function(o,t){(function(){var r,s="4.17.21",u=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",g="Expected a function",_="Invalid `variable` option passed into `_.template`",A="__lodash_hash_undefined__",w=500,C="__lodash_placeholder__",N=1,B=2,ce=4,Y=1,me=2,Ce=1,Ve=2,Gt=4,Ge=8,$e=16,Ye=32,Jt=64,Qt=128,Sr=256,tn=512,cm=30,um="...",hm=800,lm=16,cl=1,fm=2,dm=3,bn=1/0,rn=9007199254740991,pm=17976931348623157e292,ho=0/0,Ei=4294967295,gm=Ei-1,ym=Ei>>>1,vm=[["ary",Qt],["bind",Ce],["bindKey",Ve],["curry",Ge],["curryRight",$e],["flip",tn],["partial",Ye],["partialRight",Jt],["rearg",Sr]],$n="[object Arguments]",lo="[object Array]",mm="[object AsyncFunction]",gs="[object Boolean]",ys="[object Date]",wm="[object DOMException]",fo="[object Error]",po="[object Function]",ul="[object GeneratorFunction]",fi="[object Map]",vs="[object Number]",_m="[object Null]",zi="[object Object]",hl="[object Promise]",bm="[object Proxy]",ms="[object RegExp]",di="[object Set]",ws="[object String]",go="[object Symbol]",Em="[object Undefined]",_s="[object WeakMap]",Im="[object WeakSet]",bs="[object ArrayBuffer]",Un="[object DataView]",ic="[object Float32Array]",nc="[object Float64Array]",sc="[object Int8Array]",oc="[object Int16Array]",ac="[object Int32Array]",cc="[object Uint8Array]",uc="[object Uint8ClampedArray]",hc="[object Uint16Array]",lc="[object Uint32Array]",xm=/\b__p \+= '';/g,Sm=/\b(__p \+=) '' \+/g,Pm=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ll=/&(?:amp|lt|gt|quot|#39);/g,fl=/[&<>"']/g,Om=RegExp(ll.source),Rm=RegExp(fl.source),Am=/<%-([\s\S]+?)%>/g,Cm=/<%([\s\S]+?)%>/g,dl=/<%=([\s\S]+?)%>/g,Tm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nm=/^\w*$/,Dm=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fc=/[\\^$.*+?()[\]{}|]/g,Lm=RegExp(fc.source),dc=/^\s+/,Fm=/\s/,Mm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jm=/\{\n\/\* \[wrapped with (.+)\] \*/,$m=/,? & /,Um=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zm=/[()=,{}\[\]\/\s]/,Bm=/\\(\\)?/g,qm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pl=/\w*$/,Hm=/^[-+]0x[0-9a-f]+$/i,Km=/^0b[01]+$/i,km=/^\[object .+?Constructor\]$/,Vm=/^0o[0-7]+$/i,Wm=/^(?:0|[1-9]\d*)$/,Gm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yo=/($^)/,Jm=/['\n\r\u2028\u2029\\]/g,vo="\\ud800-\\udfff",Qm="\\u0300-\\u036f",Ym="\\ufe20-\\ufe2f",Xm="\\u20d0-\\u20ff",gl=Qm+Ym+Xm,yl="\\u2700-\\u27bf",vl="a-z\\xdf-\\xf6\\xf8-\\xff",Zm="\\xac\\xb1\\xd7\\xf7",ew="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tw="\\u2000-\\u206f",rw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ml="A-Z\\xc0-\\xd6\\xd8-\\xde",wl="\\ufe0e\\ufe0f",_l=Zm+ew+tw+rw,pc="['\u2019]",iw="["+vo+"]",bl="["+_l+"]",mo="["+gl+"]",El="\\d+",nw="["+yl+"]",Il="["+vl+"]",xl="[^"+vo+_l+El+yl+vl+ml+"]",gc="\\ud83c[\\udffb-\\udfff]",sw="(?:"+mo+"|"+gc+")",Sl="[^"+vo+"]",yc="(?:\\ud83c[\\udde6-\\uddff]){2}",vc="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="["+ml+"]",Pl="\\u200d",Ol="(?:"+Il+"|"+xl+")",ow="(?:"+zn+"|"+xl+")",Rl="(?:"+pc+"(?:d|ll|m|re|s|t|ve))?",Al="(?:"+pc+"(?:D|LL|M|RE|S|T|VE))?",Cl=sw+"?",Tl="["+wl+"]?",aw="(?:"+Pl+"(?:"+[Sl,yc,vc].join("|")+")"+Tl+Cl+")*",cw="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Nl=Tl+Cl+aw,hw="(?:"+[nw,yc,vc].join("|")+")"+Nl,lw="(?:"+[Sl+mo+"?",mo,yc,vc,iw].join("|")+")",fw=RegExp(pc,"g"),dw=RegExp(mo,"g"),mc=RegExp(gc+"(?="+gc+")|"+lw+Nl,"g"),pw=RegExp([zn+"?"+Il+"+"+Rl+"(?="+[bl,zn,"$"].join("|")+")",ow+"+"+Al+"(?="+[bl,zn+Ol,"$"].join("|")+")",zn+"?"+Ol+"+"+Rl,zn+"+"+Al,uw,cw,El,hw].join("|"),"g"),gw=RegExp("["+Pl+vo+gl+wl+"]"),yw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mw=-1,At={};At[ic]=At[nc]=At[sc]=At[oc]=At[ac]=At[cc]=At[uc]=At[hc]=At[lc]=!0,At[$n]=At[lo]=At[bs]=At[gs]=At[Un]=At[ys]=At[fo]=At[po]=At[fi]=At[vs]=At[zi]=At[ms]=At[di]=At[ws]=At[_s]=!1;var bt={};bt[$n]=bt[lo]=bt[bs]=bt[Un]=bt[gs]=bt[ys]=bt[ic]=bt[nc]=bt[sc]=bt[oc]=bt[ac]=bt[fi]=bt[vs]=bt[zi]=bt[ms]=bt[di]=bt[ws]=bt[go]=bt[cc]=bt[uc]=bt[hc]=bt[lc]=!0,bt[fo]=bt[po]=bt[_s]=!1;var ww={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ew={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Iw=parseFloat,xw=parseInt,Dl=typeof ds=="object"&&ds&&ds.Object===Object&&ds,Sw=typeof self=="object"&&self&&self.Object===Object&&self,mr=Dl||Sw||Function("return this")(),wc=t&&!t.nodeType&&t,En=wc&&!0&&o&&!o.nodeType&&o,Ll=En&&En.exports===wc,_c=Ll&&Dl.process,Jr=function(){try{var P=En&&En.require&&En.require("util").types;return P||_c&&_c.binding&&_c.binding("util")}catch{}}(),Fl=Jr&&Jr.isArrayBuffer,Ml=Jr&&Jr.isDate,jl=Jr&&Jr.isMap,$l=Jr&&Jr.isRegExp,Ul=Jr&&Jr.isSet,zl=Jr&&Jr.isTypedArray;function zr(P,j,D){switch(D.length){case 0:return P.call(j);case 1:return P.call(j,D[0]);case 2:return P.call(j,D[0],D[1]);case 3:return P.call(j,D[0],D[1],D[2])}return P.apply(j,D)}function Pw(P,j,D,le){for(var Ae=-1,et=P==null?0:P.length;++Ae<et;){var cr=P[Ae];j(le,cr,D(cr),P)}return le}function Qr(P,j){for(var D=-1,le=P==null?0:P.length;++D<le&&j(P[D],D,P)!==!1;);return P}function Ow(P,j){for(var D=P==null?0:P.length;D--&&j(P[D],D,P)!==!1;);return P}function Bl(P,j){for(var D=-1,le=P==null?0:P.length;++D<le;)if(!j(P[D],D,P))return!1;return!0}function nn(P,j){for(var D=-1,le=P==null?0:P.length,Ae=0,et=[];++D<le;){var cr=P[D];j(cr,D,P)&&(et[Ae++]=cr)}return et}function wo(P,j){var D=P==null?0:P.length;return!!D&&Bn(P,j,0)>-1}function bc(P,j,D){for(var le=-1,Ae=P==null?0:P.length;++le<Ae;)if(D(j,P[le]))return!0;return!1}function Nt(P,j){for(var D=-1,le=P==null?0:P.length,Ae=Array(le);++D<le;)Ae[D]=j(P[D],D,P);return Ae}function sn(P,j){for(var D=-1,le=j.length,Ae=P.length;++D<le;)P[Ae+D]=j[D];return P}function Ec(P,j,D,le){var Ae=-1,et=P==null?0:P.length;for(le&&et&&(D=P[++Ae]);++Ae<et;)D=j(D,P[Ae],Ae,P);return D}function Rw(P,j,D,le){var Ae=P==null?0:P.length;for(le&&Ae&&(D=P[--Ae]);Ae--;)D=j(D,P[Ae],Ae,P);return D}function Ic(P,j){for(var D=-1,le=P==null?0:P.length;++D<le;)if(j(P[D],D,P))return!0;return!1}var Aw=xc("length");function Cw(P){return P.split("")}function Tw(P){return P.match(Um)||[]}function ql(P,j,D){var le;return D(P,function(Ae,et,cr){if(j(Ae,et,cr))return le=et,!1}),le}function _o(P,j,D,le){for(var Ae=P.length,et=D+(le?1:-1);le?et--:++et<Ae;)if(j(P[et],et,P))return et;return-1}function Bn(P,j,D){return j===j?Hw(P,j,D):_o(P,Hl,D)}function Nw(P,j,D,le){for(var Ae=D-1,et=P.length;++Ae<et;)if(le(P[Ae],j))return Ae;return-1}function Hl(P){return P!==P}function Kl(P,j){var D=P==null?0:P.length;return D?Pc(P,j)/D:ho}function xc(P){return function(j){return j==null?r:j[P]}}function Sc(P){return function(j){return P==null?r:P[j]}}function kl(P,j,D,le,Ae){return Ae(P,function(et,cr,pt){D=le?(le=!1,et):j(D,et,cr,pt)}),D}function Dw(P,j){var D=P.length;for(P.sort(j);D--;)P[D]=P[D].value;return P}function Pc(P,j){for(var D,le=-1,Ae=P.length;++le<Ae;){var et=j(P[le]);et!==r&&(D=D===r?et:D+et)}return D}function Oc(P,j){for(var D=-1,le=Array(P);++D<P;)le[D]=j(D);return le}function Lw(P,j){return Nt(j,function(D){return[D,P[D]]})}function Vl(P){return P&&P.slice(0,Ql(P)+1).replace(dc,"")}function Br(P){return function(j){return P(j)}}function Rc(P,j){return Nt(j,function(D){return P[D]})}function Es(P,j){return P.has(j)}function Wl(P,j){for(var D=-1,le=P.length;++D<le&&Bn(j,P[D],0)>-1;);return D}function Gl(P,j){for(var D=P.length;D--&&Bn(j,P[D],0)>-1;);return D}function Fw(P,j){for(var D=P.length,le=0;D--;)P[D]===j&&++le;return le}var Mw=Sc(ww),jw=Sc(_w);function $w(P){return"\\"+Ew[P]}function Uw(P,j){return P==null?r:P[j]}function qn(P){return gw.test(P)}function zw(P){return yw.test(P)}function Bw(P){for(var j,D=[];!(j=P.next()).done;)D.push(j.value);return D}function Ac(P){var j=-1,D=Array(P.size);return P.forEach(function(le,Ae){D[++j]=[Ae,le]}),D}function Jl(P,j){return function(D){return P(j(D))}}function on(P,j){for(var D=-1,le=P.length,Ae=0,et=[];++D<le;){var cr=P[D];(cr===j||cr===C)&&(P[D]=C,et[Ae++]=D)}return et}function bo(P){var j=-1,D=Array(P.size);return P.forEach(function(le){D[++j]=le}),D}function qw(P){var j=-1,D=Array(P.size);return P.forEach(function(le){D[++j]=[le,le]}),D}function Hw(P,j,D){for(var le=D-1,Ae=P.length;++le<Ae;)if(P[le]===j)return le;return-1}function Kw(P,j,D){for(var le=D+1;le--;)if(P[le]===j)return le;return le}function Hn(P){return qn(P)?Vw(P):Aw(P)}function pi(P){return qn(P)?Ww(P):Cw(P)}function Ql(P){for(var j=P.length;j--&&Fm.test(P.charAt(j)););return j}var kw=Sc(bw);function Vw(P){for(var j=mc.lastIndex=0;mc.test(P);)++j;return j}function Ww(P){return P.match(mc)||[]}function Gw(P){return P.match(pw)||[]}var Jw=function P(j){j=j==null?mr:Kn.defaults(mr.Object(),j,Kn.pick(mr,vw));var D=j.Array,le=j.Date,Ae=j.Error,et=j.Function,cr=j.Math,pt=j.Object,Cc=j.RegExp,Qw=j.String,Yr=j.TypeError,Eo=D.prototype,Yw=et.prototype,kn=pt.prototype,Io=j["__core-js_shared__"],xo=Yw.toString,ut=kn.hasOwnProperty,Xw=0,Yl=function(){var e=/[^.]+$/.exec(Io&&Io.keys&&Io.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),So=kn.toString,Zw=xo.call(pt),e1=mr._,t1=Cc("^"+xo.call(ut).replace(fc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Po=Ll?j.Buffer:r,an=j.Symbol,Oo=j.Uint8Array,Xl=Po?Po.allocUnsafe:r,Ro=Jl(pt.getPrototypeOf,pt),Zl=pt.create,ef=kn.propertyIsEnumerable,Ao=Eo.splice,tf=an?an.isConcatSpreadable:r,Is=an?an.iterator:r,In=an?an.toStringTag:r,Co=function(){try{var e=Rn(pt,"defineProperty");return e({},"",{}),e}catch{}}(),r1=j.clearTimeout!==mr.clearTimeout&&j.clearTimeout,i1=le&&le.now!==mr.Date.now&&le.now,n1=j.setTimeout!==mr.setTimeout&&j.setTimeout,To=cr.ceil,No=cr.floor,Tc=pt.getOwnPropertySymbols,s1=Po?Po.isBuffer:r,rf=j.isFinite,o1=Eo.join,a1=Jl(pt.keys,pt),ur=cr.max,br=cr.min,c1=le.now,u1=j.parseInt,nf=cr.random,h1=Eo.reverse,Nc=Rn(j,"DataView"),xs=Rn(j,"Map"),Dc=Rn(j,"Promise"),Vn=Rn(j,"Set"),Ss=Rn(j,"WeakMap"),Ps=Rn(pt,"create"),Do=Ss&&new Ss,Wn={},l1=An(Nc),f1=An(xs),d1=An(Dc),p1=An(Vn),g1=An(Ss),Lo=an?an.prototype:r,Os=Lo?Lo.valueOf:r,sf=Lo?Lo.toString:r;function p(e){if(Kt(e)&&!Te(e)&&!(e instanceof qe)){if(e instanceof Xr)return e;if(ut.call(e,"__wrapped__"))return od(e)}return new Xr(e)}var Gn=function(){function e(){}return function(n){if(!Lt(n))return{};if(Zl)return Zl(n);e.prototype=n;var a=new e;return e.prototype=r,a}}();function Fo(){}function Xr(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}p.templateSettings={escape:Am,evaluate:Cm,interpolate:dl,variable:"",imports:{_:p}},p.prototype=Fo.prototype,p.prototype.constructor=p,Xr.prototype=Gn(Fo.prototype),Xr.prototype.constructor=Xr;function qe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ei,this.__views__=[]}function y1(){var e=new qe(this.__wrapped__);return e.__actions__=Mr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mr(this.__views__),e}function v1(){if(this.__filtered__){var e=new qe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function m1(){var e=this.__wrapped__.value(),n=this.__dir__,a=Te(e),h=n<0,d=a?e.length:0,y=C_(0,d,this.__views__),m=y.start,b=y.end,O=b-m,q=h?b:m-1,K=this.__iteratees__,Q=K.length,ae=0,de=br(O,this.__takeCount__);if(!a||!h&&d==O&&de==O)return Af(e,this.__actions__);var be=[];e:for(;O--&&ae<de;){q+=n;for(var Fe=-1,Ee=e[q];++Fe<Q;){var Be=K[Fe],He=Be.iteratee,Kr=Be.type,Rr=He(Ee);if(Kr==fm)Ee=Rr;else if(!Rr){if(Kr==cl)continue e;break e}}be[ae++]=Ee}return be}qe.prototype=Gn(Fo.prototype),qe.prototype.constructor=qe;function xn(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var h=e[n];this.set(h[0],h[1])}}function w1(){this.__data__=Ps?Ps(null):{},this.size=0}function _1(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function b1(e){var n=this.__data__;if(Ps){var a=n[e];return a===A?r:a}return ut.call(n,e)?n[e]:r}function E1(e){var n=this.__data__;return Ps?n[e]!==r:ut.call(n,e)}function I1(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Ps&&n===r?A:n,this}xn.prototype.clear=w1,xn.prototype.delete=_1,xn.prototype.get=b1,xn.prototype.has=E1,xn.prototype.set=I1;function Bi(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var h=e[n];this.set(h[0],h[1])}}function x1(){this.__data__=[],this.size=0}function S1(e){var n=this.__data__,a=Mo(n,e);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():Ao.call(n,a,1),--this.size,!0}function P1(e){var n=this.__data__,a=Mo(n,e);return a<0?r:n[a][1]}function O1(e){return Mo(this.__data__,e)>-1}function R1(e,n){var a=this.__data__,h=Mo(a,e);return h<0?(++this.size,a.push([e,n])):a[h][1]=n,this}Bi.prototype.clear=x1,Bi.prototype.delete=S1,Bi.prototype.get=P1,Bi.prototype.has=O1,Bi.prototype.set=R1;function qi(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var h=e[n];this.set(h[0],h[1])}}function A1(){this.size=0,this.__data__={hash:new xn,map:new(xs||Bi),string:new xn}}function C1(e){var n=Go(this,e).delete(e);return this.size-=n?1:0,n}function T1(e){return Go(this,e).get(e)}function N1(e){return Go(this,e).has(e)}function D1(e,n){var a=Go(this,e),h=a.size;return a.set(e,n),this.size+=a.size==h?0:1,this}qi.prototype.clear=A1,qi.prototype.delete=C1,qi.prototype.get=T1,qi.prototype.has=N1,qi.prototype.set=D1;function Sn(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new qi;++n<a;)this.add(e[n])}function L1(e){return this.__data__.set(e,A),this}function F1(e){return this.__data__.has(e)}Sn.prototype.add=Sn.prototype.push=L1,Sn.prototype.has=F1;function gi(e){var n=this.__data__=new Bi(e);this.size=n.size}function M1(){this.__data__=new Bi,this.size=0}function j1(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function $1(e){return this.__data__.get(e)}function U1(e){return this.__data__.has(e)}function z1(e,n){var a=this.__data__;if(a instanceof Bi){var h=a.__data__;if(!xs||h.length<u-1)return h.push([e,n]),this.size=++a.size,this;a=this.__data__=new qi(h)}return a.set(e,n),this.size=a.size,this}gi.prototype.clear=M1,gi.prototype.delete=j1,gi.prototype.get=$1,gi.prototype.has=U1,gi.prototype.set=z1;function of(e,n){var a=Te(e),h=!a&&Cn(e),d=!a&&!h&&fn(e),y=!a&&!h&&!d&&Xn(e),m=a||h||d||y,b=m?Oc(e.length,Qw):[],O=b.length;for(var q in e)(n||ut.call(e,q))&&!(m&&(q=="length"||d&&(q=="offset"||q=="parent")||y&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||Vi(q,O)))&&b.push(q);return b}function af(e){var n=e.length;return n?e[Kc(0,n-1)]:r}function B1(e,n){return Jo(Mr(e),Pn(n,0,e.length))}function q1(e){return Jo(Mr(e))}function Lc(e,n,a){(a!==r&&!yi(e[n],a)||a===r&&!(n in e))&&Hi(e,n,a)}function Rs(e,n,a){var h=e[n];(!(ut.call(e,n)&&yi(h,a))||a===r&&!(n in e))&&Hi(e,n,a)}function Mo(e,n){for(var a=e.length;a--;)if(yi(e[a][0],n))return a;return-1}function H1(e,n,a,h){return cn(e,function(d,y,m){n(h,d,a(d),m)}),h}function cf(e,n){return e&&xi(n,pr(n),e)}function K1(e,n){return e&&xi(n,$r(n),e)}function Hi(e,n,a){n=="__proto__"&&Co?Co(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}function Fc(e,n){for(var a=-1,h=n.length,d=D(h),y=e==null;++a<h;)d[a]=y?r:gu(e,n[a]);return d}function Pn(e,n,a){return e===e&&(a!==r&&(e=e<=a?e:a),n!==r&&(e=e>=n?e:n)),e}function Zr(e,n,a,h,d,y){var m,b=n&N,O=n&B,q=n&ce;if(a&&(m=d?a(e,h,d,y):a(e)),m!==r)return m;if(!Lt(e))return e;var K=Te(e);if(K){if(m=N_(e),!b)return Mr(e,m)}else{var Q=Er(e),ae=Q==po||Q==ul;if(fn(e))return Nf(e,b);if(Q==zi||Q==$n||ae&&!d){if(m=O||ae?{}:Yf(e),!b)return O?b_(e,K1(m,e)):__(e,cf(m,e))}else{if(!bt[Q])return d?e:{};m=D_(e,Q,b)}}y||(y=new gi);var de=y.get(e);if(de)return de;y.set(e,m),Pd(e)?e.forEach(function(Ee){m.add(Zr(Ee,n,a,Ee,e,y))}):xd(e)&&e.forEach(function(Ee,Be){m.set(Be,Zr(Ee,n,a,Be,e,y))});var be=q?O?tu:eu:O?$r:pr,Fe=K?r:be(e);return Qr(Fe||e,function(Ee,Be){Fe&&(Be=Ee,Ee=e[Be]),Rs(m,Be,Zr(Ee,n,a,Be,e,y))}),m}function k1(e){var n=pr(e);return function(a){return uf(a,e,n)}}function uf(e,n,a){var h=a.length;if(e==null)return!h;for(e=pt(e);h--;){var d=a[h],y=n[d],m=e[d];if(m===r&&!(d in e)||!y(m))return!1}return!0}function hf(e,n,a){if(typeof e!="function")throw new Yr(g);return Fs(function(){e.apply(r,a)},n)}function As(e,n,a,h){var d=-1,y=wo,m=!0,b=e.length,O=[],q=n.length;if(!b)return O;a&&(n=Nt(n,Br(a))),h?(y=bc,m=!1):n.length>=u&&(y=Es,m=!1,n=new Sn(n));e:for(;++d<b;){var K=e[d],Q=a==null?K:a(K);if(K=h||K!==0?K:0,m&&Q===Q){for(var ae=q;ae--;)if(n[ae]===Q)continue e;O.push(K)}else y(n,Q,h)||O.push(K)}return O}var cn=jf(Ii),lf=jf(jc,!0);function V1(e,n){var a=!0;return cn(e,function(h,d,y){return a=!!n(h,d,y),a}),a}function jo(e,n,a){for(var h=-1,d=e.length;++h<d;){var y=e[h],m=n(y);if(m!=null&&(b===r?m===m&&!Hr(m):a(m,b)))var b=m,O=y}return O}function W1(e,n,a,h){var d=e.length;for(a=De(a),a<0&&(a=-a>d?0:d+a),h=h===r||h>d?d:De(h),h<0&&(h+=d),h=a>h?0:Rd(h);a<h;)e[a++]=n;return e}function ff(e,n){var a=[];return cn(e,function(h,d,y){n(h,d,y)&&a.push(h)}),a}function wr(e,n,a,h,d){var y=-1,m=e.length;for(a||(a=F_),d||(d=[]);++y<m;){var b=e[y];n>0&&a(b)?n>1?wr(b,n-1,a,h,d):sn(d,b):h||(d[d.length]=b)}return d}var Mc=$f(),df=$f(!0);function Ii(e,n){return e&&Mc(e,n,pr)}function jc(e,n){return e&&df(e,n,pr)}function $o(e,n){return nn(n,function(a){return Wi(e[a])})}function On(e,n){n=hn(n,e);for(var a=0,h=n.length;e!=null&&a<h;)e=e[Si(n[a++])];return a&&a==h?e:r}function pf(e,n,a){var h=n(e);return Te(e)?h:sn(h,a(e))}function Pr(e){return e==null?e===r?Em:_m:In&&In in pt(e)?A_(e):q_(e)}function $c(e,n){return e>n}function G1(e,n){return e!=null&&ut.call(e,n)}function J1(e,n){return e!=null&&n in pt(e)}function Q1(e,n,a){return e>=br(n,a)&&e<ur(n,a)}function Uc(e,n,a){for(var h=a?bc:wo,d=e[0].length,y=e.length,m=y,b=D(y),O=1/0,q=[];m--;){var K=e[m];m&&n&&(K=Nt(K,Br(n))),O=br(K.length,O),b[m]=!a&&(n||d>=120&&K.length>=120)?new Sn(m&&K):r}K=e[0];var Q=-1,ae=b[0];e:for(;++Q<d&&q.length<O;){var de=K[Q],be=n?n(de):de;if(de=a||de!==0?de:0,!(ae?Es(ae,be):h(q,be,a))){for(m=y;--m;){var Fe=b[m];if(!(Fe?Es(Fe,be):h(e[m],be,a)))continue e}ae&&ae.push(be),q.push(de)}}return q}function Y1(e,n,a,h){return Ii(e,function(d,y,m){n(h,a(d),y,m)}),h}function Cs(e,n,a){n=hn(n,e),e=td(e,n);var h=e==null?e:e[Si(ti(n))];return h==null?r:zr(h,e,a)}function gf(e){return Kt(e)&&Pr(e)==$n}function X1(e){return Kt(e)&&Pr(e)==bs}function Z1(e){return Kt(e)&&Pr(e)==ys}function Ts(e,n,a,h,d){return e===n?!0:e==null||n==null||!Kt(e)&&!Kt(n)?e!==e&&n!==n:e_(e,n,a,h,Ts,d)}function e_(e,n,a,h,d,y){var m=Te(e),b=Te(n),O=m?lo:Er(e),q=b?lo:Er(n);O=O==$n?zi:O,q=q==$n?zi:q;var K=O==zi,Q=q==zi,ae=O==q;if(ae&&fn(e)){if(!fn(n))return!1;m=!0,K=!1}if(ae&&!K)return y||(y=new gi),m||Xn(e)?Gf(e,n,a,h,d,y):O_(e,n,O,a,h,d,y);if(!(a&Y)){var de=K&&ut.call(e,"__wrapped__"),be=Q&&ut.call(n,"__wrapped__");if(de||be){var Fe=de?e.value():e,Ee=be?n.value():n;return y||(y=new gi),d(Fe,Ee,a,h,y)}}return ae?(y||(y=new gi),R_(e,n,a,h,d,y)):!1}function t_(e){return Kt(e)&&Er(e)==fi}function zc(e,n,a,h){var d=a.length,y=d,m=!h;if(e==null)return!y;for(e=pt(e);d--;){var b=a[d];if(m&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++d<y;){b=a[d];var O=b[0],q=e[O],K=b[1];if(m&&b[2]){if(q===r&&!(O in e))return!1}else{var Q=new gi;if(h)var ae=h(q,K,O,e,n,Q);if(!(ae===r?Ts(K,q,Y|me,h,Q):ae))return!1}}return!0}function yf(e){if(!Lt(e)||j_(e))return!1;var n=Wi(e)?t1:km;return n.test(An(e))}function r_(e){return Kt(e)&&Pr(e)==ms}function i_(e){return Kt(e)&&Er(e)==di}function n_(e){return Kt(e)&&ta(e.length)&&!!At[Pr(e)]}function vf(e){return typeof e=="function"?e:e==null?Ur:typeof e=="object"?Te(e)?_f(e[0],e[1]):wf(e):Ud(e)}function Bc(e){if(!Ls(e))return a1(e);var n=[];for(var a in pt(e))ut.call(e,a)&&a!="constructor"&&n.push(a);return n}function s_(e){if(!Lt(e))return B_(e);var n=Ls(e),a=[];for(var h in e)h=="constructor"&&(n||!ut.call(e,h))||a.push(h);return a}function qc(e,n){return e<n}function mf(e,n){var a=-1,h=jr(e)?D(e.length):[];return cn(e,function(d,y,m){h[++a]=n(d,y,m)}),h}function wf(e){var n=iu(e);return n.length==1&&n[0][2]?Zf(n[0][0],n[0][1]):function(a){return a===e||zc(a,e,n)}}function _f(e,n){return su(e)&&Xf(n)?Zf(Si(e),n):function(a){var h=gu(a,e);return h===r&&h===n?yu(a,e):Ts(n,h,Y|me)}}function Uo(e,n,a,h,d){e!==n&&Mc(n,function(y,m){if(d||(d=new gi),Lt(y))o_(e,n,m,a,Uo,h,d);else{var b=h?h(au(e,m),y,m+"",e,n,d):r;b===r&&(b=y),Lc(e,m,b)}},$r)}function o_(e,n,a,h,d,y,m){var b=au(e,a),O=au(n,a),q=m.get(O);if(q){Lc(e,a,q);return}var K=y?y(b,O,a+"",e,n,m):r,Q=K===r;if(Q){var ae=Te(O),de=!ae&&fn(O),be=!ae&&!de&&Xn(O);K=O,ae||de||be?Te(b)?K=b:Yt(b)?K=Mr(b):de?(Q=!1,K=Nf(O,!0)):be?(Q=!1,K=Df(O,!0)):K=[]:Ms(O)||Cn(O)?(K=b,Cn(b)?K=Ad(b):(!Lt(b)||Wi(b))&&(K=Yf(O))):Q=!1}Q&&(m.set(O,K),d(K,O,h,y,m),m.delete(O)),Lc(e,a,K)}function bf(e,n){var a=e.length;if(a)return n+=n<0?a:0,Vi(n,a)?e[n]:r}function Ef(e,n,a){n.length?n=Nt(n,function(y){return Te(y)?function(m){return On(m,y.length===1?y[0]:y)}:y}):n=[Ur];var h=-1;n=Nt(n,Br(_e()));var d=mf(e,function(y,m,b){var O=Nt(n,function(q){return q(y)});return{criteria:O,index:++h,value:y}});return Dw(d,function(y,m){return w_(y,m,a)})}function a_(e,n){return If(e,n,function(a,h){return yu(e,h)})}function If(e,n,a){for(var h=-1,d=n.length,y={};++h<d;){var m=n[h],b=On(e,m);a(b,m)&&Ns(y,hn(m,e),b)}return y}function c_(e){return function(n){return On(n,e)}}function Hc(e,n,a,h){var d=h?Nw:Bn,y=-1,m=n.length,b=e;for(e===n&&(n=Mr(n)),a&&(b=Nt(e,Br(a)));++y<m;)for(var O=0,q=n[y],K=a?a(q):q;(O=d(b,K,O,h))>-1;)b!==e&&Ao.call(b,O,1),Ao.call(e,O,1);return e}function xf(e,n){for(var a=e?n.length:0,h=a-1;a--;){var d=n[a];if(a==h||d!==y){var y=d;Vi(d)?Ao.call(e,d,1):Wc(e,d)}}return e}function Kc(e,n){return e+No(nf()*(n-e+1))}function u_(e,n,a,h){for(var d=-1,y=ur(To((n-e)/(a||1)),0),m=D(y);y--;)m[h?y:++d]=e,e+=a;return m}function kc(e,n){var a="";if(!e||n<1||n>rn)return a;do n%2&&(a+=e),n=No(n/2),n&&(e+=e);while(n);return a}function Ue(e,n){return cu(ed(e,n,Ur),e+"")}function h_(e){return af(Zn(e))}function l_(e,n){var a=Zn(e);return Jo(a,Pn(n,0,a.length))}function Ns(e,n,a,h){if(!Lt(e))return e;n=hn(n,e);for(var d=-1,y=n.length,m=y-1,b=e;b!=null&&++d<y;){var O=Si(n[d]),q=a;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(d!=m){var K=b[O];q=h?h(K,O,b):r,q===r&&(q=Lt(K)?K:Vi(n[d+1])?[]:{})}Rs(b,O,q),b=b[O]}return e}var Sf=Do?function(e,n){return Do.set(e,n),e}:Ur,f_=Co?function(e,n){return Co(e,"toString",{configurable:!0,enumerable:!1,value:mu(n),writable:!0})}:Ur;function d_(e){return Jo(Zn(e))}function ei(e,n,a){var h=-1,d=e.length;n<0&&(n=-n>d?0:d+n),a=a>d?d:a,a<0&&(a+=d),d=n>a?0:a-n>>>0,n>>>=0;for(var y=D(d);++h<d;)y[h]=e[h+n];return y}function p_(e,n){var a;return cn(e,function(h,d,y){return a=n(h,d,y),!a}),!!a}function zo(e,n,a){var h=0,d=e==null?h:e.length;if(typeof n=="number"&&n===n&&d<=ym){for(;h<d;){var y=h+d>>>1,m=e[y];m!==null&&!Hr(m)&&(a?m<=n:m<n)?h=y+1:d=y}return d}return Vc(e,n,Ur,a)}function Vc(e,n,a,h){var d=0,y=e==null?0:e.length;if(y===0)return 0;n=a(n);for(var m=n!==n,b=n===null,O=Hr(n),q=n===r;d<y;){var K=No((d+y)/2),Q=a(e[K]),ae=Q!==r,de=Q===null,be=Q===Q,Fe=Hr(Q);if(m)var Ee=h||be;else q?Ee=be&&(h||ae):b?Ee=be&&ae&&(h||!de):O?Ee=be&&ae&&!de&&(h||!Fe):de||Fe?Ee=!1:Ee=h?Q<=n:Q<n;Ee?d=K+1:y=K}return br(y,gm)}function Pf(e,n){for(var a=-1,h=e.length,d=0,y=[];++a<h;){var m=e[a],b=n?n(m):m;if(!a||!yi(b,O)){var O=b;y[d++]=m===0?0:m}}return y}function Of(e){return typeof e=="number"?e:Hr(e)?ho:+e}function qr(e){if(typeof e=="string")return e;if(Te(e))return Nt(e,qr)+"";if(Hr(e))return sf?sf.call(e):"";var n=e+"";return n=="0"&&1/e==-bn?"-0":n}function un(e,n,a){var h=-1,d=wo,y=e.length,m=!0,b=[],O=b;if(a)m=!1,d=bc;else if(y>=u){var q=n?null:S_(e);if(q)return bo(q);m=!1,d=Es,O=new Sn}else O=n?[]:b;e:for(;++h<y;){var K=e[h],Q=n?n(K):K;if(K=a||K!==0?K:0,m&&Q===Q){for(var ae=O.length;ae--;)if(O[ae]===Q)continue e;n&&O.push(Q),b.push(K)}else d(O,Q,a)||(O!==b&&O.push(Q),b.push(K))}return b}function Wc(e,n){return n=hn(n,e),e=td(e,n),e==null||delete e[Si(ti(n))]}function Rf(e,n,a,h){return Ns(e,n,a(On(e,n)),h)}function Bo(e,n,a,h){for(var d=e.length,y=h?d:-1;(h?y--:++y<d)&&n(e[y],y,e););return a?ei(e,h?0:y,h?y+1:d):ei(e,h?y+1:0,h?d:y)}function Af(e,n){var a=e;return a instanceof qe&&(a=a.value()),Ec(n,function(h,d){return d.func.apply(d.thisArg,sn([h],d.args))},a)}function Gc(e,n,a){var h=e.length;if(h<2)return h?un(e[0]):[];for(var d=-1,y=D(h);++d<h;)for(var m=e[d],b=-1;++b<h;)b!=d&&(y[d]=As(y[d]||m,e[b],n,a));return un(wr(y,1),n,a)}function Cf(e,n,a){for(var h=-1,d=e.length,y=n.length,m={};++h<d;){var b=h<y?n[h]:r;a(m,e[h],b)}return m}function Jc(e){return Yt(e)?e:[]}function Qc(e){return typeof e=="function"?e:Ur}function hn(e,n){return Te(e)?e:su(e,n)?[e]:sd(nt(e))}var g_=Ue;function ln(e,n,a){var h=e.length;return a=a===r?h:a,!n&&a>=h?e:ei(e,n,a)}var Tf=r1||function(e){return mr.clearTimeout(e)};function Nf(e,n){if(n)return e.slice();var a=e.length,h=Xl?Xl(a):new e.constructor(a);return e.copy(h),h}function Yc(e){var n=new e.constructor(e.byteLength);return new Oo(n).set(new Oo(e)),n}function y_(e,n){var a=n?Yc(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}function v_(e){var n=new e.constructor(e.source,pl.exec(e));return n.lastIndex=e.lastIndex,n}function m_(e){return Os?pt(Os.call(e)):{}}function Df(e,n){var a=n?Yc(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function Lf(e,n){if(e!==n){var a=e!==r,h=e===null,d=e===e,y=Hr(e),m=n!==r,b=n===null,O=n===n,q=Hr(n);if(!b&&!q&&!y&&e>n||y&&m&&O&&!b&&!q||h&&m&&O||!a&&O||!d)return 1;if(!h&&!y&&!q&&e<n||q&&a&&d&&!h&&!y||b&&a&&d||!m&&d||!O)return-1}return 0}function w_(e,n,a){for(var h=-1,d=e.criteria,y=n.criteria,m=d.length,b=a.length;++h<m;){var O=Lf(d[h],y[h]);if(O){if(h>=b)return O;var q=a[h];return O*(q=="desc"?-1:1)}}return e.index-n.index}function Ff(e,n,a,h){for(var d=-1,y=e.length,m=a.length,b=-1,O=n.length,q=ur(y-m,0),K=D(O+q),Q=!h;++b<O;)K[b]=n[b];for(;++d<m;)(Q||d<y)&&(K[a[d]]=e[d]);for(;q--;)K[b++]=e[d++];return K}function Mf(e,n,a,h){for(var d=-1,y=e.length,m=-1,b=a.length,O=-1,q=n.length,K=ur(y-b,0),Q=D(K+q),ae=!h;++d<K;)Q[d]=e[d];for(var de=d;++O<q;)Q[de+O]=n[O];for(;++m<b;)(ae||d<y)&&(Q[de+a[m]]=e[d++]);return Q}function Mr(e,n){var a=-1,h=e.length;for(n||(n=D(h));++a<h;)n[a]=e[a];return n}function xi(e,n,a,h){var d=!a;a||(a={});for(var y=-1,m=n.length;++y<m;){var b=n[y],O=h?h(a[b],e[b],b,a,e):r;O===r&&(O=e[b]),d?Hi(a,b,O):Rs(a,b,O)}return a}function __(e,n){return xi(e,nu(e),n)}function b_(e,n){return xi(e,Jf(e),n)}function qo(e,n){return function(a,h){var d=Te(a)?Pw:H1,y=n?n():{};return d(a,e,_e(h,2),y)}}function Jn(e){return Ue(function(n,a){var h=-1,d=a.length,y=d>1?a[d-1]:r,m=d>2?a[2]:r;for(y=e.length>3&&typeof y=="function"?(d--,y):r,m&&Or(a[0],a[1],m)&&(y=d<3?r:y,d=1),n=pt(n);++h<d;){var b=a[h];b&&e(n,b,h,y)}return n})}function jf(e,n){return function(a,h){if(a==null)return a;if(!jr(a))return e(a,h);for(var d=a.length,y=n?d:-1,m=pt(a);(n?y--:++y<d)&&h(m[y],y,m)!==!1;);return a}}function $f(e){return function(n,a,h){for(var d=-1,y=pt(n),m=h(n),b=m.length;b--;){var O=m[e?b:++d];if(a(y[O],O,y)===!1)break}return n}}function E_(e,n,a){var h=n&Ce,d=Ds(e);function y(){var m=this&&this!==mr&&this instanceof y?d:e;return m.apply(h?a:this,arguments)}return y}function Uf(e){return function(n){n=nt(n);var a=qn(n)?pi(n):r,h=a?a[0]:n.charAt(0),d=a?ln(a,1).join(""):n.slice(1);return h[e]()+d}}function Qn(e){return function(n){return Ec(jd(Md(n).replace(fw,"")),e,"")}}function Ds(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Gn(e.prototype),h=e.apply(a,n);return Lt(h)?h:a}}function I_(e,n,a){var h=Ds(e);function d(){for(var y=arguments.length,m=D(y),b=y,O=Yn(d);b--;)m[b]=arguments[b];var q=y<3&&m[0]!==O&&m[y-1]!==O?[]:on(m,O);if(y-=q.length,y<a)return Kf(e,n,Ho,d.placeholder,r,m,q,r,r,a-y);var K=this&&this!==mr&&this instanceof d?h:e;return zr(K,this,m)}return d}function zf(e){return function(n,a,h){var d=pt(n);if(!jr(n)){var y=_e(a,3);n=pr(n),a=function(b){return y(d[b],b,d)}}var m=e(n,a,h);return m>-1?d[y?n[m]:m]:r}}function Bf(e){return ki(function(n){var a=n.length,h=a,d=Xr.prototype.thru;for(e&&n.reverse();h--;){var y=n[h];if(typeof y!="function")throw new Yr(g);if(d&&!m&&Wo(y)=="wrapper")var m=new Xr([],!0)}for(h=m?h:a;++h<a;){y=n[h];var b=Wo(y),O=b=="wrapper"?ru(y):r;O&&ou(O[0])&&O[1]==(Qt|Ge|Ye|Sr)&&!O[4].length&&O[9]==1?m=m[Wo(O[0])].apply(m,O[3]):m=y.length==1&&ou(y)?m[b]():m.thru(y)}return function(){var q=arguments,K=q[0];if(m&&q.length==1&&Te(K))return m.plant(K).value();for(var Q=0,ae=a?n[Q].apply(this,q):K;++Q<a;)ae=n[Q].call(this,ae);return ae}})}function Ho(e,n,a,h,d,y,m,b,O,q){var K=n&Qt,Q=n&Ce,ae=n&Ve,de=n&(Ge|$e),be=n&tn,Fe=ae?r:Ds(e);function Ee(){for(var Be=arguments.length,He=D(Be),Kr=Be;Kr--;)He[Kr]=arguments[Kr];if(de)var Rr=Yn(Ee),kr=Fw(He,Rr);if(h&&(He=Ff(He,h,d,de)),y&&(He=Mf(He,y,m,de)),Be-=kr,de&&Be<q){var Xt=on(He,Rr);return Kf(e,n,Ho,Ee.placeholder,a,He,Xt,b,O,q-Be)}var vi=Q?a:this,Ji=ae?vi[e]:e;return Be=He.length,b?He=H_(He,b):be&&Be>1&&He.reverse(),K&&O<Be&&(He.length=O),this&&this!==mr&&this instanceof Ee&&(Ji=Fe||Ds(Ji)),Ji.apply(vi,He)}return Ee}function qf(e,n){return function(a,h){return Y1(a,e,n(h),{})}}function Ko(e,n){return function(a,h){var d;if(a===r&&h===r)return n;if(a!==r&&(d=a),h!==r){if(d===r)return h;typeof a=="string"||typeof h=="string"?(a=qr(a),h=qr(h)):(a=Of(a),h=Of(h)),d=e(a,h)}return d}}function Xc(e){return ki(function(n){return n=Nt(n,Br(_e())),Ue(function(a){var h=this;return e(n,function(d){return zr(d,h,a)})})})}function ko(e,n){n=n===r?" ":qr(n);var a=n.length;if(a<2)return a?kc(n,e):n;var h=kc(n,To(e/Hn(n)));return qn(n)?ln(pi(h),0,e).join(""):h.slice(0,e)}function x_(e,n,a,h){var d=n&Ce,y=Ds(e);function m(){for(var b=-1,O=arguments.length,q=-1,K=h.length,Q=D(K+O),ae=this&&this!==mr&&this instanceof m?y:e;++q<K;)Q[q]=h[q];for(;O--;)Q[q++]=arguments[++b];return zr(ae,d?a:this,Q)}return m}function Hf(e){return function(n,a,h){return h&&typeof h!="number"&&Or(n,a,h)&&(a=h=r),n=Gi(n),a===r?(a=n,n=0):a=Gi(a),h=h===r?n<a?1:-1:Gi(h),u_(n,a,h,e)}}function Vo(e){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=ri(n),a=ri(a)),e(n,a)}}function Kf(e,n,a,h,d,y,m,b,O,q){var K=n&Ge,Q=K?m:r,ae=K?r:m,de=K?y:r,be=K?r:y;n|=K?Ye:Jt,n&=~(K?Jt:Ye),n&Gt||(n&=~(Ce|Ve));var Fe=[e,n,d,de,Q,be,ae,b,O,q],Ee=a.apply(r,Fe);return ou(e)&&rd(Ee,Fe),Ee.placeholder=h,id(Ee,e,n)}function Zc(e){var n=cr[e];return function(a,h){if(a=ri(a),h=h==null?0:br(De(h),292),h&&rf(a)){var d=(nt(a)+"e").split("e"),y=n(d[0]+"e"+(+d[1]+h));return d=(nt(y)+"e").split("e"),+(d[0]+"e"+(+d[1]-h))}return n(a)}}var S_=Vn&&1/bo(new Vn([,-0]))[1]==bn?function(e){return new Vn(e)}:bu;function kf(e){return function(n){var a=Er(n);return a==fi?Ac(n):a==di?qw(n):Lw(n,e(n))}}function Ki(e,n,a,h,d,y,m,b){var O=n&Ve;if(!O&&typeof e!="function")throw new Yr(g);var q=h?h.length:0;if(q||(n&=~(Ye|Jt),h=d=r),m=m===r?m:ur(De(m),0),b=b===r?b:De(b),q-=d?d.length:0,n&Jt){var K=h,Q=d;h=d=r}var ae=O?r:ru(e),de=[e,n,a,h,d,K,Q,y,m,b];if(ae&&z_(de,ae),e=de[0],n=de[1],a=de[2],h=de[3],d=de[4],b=de[9]=de[9]===r?O?0:e.length:ur(de[9]-q,0),!b&&n&(Ge|$e)&&(n&=~(Ge|$e)),!n||n==Ce)var be=E_(e,n,a);else n==Ge||n==$e?be=I_(e,n,b):(n==Ye||n==(Ce|Ye))&&!d.length?be=x_(e,n,a,h):be=Ho.apply(r,de);var Fe=ae?Sf:rd;return id(Fe(be,de),e,n)}function Vf(e,n,a,h){return e===r||yi(e,kn[a])&&!ut.call(h,a)?n:e}function Wf(e,n,a,h,d,y){return Lt(e)&&Lt(n)&&(y.set(n,e),Uo(e,n,r,Wf,y),y.delete(n)),e}function P_(e){return Ms(e)?r:e}function Gf(e,n,a,h,d,y){var m=a&Y,b=e.length,O=n.length;if(b!=O&&!(m&&O>b))return!1;var q=y.get(e),K=y.get(n);if(q&&K)return q==n&&K==e;var Q=-1,ae=!0,de=a&me?new Sn:r;for(y.set(e,n),y.set(n,e);++Q<b;){var be=e[Q],Fe=n[Q];if(h)var Ee=m?h(Fe,be,Q,n,e,y):h(be,Fe,Q,e,n,y);if(Ee!==r){if(Ee)continue;ae=!1;break}if(de){if(!Ic(n,function(Be,He){if(!Es(de,He)&&(be===Be||d(be,Be,a,h,y)))return de.push(He)})){ae=!1;break}}else if(!(be===Fe||d(be,Fe,a,h,y))){ae=!1;break}}return y.delete(e),y.delete(n),ae}function O_(e,n,a,h,d,y,m){switch(a){case Un:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case bs:return!(e.byteLength!=n.byteLength||!y(new Oo(e),new Oo(n)));case gs:case ys:case vs:return yi(+e,+n);case fo:return e.name==n.name&&e.message==n.message;case ms:case ws:return e==n+"";case fi:var b=Ac;case di:var O=h&Y;if(b||(b=bo),e.size!=n.size&&!O)return!1;var q=m.get(e);if(q)return q==n;h|=me,m.set(e,n);var K=Gf(b(e),b(n),h,d,y,m);return m.delete(e),K;case go:if(Os)return Os.call(e)==Os.call(n)}return!1}function R_(e,n,a,h,d,y){var m=a&Y,b=eu(e),O=b.length,q=eu(n),K=q.length;if(O!=K&&!m)return!1;for(var Q=O;Q--;){var ae=b[Q];if(!(m?ae in n:ut.call(n,ae)))return!1}var de=y.get(e),be=y.get(n);if(de&&be)return de==n&&be==e;var Fe=!0;y.set(e,n),y.set(n,e);for(var Ee=m;++Q<O;){ae=b[Q];var Be=e[ae],He=n[ae];if(h)var Kr=m?h(He,Be,ae,n,e,y):h(Be,He,ae,e,n,y);if(!(Kr===r?Be===He||d(Be,He,a,h,y):Kr)){Fe=!1;break}Ee||(Ee=ae=="constructor")}if(Fe&&!Ee){var Rr=e.constructor,kr=n.constructor;Rr!=kr&&"constructor"in e&&"constructor"in n&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof kr=="function"&&kr instanceof kr)&&(Fe=!1)}return y.delete(e),y.delete(n),Fe}function ki(e){return cu(ed(e,r,ud),e+"")}function eu(e){return pf(e,pr,nu)}function tu(e){return pf(e,$r,Jf)}var ru=Do?function(e){return Do.get(e)}:bu;function Wo(e){for(var n=e.name+"",a=Wn[n],h=ut.call(Wn,n)?a.length:0;h--;){var d=a[h],y=d.func;if(y==null||y==e)return d.name}return n}function Yn(e){var n=ut.call(p,"placeholder")?p:e;return n.placeholder}function _e(){var e=p.iteratee||wu;return e=e===wu?vf:e,arguments.length?e(arguments[0],arguments[1]):e}function Go(e,n){var a=e.__data__;return M_(n)?a[typeof n=="string"?"string":"hash"]:a.map}function iu(e){for(var n=pr(e),a=n.length;a--;){var h=n[a],d=e[h];n[a]=[h,d,Xf(d)]}return n}function Rn(e,n){var a=Uw(e,n);return yf(a)?a:r}function A_(e){var n=ut.call(e,In),a=e[In];try{e[In]=r;var h=!0}catch{}var d=So.call(e);return h&&(n?e[In]=a:delete e[In]),d}var nu=Tc?function(e){return e==null?[]:(e=pt(e),nn(Tc(e),function(n){return ef.call(e,n)}))}:Eu,Jf=Tc?function(e){for(var n=[];e;)sn(n,nu(e)),e=Ro(e);return n}:Eu,Er=Pr;(Nc&&Er(new Nc(new ArrayBuffer(1)))!=Un||xs&&Er(new xs)!=fi||Dc&&Er(Dc.resolve())!=hl||Vn&&Er(new Vn)!=di||Ss&&Er(new Ss)!=_s)&&(Er=function(e){var n=Pr(e),a=n==zi?e.constructor:r,h=a?An(a):"";if(h)switch(h){case l1:return Un;case f1:return fi;case d1:return hl;case p1:return di;case g1:return _s}return n});function C_(e,n,a){for(var h=-1,d=a.length;++h<d;){var y=a[h],m=y.size;switch(y.type){case"drop":e+=m;break;case"dropRight":n-=m;break;case"take":n=br(n,e+m);break;case"takeRight":e=ur(e,n-m);break}}return{start:e,end:n}}function T_(e){var n=e.match(jm);return n?n[1].split($m):[]}function Qf(e,n,a){n=hn(n,e);for(var h=-1,d=n.length,y=!1;++h<d;){var m=Si(n[h]);if(!(y=e!=null&&a(e,m)))break;e=e[m]}return y||++h!=d?y:(d=e==null?0:e.length,!!d&&ta(d)&&Vi(m,d)&&(Te(e)||Cn(e)))}function N_(e){var n=e.length,a=new e.constructor(n);return n&&typeof e[0]=="string"&&ut.call(e,"index")&&(a.index=e.index,a.input=e.input),a}function Yf(e){return typeof e.constructor=="function"&&!Ls(e)?Gn(Ro(e)):{}}function D_(e,n,a){var h=e.constructor;switch(n){case bs:return Yc(e);case gs:case ys:return new h(+e);case Un:return y_(e,a);case ic:case nc:case sc:case oc:case ac:case cc:case uc:case hc:case lc:return Df(e,a);case fi:return new h;case vs:case ws:return new h(e);case ms:return v_(e);case di:return new h;case go:return m_(e)}}function L_(e,n){var a=n.length;if(!a)return e;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),e.replace(Mm,`{
/* [wrapped with `+n+`] */
`)}function F_(e){return Te(e)||Cn(e)||!!(tf&&e&&e[tf])}function Vi(e,n){var a=typeof e;return n=n??rn,!!n&&(a=="number"||a!="symbol"&&Wm.test(e))&&e>-1&&e%1==0&&e<n}function Or(e,n,a){if(!Lt(a))return!1;var h=typeof n;return(h=="number"?jr(a)&&Vi(n,a.length):h=="string"&&n in a)?yi(a[n],e):!1}function su(e,n){if(Te(e))return!1;var a=typeof e;return a=="number"||a=="symbol"||a=="boolean"||e==null||Hr(e)?!0:Nm.test(e)||!Tm.test(e)||n!=null&&e in pt(n)}function M_(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function ou(e){var n=Wo(e),a=p[n];if(typeof a!="function"||!(n in qe.prototype))return!1;if(e===a)return!0;var h=ru(a);return!!h&&e===h[0]}function j_(e){return!!Yl&&Yl in e}var $_=Io?Wi:Iu;function Ls(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||kn;return e===a}function Xf(e){return e===e&&!Lt(e)}function Zf(e,n){return function(a){return a==null?!1:a[e]===n&&(n!==r||e in pt(a))}}function U_(e){var n=Zo(e,function(h){return a.size===w&&a.clear(),h}),a=n.cache;return n}function z_(e,n){var a=e[1],h=n[1],d=a|h,y=d<(Ce|Ve|Qt),m=h==Qt&&a==Ge||h==Qt&&a==Sr&&e[7].length<=n[8]||h==(Qt|Sr)&&n[7].length<=n[8]&&a==Ge;if(!(y||m))return e;h&Ce&&(e[2]=n[2],d|=a&Ce?0:Gt);var b=n[3];if(b){var O=e[3];e[3]=O?Ff(O,b,n[4]):b,e[4]=O?on(e[3],C):n[4]}return b=n[5],b&&(O=e[5],e[5]=O?Mf(O,b,n[6]):b,e[6]=O?on(e[5],C):n[6]),b=n[7],b&&(e[7]=b),h&Qt&&(e[8]=e[8]==null?n[8]:br(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=d,e}function B_(e){var n=[];if(e!=null)for(var a in pt(e))n.push(a);return n}function q_(e){return So.call(e)}function ed(e,n,a){return n=ur(n===r?e.length-1:n,0),function(){for(var h=arguments,d=-1,y=ur(h.length-n,0),m=D(y);++d<y;)m[d]=h[n+d];d=-1;for(var b=D(n+1);++d<n;)b[d]=h[d];return b[n]=a(m),zr(e,this,b)}}function td(e,n){return n.length<2?e:On(e,ei(n,0,-1))}function H_(e,n){for(var a=e.length,h=br(n.length,a),d=Mr(e);h--;){var y=n[h];e[h]=Vi(y,a)?d[y]:r}return e}function au(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var rd=nd(Sf),Fs=n1||function(e,n){return mr.setTimeout(e,n)},cu=nd(f_);function id(e,n,a){var h=n+"";return cu(e,L_(h,K_(T_(h),a)))}function nd(e){var n=0,a=0;return function(){var h=c1(),d=lm-(h-a);if(a=h,d>0){if(++n>=hm)return arguments[0]}else n=0;return e.apply(r,arguments)}}function Jo(e,n){var a=-1,h=e.length,d=h-1;for(n=n===r?h:n;++a<n;){var y=Kc(a,d),m=e[y];e[y]=e[a],e[a]=m}return e.length=n,e}var sd=U_(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Dm,function(a,h,d,y){n.push(d?y.replace(Bm,"$1"):h||a)}),n});function Si(e){if(typeof e=="string"||Hr(e))return e;var n=e+"";return n=="0"&&1/e==-bn?"-0":n}function An(e){if(e!=null){try{return xo.call(e)}catch{}try{return e+""}catch{}}return""}function K_(e,n){return Qr(vm,function(a){var h="_."+a[0];n&a[1]&&!wo(e,h)&&e.push(h)}),e.sort()}function od(e){if(e instanceof qe)return e.clone();var n=new Xr(e.__wrapped__,e.__chain__);return n.__actions__=Mr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function k_(e,n,a){(a?Or(e,n,a):n===r)?n=1:n=ur(De(n),0);var h=e==null?0:e.length;if(!h||n<1)return[];for(var d=0,y=0,m=D(To(h/n));d<h;)m[y++]=ei(e,d,d+=n);return m}function V_(e){for(var n=-1,a=e==null?0:e.length,h=0,d=[];++n<a;){var y=e[n];y&&(d[h++]=y)}return d}function W_(){var e=arguments.length;if(!e)return[];for(var n=D(e-1),a=arguments[0],h=e;h--;)n[h-1]=arguments[h];return sn(Te(a)?Mr(a):[a],wr(n,1))}var G_=Ue(function(e,n){return Yt(e)?As(e,wr(n,1,Yt,!0)):[]}),J_=Ue(function(e,n){var a=ti(n);return Yt(a)&&(a=r),Yt(e)?As(e,wr(n,1,Yt,!0),_e(a,2)):[]}),Q_=Ue(function(e,n){var a=ti(n);return Yt(a)&&(a=r),Yt(e)?As(e,wr(n,1,Yt,!0),r,a):[]});function Y_(e,n,a){var h=e==null?0:e.length;return h?(n=a||n===r?1:De(n),ei(e,n<0?0:n,h)):[]}function X_(e,n,a){var h=e==null?0:e.length;return h?(n=a||n===r?1:De(n),n=h-n,ei(e,0,n<0?0:n)):[]}function Z_(e,n){return e&&e.length?Bo(e,_e(n,3),!0,!0):[]}function eb(e,n){return e&&e.length?Bo(e,_e(n,3),!0):[]}function tb(e,n,a,h){var d=e==null?0:e.length;return d?(a&&typeof a!="number"&&Or(e,n,a)&&(a=0,h=d),W1(e,n,a,h)):[]}function ad(e,n,a){var h=e==null?0:e.length;if(!h)return-1;var d=a==null?0:De(a);return d<0&&(d=ur(h+d,0)),_o(e,_e(n,3),d)}function cd(e,n,a){var h=e==null?0:e.length;if(!h)return-1;var d=h-1;return a!==r&&(d=De(a),d=a<0?ur(h+d,0):br(d,h-1)),_o(e,_e(n,3),d,!0)}function ud(e){var n=e==null?0:e.length;return n?wr(e,1):[]}function rb(e){var n=e==null?0:e.length;return n?wr(e,bn):[]}function ib(e,n){var a=e==null?0:e.length;return a?(n=n===r?1:De(n),wr(e,n)):[]}function nb(e){for(var n=-1,a=e==null?0:e.length,h={};++n<a;){var d=e[n];h[d[0]]=d[1]}return h}function hd(e){return e&&e.length?e[0]:r}function sb(e,n,a){var h=e==null?0:e.length;if(!h)return-1;var d=a==null?0:De(a);return d<0&&(d=ur(h+d,0)),Bn(e,n,d)}function ob(e){var n=e==null?0:e.length;return n?ei(e,0,-1):[]}var ab=Ue(function(e){var n=Nt(e,Jc);return n.length&&n[0]===e[0]?Uc(n):[]}),cb=Ue(function(e){var n=ti(e),a=Nt(e,Jc);return n===ti(a)?n=r:a.pop(),a.length&&a[0]===e[0]?Uc(a,_e(n,2)):[]}),ub=Ue(function(e){var n=ti(e),a=Nt(e,Jc);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===e[0]?Uc(a,r,n):[]});function hb(e,n){return e==null?"":o1.call(e,n)}function ti(e){var n=e==null?0:e.length;return n?e[n-1]:r}function lb(e,n,a){var h=e==null?0:e.length;if(!h)return-1;var d=h;return a!==r&&(d=De(a),d=d<0?ur(h+d,0):br(d,h-1)),n===n?Kw(e,n,d):_o(e,Hl,d,!0)}function fb(e,n){return e&&e.length?bf(e,De(n)):r}var db=Ue(ld);function ld(e,n){return e&&e.length&&n&&n.length?Hc(e,n):e}function pb(e,n,a){return e&&e.length&&n&&n.length?Hc(e,n,_e(a,2)):e}function gb(e,n,a){return e&&e.length&&n&&n.length?Hc(e,n,r,a):e}var yb=ki(function(e,n){var a=e==null?0:e.length,h=Fc(e,n);return xf(e,Nt(n,function(d){return Vi(d,a)?+d:d}).sort(Lf)),h});function vb(e,n){var a=[];if(!(e&&e.length))return a;var h=-1,d=[],y=e.length;for(n=_e(n,3);++h<y;){var m=e[h];n(m,h,e)&&(a.push(m),d.push(h))}return xf(e,d),a}function uu(e){return e==null?e:h1.call(e)}function mb(e,n,a){var h=e==null?0:e.length;return h?(a&&typeof a!="number"&&Or(e,n,a)?(n=0,a=h):(n=n==null?0:De(n),a=a===r?h:De(a)),ei(e,n,a)):[]}function wb(e,n){return zo(e,n)}function _b(e,n,a){return Vc(e,n,_e(a,2))}function bb(e,n){var a=e==null?0:e.length;if(a){var h=zo(e,n);if(h<a&&yi(e[h],n))return h}return-1}function Eb(e,n){return zo(e,n,!0)}function Ib(e,n,a){return Vc(e,n,_e(a,2),!0)}function xb(e,n){var a=e==null?0:e.length;if(a){var h=zo(e,n,!0)-1;if(yi(e[h],n))return h}return-1}function Sb(e){return e&&e.length?Pf(e):[]}function Pb(e,n){return e&&e.length?Pf(e,_e(n,2)):[]}function Ob(e){var n=e==null?0:e.length;return n?ei(e,1,n):[]}function Rb(e,n,a){return e&&e.length?(n=a||n===r?1:De(n),ei(e,0,n<0?0:n)):[]}function Ab(e,n,a){var h=e==null?0:e.length;return h?(n=a||n===r?1:De(n),n=h-n,ei(e,n<0?0:n,h)):[]}function Cb(e,n){return e&&e.length?Bo(e,_e(n,3),!1,!0):[]}function Tb(e,n){return e&&e.length?Bo(e,_e(n,3)):[]}var Nb=Ue(function(e){return un(wr(e,1,Yt,!0))}),Db=Ue(function(e){var n=ti(e);return Yt(n)&&(n=r),un(wr(e,1,Yt,!0),_e(n,2))}),Lb=Ue(function(e){var n=ti(e);return n=typeof n=="function"?n:r,un(wr(e,1,Yt,!0),r,n)});function Fb(e){return e&&e.length?un(e):[]}function Mb(e,n){return e&&e.length?un(e,_e(n,2)):[]}function jb(e,n){return n=typeof n=="function"?n:r,e&&e.length?un(e,r,n):[]}function hu(e){if(!(e&&e.length))return[];var n=0;return e=nn(e,function(a){if(Yt(a))return n=ur(a.length,n),!0}),Oc(n,function(a){return Nt(e,xc(a))})}function fd(e,n){if(!(e&&e.length))return[];var a=hu(e);return n==null?a:Nt(a,function(h){return zr(n,r,h)})}var $b=Ue(function(e,n){return Yt(e)?As(e,n):[]}),Ub=Ue(function(e){return Gc(nn(e,Yt))}),zb=Ue(function(e){var n=ti(e);return Yt(n)&&(n=r),Gc(nn(e,Yt),_e(n,2))}),Bb=Ue(function(e){var n=ti(e);return n=typeof n=="function"?n:r,Gc(nn(e,Yt),r,n)}),qb=Ue(hu);function Hb(e,n){return Cf(e||[],n||[],Rs)}function Kb(e,n){return Cf(e||[],n||[],Ns)}var kb=Ue(function(e){var n=e.length,a=n>1?e[n-1]:r;return a=typeof a=="function"?(e.pop(),a):r,fd(e,a)});function dd(e){var n=p(e);return n.__chain__=!0,n}function Vb(e,n){return n(e),e}function Qo(e,n){return n(e)}var Wb=ki(function(e){var n=e.length,a=n?e[0]:0,h=this.__wrapped__,d=function(y){return Fc(y,e)};return n>1||this.__actions__.length||!(h instanceof qe)||!Vi(a)?this.thru(d):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:Qo,args:[d],thisArg:r}),new Xr(h,this.__chain__).thru(function(y){return n&&!y.length&&y.push(r),y}))});function Gb(){return dd(this)}function Jb(){return new Xr(this.value(),this.__chain__)}function Qb(){this.__values__===r&&(this.__values__=Od(this.value()));var e=this.__index__>=this.__values__.length,n=e?r:this.__values__[this.__index__++];return{done:e,value:n}}function Yb(){return this}function Xb(e){for(var n,a=this;a instanceof Fo;){var h=od(a);h.__index__=0,h.__values__=r,n?d.__wrapped__=h:n=h;var d=h;a=a.__wrapped__}return d.__wrapped__=e,n}function Zb(){var e=this.__wrapped__;if(e instanceof qe){var n=e;return this.__actions__.length&&(n=new qe(this)),n=n.reverse(),n.__actions__.push({func:Qo,args:[uu],thisArg:r}),new Xr(n,this.__chain__)}return this.thru(uu)}function eE(){return Af(this.__wrapped__,this.__actions__)}var tE=qo(function(e,n,a){ut.call(e,a)?++e[a]:Hi(e,a,1)});function rE(e,n,a){var h=Te(e)?Bl:V1;return a&&Or(e,n,a)&&(n=r),h(e,_e(n,3))}function iE(e,n){var a=Te(e)?nn:ff;return a(e,_e(n,3))}var nE=zf(ad),sE=zf(cd);function oE(e,n){return wr(Yo(e,n),1)}function aE(e,n){return wr(Yo(e,n),bn)}function cE(e,n,a){return a=a===r?1:De(a),wr(Yo(e,n),a)}function pd(e,n){var a=Te(e)?Qr:cn;return a(e,_e(n,3))}function gd(e,n){var a=Te(e)?Ow:lf;return a(e,_e(n,3))}var uE=qo(function(e,n,a){ut.call(e,a)?e[a].push(n):Hi(e,a,[n])});function hE(e,n,a,h){e=jr(e)?e:Zn(e),a=a&&!h?De(a):0;var d=e.length;return a<0&&(a=ur(d+a,0)),ra(e)?a<=d&&e.indexOf(n,a)>-1:!!d&&Bn(e,n,a)>-1}var lE=Ue(function(e,n,a){var h=-1,d=typeof n=="function",y=jr(e)?D(e.length):[];return cn(e,function(m){y[++h]=d?zr(n,m,a):Cs(m,n,a)}),y}),fE=qo(function(e,n,a){Hi(e,a,n)});function Yo(e,n){var a=Te(e)?Nt:mf;return a(e,_e(n,3))}function dE(e,n,a,h){return e==null?[]:(Te(n)||(n=n==null?[]:[n]),a=h?r:a,Te(a)||(a=a==null?[]:[a]),Ef(e,n,a))}var pE=qo(function(e,n,a){e[a?0:1].push(n)},function(){return[[],[]]});function gE(e,n,a){var h=Te(e)?Ec:kl,d=arguments.length<3;return h(e,_e(n,4),a,d,cn)}function yE(e,n,a){var h=Te(e)?Rw:kl,d=arguments.length<3;return h(e,_e(n,4),a,d,lf)}function vE(e,n){var a=Te(e)?nn:ff;return a(e,ea(_e(n,3)))}function mE(e){var n=Te(e)?af:h_;return n(e)}function wE(e,n,a){(a?Or(e,n,a):n===r)?n=1:n=De(n);var h=Te(e)?B1:l_;return h(e,n)}function _E(e){var n=Te(e)?q1:d_;return n(e)}function bE(e){if(e==null)return 0;if(jr(e))return ra(e)?Hn(e):e.length;var n=Er(e);return n==fi||n==di?e.size:Bc(e).length}function EE(e,n,a){var h=Te(e)?Ic:p_;return a&&Or(e,n,a)&&(n=r),h(e,_e(n,3))}var IE=Ue(function(e,n){if(e==null)return[];var a=n.length;return a>1&&Or(e,n[0],n[1])?n=[]:a>2&&Or(n[0],n[1],n[2])&&(n=[n[0]]),Ef(e,wr(n,1),[])}),Xo=i1||function(){return mr.Date.now()};function xE(e,n){if(typeof n!="function")throw new Yr(g);return e=De(e),function(){if(--e<1)return n.apply(this,arguments)}}function yd(e,n,a){return n=a?r:n,n=e&&n==null?e.length:n,Ki(e,Qt,r,r,r,r,n)}function vd(e,n){var a;if(typeof n!="function")throw new Yr(g);return e=De(e),function(){return--e>0&&(a=n.apply(this,arguments)),e<=1&&(n=r),a}}var lu=Ue(function(e,n,a){var h=Ce;if(a.length){var d=on(a,Yn(lu));h|=Ye}return Ki(e,h,n,a,d)}),md=Ue(function(e,n,a){var h=Ce|Ve;if(a.length){var d=on(a,Yn(md));h|=Ye}return Ki(n,h,e,a,d)});function wd(e,n,a){n=a?r:n;var h=Ki(e,Ge,r,r,r,r,r,n);return h.placeholder=wd.placeholder,h}function _d(e,n,a){n=a?r:n;var h=Ki(e,$e,r,r,r,r,r,n);return h.placeholder=_d.placeholder,h}function bd(e,n,a){var h,d,y,m,b,O,q=0,K=!1,Q=!1,ae=!0;if(typeof e!="function")throw new Yr(g);n=ri(n)||0,Lt(a)&&(K=!!a.leading,Q="maxWait"in a,y=Q?ur(ri(a.maxWait)||0,n):y,ae="trailing"in a?!!a.trailing:ae);function de(Xt){var vi=h,Ji=d;return h=d=r,q=Xt,m=e.apply(Ji,vi),m}function be(Xt){return q=Xt,b=Fs(Be,n),K?de(Xt):m}function Fe(Xt){var vi=Xt-O,Ji=Xt-q,zd=n-vi;return Q?br(zd,y-Ji):zd}function Ee(Xt){var vi=Xt-O,Ji=Xt-q;return O===r||vi>=n||vi<0||Q&&Ji>=y}function Be(){var Xt=Xo();if(Ee(Xt))return He(Xt);b=Fs(Be,Fe(Xt))}function He(Xt){return b=r,ae&&h?de(Xt):(h=d=r,m)}function Kr(){b!==r&&Tf(b),q=0,h=O=d=b=r}function Rr(){return b===r?m:He(Xo())}function kr(){var Xt=Xo(),vi=Ee(Xt);if(h=arguments,d=this,O=Xt,vi){if(b===r)return be(O);if(Q)return Tf(b),b=Fs(Be,n),de(O)}return b===r&&(b=Fs(Be,n)),m}return kr.cancel=Kr,kr.flush=Rr,kr}var SE=Ue(function(e,n){return hf(e,1,n)}),PE=Ue(function(e,n,a){return hf(e,ri(n)||0,a)});function OE(e){return Ki(e,tn)}function Zo(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Yr(g);var a=function(){var h=arguments,d=n?n.apply(this,h):h[0],y=a.cache;if(y.has(d))return y.get(d);var m=e.apply(this,h);return a.cache=y.set(d,m)||y,m};return a.cache=new(Zo.Cache||qi),a}Zo.Cache=qi;function ea(e){if(typeof e!="function")throw new Yr(g);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function RE(e){return vd(2,e)}var AE=g_(function(e,n){n=n.length==1&&Te(n[0])?Nt(n[0],Br(_e())):Nt(wr(n,1),Br(_e()));var a=n.length;return Ue(function(h){for(var d=-1,y=br(h.length,a);++d<y;)h[d]=n[d].call(this,h[d]);return zr(e,this,h)})}),fu=Ue(function(e,n){var a=on(n,Yn(fu));return Ki(e,Ye,r,n,a)}),Ed=Ue(function(e,n){var a=on(n,Yn(Ed));return Ki(e,Jt,r,n,a)}),CE=ki(function(e,n){return Ki(e,Sr,r,r,r,n)});function TE(e,n){if(typeof e!="function")throw new Yr(g);return n=n===r?n:De(n),Ue(e,n)}function NE(e,n){if(typeof e!="function")throw new Yr(g);return n=n==null?0:ur(De(n),0),Ue(function(a){var h=a[n],d=ln(a,0,n);return h&&sn(d,h),zr(e,this,d)})}function DE(e,n,a){var h=!0,d=!0;if(typeof e!="function")throw new Yr(g);return Lt(a)&&(h="leading"in a?!!a.leading:h,d="trailing"in a?!!a.trailing:d),bd(e,n,{leading:h,maxWait:n,trailing:d})}function LE(e){return yd(e,1)}function FE(e,n){return fu(Qc(n),e)}function ME(){if(!arguments.length)return[];var e=arguments[0];return Te(e)?e:[e]}function jE(e){return Zr(e,ce)}function $E(e,n){return n=typeof n=="function"?n:r,Zr(e,ce,n)}function UE(e){return Zr(e,N|ce)}function zE(e,n){return n=typeof n=="function"?n:r,Zr(e,N|ce,n)}function BE(e,n){return n==null||uf(e,n,pr(n))}function yi(e,n){return e===n||e!==e&&n!==n}var qE=Vo($c),HE=Vo(function(e,n){return e>=n}),Cn=gf(function(){return arguments}())?gf:function(e){return Kt(e)&&ut.call(e,"callee")&&!ef.call(e,"callee")},Te=D.isArray,KE=Fl?Br(Fl):X1;function jr(e){return e!=null&&ta(e.length)&&!Wi(e)}function Yt(e){return Kt(e)&&jr(e)}function kE(e){return e===!0||e===!1||Kt(e)&&Pr(e)==gs}var fn=s1||Iu,VE=Ml?Br(Ml):Z1;function WE(e){return Kt(e)&&e.nodeType===1&&!Ms(e)}function GE(e){if(e==null)return!0;if(jr(e)&&(Te(e)||typeof e=="string"||typeof e.splice=="function"||fn(e)||Xn(e)||Cn(e)))return!e.length;var n=Er(e);if(n==fi||n==di)return!e.size;if(Ls(e))return!Bc(e).length;for(var a in e)if(ut.call(e,a))return!1;return!0}function JE(e,n){return Ts(e,n)}function QE(e,n,a){a=typeof a=="function"?a:r;var h=a?a(e,n):r;return h===r?Ts(e,n,r,a):!!h}function du(e){if(!Kt(e))return!1;var n=Pr(e);return n==fo||n==wm||typeof e.message=="string"&&typeof e.name=="string"&&!Ms(e)}function YE(e){return typeof e=="number"&&rf(e)}function Wi(e){if(!Lt(e))return!1;var n=Pr(e);return n==po||n==ul||n==mm||n==bm}function Id(e){return typeof e=="number"&&e==De(e)}function ta(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=rn}function Lt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function Kt(e){return e!=null&&typeof e=="object"}var xd=jl?Br(jl):t_;function XE(e,n){return e===n||zc(e,n,iu(n))}function ZE(e,n,a){return a=typeof a=="function"?a:r,zc(e,n,iu(n),a)}function eI(e){return Sd(e)&&e!=+e}function tI(e){if($_(e))throw new Ae(f);return yf(e)}function rI(e){return e===null}function iI(e){return e==null}function Sd(e){return typeof e=="number"||Kt(e)&&Pr(e)==vs}function Ms(e){if(!Kt(e)||Pr(e)!=zi)return!1;var n=Ro(e);if(n===null)return!0;var a=ut.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&xo.call(a)==Zw}var pu=$l?Br($l):r_;function nI(e){return Id(e)&&e>=-rn&&e<=rn}var Pd=Ul?Br(Ul):i_;function ra(e){return typeof e=="string"||!Te(e)&&Kt(e)&&Pr(e)==ws}function Hr(e){return typeof e=="symbol"||Kt(e)&&Pr(e)==go}var Xn=zl?Br(zl):n_;function sI(e){return e===r}function oI(e){return Kt(e)&&Er(e)==_s}function aI(e){return Kt(e)&&Pr(e)==Im}var cI=Vo(qc),uI=Vo(function(e,n){return e<=n});function Od(e){if(!e)return[];if(jr(e))return ra(e)?pi(e):Mr(e);if(Is&&e[Is])return Bw(e[Is]());var n=Er(e),a=n==fi?Ac:n==di?bo:Zn;return a(e)}function Gi(e){if(!e)return e===0?e:0;if(e=ri(e),e===bn||e===-bn){var n=e<0?-1:1;return n*pm}return e===e?e:0}function De(e){var n=Gi(e),a=n%1;return n===n?a?n-a:n:0}function Rd(e){return e?Pn(De(e),0,Ei):0}function ri(e){if(typeof e=="number")return e;if(Hr(e))return ho;if(Lt(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Lt(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Vl(e);var a=Km.test(e);return a||Vm.test(e)?xw(e.slice(2),a?2:8):Hm.test(e)?ho:+e}function Ad(e){return xi(e,$r(e))}function hI(e){return e?Pn(De(e),-rn,rn):e===0?e:0}function nt(e){return e==null?"":qr(e)}var lI=Jn(function(e,n){if(Ls(n)||jr(n)){xi(n,pr(n),e);return}for(var a in n)ut.call(n,a)&&Rs(e,a,n[a])}),Cd=Jn(function(e,n){xi(n,$r(n),e)}),ia=Jn(function(e,n,a,h){xi(n,$r(n),e,h)}),fI=Jn(function(e,n,a,h){xi(n,pr(n),e,h)}),dI=ki(Fc);function pI(e,n){var a=Gn(e);return n==null?a:cf(a,n)}var gI=Ue(function(e,n){e=pt(e);var a=-1,h=n.length,d=h>2?n[2]:r;for(d&&Or(n[0],n[1],d)&&(h=1);++a<h;)for(var y=n[a],m=$r(y),b=-1,O=m.length;++b<O;){var q=m[b],K=e[q];(K===r||yi(K,kn[q])&&!ut.call(e,q))&&(e[q]=y[q])}return e}),yI=Ue(function(e){return e.push(r,Wf),zr(Td,r,e)});function vI(e,n){return ql(e,_e(n,3),Ii)}function mI(e,n){return ql(e,_e(n,3),jc)}function wI(e,n){return e==null?e:Mc(e,_e(n,3),$r)}function _I(e,n){return e==null?e:df(e,_e(n,3),$r)}function bI(e,n){return e&&Ii(e,_e(n,3))}function EI(e,n){return e&&jc(e,_e(n,3))}function II(e){return e==null?[]:$o(e,pr(e))}function xI(e){return e==null?[]:$o(e,$r(e))}function gu(e,n,a){var h=e==null?r:On(e,n);return h===r?a:h}function SI(e,n){return e!=null&&Qf(e,n,G1)}function yu(e,n){return e!=null&&Qf(e,n,J1)}var PI=qf(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=So.call(n)),e[n]=a},mu(Ur)),OI=qf(function(e,n,a){n!=null&&typeof n.toString!="function"&&(n=So.call(n)),ut.call(e,n)?e[n].push(a):e[n]=[a]},_e),RI=Ue(Cs);function pr(e){return jr(e)?of(e):Bc(e)}function $r(e){return jr(e)?of(e,!0):s_(e)}function AI(e,n){var a={};return n=_e(n,3),Ii(e,function(h,d,y){Hi(a,n(h,d,y),h)}),a}function CI(e,n){var a={};return n=_e(n,3),Ii(e,function(h,d,y){Hi(a,d,n(h,d,y))}),a}var TI=Jn(function(e,n,a){Uo(e,n,a)}),Td=Jn(function(e,n,a,h){Uo(e,n,a,h)}),NI=ki(function(e,n){var a={};if(e==null)return a;var h=!1;n=Nt(n,function(y){return y=hn(y,e),h||(h=y.length>1),y}),xi(e,tu(e),a),h&&(a=Zr(a,N|B|ce,P_));for(var d=n.length;d--;)Wc(a,n[d]);return a});function DI(e,n){return Nd(e,ea(_e(n)))}var LI=ki(function(e,n){return e==null?{}:a_(e,n)});function Nd(e,n){if(e==null)return{};var a=Nt(tu(e),function(h){return[h]});return n=_e(n),If(e,a,function(h,d){return n(h,d[0])})}function FI(e,n,a){n=hn(n,e);var h=-1,d=n.length;for(d||(d=1,e=r);++h<d;){var y=e==null?r:e[Si(n[h])];y===r&&(h=d,y=a),e=Wi(y)?y.call(e):y}return e}function MI(e,n,a){return e==null?e:Ns(e,n,a)}function jI(e,n,a,h){return h=typeof h=="function"?h:r,e==null?e:Ns(e,n,a,h)}var Dd=kf(pr),Ld=kf($r);function $I(e,n,a){var h=Te(e),d=h||fn(e)||Xn(e);if(n=_e(n,4),a==null){var y=e&&e.constructor;d?a=h?new y:[]:Lt(e)?a=Wi(y)?Gn(Ro(e)):{}:a={}}return(d?Qr:Ii)(e,function(m,b,O){return n(a,m,b,O)}),a}function UI(e,n){return e==null?!0:Wc(e,n)}function zI(e,n,a){return e==null?e:Rf(e,n,Qc(a))}function BI(e,n,a,h){return h=typeof h=="function"?h:r,e==null?e:Rf(e,n,Qc(a),h)}function Zn(e){return e==null?[]:Rc(e,pr(e))}function qI(e){return e==null?[]:Rc(e,$r(e))}function HI(e,n,a){return a===r&&(a=n,n=r),a!==r&&(a=ri(a),a=a===a?a:0),n!==r&&(n=ri(n),n=n===n?n:0),Pn(ri(e),n,a)}function KI(e,n,a){return n=Gi(n),a===r?(a=n,n=0):a=Gi(a),e=ri(e),Q1(e,n,a)}function kI(e,n,a){if(a&&typeof a!="boolean"&&Or(e,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof e=="boolean"&&(a=e,e=r)),e===r&&n===r?(e=0,n=1):(e=Gi(e),n===r?(n=e,e=0):n=Gi(n)),e>n){var h=e;e=n,n=h}if(a||e%1||n%1){var d=nf();return br(e+d*(n-e+Iw("1e-"+((d+"").length-1))),n)}return Kc(e,n)}var VI=Qn(function(e,n,a){return n=n.toLowerCase(),e+(a?Fd(n):n)});function Fd(e){return vu(nt(e).toLowerCase())}function Md(e){return e=nt(e),e&&e.replace(Gm,Mw).replace(dw,"")}function WI(e,n,a){e=nt(e),n=qr(n);var h=e.length;a=a===r?h:Pn(De(a),0,h);var d=a;return a-=n.length,a>=0&&e.slice(a,d)==n}function GI(e){return e=nt(e),e&&Rm.test(e)?e.replace(fl,jw):e}function JI(e){return e=nt(e),e&&Lm.test(e)?e.replace(fc,"\\$&"):e}var QI=Qn(function(e,n,a){return e+(a?"-":"")+n.toLowerCase()}),YI=Qn(function(e,n,a){return e+(a?" ":"")+n.toLowerCase()}),XI=Uf("toLowerCase");function ZI(e,n,a){e=nt(e),n=De(n);var h=n?Hn(e):0;if(!n||h>=n)return e;var d=(n-h)/2;return ko(No(d),a)+e+ko(To(d),a)}function ex(e,n,a){e=nt(e),n=De(n);var h=n?Hn(e):0;return n&&h<n?e+ko(n-h,a):e}function tx(e,n,a){e=nt(e),n=De(n);var h=n?Hn(e):0;return n&&h<n?ko(n-h,a)+e:e}function rx(e,n,a){return a||n==null?n=0:n&&(n=+n),u1(nt(e).replace(dc,""),n||0)}function ix(e,n,a){return(a?Or(e,n,a):n===r)?n=1:n=De(n),kc(nt(e),n)}function nx(){var e=arguments,n=nt(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var sx=Qn(function(e,n,a){return e+(a?"_":"")+n.toLowerCase()});function ox(e,n,a){return a&&typeof a!="number"&&Or(e,n,a)&&(n=a=r),a=a===r?Ei:a>>>0,a?(e=nt(e),e&&(typeof n=="string"||n!=null&&!pu(n))&&(n=qr(n),!n&&qn(e))?ln(pi(e),0,a):e.split(n,a)):[]}var ax=Qn(function(e,n,a){return e+(a?" ":"")+vu(n)});function cx(e,n,a){return e=nt(e),a=a==null?0:Pn(De(a),0,e.length),n=qr(n),e.slice(a,a+n.length)==n}function ux(e,n,a){var h=p.templateSettings;a&&Or(e,n,a)&&(n=r),e=nt(e),n=ia({},n,h,Vf);var d=ia({},n.imports,h.imports,Vf),y=pr(d),m=Rc(d,y),b,O,q=0,K=n.interpolate||yo,Q="__p += '",ae=Cc((n.escape||yo).source+"|"+K.source+"|"+(K===dl?qm:yo).source+"|"+(n.evaluate||yo).source+"|$","g"),de="//# sourceURL="+(ut.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mw+"]")+`
`;e.replace(ae,function(Ee,Be,He,Kr,Rr,kr){return He||(He=Kr),Q+=e.slice(q,kr).replace(Jm,$w),Be&&(b=!0,Q+=`' +
__e(`+Be+`) +
'`),Rr&&(O=!0,Q+=`';
`+Rr+`;
__p += '`),He&&(Q+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),q=kr+Ee.length,Ee}),Q+=`';
`;var be=ut.call(n,"variable")&&n.variable;if(!be)Q=`with (obj) {
`+Q+`
}
`;else if(zm.test(be))throw new Ae(_);Q=(O?Q.replace(xm,""):Q).replace(Sm,"$1").replace(Pm,"$1;"),Q="function("+(be||"obj")+`) {
`+(be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Q+`return __p
}`;var Fe=$d(function(){return et(y,de+"return "+Q).apply(r,m)});if(Fe.source=Q,du(Fe))throw Fe;return Fe}function hx(e){return nt(e).toLowerCase()}function lx(e){return nt(e).toUpperCase()}function fx(e,n,a){if(e=nt(e),e&&(a||n===r))return Vl(e);if(!e||!(n=qr(n)))return e;var h=pi(e),d=pi(n),y=Wl(h,d),m=Gl(h,d)+1;return ln(h,y,m).join("")}function dx(e,n,a){if(e=nt(e),e&&(a||n===r))return e.slice(0,Ql(e)+1);if(!e||!(n=qr(n)))return e;var h=pi(e),d=Gl(h,pi(n))+1;return ln(h,0,d).join("")}function px(e,n,a){if(e=nt(e),e&&(a||n===r))return e.replace(dc,"");if(!e||!(n=qr(n)))return e;var h=pi(e),d=Wl(h,pi(n));return ln(h,d).join("")}function gx(e,n){var a=cm,h=um;if(Lt(n)){var d="separator"in n?n.separator:d;a="length"in n?De(n.length):a,h="omission"in n?qr(n.omission):h}e=nt(e);var y=e.length;if(qn(e)){var m=pi(e);y=m.length}if(a>=y)return e;var b=a-Hn(h);if(b<1)return h;var O=m?ln(m,0,b).join(""):e.slice(0,b);if(d===r)return O+h;if(m&&(b+=O.length-b),pu(d)){if(e.slice(b).search(d)){var q,K=O;for(d.global||(d=Cc(d.source,nt(pl.exec(d))+"g")),d.lastIndex=0;q=d.exec(K);)var Q=q.index;O=O.slice(0,Q===r?b:Q)}}else if(e.indexOf(qr(d),b)!=b){var ae=O.lastIndexOf(d);ae>-1&&(O=O.slice(0,ae))}return O+h}function yx(e){return e=nt(e),e&&Om.test(e)?e.replace(ll,kw):e}var vx=Qn(function(e,n,a){return e+(a?" ":"")+n.toUpperCase()}),vu=Uf("toUpperCase");function jd(e,n,a){return e=nt(e),n=a?r:n,n===r?zw(e)?Gw(e):Tw(e):e.match(n)||[]}var $d=Ue(function(e,n){try{return zr(e,r,n)}catch(a){return du(a)?a:new Ae(a)}}),mx=ki(function(e,n){return Qr(n,function(a){a=Si(a),Hi(e,a,lu(e[a],e))}),e});function wx(e){var n=e==null?0:e.length,a=_e();return e=n?Nt(e,function(h){if(typeof h[1]!="function")throw new Yr(g);return[a(h[0]),h[1]]}):[],Ue(function(h){for(var d=-1;++d<n;){var y=e[d];if(zr(y[0],this,h))return zr(y[1],this,h)}})}function _x(e){return k1(Zr(e,N))}function mu(e){return function(){return e}}function bx(e,n){return e==null||e!==e?n:e}var Ex=Bf(),Ix=Bf(!0);function Ur(e){return e}function wu(e){return vf(typeof e=="function"?e:Zr(e,N))}function xx(e){return wf(Zr(e,N))}function Sx(e,n){return _f(e,Zr(n,N))}var Px=Ue(function(e,n){return function(a){return Cs(a,e,n)}}),Ox=Ue(function(e,n){return function(a){return Cs(e,a,n)}});function _u(e,n,a){var h=pr(n),d=$o(n,h);a==null&&!(Lt(n)&&(d.length||!h.length))&&(a=n,n=e,e=this,d=$o(n,pr(n)));var y=!(Lt(a)&&"chain"in a)||!!a.chain,m=Wi(e);return Qr(d,function(b){var O=n[b];e[b]=O,m&&(e.prototype[b]=function(){var q=this.__chain__;if(y||q){var K=e(this.__wrapped__),Q=K.__actions__=Mr(this.__actions__);return Q.push({func:O,args:arguments,thisArg:e}),K.__chain__=q,K}return O.apply(e,sn([this.value()],arguments))})}),e}function Rx(){return mr._===this&&(mr._=e1),this}function bu(){}function Ax(e){return e=De(e),Ue(function(n){return bf(n,e)})}var Cx=Xc(Nt),Tx=Xc(Bl),Nx=Xc(Ic);function Ud(e){return su(e)?xc(Si(e)):c_(e)}function Dx(e){return function(n){return e==null?r:On(e,n)}}var Lx=Hf(),Fx=Hf(!0);function Eu(){return[]}function Iu(){return!1}function Mx(){return{}}function jx(){return""}function $x(){return!0}function Ux(e,n){if(e=De(e),e<1||e>rn)return[];var a=Ei,h=br(e,Ei);n=_e(n),e-=Ei;for(var d=Oc(h,n);++a<e;)n(a);return d}function zx(e){return Te(e)?Nt(e,Si):Hr(e)?[e]:Mr(sd(nt(e)))}function Bx(e){var n=++Xw;return nt(e)+n}var qx=Ko(function(e,n){return e+n},0),Hx=Zc("ceil"),Kx=Ko(function(e,n){return e/n},1),kx=Zc("floor");function Vx(e){return e&&e.length?jo(e,Ur,$c):r}function Wx(e,n){return e&&e.length?jo(e,_e(n,2),$c):r}function Gx(e){return Kl(e,Ur)}function Jx(e,n){return Kl(e,_e(n,2))}function Qx(e){return e&&e.length?jo(e,Ur,qc):r}function Yx(e,n){return e&&e.length?jo(e,_e(n,2),qc):r}var Xx=Ko(function(e,n){return e*n},1),Zx=Zc("round"),eS=Ko(function(e,n){return e-n},0);function tS(e){return e&&e.length?Pc(e,Ur):0}function rS(e,n){return e&&e.length?Pc(e,_e(n,2)):0}return p.after=xE,p.ary=yd,p.assign=lI,p.assignIn=Cd,p.assignInWith=ia,p.assignWith=fI,p.at=dI,p.before=vd,p.bind=lu,p.bindAll=mx,p.bindKey=md,p.castArray=ME,p.chain=dd,p.chunk=k_,p.compact=V_,p.concat=W_,p.cond=wx,p.conforms=_x,p.constant=mu,p.countBy=tE,p.create=pI,p.curry=wd,p.curryRight=_d,p.debounce=bd,p.defaults=gI,p.defaultsDeep=yI,p.defer=SE,p.delay=PE,p.difference=G_,p.differenceBy=J_,p.differenceWith=Q_,p.drop=Y_,p.dropRight=X_,p.dropRightWhile=Z_,p.dropWhile=eb,p.fill=tb,p.filter=iE,p.flatMap=oE,p.flatMapDeep=aE,p.flatMapDepth=cE,p.flatten=ud,p.flattenDeep=rb,p.flattenDepth=ib,p.flip=OE,p.flow=Ex,p.flowRight=Ix,p.fromPairs=nb,p.functions=II,p.functionsIn=xI,p.groupBy=uE,p.initial=ob,p.intersection=ab,p.intersectionBy=cb,p.intersectionWith=ub,p.invert=PI,p.invertBy=OI,p.invokeMap=lE,p.iteratee=wu,p.keyBy=fE,p.keys=pr,p.keysIn=$r,p.map=Yo,p.mapKeys=AI,p.mapValues=CI,p.matches=xx,p.matchesProperty=Sx,p.memoize=Zo,p.merge=TI,p.mergeWith=Td,p.method=Px,p.methodOf=Ox,p.mixin=_u,p.negate=ea,p.nthArg=Ax,p.omit=NI,p.omitBy=DI,p.once=RE,p.orderBy=dE,p.over=Cx,p.overArgs=AE,p.overEvery=Tx,p.overSome=Nx,p.partial=fu,p.partialRight=Ed,p.partition=pE,p.pick=LI,p.pickBy=Nd,p.property=Ud,p.propertyOf=Dx,p.pull=db,p.pullAll=ld,p.pullAllBy=pb,p.pullAllWith=gb,p.pullAt=yb,p.range=Lx,p.rangeRight=Fx,p.rearg=CE,p.reject=vE,p.remove=vb,p.rest=TE,p.reverse=uu,p.sampleSize=wE,p.set=MI,p.setWith=jI,p.shuffle=_E,p.slice=mb,p.sortBy=IE,p.sortedUniq=Sb,p.sortedUniqBy=Pb,p.split=ox,p.spread=NE,p.tail=Ob,p.take=Rb,p.takeRight=Ab,p.takeRightWhile=Cb,p.takeWhile=Tb,p.tap=Vb,p.throttle=DE,p.thru=Qo,p.toArray=Od,p.toPairs=Dd,p.toPairsIn=Ld,p.toPath=zx,p.toPlainObject=Ad,p.transform=$I,p.unary=LE,p.union=Nb,p.unionBy=Db,p.unionWith=Lb,p.uniq=Fb,p.uniqBy=Mb,p.uniqWith=jb,p.unset=UI,p.unzip=hu,p.unzipWith=fd,p.update=zI,p.updateWith=BI,p.values=Zn,p.valuesIn=qI,p.without=$b,p.words=jd,p.wrap=FE,p.xor=Ub,p.xorBy=zb,p.xorWith=Bb,p.zip=qb,p.zipObject=Hb,p.zipObjectDeep=Kb,p.zipWith=kb,p.entries=Dd,p.entriesIn=Ld,p.extend=Cd,p.extendWith=ia,_u(p,p),p.add=qx,p.attempt=$d,p.camelCase=VI,p.capitalize=Fd,p.ceil=Hx,p.clamp=HI,p.clone=jE,p.cloneDeep=UE,p.cloneDeepWith=zE,p.cloneWith=$E,p.conformsTo=BE,p.deburr=Md,p.defaultTo=bx,p.divide=Kx,p.endsWith=WI,p.eq=yi,p.escape=GI,p.escapeRegExp=JI,p.every=rE,p.find=nE,p.findIndex=ad,p.findKey=vI,p.findLast=sE,p.findLastIndex=cd,p.findLastKey=mI,p.floor=kx,p.forEach=pd,p.forEachRight=gd,p.forIn=wI,p.forInRight=_I,p.forOwn=bI,p.forOwnRight=EI,p.get=gu,p.gt=qE,p.gte=HE,p.has=SI,p.hasIn=yu,p.head=hd,p.identity=Ur,p.includes=hE,p.indexOf=sb,p.inRange=KI,p.invoke=RI,p.isArguments=Cn,p.isArray=Te,p.isArrayBuffer=KE,p.isArrayLike=jr,p.isArrayLikeObject=Yt,p.isBoolean=kE,p.isBuffer=fn,p.isDate=VE,p.isElement=WE,p.isEmpty=GE,p.isEqual=JE,p.isEqualWith=QE,p.isError=du,p.isFinite=YE,p.isFunction=Wi,p.isInteger=Id,p.isLength=ta,p.isMap=xd,p.isMatch=XE,p.isMatchWith=ZE,p.isNaN=eI,p.isNative=tI,p.isNil=iI,p.isNull=rI,p.isNumber=Sd,p.isObject=Lt,p.isObjectLike=Kt,p.isPlainObject=Ms,p.isRegExp=pu,p.isSafeInteger=nI,p.isSet=Pd,p.isString=ra,p.isSymbol=Hr,p.isTypedArray=Xn,p.isUndefined=sI,p.isWeakMap=oI,p.isWeakSet=aI,p.join=hb,p.kebabCase=QI,p.last=ti,p.lastIndexOf=lb,p.lowerCase=YI,p.lowerFirst=XI,p.lt=cI,p.lte=uI,p.max=Vx,p.maxBy=Wx,p.mean=Gx,p.meanBy=Jx,p.min=Qx,p.minBy=Yx,p.stubArray=Eu,p.stubFalse=Iu,p.stubObject=Mx,p.stubString=jx,p.stubTrue=$x,p.multiply=Xx,p.nth=fb,p.noConflict=Rx,p.noop=bu,p.now=Xo,p.pad=ZI,p.padEnd=ex,p.padStart=tx,p.parseInt=rx,p.random=kI,p.reduce=gE,p.reduceRight=yE,p.repeat=ix,p.replace=nx,p.result=FI,p.round=Zx,p.runInContext=P,p.sample=mE,p.size=bE,p.snakeCase=sx,p.some=EE,p.sortedIndex=wb,p.sortedIndexBy=_b,p.sortedIndexOf=bb,p.sortedLastIndex=Eb,p.sortedLastIndexBy=Ib,p.sortedLastIndexOf=xb,p.startCase=ax,p.startsWith=cx,p.subtract=eS,p.sum=tS,p.sumBy=rS,p.template=ux,p.times=Ux,p.toFinite=Gi,p.toInteger=De,p.toLength=Rd,p.toLower=hx,p.toNumber=ri,p.toSafeInteger=hI,p.toString=nt,p.toUpper=lx,p.trim=fx,p.trimEnd=dx,p.trimStart=px,p.truncate=gx,p.unescape=yx,p.uniqueId=Bx,p.upperCase=vx,p.upperFirst=vu,p.each=pd,p.eachRight=gd,p.first=hd,_u(p,function(){var e={};return Ii(p,function(n,a){ut.call(p.prototype,a)||(e[a]=n)}),e}(),{chain:!1}),p.VERSION=s,Qr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Qr(["drop","take"],function(e,n){qe.prototype[e]=function(a){a=a===r?1:ur(De(a),0);var h=this.__filtered__&&!n?new qe(this):this.clone();return h.__filtered__?h.__takeCount__=br(a,h.__takeCount__):h.__views__.push({size:br(a,Ei),type:e+(h.__dir__<0?"Right":"")}),h},qe.prototype[e+"Right"]=function(a){return this.reverse()[e](a).reverse()}}),Qr(["filter","map","takeWhile"],function(e,n){var a=n+1,h=a==cl||a==dm;qe.prototype[e]=function(d){var y=this.clone();return y.__iteratees__.push({iteratee:_e(d,3),type:a}),y.__filtered__=y.__filtered__||h,y}}),Qr(["head","last"],function(e,n){var a="take"+(n?"Right":"");qe.prototype[e]=function(){return this[a](1).value()[0]}}),Qr(["initial","tail"],function(e,n){var a="drop"+(n?"":"Right");qe.prototype[e]=function(){return this.__filtered__?new qe(this):this[a](1)}}),qe.prototype.compact=function(){return this.filter(Ur)},qe.prototype.find=function(e){return this.filter(e).head()},qe.prototype.findLast=function(e){return this.reverse().find(e)},qe.prototype.invokeMap=Ue(function(e,n){return typeof e=="function"?new qe(this):this.map(function(a){return Cs(a,e,n)})}),qe.prototype.reject=function(e){return this.filter(ea(_e(e)))},qe.prototype.slice=function(e,n){e=De(e);var a=this;return a.__filtered__&&(e>0||n<0)?new qe(a):(e<0?a=a.takeRight(-e):e&&(a=a.drop(e)),n!==r&&(n=De(n),a=n<0?a.dropRight(-n):a.take(n-e)),a)},qe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},qe.prototype.toArray=function(){return this.take(Ei)},Ii(qe.prototype,function(e,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),d=p[h?"take"+(n=="last"?"Right":""):n],y=h||/^find/.test(n);d&&(p.prototype[n]=function(){var m=this.__wrapped__,b=h?[1]:arguments,O=m instanceof qe,q=b[0],K=O||Te(m),Q=function(Be){var He=d.apply(p,sn([Be],b));return h&&ae?He[0]:He};K&&a&&typeof q=="function"&&q.length!=1&&(O=K=!1);var ae=this.__chain__,de=!!this.__actions__.length,be=y&&!ae,Fe=O&&!de;if(!y&&K){m=Fe?m:new qe(this);var Ee=e.apply(m,b);return Ee.__actions__.push({func:Qo,args:[Q],thisArg:r}),new Xr(Ee,ae)}return be&&Fe?e.apply(this,b):(Ee=this.thru(Q),be?h?Ee.value()[0]:Ee.value():Ee)})}),Qr(["pop","push","shift","sort","splice","unshift"],function(e){var n=Eo[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var d=arguments;if(h&&!this.__chain__){var y=this.value();return n.apply(Te(y)?y:[],d)}return this[a](function(m){return n.apply(Te(m)?m:[],d)})}}),Ii(qe.prototype,function(e,n){var a=p[n];if(a){var h=a.name+"";ut.call(Wn,h)||(Wn[h]=[]),Wn[h].push({name:n,func:a})}}),Wn[Ho(r,Ve).name]=[{name:"wrapper",func:r}],qe.prototype.clone=y1,qe.prototype.reverse=v1,qe.prototype.value=m1,p.prototype.at=Wb,p.prototype.chain=Gb,p.prototype.commit=Jb,p.prototype.next=Qb,p.prototype.plant=Xb,p.prototype.reverse=Zb,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=eE,p.prototype.first=p.prototype.head,Is&&(p.prototype[Is]=Yb),p},Kn=Jw();En?((En.exports=Kn)._=Kn,wc._=Kn):mr._=Kn}).call(ds)})(Ga,Ga.exports);var S0=Object.defineProperty,P0=Object.defineProperties,O0=Object.getOwnPropertyDescriptors,Xh=Object.getOwnPropertySymbols,R0=Object.prototype.hasOwnProperty,A0=Object.prototype.propertyIsEnumerable,Zh=(o,t,r)=>t in o?S0(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,ao=(o,t)=>{for(var r in t||(t={}))R0.call(t,r)&&Zh(o,r,t[r]);if(Xh)for(var r of Xh(t))A0.call(t,r)&&Zh(o,r,t[r]);return o},C0=(o,t)=>P0(o,O0(t));function en(o,t,r){var s;const u=ne(o);return((s=t.rpcMap)==null?void 0:s[u.reference])||`${x0}?chainId=${u.namespace}:${u.reference}&projectId=${r}`}function _n(o){return o.includes(":")?o.split(":")[1]:o}function el(o){return o.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function T0(o,t){const r=Object.keys(t.namespaces).filter(u=>u.includes(o));if(!r.length)return[];const s=[];return r.forEach(u=>{const f=t.namespaces[u].accounts;s.push(...f)}),s}function N0(o={},t={}){const r=tl(o),s=tl(t);return Ga.exports.merge(r,s)}function tl(o){var t,r,s,u;const f={};if(!Rt(o))return f;for(const[g,_]of Object.entries(o)){const A=v(g)?[g]:_.chains,w=_.methods||[],C=_.events||[],N=_.rpcMap||{},B=x(g);f[B]=C0(ao(ao({},f[B]),_),{chains:Wr(A,(t=f[B])==null?void 0:t.chains),methods:Wr(w,(r=f[B])==null?void 0:r.methods),events:Wr(C,(s=f[B])==null?void 0:s.events),rpcMap:ao(ao({},N),(u=f[B])==null?void 0:u.rpcMap)})}return f}function D0(o){return o.includes(":")?o.split(":")[2]:o}function L0(o){const t={};for(const[r,s]of Object.entries(o)){const u=s.methods||[],f=s.events||[],g=s.accounts||[],_=v(r)?[r]:s.chains?s.chains:el(s.accounts);t[r]={chains:_,methods:u,events:f,accounts:g}}return t}function Ja(o){return typeof o=="number"?o:o.includes("0x")?parseInt(o,16):o.includes(":")?Number(o.split(":")[1]):Number(o)}const rl={},Tt=o=>rl[o],Qa=(o,t)=>{rl[o]=t};class F0{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=_n(r);t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class M0{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||en(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new Jh(s,Tt("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=parseInt(_n(r));t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}async handleSwitchChain(t){var r,s;let u=t.request.params?(r=t.request.params[0])==null?void 0:r.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;const f=parseInt(u,16);if(this.isChainApproved(f))this.setDefaultChain(`${f}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:u}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${f}`);else throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class j0{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=_n(r);t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class $0{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=_n(r);t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class U0{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r),u=_n(r);t[u]=this.createHttpProvider(u,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class z0{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=_n(r);t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class B0{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=_n(r);t[u]=this.createHttpProvider(u,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Mi(new wn(s,Tt("disableProviderPing")))}}class q0{constructor(t){this.name="near",this.namespace=t.namespace,this.events=Tt("events"),this.client=Tt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||en(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||en(t,this.namespace);return typeof s>"u"?void 0:new Mi(new wn(s,Tt("disableProviderPing")))}}var H0=Object.defineProperty,K0=Object.defineProperties,k0=Object.getOwnPropertyDescriptors,il=Object.getOwnPropertySymbols,V0=Object.prototype.hasOwnProperty,W0=Object.prototype.propertyIsEnumerable,nl=(o,t,r)=>t in o?H0(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,co=(o,t)=>{for(var r in t||(t={}))V0.call(t,r)&&nl(o,r,t[r]);if(il)for(var r of il(t))W0.call(t,r)&&nl(o,r,t[r]);return o},Ya=(o,t)=>K0(o,k0(t));class Xa{constructor(t){this.events=new(pe()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:(0,ke.pino)((0,ke.getDefaultLoggerOptions)({level:(t==null?void 0:t.logger)||Qh})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const r=new Xa(t);return await r.initialize(),r}async request(t,r){const[s,u]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:co({},t),chainId:`${s}:${u}`,topic:this.session.topic})}sendAsync(t,r,s){this.request(t,s).then(u=>r(null,u)).catch(u=>r(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Re("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:u}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await u().then(f=>{this.session=f,this.namespaces||(this.namespaces=L0(f.namespaces),this.persist("namespaces",this.namespaces))}).catch(f=>{if(f.message!==Hh)throw f;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,r){try{if(!this.session)return;const[s,u]=this.validateChain(t);this.getProvider(s).setDefaultChain(u,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ct(r)){for(const s of r)t.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Wa.init({logger:this.providerOpts.logger||Qh,relayUrl:this.providerOpts.relayUrl||b0,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>x(r)))];Qa("client",this.client),Qa("events",this.events),Qa("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=T0(r,this.session),u=el(s),f=N0(this.namespaces,this.optionalNamespaces),g=Ya(co({},f[r]),{accounts:s,chains:u});switch(r){case"eip155":this.rpcProviders[r]=new M0({namespace:g});break;case"solana":this.rpcProviders[r]=new j0({namespace:g});break;case"cosmos":this.rpcProviders[r]=new $0({namespace:g});break;case"polkadot":this.rpcProviders[r]=new F0({namespace:g});break;case"cip34":this.rpcProviders[r]=new U0({namespace:g});break;case"elrond":this.rpcProviders[r]=new z0({namespace:g});break;case"multiversx":this.rpcProviders[r]=new B0({namespace:g});break;case"near":this.rpcProviders[r]=new q0({namespace:g});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:r}=t,{event:s}=r;if(s.name==="accountsChanged"){const u=s.data;u&&ct(u)&&this.events.emit("accountsChanged",u.map(D0))}else if(s.name==="chainChanged"){const u=r.chainId,f=r.event.data,g=x(u),_=Ja(u)!==Ja(f)?`${g}:${Ja(f)}`:u;this.onChainChanged(_)}else this.events.emit(s.name,s.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:r})=>{var s;const{namespaces:u}=r,f=(s=this.client)==null?void 0:s.session.get(t);this.session=Ya(co({},f),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:r})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Ya(co({},Re("USER_DISCONNECTED")),{data:t.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace((r=this.session)==null?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:u}=t;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=u,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(g=>x(g)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const u=x(Object.keys(this.namespaces)[0]),f=this.rpcProviders[u].getDefaultChain();return[u,f]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,r=!1){var s;if(!this.namespaces)return;const[u,f]=this.validateChain(t);r||this.getProvider(u).setDefaultChain(f),((s=this.namespaces[u])!=null?s:this.namespaces[`${u}:${f}`]).defaultChain=f,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",f)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,r){this.client.core.storage.setItem(`${Yh}/${t}`,r)}async getFromStore(t){return await this.client.core.storage.getItem(`${Yh}/${t}`)}}const G0=Xa,J0="wc",Q0="ethereum_provider",Y0=`${J0}@2:${Q0}:`,X0="https://rpc.walletconnect.com/v1/",Za=["eth_sendTransaction","personal_sign"],Z0=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ec=["chainChanged","accountsChanged"],em=["chainChanged","accountsChanged","message","disconnect","connect"];var tm=Object.defineProperty,rm=Object.defineProperties,im=Object.getOwnPropertyDescriptors,sl=Object.getOwnPropertySymbols,nm=Object.prototype.hasOwnProperty,sm=Object.prototype.propertyIsEnumerable,ol=(o,t,r)=>t in o?tm(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,ps=(o,t)=>{for(var r in t||(t={}))nm.call(t,r)&&ol(o,r,t[r]);if(sl)for(var r of sl(t))sm.call(t,r)&&ol(o,r,t[r]);return o},al=(o,t)=>rm(o,im(t));function uo(o){return Number(o[0].split(":")[1])}function tc(o){return`0x${o.toString(16)}`}function om(o){const{chains:t,optionalChains:r,methods:s,optionalMethods:u,events:f,optionalEvents:g,rpcMap:_}=o;if(!ct(t))throw new Error("Invalid chains");const A={chains:t,methods:s||Za,events:f||ec,rpcMap:ps({},t.length?{[uo(t)]:_[uo(t)]}:{})},w=f==null?void 0:f.filter(ce=>!ec.includes(ce)),C=s==null?void 0:s.filter(ce=>!Za.includes(ce));if(!r&&!g&&!u&&!(w!=null&&w.length)&&!(C!=null&&C.length))return{required:t.length?A:void 0};const N=(w==null?void 0:w.length)&&(C==null?void 0:C.length)||!r,B={chains:[...new Set(N?A.chains.concat(r||[]):r)],methods:[...new Set(A.methods.concat(u!=null&&u.length?u:Z0))],events:[...new Set(A.events.concat(g!=null&&g.length?g:em))],rpcMap:_};return{required:t.length?A:void 0,optional:r.length?B:void 0}}class rc{constructor(){this.events=new G.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Y0,this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const r=new rc;return await r.initialize(t),r}async request(t){return await this.signer.request(t,this.formatChainId(this.chainId))}sendAsync(t,r){this.signer.sendAsync(t,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:r,optional:s}=om(this.rpc);try{const u=await new Promise(async(g,_)=>{var A;this.rpc.showQrModal&&((A=this.modal)==null||A.subscribeModal(w=>{!w.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),_(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(al(ps({namespaces:ps({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(w=>{g(w)}).catch(w=>{_(new Error(w.message))})});if(!u)return;const f=M(u.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:f),this.setAccounts(f),this.events.emit("connect",{chainId:tc(this.chainId)})}catch(u){throw this.signer.logger.error(u),u}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",tc(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",al(ps({},Re("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",tc(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,s,u]=t.split(":");return{chainId:`${r}:${s}`,address:u}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;const u=(r=t==null?void 0:t.chains)!=null?r:[],f=(s=t==null?void 0:t.optionalChains)!=null?s:[],g=u.concat(f);if(!g.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const _=u.length?(t==null?void 0:t.methods)||Za:[],A=u.length?(t==null?void 0:t.events)||ec:[],w=(t==null?void 0:t.optionalMethods)||[],C=(t==null?void 0:t.optionalEvents)||[],N=(t==null?void 0:t.rpcMap)||this.buildRpcMap(g,t.projectId),B=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:u==null?void 0:u.map(ce=>this.formatChainId(ce)),optionalChains:f.map(ce=>this.formatChainId(ce)),methods:_,events:A,optionalMethods:w,optionalEvents:C,rpcMap:N,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:B,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(u=>{s[u]=this.getRpcUrl(u,r)}),s}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?uo(this.rpc.chains):uo(this.rpc.optionalChains),this.signer=await G0.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await L.e(1326).then(L.bind(L,91326));r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(ps({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:u}=t;r&&ct(r)&&(this.rpc.chains=r.map(f=>this.formatChainId(f)),r.forEach(f=>{this.rpc.rpcMap[f]=(u==null?void 0:u[f])||this.getRpcUrl(f)})),s&&ct(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(f=>this.formatChainId(f)),s.forEach(f=>{this.rpc.rpcMap[f]=(u==null?void 0:u[f])||this.getRpcUrl(f)}))}getRpcUrl(t,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[t])||`${X0}?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const am=rc},36900:function(Xe,$,L){"use strict";L.d($,{q:function(){return G}});class G{}},15890:function(Xe,$,L){"use strict";L.r($),L.d($,{IEvents:function(){return G.q}});var G=L(36900)},15782:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.HEARTBEAT_EVENTS=$.HEARTBEAT_INTERVAL=void 0;const G=L(46196);$.HEARTBEAT_INTERVAL=G.FIVE_SECONDS,$.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},95635:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),L(16054).__exportStar(L(15782),$)},20538:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.HeartBeat=void 0;const G=L(16054),pe=L(72100),Ie=L(46196),ht=L(88490),J=L(95635);class Pe extends ht.IHeartBeat{constructor(H){super(H),this.events=new pe.EventEmitter,this.interval=J.HEARTBEAT_INTERVAL,this.interval=(H==null?void 0:H.interval)||J.HEARTBEAT_INTERVAL}static init(H){return G.__awaiter(this,void 0,void 0,function*(){const ee=new Pe(H);return yield ee.init(),ee})}init(){return G.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(H,ee){this.events.on(H,ee)}once(H,ee){this.events.once(H,ee)}off(H,ee){this.events.off(H,ee)}removeListener(H,ee){this.events.removeListener(H,ee)}initialize(){return G.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),Ie.toMiliseconds(this.interval))})}pulse(){this.events.emit(J.HEARTBEAT_EVENTS.pulse)}}$.HeartBeat=Pe},37875:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0});const G=L(16054);G.__exportStar(L(20538),$),G.__exportStar(L(88490),$),G.__exportStar(L(95635),$)},54554:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.IHeartBeat=void 0;const G=L(15890);class pe extends G.IEvents{constructor(ht){super()}}$.IHeartBeat=pe},88490:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),L(16054).__exportStar(L(54554),$)},42392:function(Xe,$){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.PINO_CUSTOM_CONTEXT_KEY=$.PINO_LOGGER_DEFAULTS=void 0,$.PINO_LOGGER_DEFAULTS={level:"info"},$.PINO_CUSTOM_CONTEXT_KEY="custom_context"},71315:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.pino=void 0;const G=L(16054),pe=G.__importDefault(L(86984));Object.defineProperty($,"pino",{enumerable:!0,get:function(){return pe.default}}),G.__exportStar(L(42392),$),G.__exportStar(L(48992),$)},48992:function(Xe,$,L){"use strict";Object.defineProperty($,"__esModule",{value:!0}),$.generateChildLogger=$.formatChildLoggerContext=$.getLoggerContext=$.setBrowserLoggerContext=$.getBrowserLoggerContext=$.getDefaultLoggerOptions=void 0;const G=L(42392);function pe(H){return Object.assign(Object.assign({},H),{level:(H==null?void 0:H.level)||G.PINO_LOGGER_DEFAULTS.level})}$.getDefaultLoggerOptions=pe;function Ie(H,ee=G.PINO_CUSTOM_CONTEXT_KEY){return H[ee]||""}$.getBrowserLoggerContext=Ie;function ht(H,ee,se=G.PINO_CUSTOM_CONTEXT_KEY){return H[se]=ee,H}$.setBrowserLoggerContext=ht;function J(H,ee=G.PINO_CUSTOM_CONTEXT_KEY){let se="";return typeof H.bindings>"u"?se=Ie(H,ee):se=H.bindings().context||"",se}$.getLoggerContext=J;function Pe(H,ee,se=G.PINO_CUSTOM_CONTEXT_KEY){const Le=J(H,se);return Le.trim()?`${Le}/${ee}`:ee}$.formatChildLoggerContext=Pe;function Ne(H,ee,se=G.PINO_CUSTOM_CONTEXT_KEY){const Le=Pe(H,ee,se),xe=H.child({context:Le});return ht(xe,Le,se)}$.generateChildLogger=Ne},42995:function(){},52830:function(Xe,$){var L=typeof self<"u"?self:this,G=function(){function Ie(){this.fetch=!1,this.DOMException=L.DOMException}return Ie.prototype=L,new Ie}();(function(Ie){var ht=function(J){var Pe={searchParams:"URLSearchParams"in Ie,iterable:"Symbol"in Ie&&"iterator"in Symbol,blob:"FileReader"in Ie&&"Blob"in Ie&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Ie,arrayBuffer:"ArrayBuffer"in Ie};function Ne(R){return R&&DataView.prototype.isPrototypeOf(R)}if(Pe.arrayBuffer)var H=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ee=ArrayBuffer.isView||function(R){return R&&H.indexOf(Object.prototype.toString.call(R))>-1};function se(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(R))throw new TypeError("Invalid character in header field name");return R.toLowerCase()}function Le(R){return typeof R!="string"&&(R=String(R)),R}function xe(R){var I={next:function(){var S=R.shift();return{done:S===void 0,value:S}}};return Pe.iterable&&(I[Symbol.iterator]=function(){return I}),I}function Me(R){this.map={},R instanceof Me?R.forEach(function(I,S){this.append(S,I)},this):Array.isArray(R)?R.forEach(function(I){this.append(I[0],I[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(I){this.append(I,R[I])},this)}Me.prototype.append=function(R,I){R=se(R),I=Le(I);var S=this.map[R];this.map[R]=S?S+", "+I:I},Me.prototype.delete=function(R){delete this.map[se(R)]},Me.prototype.get=function(R){return R=se(R),this.has(R)?this.map[R]:null},Me.prototype.has=function(R){return this.map.hasOwnProperty(se(R))},Me.prototype.set=function(R,I){this.map[se(R)]=Le(I)},Me.prototype.forEach=function(R,I){for(var S in this.map)this.map.hasOwnProperty(S)&&R.call(I,this.map[S],S,this)},Me.prototype.keys=function(){var R=[];return this.forEach(function(I,S){R.push(S)}),xe(R)},Me.prototype.values=function(){var R=[];return this.forEach(function(I){R.push(I)}),xe(R)},Me.prototype.entries=function(){var R=[];return this.forEach(function(I,S){R.push([S,I])}),xe(R)},Pe.iterable&&(Me.prototype[Symbol.iterator]=Me.prototype.entries);function oe(R){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}function gt(R){return new Promise(function(I,S){R.onload=function(){I(R.result)},R.onerror=function(){S(R.error)}})}function nr(R){var I=new FileReader,S=gt(I);return I.readAsArrayBuffer(R),S}function lt(R){var I=new FileReader,S=gt(I);return I.readAsText(R),S}function yt(R){for(var I=new Uint8Array(R),S=new Array(I.length),ve=0;ve<I.length;ve++)S[ve]=String.fromCharCode(I[ve]);return S.join("")}function hr(R){if(R.slice)return R.slice(0);var I=new Uint8Array(R.byteLength);return I.set(new Uint8Array(R)),I.buffer}function sr(){return this.bodyUsed=!1,this._initBody=function(R){this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:Pe.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:Pe.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:Pe.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():Pe.arrayBuffer&&Pe.blob&&Ne(R)?(this._bodyArrayBuffer=hr(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Pe.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||ee(R))?this._bodyArrayBuffer=hr(R):this._bodyText=R=Object.prototype.toString.call(R):this._bodyText="",this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Pe.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pe.blob&&(this.blob=function(){var R=oe(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?oe(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(nr)}),this.text=function(){var R=oe(this);if(R)return R;if(this._bodyBlob)return lt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(yt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Pe.formData&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}var lr=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function tt(R){var I=R.toUpperCase();return lr.indexOf(I)>-1?I:R}function k(R,I){I=I||{};var S=I.body;if(R instanceof k){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,I.headers||(this.headers=new Me(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!S&&R._bodyInit!=null&&(S=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new Me(I.headers)),this.method=tt(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(S)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function te(R){var I=new FormData;return R.trim().split("&").forEach(function(S){if(S){var ve=S.split("="),Se=ve.shift().replace(/\+/g," "),X=ve.join("=").replace(/\+/g," ");I.append(decodeURIComponent(Se),decodeURIComponent(X))}}),I}function fe(R){var I=new Me,S=R.replace(/\r?\n[\t ]+/g," ");return S.split(/\r?\n/).forEach(function(ve){var Se=ve.split(":"),X=Se.shift().trim();if(X){var ne=Se.join(":").trim();I.append(X,ne)}}),I}sr.call(k.prototype);function ye(R,I){I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in I?I.statusText:"OK",this.headers=new Me(I.headers),this.url=I.url||"",this._initBody(R)}sr.call(ye.prototype),ye.prototype.clone=function(){return new ye(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Me(this.headers),url:this.url})},ye.error=function(){var R=new ye(null,{status:0,statusText:""});return R.type="error",R};var we=[301,302,303,307,308];ye.redirect=function(R,I){if(we.indexOf(I)===-1)throw new RangeError("Invalid status code");return new ye(null,{status:I,headers:{location:R}})},J.DOMException=Ie.DOMException;try{new J.DOMException}catch{J.DOMException=function(I,S){this.message=I,this.name=S;var ve=Error(I);this.stack=ve.stack},J.DOMException.prototype=Object.create(Error.prototype),J.DOMException.prototype.constructor=J.DOMException}function Z(R,I){return new Promise(function(S,ve){var Se=new k(R,I);if(Se.signal&&Se.signal.aborted)return ve(new J.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function ne(){X.abort()}X.onload=function(){var ie={status:X.status,statusText:X.statusText,headers:fe(X.getAllResponseHeaders()||"")};ie.url="responseURL"in X?X.responseURL:ie.headers.get("X-Request-URL");var re="response"in X?X.response:X.responseText;S(new ye(re,ie))},X.onerror=function(){ve(new TypeError("Network request failed"))},X.ontimeout=function(){ve(new TypeError("Network request failed"))},X.onabort=function(){ve(new J.DOMException("Aborted","AbortError"))},X.open(Se.method,Se.url,!0),Se.credentials==="include"?X.withCredentials=!0:Se.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&Pe.blob&&(X.responseType="blob"),Se.headers.forEach(function(ie,re){X.setRequestHeader(re,ie)}),Se.signal&&(Se.signal.addEventListener("abort",ne),X.onreadystatechange=function(){X.readyState===4&&Se.signal.removeEventListener("abort",ne)}),X.send(typeof Se._bodyInit>"u"?null:Se._bodyInit)})}return Z.polyfill=!0,Ie.fetch||(Ie.fetch=Z,Ie.Headers=Me,Ie.Request=k,Ie.Response=ye),J.Headers=Me,J.Request=k,J.Response=ye,J.fetch=Z,Object.defineProperty(J,"__esModule",{value:!0}),J}({})})(G),G.fetch.ponyfill=!0,delete G.fetch.polyfill;var pe=G;$=pe.fetch,$.default=pe.fetch,$.fetch=pe.fetch,$.Headers=pe.Headers,$.Request=pe.Request,$.Response=pe.Response,Xe.exports=$},5899:function(Xe,$,L){Xe=L.nmd(Xe);var G=200,pe="__lodash_hash_undefined__",Ie=1,ht=2,J=9007199254740991,Pe="[object Arguments]",Ne="[object Array]",H="[object AsyncFunction]",ee="[object Boolean]",se="[object Date]",Le="[object Error]",xe="[object Function]",Me="[object GeneratorFunction]",oe="[object Map]",gt="[object Number]",nr="[object Null]",lt="[object Object]",yt="[object Promise]",hr="[object Proxy]",sr="[object RegExp]",lr="[object Set]",tt="[object String]",k="[object Symbol]",te="[object Undefined]",fe="[object WeakMap]",ye="[object ArrayBuffer]",we="[object DataView]",Z="[object Float32Array]",R="[object Float64Array]",I="[object Int8Array]",S="[object Int16Array]",ve="[object Int32Array]",Se="[object Uint8Array]",X="[object Uint8ClampedArray]",ne="[object Uint16Array]",ie="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,vt=/^\[object .+?Constructor\]$/,Et=/^(?:0|[1-9]\d*)$/,ze={};ze[Z]=ze[R]=ze[I]=ze[S]=ze[ve]=ze[Se]=ze[X]=ze[ne]=ze[ie]=!0,ze[Pe]=ze[Ne]=ze[ye]=ze[ee]=ze[we]=ze[se]=ze[Le]=ze[xe]=ze[oe]=ze[gt]=ze[lt]=ze[sr]=ze[lr]=ze[tt]=ze[fe]=!1;var ii=typeof L.g=="object"&&L.g&&L.g.Object===Object&&L.g,Pi=typeof self=="object"&&self&&self.Object===Object&&self,It=ii||Pi||Function("return this")(),F=$&&!$.nodeType&&$,M=F&&!0&&Xe&&!Xe.nodeType&&Xe,T=M&&M.exports===F,l=T&&ii.process,E=function(){try{return l&&l.binding&&l.binding("util")}catch{}}(),ge=E&&E.isTypedArray;function Oe(v,x){for(var V=-1,ue=v==null?0:v.length,dt=0,z=[];++V<ue;){var Re=v[V];x(Re,V,v)&&(z[dt++]=Re)}return z}function rt(v,x){for(var V=-1,ue=x.length,dt=v.length;++V<ue;)v[dt+V]=x[V];return v}function mt(v,x){for(var V=-1,ue=v==null?0:v.length;++V<ue;)if(x(v[V],V,v))return!0;return!1}function it(v,x){for(var V=-1,ue=Array(v);++V<v;)ue[V]=x(V);return ue}function st(v){return function(x){return v(x)}}function Ke(v,x){return v.has(x)}function Zt(v,x){return v==null?void 0:v[x]}function kt(v){var x=-1,V=Array(v.size);return v.forEach(function(ue,dt){V[++x]=[dt,ue]}),V}function Vt(v,x){return function(V){return v(x(V))}}function ft(v){var x=-1,V=Array(v.size);return v.forEach(function(ue){V[++x]=ue}),V}var Ft=Array.prototype,Ct=Function.prototype,ot=Object.prototype,at=It["__core-js_shared__"],wt=Ct.toString,Ze=ot.hasOwnProperty,er=function(){var v=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),or=ot.toString,Mt=RegExp("^"+wt.call(Ze).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=T?It.Buffer:void 0,jt=It.Symbol,Ir=It.Uint8Array,Ar=ot.propertyIsEnumerable,Vr=Ft.splice,tr=jt?jt.toStringTag:void 0,ni=Object.getOwnPropertySymbols,mi=gr?gr.isBuffer:void 0,Oi=Vt(Object.keys,Object),Ri=Xi(It,"DataView"),si=Xi(It,"Map"),$t=Xi(It,"Promise"),Ut=Xi(It,"Set"),Dt=Xi(It,"WeakMap"),xt=Xi(Object,"create"),rr=Ni(Ri),We=Ni(si),zt=Ni($t),ar=Ni(Ut),ir=Ni(Dt),Bt=jt?jt.prototype:void 0,Wt=Bt?Bt.valueOf:void 0;function _t(v){var x=-1,V=v==null?0:v.length;for(this.clear();++x<V;){var ue=v[x];this.set(ue[0],ue[1])}}function qt(){this.__data__=xt?xt(null):{},this.size=0}function St(v){var x=this.has(v)&&delete this.__data__[v];return this.size-=x?1:0,x}function Pt(v){var x=this.__data__;if(xt){var V=x[v];return V===pe?void 0:V}return Ze.call(x,v)?x[v]:void 0}function Ot(v){var x=this.__data__;return xt?x[v]!==void 0:Ze.call(x,v)}function na(v,x){var V=this.__data__;return this.size+=this.has(v)?0:1,V[v]=xt&&x===void 0?pe:x,this}_t.prototype.clear=qt,_t.prototype.delete=St,_t.prototype.get=Pt,_t.prototype.has=Ot,_t.prototype.set=na;function oi(v){var x=-1,V=v==null?0:v.length;for(this.clear();++x<V;){var ue=v[x];this.set(ue[0],ue[1])}}function sa(){this.__data__=[],this.size=0}function xu(v){var x=this.__data__,V=Nn(x,v);if(V<0)return!1;var ue=x.length-1;return V==ue?x.pop():Vr.call(x,V,1),--this.size,!0}function oa(v){var x=this.__data__,V=Nn(x,v);return V<0?void 0:x[V][1]}function aa(v){return Nn(this.__data__,v)>-1}function ca(v,x){var V=this.__data__,ue=Nn(V,v);return ue<0?(++this.size,V.push([v,x])):V[ue][1]=x,this}oi.prototype.clear=sa,oi.prototype.delete=xu,oi.prototype.get=oa,oi.prototype.has=aa,oi.prototype.set=ca;function Ai(v){var x=-1,V=v==null?0:v.length;for(this.clear();++x<V;){var ue=v[x];this.set(ue[0],ue[1])}}function Su(){this.size=0,this.__data__={hash:new _t,map:new(si||oi),string:new _t}}function Pu(v){var x=pn(this,v).delete(v);return this.size-=x?1:0,x}function ua(v){return pn(this,v).get(v)}function Ou(v){return pn(this,v).has(v)}function Ci(v,x){var V=pn(this,v),ue=V.size;return V.set(v,x),this.size+=V.size==ue?0:1,this}Ai.prototype.clear=Su,Ai.prototype.delete=Pu,Ai.prototype.get=ua,Ai.prototype.has=Ou,Ai.prototype.set=Ci;function Tn(v){var x=-1,V=v==null?0:v.length;for(this.__data__=new Ai;++x<V;)this.add(v[x])}function js(v){return this.__data__.set(v,pe),this}function $s(v){return this.__data__.has(v)}Tn.prototype.add=Tn.prototype.push=js,Tn.prototype.has=$s;function Ti(v){var x=this.__data__=new oi(v);this.size=x.size}function Ru(){this.__data__=new oi,this.size=0}function ha(v){var x=this.__data__,V=x.delete(v);return this.size=x.size,V}function Au(v){return this.__data__.get(v)}function Qi(v){return this.__data__.has(v)}function dn(v,x){var V=this.__data__;if(V instanceof oi){var ue=V.__data__;if(!si||ue.length<G-1)return ue.push([v,x]),this.size=++V.size,this;V=this.__data__=new Ai(ue)}return V.set(v,x),this.size=V.size,this}Ti.prototype.clear=Ru,Ti.prototype.delete=ha,Ti.prototype.get=Au,Ti.prototype.has=Qi,Ti.prototype.set=dn;function Us(v,x){var V=gn(v),ue=!V&&wa(v),dt=!V&&!ue&&ts(v),z=!V&&!ue&&!dt&&Gs(v),Re=V||ue||dt||z,ct=Re?it(v.length,String):[],Rt=ct.length;for(var je in v)(x||Ze.call(v,je))&&!(Re&&(je=="length"||dt&&(je=="offset"||je=="parent")||z&&(je=="buffer"||je=="byteLength"||je=="byteOffset")||ga(je,Rt)))&&ct.push(je);return ct}function Nn(v,x){for(var V=v.length;V--;)if(Ks(v[V][0],x))return V;return-1}function la(v,x,V){var ue=x(v);return gn(v)?ue:rt(ue,V(v))}function Yi(v){return v==null?v===void 0?te:nr:tr&&tr in Object(v)?pa(v):ma(v)}function Cr(v){return yn(v)&&Yi(v)==Pe}function ai(v,x,V,ue,dt){return v===x?!0:v==null||x==null||!yn(v)&&!yn(x)?v!==v&&x!==x:Ht(v,x,V,ue,ai,dt)}function Ht(v,x,V,ue,dt,z){var Re=gn(v),ct=gn(x),Rt=Re?Ne:wi(v),je=ct?Ne:wi(x);Rt=Rt==Pe?lt:Rt,je=je==Pe?lt:je;var Qe=Rt==lt,xr=je==lt,fr=Rt==je;if(fr&&ts(v)){if(!ts(x))return!1;Re=!0,Qe=!1}if(fr&&!Qe)return z||(z=new Ti),Re||Gs(v)?zs(v,x,V,ue,dt,z):es(v,x,Rt,V,ue,dt,z);if(!(V&Ie)){var yr=Qe&&Ze.call(v,"__wrapped__"),Tr=xr&&Ze.call(x,"__wrapped__");if(yr||Tr){var _i=yr?v.value():v,ci=Tr?x.value():x;return z||(z=new Ti),dt(_i,ci,V,ue,z)}}return fr?(z||(z=new Ti),Dn(v,x,V,ue,dt,z)):!1}function Wr(v){if(!Di(v)||ya(v))return!1;var x=Vs(v)?Mt:vt;return x.test(Ni(v))}function fa(v){return yn(v)&&Ws(v.length)&&!!ze[Yi(v)]}function da(v){if(!va(v))return Oi(v);var x=[];for(var V in Object(v))Ze.call(v,V)&&V!="constructor"&&x.push(V);return x}function zs(v,x,V,ue,dt,z){var Re=V&Ie,ct=v.length,Rt=x.length;if(ct!=Rt&&!(Re&&Rt>ct))return!1;var je=z.get(v);if(je&&z.get(x))return je==x;var Qe=-1,xr=!0,fr=V&ht?new Tn:void 0;for(z.set(v,x),z.set(x,v);++Qe<ct;){var yr=v[Qe],Tr=x[Qe];if(ue)var _i=Re?ue(Tr,yr,Qe,x,v,z):ue(yr,Tr,Qe,v,x,z);if(_i!==void 0){if(_i)continue;xr=!1;break}if(fr){if(!mt(x,function(ci,Li){if(!Ke(fr,Li)&&(yr===ci||dt(yr,ci,V,ue,z)))return fr.push(Li)})){xr=!1;break}}else if(!(yr===Tr||dt(yr,Tr,V,ue,z))){xr=!1;break}}return z.delete(v),z.delete(x),xr}function es(v,x,V,ue,dt,z,Re){switch(V){case we:if(v.byteLength!=x.byteLength||v.byteOffset!=x.byteOffset)return!1;v=v.buffer,x=x.buffer;case ye:return!(v.byteLength!=x.byteLength||!z(new Ir(v),new Ir(x)));case ee:case se:case gt:return Ks(+v,+x);case Le:return v.name==x.name&&v.message==x.message;case sr:case tt:return v==x+"";case oe:var ct=kt;case lr:var Rt=ue&Ie;if(ct||(ct=ft),v.size!=x.size&&!Rt)return!1;var je=Re.get(v);if(je)return je==x;ue|=ht,Re.set(v,x);var Qe=zs(ct(v),ct(x),ue,dt,z,Re);return Re.delete(v),Qe;case k:if(Wt)return Wt.call(v)==Wt.call(x)}return!1}function Dn(v,x,V,ue,dt,z){var Re=V&Ie,ct=Bs(v),Rt=ct.length,je=Bs(x),Qe=je.length;if(Rt!=Qe&&!Re)return!1;for(var xr=Rt;xr--;){var fr=ct[xr];if(!(Re?fr in x:Ze.call(x,fr)))return!1}var yr=z.get(v);if(yr&&z.get(x))return yr==x;var Tr=!0;z.set(v,x),z.set(x,v);for(var _i=Re;++xr<Rt;){fr=ct[xr];var ci=v[fr],Li=x[fr];if(ue)var Js=Re?ue(Li,ci,fr,x,v,z):ue(ci,Li,fr,v,x,z);if(!(Js===void 0?ci===Li||dt(ci,Li,V,ue,z):Js)){Tr=!1;break}_i||(_i=fr=="constructor")}if(Tr&&!_i){var vn=v.constructor,Ln=x.constructor;vn!=Ln&&"constructor"in v&&"constructor"in x&&!(typeof vn=="function"&&vn instanceof vn&&typeof Ln=="function"&&Ln instanceof Ln)&&(Tr=!1)}return z.delete(v),z.delete(x),Tr}function Bs(v){return la(v,ba,qs)}function pn(v,x){var V=v.__data__;return Hs(x)?V[typeof x=="string"?"string":"hash"]:V.map}function Xi(v,x){var V=Zt(v,x);return Wr(V)?V:void 0}function pa(v){var x=Ze.call(v,tr),V=v[tr];try{v[tr]=void 0;var ue=!0}catch{}var dt=or.call(v);return ue&&(x?v[tr]=V:delete v[tr]),dt}var qs=ni?function(v){return v==null?[]:(v=Object(v),Oe(ni(v),function(x){return Ar.call(v,x)}))}:Ea,wi=Yi;(Ri&&wi(new Ri(new ArrayBuffer(1)))!=we||si&&wi(new si)!=oe||$t&&wi($t.resolve())!=yt||Ut&&wi(new Ut)!=lr||Dt&&wi(new Dt)!=fe)&&(wi=function(v){var x=Yi(v),V=x==lt?v.constructor:void 0,ue=V?Ni(V):"";if(ue)switch(ue){case rr:return we;case We:return oe;case zt:return yt;case ar:return lr;case ir:return fe}return x});function ga(v,x){return x=x??J,!!x&&(typeof v=="number"||Et.test(v))&&v>-1&&v%1==0&&v<x}function Hs(v){var x=typeof v;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?v!=="__proto__":v===null}function ya(v){return!!er&&er in v}function va(v){var x=v&&v.constructor,V=typeof x=="function"&&x.prototype||ot;return v===V}function ma(v){return or.call(v)}function Ni(v){if(v!=null){try{return wt.call(v)}catch{}try{return v+""}catch{}}return""}function Ks(v,x){return v===x||v!==v&&x!==x}var wa=Cr(function(){return arguments}())?Cr:function(v){return yn(v)&&Ze.call(v,"callee")&&!Ar.call(v,"callee")},gn=Array.isArray;function _a(v){return v!=null&&Ws(v.length)&&!Vs(v)}var ts=mi||Cu;function ks(v,x){return ai(v,x)}function Vs(v){if(!Di(v))return!1;var x=Yi(v);return x==xe||x==Me||x==H||x==hr}function Ws(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=J}function Di(v){var x=typeof v;return v!=null&&(x=="object"||x=="function")}function yn(v){return v!=null&&typeof v=="object"}var Gs=ge?st(ge):fa;function ba(v){return _a(v)?Us(v):da(v)}function Ea(){return[]}function Cu(){return!1}Xe.exports=ks},57828:function(Xe){"use strict";function $(G){try{return JSON.stringify(G)}catch{return'"[Circular]"'}}Xe.exports=L;function L(G,pe,Ie){var ht=Ie&&Ie.stringify||$,J=1;if(typeof G=="object"&&G!==null){var Pe=pe.length+J;if(Pe===1)return G;var Ne=new Array(Pe);Ne[0]=ht(G);for(var H=1;H<Pe;H++)Ne[H]=ht(pe[H]);return Ne.join(" ")}if(typeof G!="string")return G;var ee=pe.length;if(ee===0)return G;for(var se="",Le=1-J,xe=-1,Me=G&&G.length||0,oe=0;oe<Me;){if(G.charCodeAt(oe)===37&&oe+1<Me){switch(xe=xe>-1?xe:0,G.charCodeAt(oe+1)){case 100:case 102:if(Le>=ee||pe[Le]==null)break;xe<oe&&(se+=G.slice(xe,oe)),se+=Number(pe[Le]),xe=oe+2,oe++;break;case 105:if(Le>=ee||pe[Le]==null)break;xe<oe&&(se+=G.slice(xe,oe)),se+=Math.floor(Number(pe[Le])),xe=oe+2,oe++;break;case 79:case 111:case 106:if(Le>=ee||pe[Le]===void 0)break;xe<oe&&(se+=G.slice(xe,oe));var gt=typeof pe[Le];if(gt==="string"){se+="'"+pe[Le]+"'",xe=oe+2,oe++;break}if(gt==="function"){se+=pe[Le].name||"<anonymous>",xe=oe+2,oe++;break}se+=ht(pe[Le]),xe=oe+2,oe++;break;case 115:if(Le>=ee)break;xe<oe&&(se+=G.slice(xe,oe)),se+=String(pe[Le]),xe=oe+2,oe++;break;case 37:xe<oe&&(se+=G.slice(xe,oe)),se+="%",xe=oe+2,oe++,Le--;break}++Le}++oe}return xe===-1?G:(xe<Me&&(se+=G.slice(xe)),se)}},85783:function(Xe){"use strict";Xe.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},86984:function(Xe,$,L){"use strict";const G=L(57828);Xe.exports=J;const pe=tt().console||{},Ie={mapHttpRequest:gt,mapHttpResponse:gt,wrapRequestSerializer:nr,wrapResponseSerializer:nr,wrapErrorSerializer:nr,req:gt,res:gt,err:Me};function ht(k,te){return Array.isArray(k)?k.filter(function(ye){return ye!=="!stdSerializers.err"}):k===!0?Object.keys(te):!1}function J(k){k=k||{},k.browser=k.browser||{};const te=k.browser.transmit;if(te&&typeof te.send!="function")throw Error("pino: transmit option must have a send function");const fe=k.browser.write||pe;k.browser.write&&(k.browser.asObject=!0);const ye=k.serializers||{},we=ht(k.browser.serialize,ye);let Z=k.browser.serialize;Array.isArray(k.browser.serialize)&&k.browser.serialize.indexOf("!stdSerializers.err")>-1&&(Z=!1);const R=["error","fatal","warn","info","debug","trace"];typeof fe=="function"&&(fe.error=fe.fatal=fe.warn=fe.info=fe.debug=fe.trace=fe),k.enabled===!1&&(k.level="silent");const I=k.level||"info",S=Object.create(fe);S.log||(S.log=lt),Object.defineProperty(S,"levelVal",{get:Se}),Object.defineProperty(S,"level",{get:X,set:ne});const ve={transmit:te,serialize:we,asObject:k.browser.asObject,levels:R,timestamp:oe(k)};S.levels=J.levels,S.level=I,S.setMaxListeners=S.getMaxListeners=S.emit=S.addListener=S.on=S.prependListener=S.once=S.prependOnceListener=S.removeListener=S.removeAllListeners=S.listeners=S.listenerCount=S.eventNames=S.write=S.flush=lt,S.serializers=ye,S._serialize=we,S._stdErrSerialize=Z,S.child=ie,te&&(S._logEvent=xe());function Se(){return this.level==="silent"?1/0:this.levels.values[this.level]}function X(){return this._level}function ne(re){if(re!=="silent"&&!this.levels.values[re])throw Error("unknown level "+re);this._level=re,Pe(ve,S,"error","log"),Pe(ve,S,"fatal","error"),Pe(ve,S,"warn","error"),Pe(ve,S,"info","log"),Pe(ve,S,"debug","log"),Pe(ve,S,"trace","log")}function ie(re,vt){if(!re)throw new Error("missing bindings for child Pino");vt=vt||{},we&&re.serializers&&(vt.serializers=re.serializers);const Et=vt.serializers;if(we&&Et){var ze=Object.assign({},ye,Et),ii=k.browser.serialize===!0?Object.keys(ze):we;delete re.serializers,ee([re],ii,ze,this._stdErrSerialize)}function Pi(It){this._childLevel=(It._childLevel|0)+1,this.error=se(It,re,"error"),this.fatal=se(It,re,"fatal"),this.warn=se(It,re,"warn"),this.info=se(It,re,"info"),this.debug=se(It,re,"debug"),this.trace=se(It,re,"trace"),ze&&(this.serializers=ze,this._serialize=ii),te&&(this._logEvent=xe([].concat(It._logEvent.bindings,re)))}return Pi.prototype=this,new Pi(this)}return S}J.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},J.stdSerializers=Ie,J.stdTimeFunctions=Object.assign({},{nullTime:yt,epochTime:hr,unixTime:sr,isoTime:lr});function Pe(k,te,fe,ye){const we=Object.getPrototypeOf(te);te[fe]=te.levelVal>te.levels.values[fe]?lt:we[fe]?we[fe]:pe[fe]||pe[ye]||lt,Ne(k,te,fe)}function Ne(k,te,fe){!k.transmit&&te[fe]===lt||(te[fe]=function(ye){return function(){const Z=k.timestamp(),R=new Array(arguments.length),I=Object.getPrototypeOf&&Object.getPrototypeOf(this)===pe?pe:this;for(var S=0;S<R.length;S++)R[S]=arguments[S];if(k.serialize&&!k.asObject&&ee(R,this._serialize,this.serializers,this._stdErrSerialize),k.asObject?ye.call(I,H(this,fe,R,Z)):ye.apply(I,R),k.transmit){const ve=k.transmit.level||te.level,Se=J.levels.values[ve],X=J.levels.values[fe];if(X<Se)return;Le(this,{ts:Z,methodLevel:fe,methodValue:X,transmitLevel:ve,transmitValue:J.levels.values[k.transmit.level||te.level],send:k.transmit.send,val:te.levelVal},R)}}}(te[fe]))}function H(k,te,fe,ye){k._serialize&&ee(fe,k._serialize,k.serializers,k._stdErrSerialize);const we=fe.slice();let Z=we[0];const R={};ye&&(R.time=ye),R.level=J.levels.values[te];let I=(k._childLevel|0)+1;if(I<1&&(I=1),Z!==null&&typeof Z=="object"){for(;I--&&typeof we[0]=="object";)Object.assign(R,we.shift());Z=we.length?G(we.shift(),we):void 0}else typeof Z=="string"&&(Z=G(we.shift(),we));return Z!==void 0&&(R.msg=Z),R}function ee(k,te,fe,ye){for(const we in k)if(ye&&k[we]instanceof Error)k[we]=J.stdSerializers.err(k[we]);else if(typeof k[we]=="object"&&!Array.isArray(k[we]))for(const Z in k[we])te&&te.indexOf(Z)>-1&&Z in fe&&(k[we][Z]=fe[Z](k[we][Z]))}function se(k,te,fe){return function(){const ye=new Array(1+arguments.length);ye[0]=te;for(var we=1;we<ye.length;we++)ye[we]=arguments[we-1];return k[fe].apply(this,ye)}}function Le(k,te,fe){const ye=te.send,we=te.ts,Z=te.methodLevel,R=te.methodValue,I=te.val,S=k._logEvent.bindings;ee(fe,k._serialize||Object.keys(k.serializers),k.serializers,k._stdErrSerialize===void 0?!0:k._stdErrSerialize),k._logEvent.ts=we,k._logEvent.messages=fe.filter(function(ve){return S.indexOf(ve)===-1}),k._logEvent.level.label=Z,k._logEvent.level.value=R,ye(Z,k._logEvent,I),k._logEvent=xe(S)}function xe(k){return{ts:0,messages:[],bindings:k||[],level:{label:"",value:0}}}function Me(k){const te={type:k.constructor.name,msg:k.message,stack:k.stack};for(const fe in k)te[fe]===void 0&&(te[fe]=k[fe]);return te}function oe(k){return typeof k.timestamp=="function"?k.timestamp:k.timestamp===!1?yt:hr}function gt(){return{}}function nr(k){return k}function lt(){}function yt(){return!1}function hr(){return Date.now()}function sr(){return Math.round(Date.now()/1e3)}function lr(){return new Date(Date.now()).toISOString()}function tt(){function k(te){return typeof te<"u"&&te}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return k(self)||k(window)||k(this)||{}}}}}]);
