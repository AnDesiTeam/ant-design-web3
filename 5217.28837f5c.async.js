(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[5217],{61326:function(Te,T,U){"use strict";var N;N={value:!0},N=N=N=T.Xx=N=N=T._w=T.aP=T.KS=N=T.jQ=void 0;const ie=U(4883),g=U(21318),he=U(49644);T.jQ=64,N=32,T.KS=64,T.aP=32;function H(F){const j=new Float64Array(16);if(F)for(let R=0;R<F.length;R++)j[R]=F[R];return j}const te=new Uint8Array(32);te[0]=9;const Pe=H(),G=H([1]),Y=H([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ne=H([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),De=H([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_e=H([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Fe=H([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ce(F,j){for(let R=0;R<16;R++)F[R]=j[R]|0}function rt(F){let j=1;for(let R=0;R<16;R++){let h=F[R]+j+65535;j=Math.floor(h/65536),F[R]=h-j*65536}F[0]+=j-1+37*(j-1)}function Lt(F,j,R){const h=~(R-1);for(let E=0;E<16;E++){const ge=h&(F[E]^j[E]);F[E]^=ge,j[E]^=ge}}function Ye(F,j){const R=H(),h=H();for(let E=0;E<16;E++)h[E]=j[E];rt(h),rt(h),rt(h);for(let E=0;E<2;E++){R[0]=h[0]-65517;for(let Oe=1;Oe<15;Oe++)R[Oe]=h[Oe]-65535-(R[Oe-1]>>16&1),R[Oe-1]&=65535;R[15]=h[15]-32767-(R[14]>>16&1);const ge=R[15]>>16&1;R[14]&=65535,Lt(h,R,1-ge)}for(let E=0;E<16;E++)F[2*E]=h[E]&255,F[2*E+1]=h[E]>>8}function Xe(F,j){let R=0;for(let h=0;h<32;h++)R|=F[h]^j[h];return(1&R-1>>>8)-1}function Z(F,j){const R=new Uint8Array(32),h=new Uint8Array(32);return Ye(R,F),Ye(h,j),Xe(R,h)}function V(F){const j=new Uint8Array(32);return Ye(j,F),j[0]&1}function ee(F,j){for(let R=0;R<16;R++)F[R]=j[2*R]+(j[2*R+1]<<8);F[15]&=32767}function oe(F,j,R){for(let h=0;h<16;h++)F[h]=j[h]+R[h]}function C(F,j,R){for(let h=0;h<16;h++)F[h]=j[h]-R[h]}function B(F,j,R){let h,E,ge=0,Oe=0,ke=0,dt=0,Ve=0,et=0,Ht=0,ur=0,Zt=0,Qt=0,At=0,Ct=0,Rt=0,ct=0,it=0,ut=0,Ze=0,Bt=0,Yt=0,sr=0,Xt=0,nr=0,Ir=0,or=0,Nr=0,dr=0,Hr=0,wi=0,_i=0,hi=0,bi=0,Pt=R[0],Tt=R[1],Ft=R[2],ht=R[3],Mt=R[4],pt=R[5],Dt=R[6],St=R[7],kt=R[8],jt=R[9],zt=R[10],lt=R[11],Vt=R[12],Kt=R[13],Gt=R[14],Wt=R[15];h=j[0],ge+=h*Pt,Oe+=h*Tt,ke+=h*Ft,dt+=h*ht,Ve+=h*Mt,et+=h*pt,Ht+=h*Dt,ur+=h*St,Zt+=h*kt,Qt+=h*jt,At+=h*zt,Ct+=h*lt,Rt+=h*Vt,ct+=h*Kt,it+=h*Gt,ut+=h*Wt,h=j[1],Oe+=h*Pt,ke+=h*Tt,dt+=h*Ft,Ve+=h*ht,et+=h*Mt,Ht+=h*pt,ur+=h*Dt,Zt+=h*St,Qt+=h*kt,At+=h*jt,Ct+=h*zt,Rt+=h*lt,ct+=h*Vt,it+=h*Kt,ut+=h*Gt,Ze+=h*Wt,h=j[2],ke+=h*Pt,dt+=h*Tt,Ve+=h*Ft,et+=h*ht,Ht+=h*Mt,ur+=h*pt,Zt+=h*Dt,Qt+=h*St,At+=h*kt,Ct+=h*jt,Rt+=h*zt,ct+=h*lt,it+=h*Vt,ut+=h*Kt,Ze+=h*Gt,Bt+=h*Wt,h=j[3],dt+=h*Pt,Ve+=h*Tt,et+=h*Ft,Ht+=h*ht,ur+=h*Mt,Zt+=h*pt,Qt+=h*Dt,At+=h*St,Ct+=h*kt,Rt+=h*jt,ct+=h*zt,it+=h*lt,ut+=h*Vt,Ze+=h*Kt,Bt+=h*Gt,Yt+=h*Wt,h=j[4],Ve+=h*Pt,et+=h*Tt,Ht+=h*Ft,ur+=h*ht,Zt+=h*Mt,Qt+=h*pt,At+=h*Dt,Ct+=h*St,Rt+=h*kt,ct+=h*jt,it+=h*zt,ut+=h*lt,Ze+=h*Vt,Bt+=h*Kt,Yt+=h*Gt,sr+=h*Wt,h=j[5],et+=h*Pt,Ht+=h*Tt,ur+=h*Ft,Zt+=h*ht,Qt+=h*Mt,At+=h*pt,Ct+=h*Dt,Rt+=h*St,ct+=h*kt,it+=h*jt,ut+=h*zt,Ze+=h*lt,Bt+=h*Vt,Yt+=h*Kt,sr+=h*Gt,Xt+=h*Wt,h=j[6],Ht+=h*Pt,ur+=h*Tt,Zt+=h*Ft,Qt+=h*ht,At+=h*Mt,Ct+=h*pt,Rt+=h*Dt,ct+=h*St,it+=h*kt,ut+=h*jt,Ze+=h*zt,Bt+=h*lt,Yt+=h*Vt,sr+=h*Kt,Xt+=h*Gt,nr+=h*Wt,h=j[7],ur+=h*Pt,Zt+=h*Tt,Qt+=h*Ft,At+=h*ht,Ct+=h*Mt,Rt+=h*pt,ct+=h*Dt,it+=h*St,ut+=h*kt,Ze+=h*jt,Bt+=h*zt,Yt+=h*lt,sr+=h*Vt,Xt+=h*Kt,nr+=h*Gt,Ir+=h*Wt,h=j[8],Zt+=h*Pt,Qt+=h*Tt,At+=h*Ft,Ct+=h*ht,Rt+=h*Mt,ct+=h*pt,it+=h*Dt,ut+=h*St,Ze+=h*kt,Bt+=h*jt,Yt+=h*zt,sr+=h*lt,Xt+=h*Vt,nr+=h*Kt,Ir+=h*Gt,or+=h*Wt,h=j[9],Qt+=h*Pt,At+=h*Tt,Ct+=h*Ft,Rt+=h*ht,ct+=h*Mt,it+=h*pt,ut+=h*Dt,Ze+=h*St,Bt+=h*kt,Yt+=h*jt,sr+=h*zt,Xt+=h*lt,nr+=h*Vt,Ir+=h*Kt,or+=h*Gt,Nr+=h*Wt,h=j[10],At+=h*Pt,Ct+=h*Tt,Rt+=h*Ft,ct+=h*ht,it+=h*Mt,ut+=h*pt,Ze+=h*Dt,Bt+=h*St,Yt+=h*kt,sr+=h*jt,Xt+=h*zt,nr+=h*lt,Ir+=h*Vt,or+=h*Kt,Nr+=h*Gt,dr+=h*Wt,h=j[11],Ct+=h*Pt,Rt+=h*Tt,ct+=h*Ft,it+=h*ht,ut+=h*Mt,Ze+=h*pt,Bt+=h*Dt,Yt+=h*St,sr+=h*kt,Xt+=h*jt,nr+=h*zt,Ir+=h*lt,or+=h*Vt,Nr+=h*Kt,dr+=h*Gt,Hr+=h*Wt,h=j[12],Rt+=h*Pt,ct+=h*Tt,it+=h*Ft,ut+=h*ht,Ze+=h*Mt,Bt+=h*pt,Yt+=h*Dt,sr+=h*St,Xt+=h*kt,nr+=h*jt,Ir+=h*zt,or+=h*lt,Nr+=h*Vt,dr+=h*Kt,Hr+=h*Gt,wi+=h*Wt,h=j[13],ct+=h*Pt,it+=h*Tt,ut+=h*Ft,Ze+=h*ht,Bt+=h*Mt,Yt+=h*pt,sr+=h*Dt,Xt+=h*St,nr+=h*kt,Ir+=h*jt,or+=h*zt,Nr+=h*lt,dr+=h*Vt,Hr+=h*Kt,wi+=h*Gt,_i+=h*Wt,h=j[14],it+=h*Pt,ut+=h*Tt,Ze+=h*Ft,Bt+=h*ht,Yt+=h*Mt,sr+=h*pt,Xt+=h*Dt,nr+=h*St,Ir+=h*kt,or+=h*jt,Nr+=h*zt,dr+=h*lt,Hr+=h*Vt,wi+=h*Kt,_i+=h*Gt,hi+=h*Wt,h=j[15],ut+=h*Pt,Ze+=h*Tt,Bt+=h*Ft,Yt+=h*ht,sr+=h*Mt,Xt+=h*pt,nr+=h*Dt,Ir+=h*St,or+=h*kt,Nr+=h*jt,dr+=h*zt,Hr+=h*lt,wi+=h*Vt,_i+=h*Kt,hi+=h*Gt,bi+=h*Wt,ge+=38*Ze,Oe+=38*Bt,ke+=38*Yt,dt+=38*sr,Ve+=38*Xt,et+=38*nr,Ht+=38*Ir,ur+=38*or,Zt+=38*Nr,Qt+=38*dr,At+=38*Hr,Ct+=38*wi,Rt+=38*_i,ct+=38*hi,it+=38*bi,E=1,h=ge+E+65535,E=Math.floor(h/65536),ge=h-E*65536,h=Oe+E+65535,E=Math.floor(h/65536),Oe=h-E*65536,h=ke+E+65535,E=Math.floor(h/65536),ke=h-E*65536,h=dt+E+65535,E=Math.floor(h/65536),dt=h-E*65536,h=Ve+E+65535,E=Math.floor(h/65536),Ve=h-E*65536,h=et+E+65535,E=Math.floor(h/65536),et=h-E*65536,h=Ht+E+65535,E=Math.floor(h/65536),Ht=h-E*65536,h=ur+E+65535,E=Math.floor(h/65536),ur=h-E*65536,h=Zt+E+65535,E=Math.floor(h/65536),Zt=h-E*65536,h=Qt+E+65535,E=Math.floor(h/65536),Qt=h-E*65536,h=At+E+65535,E=Math.floor(h/65536),At=h-E*65536,h=Ct+E+65535,E=Math.floor(h/65536),Ct=h-E*65536,h=Rt+E+65535,E=Math.floor(h/65536),Rt=h-E*65536,h=ct+E+65535,E=Math.floor(h/65536),ct=h-E*65536,h=it+E+65535,E=Math.floor(h/65536),it=h-E*65536,h=ut+E+65535,E=Math.floor(h/65536),ut=h-E*65536,ge+=E-1+37*(E-1),E=1,h=ge+E+65535,E=Math.floor(h/65536),ge=h-E*65536,h=Oe+E+65535,E=Math.floor(h/65536),Oe=h-E*65536,h=ke+E+65535,E=Math.floor(h/65536),ke=h-E*65536,h=dt+E+65535,E=Math.floor(h/65536),dt=h-E*65536,h=Ve+E+65535,E=Math.floor(h/65536),Ve=h-E*65536,h=et+E+65535,E=Math.floor(h/65536),et=h-E*65536,h=Ht+E+65535,E=Math.floor(h/65536),Ht=h-E*65536,h=ur+E+65535,E=Math.floor(h/65536),ur=h-E*65536,h=Zt+E+65535,E=Math.floor(h/65536),Zt=h-E*65536,h=Qt+E+65535,E=Math.floor(h/65536),Qt=h-E*65536,h=At+E+65535,E=Math.floor(h/65536),At=h-E*65536,h=Ct+E+65535,E=Math.floor(h/65536),Ct=h-E*65536,h=Rt+E+65535,E=Math.floor(h/65536),Rt=h-E*65536,h=ct+E+65535,E=Math.floor(h/65536),ct=h-E*65536,h=it+E+65535,E=Math.floor(h/65536),it=h-E*65536,h=ut+E+65535,E=Math.floor(h/65536),ut=h-E*65536,ge+=E-1+37*(E-1),F[0]=ge,F[1]=Oe,F[2]=ke,F[3]=dt,F[4]=Ve,F[5]=et,F[6]=Ht,F[7]=ur,F[8]=Zt,F[9]=Qt,F[10]=At,F[11]=Ct,F[12]=Rt,F[13]=ct,F[14]=it,F[15]=ut}function W(F,j){B(F,j,j)}function de(F,j){const R=H();let h;for(h=0;h<16;h++)R[h]=j[h];for(h=253;h>=0;h--)W(R,R),h!==2&&h!==4&&B(R,R,j);for(h=0;h<16;h++)F[h]=R[h]}function ye(F,j){const R=H();let h;for(h=0;h<16;h++)R[h]=j[h];for(h=250;h>=0;h--)W(R,R),h!==1&&B(R,R,j);for(h=0;h<16;h++)F[h]=R[h]}function Se(F,j){const R=H(),h=H(),E=H(),ge=H(),Oe=H(),ke=H(),dt=H(),Ve=H(),et=H();C(R,F[1],F[0]),C(et,j[1],j[0]),B(R,R,et),oe(h,F[0],F[1]),oe(et,j[0],j[1]),B(h,h,et),B(E,F[3],j[3]),B(E,E,ne),B(ge,F[2],j[2]),oe(ge,ge,ge),C(Oe,h,R),C(ke,ge,E),oe(dt,ge,E),oe(Ve,h,R),B(F[0],Oe,ke),B(F[1],Ve,dt),B(F[2],dt,ke),B(F[3],Oe,Ve)}function A(F,j,R){for(let h=0;h<4;h++)Lt(F[h],j[h],R)}function x(F,j){const R=H(),h=H(),E=H();de(E,j[2]),B(R,j[0],E),B(h,j[1],E),Ye(F,h),F[31]^=V(R)<<7}function _(F,j,R){ce(F[0],Pe),ce(F[1],G),ce(F[2],G),ce(F[3],Pe);for(let h=255;h>=0;--h){const E=R[h/8|0]>>(h&7)&1;A(F,j,E),Se(j,F),Se(F,F),A(F,j,E)}}function me(F,j){const R=[H(),H(),H(),H()];ce(R[0],De),ce(R[1],_e),ce(R[2],G),B(R[3],De,_e),_(F,R,j)}function Ce(F){if(F.length!==T.aP)throw new Error(`ed25519: seed must be ${T.aP} bytes`);const j=(0,g.hash)(F);j[0]&=248,j[31]&=127,j[31]|=64;const R=new Uint8Array(32),h=[H(),H(),H(),H()];me(h,j),x(R,h);const E=new Uint8Array(64);return E.set(F),E.set(R,32),{publicKey:R,secretKey:E}}T._w=Ce;function Q(F){const j=(0,ie.randomBytes)(32,F),R=Ce(j);return(0,he.wipe)(j),R}N=Q;function ae(F){if(F.length!==T.KS)throw new Error(`ed25519: secret key must be ${T.KS} bytes`);return new Uint8Array(F.subarray(32))}N=ae;const se=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function re(F,j){let R,h,E,ge;for(h=63;h>=32;--h){for(R=0,E=h-32,ge=h-12;E<ge;++E)j[E]+=R-16*j[h]*se[E-(h-32)],R=Math.floor((j[E]+128)/256),j[E]-=R*256;j[E]+=R,j[h]=0}for(R=0,E=0;E<32;E++)j[E]+=R-(j[31]>>4)*se[E],R=j[E]>>8,j[E]&=255;for(E=0;E<32;E++)j[E]-=R*se[E];for(h=0;h<32;h++)j[h+1]+=j[h]>>8,F[h]=j[h]&255}function ot(F){const j=new Float64Array(64);for(let R=0;R<64;R++)j[R]=F[R];for(let R=0;R<64;R++)F[R]=0;re(F,j)}function mt(F,j){const R=new Float64Array(64),h=[H(),H(),H(),H()],E=(0,g.hash)(F.subarray(0,32));E[0]&=248,E[31]&=127,E[31]|=64;const ge=new Uint8Array(64);ge.set(E.subarray(32),32);const Oe=new g.SHA512;Oe.update(ge.subarray(32)),Oe.update(j);const ke=Oe.digest();Oe.clean(),ot(ke),me(h,ke),x(ge,h),Oe.reset(),Oe.update(ge.subarray(0,32)),Oe.update(F.subarray(32)),Oe.update(j);const dt=Oe.digest();ot(dt);for(let Ve=0;Ve<32;Ve++)R[Ve]=ke[Ve];for(let Ve=0;Ve<32;Ve++)for(let et=0;et<32;et++)R[Ve+et]+=dt[Ve]*E[et];return re(ge.subarray(32),R),ge}T.Xx=mt;function qe(F,j){const R=H(),h=H(),E=H(),ge=H(),Oe=H(),ke=H(),dt=H();return ce(F[2],G),ee(F[1],j),W(E,F[1]),B(ge,E,Y),C(E,E,F[2]),oe(ge,F[2],ge),W(Oe,ge),W(ke,Oe),B(dt,ke,Oe),B(R,dt,E),B(R,R,ge),ye(R,R),B(R,R,E),B(R,R,ge),B(R,R,ge),B(F[0],R,ge),W(h,F[0]),B(h,h,ge),Z(h,E)&&B(F[0],F[0],Fe),W(h,F[0]),B(h,h,ge),Z(h,E)?-1:(V(F[0])===j[31]>>7&&C(F[0],Pe,F[0]),B(F[3],F[0],F[1]),0)}function $r(F,j,R){const h=new Uint8Array(32),E=[H(),H(),H(),H()],ge=[H(),H(),H(),H()];if(R.length!==T.jQ)throw new Error(`ed25519: signature must be ${T.jQ} bytes`);if(qe(ge,F))return!1;const Oe=new g.SHA512;Oe.update(R.subarray(0,32)),Oe.update(F),Oe.update(j);const ke=Oe.digest();return ot(ke),_(E,ge,ke),me(ge,R.subarray(32)),Se(E,ge),x(h,E),!Xe(R,h)}N=$r;function ui(F){let j=[H(),H(),H(),H()];if(qe(j,F))throw new Error("Ed25519: invalid public key");let R=H(),h=H(),E=j[1];oe(R,G,E),C(h,G,E),de(h,h),B(R,R,h);let ge=new Uint8Array(32);return Ye(ge,R),ge}N=ui;function at(F){const j=(0,g.hash)(F.subarray(0,32));j[0]&=248,j[31]&=127,j[31]|=64;const R=new Uint8Array(j.subarray(0,32));return(0,he.wipe)(j),R}N=at},21318:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var N=U(6050),ie=U(49644);T.DIGEST_LENGTH=64,T.BLOCK_SIZE=128;var g=function(){function Pe(){this.digestLength=T.DIGEST_LENGTH,this.blockSize=T.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Pe.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},Pe.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Pe.prototype.clean=function(){ie.wipe(this._buffer),ie.wipe(this._tempHi),ie.wipe(this._tempLo),this.reset()},Pe.prototype.update=function(G,Y){if(Y===void 0&&(Y=G.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var ne=0;if(this._bytesHashed+=Y,this._bufferLength>0){for(;this._bufferLength<T.BLOCK_SIZE&&Y>0;)this._buffer[this._bufferLength++]=G[ne++],Y--;this._bufferLength===this.blockSize&&(H(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(Y>=this.blockSize&&(ne=H(this._tempHi,this._tempLo,this._stateHi,this._stateLo,G,ne,Y),Y%=this.blockSize);Y>0;)this._buffer[this._bufferLength++]=G[ne++],Y--;return this},Pe.prototype.finish=function(G){if(!this._finished){var Y=this._bytesHashed,ne=this._bufferLength,De=Y/536870912|0,_e=Y<<3,Fe=Y%128<112?128:256;this._buffer[ne]=128;for(var ce=ne+1;ce<Fe-8;ce++)this._buffer[ce]=0;N.writeUint32BE(De,this._buffer,Fe-8),N.writeUint32BE(_e,this._buffer,Fe-4),H(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Fe),this._finished=!0}for(var ce=0;ce<this.digestLength/8;ce++)N.writeUint32BE(this._stateHi[ce],G,ce*8),N.writeUint32BE(this._stateLo[ce],G,ce*8+4);return this},Pe.prototype.digest=function(){var G=new Uint8Array(this.digestLength);return this.finish(G),G},Pe.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Pe.prototype.restoreState=function(G){return this._stateHi.set(G.stateHi),this._stateLo.set(G.stateLo),this._bufferLength=G.bufferLength,G.buffer&&this._buffer.set(G.buffer),this._bytesHashed=G.bytesHashed,this._finished=!1,this},Pe.prototype.cleanSavedState=function(G){ie.wipe(G.stateHi),ie.wipe(G.stateLo),G.buffer&&ie.wipe(G.buffer),G.bufferLength=0,G.bytesHashed=0},Pe}();T.SHA512=g;var he=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function H(Pe,G,Y,ne,De,_e,Fe){for(var ce=Y[0],rt=Y[1],Lt=Y[2],Ye=Y[3],Xe=Y[4],Z=Y[5],V=Y[6],ee=Y[7],oe=ne[0],C=ne[1],B=ne[2],W=ne[3],de=ne[4],ye=ne[5],Se=ne[6],A=ne[7],x,_,me,Ce,Q,ae,se,re;Fe>=128;){for(var ot=0;ot<16;ot++){var mt=8*ot+_e;Pe[ot]=N.readUint32BE(De,mt),G[ot]=N.readUint32BE(De,mt+4)}for(var ot=0;ot<80;ot++){var qe=ce,$r=rt,ui=Lt,at=Ye,F=Xe,j=Z,R=V,h=ee,E=oe,ge=C,Oe=B,ke=W,dt=de,Ve=ye,et=Se,Ht=A;if(x=ee,_=A,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=(Xe>>>14|de<<32-14)^(Xe>>>18|de<<32-18)^(de>>>41-32|Xe<<32-(41-32)),_=(de>>>14|Xe<<32-14)^(de>>>18|Xe<<32-18)^(Xe>>>41-32|de<<32-(41-32)),Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,x=Xe&Z^~Xe&V,_=de&ye^~de&Se,Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,x=he[ot*2],_=he[ot*2+1],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,x=Pe[ot%16],_=G[ot%16],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,me=se&65535|re<<16,Ce=Q&65535|ae<<16,x=me,_=Ce,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=(ce>>>28|oe<<32-28)^(oe>>>34-32|ce<<32-(34-32))^(oe>>>39-32|ce<<32-(39-32)),_=(oe>>>28|ce<<32-28)^(ce>>>34-32|oe<<32-(34-32))^(ce>>>39-32|oe<<32-(39-32)),Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,x=ce&rt^ce&Lt^rt&Lt,_=oe&C^oe&B^C&B,Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,h=se&65535|re<<16,Ht=Q&65535|ae<<16,x=at,_=ke,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=me,_=Ce,Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,at=se&65535|re<<16,ke=Q&65535|ae<<16,rt=qe,Lt=$r,Ye=ui,Xe=at,Z=F,V=j,ee=R,ce=h,C=E,B=ge,W=Oe,de=ke,ye=dt,Se=Ve,A=et,oe=Ht,ot%16===15)for(var mt=0;mt<16;mt++)x=Pe[mt],_=G[mt],Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Pe[(mt+9)%16],_=G[(mt+9)%16],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,me=Pe[(mt+1)%16],Ce=G[(mt+1)%16],x=(me>>>1|Ce<<32-1)^(me>>>8|Ce<<32-8)^me>>>7,_=(Ce>>>1|me<<32-1)^(Ce>>>8|me<<32-8)^(Ce>>>7|me<<32-7),Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,me=Pe[(mt+14)%16],Ce=G[(mt+14)%16],x=(me>>>19|Ce<<32-19)^(Ce>>>61-32|me<<32-(61-32))^me>>>6,_=(Ce>>>19|me<<32-19)^(me>>>61-32|Ce<<32-(61-32))^(Ce>>>6|me<<32-6),Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Pe[mt]=se&65535|re<<16,G[mt]=Q&65535|ae<<16}x=ce,_=oe,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[0],_=ne[0],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[0]=ce=se&65535|re<<16,ne[0]=oe=Q&65535|ae<<16,x=rt,_=C,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[1],_=ne[1],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[1]=rt=se&65535|re<<16,ne[1]=C=Q&65535|ae<<16,x=Lt,_=B,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[2],_=ne[2],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[2]=Lt=se&65535|re<<16,ne[2]=B=Q&65535|ae<<16,x=Ye,_=W,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[3],_=ne[3],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[3]=Ye=se&65535|re<<16,ne[3]=W=Q&65535|ae<<16,x=Xe,_=de,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[4],_=ne[4],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[4]=Xe=se&65535|re<<16,ne[4]=de=Q&65535|ae<<16,x=Z,_=ye,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[5],_=ne[5],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[5]=Z=se&65535|re<<16,ne[5]=ye=Q&65535|ae<<16,x=V,_=Se,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[6],_=ne[6],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[6]=V=se&65535|re<<16,ne[6]=Se=Q&65535|ae<<16,x=ee,_=A,Q=_&65535,ae=_>>>16,se=x&65535,re=x>>>16,x=Y[7],_=ne[7],Q+=_&65535,ae+=_>>>16,se+=x&65535,re+=x>>>16,ae+=Q>>>16,se+=ae>>>16,re+=se>>>16,Y[7]=ee=se&65535|re<<16,ne[7]=A=Q&65535|ae<<16,_e+=128,Fe-=128}return _e}function te(Pe){var G=new g;G.update(Pe);var Y=G.digest();return G.clean(),Y}T.hash=te},72165:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowserCryptoAvailable=T.getSubtleCrypto=T.getBrowerCrypto=void 0;function N(){return(U.g===null||U.g===void 0?void 0:U.g.crypto)||(U.g===null||U.g===void 0?void 0:U.g.msCrypto)||{}}T.getBrowerCrypto=N;function ie(){const he=N();return he.subtle||he.webkitSubtle}T.getSubtleCrypto=ie;function g(){return!!N()&&!!ie()}T.isBrowserCryptoAvailable=g},73027:function(Te,T,U){"use strict";var N=U(14224);Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowser=T.isNode=T.isReactNative=void 0;function ie(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}T.isReactNative=ie;function g(){return typeof N<"u"&&typeof N.versions<"u"&&typeof N.versions.node<"u"}T.isNode=g;function he(){return!ie()&&!g()}T.isBrowser=he},88497:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0});const N=U(47108);N.__exportStar(U(72165),T),N.__exportStar(U(73027),T)},85217:function(Te,T,U){"use strict";U.d(T,{EthereumProvider:function(){return Gp},OPTIONAL_EVENTS:function(){return zu},OPTIONAL_METHODS:function(){return ju}});var N=U(72100),ie=U.n(N),g=U(3332),he=U(70891),H=U(37875),te=U(71315),Pe=U(36900);class G extends Pe.q{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class Y{constructor(r,s,o){this.core=r,this.logger=s}}class ne extends Pe.q{constructor(r,s){super(),this.core=r,this.logger=s,this.records=new Map}}class De{constructor(r,s){this.logger=r,this.core=s}}class _e extends Pe.q{constructor(r,s){super(),this.relayer=r,this.logger=s}}class Fe extends Pe.q{constructor(r){super()}}class ce{constructor(r,s,o,a){this.core=r,this.logger=s,this.name=o}}class rt{constructor(){this.map=new Map}}class Lt extends Pe.q{constructor(r,s){super(),this.relayer=r,this.logger=s}}class Ye{constructor(r,s){this.core=r,this.logger=s}}class Xe extends Pe.q{constructor(r,s){super(),this.core=r,this.logger=s}}class Z{constructor(r,s){this.logger=r,this.core=s}}class V{constructor(r,s){this.projectId=r,this.logger=s}}class ee extends null{constructor(){super()}}class oe{constructor(r){this.opts=r,this.protocol="wc",this.version=2}}class C extends null{constructor(){super()}}class B{constructor(r){this.client=r}}const W=f=>JSON.stringify(f,(r,s)=>typeof s=="bigint"?s.toString()+"n":s),de=f=>{const r=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,s=f.replace(r,'$1"$2n"$3');return JSON.parse(s,(o,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function ye(f){if(typeof f!="string")throw new Error(`Cannot safe json parse value of type ${typeof f}`);try{return de(f)}catch{return f}}function Se(f){return typeof f=="string"?f:W(f)||""}var A=U(61326),x=U(4883),_=U(46196);const me="EdDSA",Ce="JWT",Q=".",ae="base64url",se="utf8",re="utf8",ot=":",mt="did",qe="key",$r="base58btc",ui="z",at="K36",F=32,j=32;var R=U(22772),h=U(89682),E=U(37573);function ge(f){return safeJsonParse(toString(fromString(f,JWT_ENCODING),JSON_ENCODING))}function Oe(f){return(0,h.B)((0,E.m)(Se(f),se),ae)}function ke(f){const r=(0,E.m)(at,$r),s=ui+(0,h.B)((0,R.z)([r,f]),$r);return[mt,qe,s].join(ot)}function dt(f){const[r,s,o]=f.split(DID_DELIMITER);if(r!==DID_PREFIX||s!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const d=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(d.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const S=d.slice(2);if(S.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return S}function Ve(f){return(0,h.B)(f,ae)}function et(f){return fromString(f,JWT_ENCODING)}function Ht(f){return(0,E.m)([Oe(f.header),Oe(f.payload)].join(Q),re)}function ur(f){const r=toString(f,DATA_ENCODING).split(JWT_DELIMITER),s=ge(r[0]),o=ge(r[1]);return{header:s,payload:o}}function Zt(f){return[Oe(f.header),Oe(f.payload),Ve(f.signature)].join(Q)}function Qt(f){const r=f.split(JWT_DELIMITER),s=ge(r[0]),o=ge(r[1]),a=et(r[2]),d=fromString(r.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:s,payload:o,signature:a,data:d}}function At(f=(0,x.randomBytes)(j)){return A._w(f)}async function Ct(f,r,s,o,a=(0,_.fromMiliseconds)(Date.now())){const d={alg:me,typ:Ce},m=ke(o.publicKey),S=a+s,M={iss:m,sub:f,aud:r,iat:a,exp:S},X=Ht({header:d,payload:M}),pe=A.Xx(o.secretKey,X);return Zt({header:d,payload:M,signature:pe})}async function Rt(f){const{header:r,payload:s,data:o,signature:a}=decodeJWT(f);if(r.alg!==JWT_IRIDIUM_ALG||r.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const d=decodeIss(s.iss);return ed25519.verify(d,o,a)}var ct=U(42995),it=U(5105);const ut="PARSE_ERROR",Ze="INVALID_REQUEST",Bt="METHOD_NOT_FOUND",Yt="INVALID_PARAMS",sr="INTERNAL_ERROR",Xt="SERVER_ERROR",nr=[-32700,-32600,-32601,-32602,-32603],Ir=null,or={[ut]:{code:-32700,message:"Parse error"},[Ze]:{code:-32600,message:"Invalid Request"},[Bt]:{code:-32601,message:"Method not found"},[Yt]:{code:-32602,message:"Invalid params"},[sr]:{code:-32603,message:"Internal error"},[Xt]:{code:-32e3,message:"Server error"}},Nr=Xt;function dr(f){return f<=SERVER_ERROR_CODE_RANGE[0]&&f>=SERVER_ERROR_CODE_RANGE[1]}function Hr(f){return nr.includes(f)}function wi(f){return typeof f=="number"}function _i(f){return Object.keys(or).includes(f)?or[f]:or[Nr]}function hi(f){const r=Object.values(or).find(s=>s.code===f);return r||or[Nr]}function bi(f){if(typeof f.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof f.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!wi(f.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${f.error.code}`};if(Hr(f.error.code)){const r=hi(f.error.code);if(r.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&f.error.message===r.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${f.error.code}`}}return{valid:!0}}function Pt(f,r,s){return f.message.includes("getaddrinfo ENOTFOUND")||f.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${s} RPC url at ${r}`):f}var Tt=U(88497);const Ft=null;function ht(f=3){const r=Date.now()*Math.pow(10,f),s=Math.floor(Math.random()*Math.pow(10,f));return r+s}function Mt(f=6){return BigInt(ht(f))}function pt(f,r,s){return{id:s||ht(),jsonrpc:"2.0",method:f,params:r}}function Dt(f,r){return{id:f,jsonrpc:"2.0",result:r}}function St(f,r,s){return{id:f,jsonrpc:"2.0",error:kt(r,s)}}function kt(f,r){return typeof f>"u"?_i(sr):(typeof f=="string"&&(f=Object.assign(Object.assign({},_i(Xt)),{message:f})),typeof r<"u"&&(f.data=r),Hr(f.code)&&(f=hi(f.code)),f)}class jt{}class zt extends null{constructor(r){super()}}class lt extends jt{constructor(){super()}}class Vt extends lt{constructor(r){super()}}const Kt="^https?:",Gt="^wss?:";function Wt(f){const r=f.match(new RegExp(/^\w+:/,"gi"));if(!(!r||!r.length))return r[0]}function dn(f,r){const s=Wt(f);return typeof s>"u"?!1:new RegExp(r).test(s)}function Br(f){return dn(f,Kt)}function pn(f){return dn(f,Gt)}function So(f){return new RegExp("wss?://localhost(:d{2,5})?").test(f)}function gn(f){return typeof f=="object"&&"id"in f&&"jsonrpc"in f&&f.jsonrpc==="2.0"}function Ls(f){return gn(f)&&"method"in f}function ds(f){return gn(f)&&(hr(f)||Lr(f))}function hr(f){return"result"in f}function Lr(f){return"error"in f}function zc(f){return"error"in f&&f.valid===!1}class Xr extends Vt{constructor(r){super(r),this.events=new N.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(r),this.connection.connected&&this.registerEventListeners()}async connect(r=this.connection){await this.open(r)}async disconnect(){await this.close()}on(r,s){this.events.on(r,s)}once(r,s){this.events.once(r,s)}off(r,s){this.events.off(r,s)}removeListener(r,s){this.events.removeListener(r,s)}async request(r,s){return this.requestStrict(pt(r.method,r.params||[],r.id||Mt().toString()),s)}async requestStrict(r,s){return new Promise(async(o,a)=>{if(!this.connection.connected)try{await this.open()}catch(d){a(d)}this.events.on(`${r.id}`,d=>{Lr(d)?a(d.error):o(d.result)});try{await this.connection.send(r,s)}catch(d){a(d)}})}setConnection(r=this.connection){return r}onPayload(r){this.events.emit("payload",r),ds(r)?this.events.emit(`${r.id}`,r):this.events.emit("message",{type:r.method,data:r.params})}onClose(r){r&&r.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${r.code} ${r.reason?`(${r.reason})`:""}`)),this.events.emit("disconnect")}async open(r=this.connection){this.connection===r&&this.connection.connected||(this.connection.connected&&this.close(),typeof r=="string"&&(await this.connection.open(r),r=this.connection),this.connection=this.setConnection(r),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",r=>this.onPayload(r)),this.connection.on("close",r=>this.onClose(r)),this.connection.on("error",r=>this.events.emit("error",r)),this.connection.on("register_error",r=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var Uc=null,qc=null;const ps=()=>typeof WebSocket<"u"?WebSocket:typeof U.g<"u"&&typeof U.g.WebSocket<"u"?U.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:U(85783),Oo=()=>typeof WebSocket<"u"||typeof U.g<"u"&&typeof U.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$c=()=>typeof window<"u",ei=f=>f.split("?")[0],vn=10,Ao=ps();class Co{constructor(r){if(this.url=r,this.events=new N.EventEmitter,this.registering=!1,!pn(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,s){this.events.on(r,s)}once(r,s){this.events.once(r,s)}off(r,s){this.events.off(r,s)}removeListener(r,s){this.events.removeListener(r,s)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,s)=>{if(typeof this.socket>"u"){s(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),r()},this.socket.close()})}async send(r,s){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Se(r))}catch(o){this.onError(r.id,o)}}register(r=this.url){if(!pn(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const s=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=s||this.events.listenerCount("open")>=s)&&this.events.setMaxListeners(s+1),new Promise((o,a)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),a(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=r,this.registering=!0,new Promise((s,o)=>{const a=(0,Tt.isReactNative)()?void 0:{rejectUnauthorized:!So(r)},d=new Ao(r,[],a);Oo()?d.onerror=m=>{const S=m;o(this.emitError(S.error))}:d.on("error",m=>{o(this.emitError(m))}),d.onopen=()=>{this.onOpen(d),s(d)}})}onOpen(r){r.onmessage=s=>this.onPayload(s),r.onclose=s=>this.onClose(s),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const s=typeof r.data=="string"?ye(r.data):r.data;this.events.emit("payload",s)}onError(r,s){const o=this.parseError(s),a=o.message||o.toString(),d=St(r,a);this.events.emit("payload",d)}parseError(r,s=this.url){return Pt(r,ei(s),"WS")}resetMaxListeners(){this.events.getMaxListeners()>vn&&this.events.setMaxListeners(vn)}emitError(r){const s=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${ei(this.url)}`));return this.events.emit("register_error",s),s}}var Ro=Co,To=Ro,Do=U(5899),gs=U.n(Do);function No(f,r){if(f.length>=255)throw new TypeError("Alphabet too long");for(var s=new Uint8Array(256),o=0;o<s.length;o++)s[o]=255;for(var a=0;a<f.length;a++){var d=f.charAt(a),m=d.charCodeAt(0);if(s[m]!==255)throw new TypeError(d+" is ambiguous");s[m]=a}var S=f.length,M=f.charAt(0),X=Math.log(S)/Math.log(256),pe=Math.log(256)/Math.log(S);function be(Ae){if(Ae instanceof Uint8Array||(ArrayBuffer.isView(Ae)?Ae=new Uint8Array(Ae.buffer,Ae.byteOffset,Ae.byteLength):Array.isArray(Ae)&&(Ae=Uint8Array.from(Ae))),!(Ae instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Ae.length===0)return"";for(var vt=0,bt=0,Et=0,mr=Ae.length;Et!==mr&&Ae[Et]===0;)Et++,vt++;for(var tt=(mr-Et)*pe+1>>>0,Ge=new Uint8Array(tt);Et!==mr;){for(var xt=Ae[Et],wr=0,Ut=tt-1;(xt!==0||wr<bt)&&Ut!==-1;Ut--,wr++)xt+=256*Ge[Ut]>>>0,Ge[Ut]=xt%S>>>0,xt=xt/S>>>0;if(xt!==0)throw new Error("Non-zero carry");bt=wr,Et++}for(var _r=tt-bt;_r!==tt&&Ge[_r]===0;)_r++;for(var qi=M.repeat(vt);_r<tt;++_r)qi+=f.charAt(Ge[_r]);return qi}function we(Ae){if(typeof Ae!="string")throw new TypeError("Expected String");if(Ae.length===0)return new Uint8Array;var vt=0;if(Ae[vt]!==" "){for(var bt=0,Et=0;Ae[vt]===M;)bt++,vt++;for(var mr=(Ae.length-vt)*X+1>>>0,tt=new Uint8Array(mr);Ae[vt];){var Ge=s[Ae.charCodeAt(vt)];if(Ge===255)return;for(var xt=0,wr=mr-1;(Ge!==0||xt<Et)&&wr!==-1;wr--,xt++)Ge+=S*tt[wr]>>>0,tt[wr]=Ge%256>>>0,Ge=Ge/256>>>0;if(Ge!==0)throw new Error("Non-zero carry");Et=xt,vt++}if(Ae[vt]!==" "){for(var Ut=mr-Et;Ut!==mr&&tt[Ut]===0;)Ut++;for(var _r=new Uint8Array(bt+(mr-Ut)),qi=bt;Ut!==mr;)_r[qi++]=tt[Ut++];return _r}}}function Ke(Ae){var vt=we(Ae);if(vt)return vt;throw new Error(`Non-${r} character`)}return{encode:be,decodeUnsafe:we,decode:Ke}}var Qi=No,yn=Qi;const Fs=f=>{if(f instanceof Uint8Array&&f.constructor.name==="Uint8Array")return f;if(f instanceof ArrayBuffer)return new Uint8Array(f);if(ArrayBuffer.isView(f))return new Uint8Array(f.buffer,f.byteOffset,f.byteLength);throw new Error("Unknown type, must be binary type")},Lo=f=>new TextEncoder().encode(f),Fo=f=>new TextDecoder().decode(f);class Mo{constructor(r,s,o){this.name=r,this.prefix=s,this.baseEncode=o}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class jo{constructor(r,s,o){if(this.name=r,this.prefix=s,s.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s.codePointAt(0),this.baseDecode=o}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return wn(this,r)}}class mn{constructor(r){this.decoders=r}or(r){return wn(this,r)}decode(r){const s=r[0],o=this.decoders[s];if(o)return o.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wn=(f,r)=>new mn({...f.decoders||{[f.prefix]:f},...r.decoders||{[r.prefix]:r}});class zo{constructor(r,s,o,a){this.name=r,this.prefix=s,this.baseEncode=o,this.baseDecode=a,this.encoder=new Mo(r,s,o),this.decoder=new jo(r,s,a)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const Yi=({name:f,prefix:r,encode:s,decode:o})=>new zo(f,r,s,o),li=({prefix:f,name:r,alphabet:s})=>{const{encode:o,decode:a}=yn(s,r);return Yi({prefix:f,name:r,encode:o,decode:d=>Fs(a(d))})},ji=(f,r,s,o)=>{const a={};for(let pe=0;pe<r.length;++pe)a[r[pe]]=pe;let d=f.length;for(;f[d-1]==="=";)--d;const m=new Uint8Array(d*s/8|0);let S=0,M=0,X=0;for(let pe=0;pe<d;++pe){const be=a[f[pe]];if(be===void 0)throw new SyntaxError(`Non-${o} character`);M=M<<s|be,S+=s,S>=8&&(S-=8,m[X++]=255&M>>S)}if(S>=s||255&M<<8-S)throw new SyntaxError("Unexpected end of data");return m},Uo=(f,r,s)=>{const o=r[r.length-1]==="=",a=(1<<s)-1;let d="",m=0,S=0;for(let M=0;M<f.length;++M)for(S=S<<8|f[M],m+=8;m>s;)m-=s,d+=r[a&S>>m];if(m&&(d+=r[a&S<<s-m]),o)for(;d.length*s&7;)d+="=";return d},er=({name:f,prefix:r,bitsPerChar:s,alphabet:o})=>Yi({prefix:r,name:f,encode(a){return Uo(a,o,s)},decode(a){return ji(a,o,s,f)}}),fi=Yi({prefix:"\0",name:"identity",encode:f=>Fo(f),decode:f=>Lo(f)});var qo=Object.freeze({__proto__:null,identity:fi});const $o=er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ho=Object.freeze({__proto__:null,base2:$o});const Bo=er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ko=Object.freeze({__proto__:null,base8:Bo});const Ei=li({prefix:"9",name:"base10",alphabet:"0123456789"});var _n=Object.freeze({__proto__:null,base10:Ei});const Vo=er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vs=er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ko=Object.freeze({__proto__:null,base16:Vo,base16upper:vs});const Ms=er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Go=er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bn=er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),En=er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xn=er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xi=er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),In=er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wo=er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jo=er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Zo=Object.freeze({__proto__:null,base32:Ms,base32upper:Go,base32pad:bn,base32padupper:En,base32hex:xn,base32hexupper:Xi,base32hexpad:In,base32hexpadupper:Wo,base32z:Jo});const y=li({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),I=li({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var k=Object.freeze({__proto__:null,base36:y,base36upper:I});const le=li({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),st=li({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ne=Object.freeze({__proto__:null,base58btc:le,base58flickr:st});const wt=er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Jt=er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tr=er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gt=er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var yr=Object.freeze({__proto__:null,base64:wt,base64pad:Jt,base64url:tr,base64urlpad:gt});const Pr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ar=Pr.reduce((f,r,s)=>(f[s]=r,f),[]),Sr=Pr.reduce((f,r,s)=>(f[r.codePointAt(0)]=s,f),[]);function Or(f){return f.reduce((r,s)=>(r+=ar[s],r),"")}function di(f){const r=[];for(const s of f){const o=Sr[s.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${s}`);r.push(o)}return new Uint8Array(r)}const ti=Yi({prefix:"\u{1F680}",name:"base256emoji",encode:Or,decode:di});var xi=Object.freeze({__proto__:null,base256emoji:ti}),Pn=Hc,es=128,ys=127,bf=~ys,Ef=Math.pow(2,31);function Hc(f,r,s){r=r||[],s=s||0;for(var o=s;f>=Ef;)r[s++]=f&255|es,f/=128;for(;f&bf;)r[s++]=f&255|es,f>>>=7;return r[s]=f|0,Hc.bytes=s-o+1,r}var xf=Qo,If=128,Bc=127;function Qo(f,o){var s=0,o=o||0,a=0,d=o,m,S=f.length;do{if(d>=S)throw Qo.bytes=0,new RangeError("Could not decode varint");m=f[d++],s+=a<28?(m&Bc)<<a:(m&Bc)*Math.pow(2,a),a+=7}while(m>=If);return Qo.bytes=d-o,s}var Pf=Math.pow(2,7),Sf=Math.pow(2,14),Of=Math.pow(2,21),Af=Math.pow(2,28),Cf=Math.pow(2,35),Rf=Math.pow(2,42),Tf=Math.pow(2,49),Df=Math.pow(2,56),Nf=Math.pow(2,63),Lf=function(f){return f<Pf?1:f<Sf?2:f<Of?3:f<Af?4:f<Cf?5:f<Rf?6:f<Tf?7:f<Df?8:f<Nf?9:10},Ff={encode:Pn,decode:xf,encodingLength:Lf},kc=Ff;const Vc=(f,r,s=0)=>(kc.encode(f,r,s),r),Kc=f=>kc.encodingLength(f),Yo=(f,r)=>{const s=r.byteLength,o=Kc(f),a=o+Kc(s),d=new Uint8Array(a+s);return Vc(f,d,0),Vc(s,d,o),d.set(r,a),new Mf(f,s,r,d)};class Mf{constructor(r,s,o,a){this.code=r,this.size=s,this.digest=o,this.bytes=a}}const Gc=({name:f,code:r,encode:s})=>new jf(f,r,s);class jf{constructor(r,s,o){this.name=r,this.code=s,this.encode=o}digest(r){if(r instanceof Uint8Array){const s=this.encode(r);return s instanceof Uint8Array?Yo(this.code,s):s.then(o=>Yo(this.code,o))}else throw Error("Unknown type, must be binary type")}}const Wc=f=>async r=>new Uint8Array(await crypto.subtle.digest(f,r)),zf=Gc({name:"sha2-256",code:18,encode:Wc("SHA-256")}),Uf=Gc({name:"sha2-512",code:19,encode:Wc("SHA-512")});var qf=Object.freeze({__proto__:null,sha256:zf,sha512:Uf});const Jc=0,$f="identity",Zc=Fs;var Hf=Object.freeze({__proto__:null,identity:{code:Jc,name:$f,encode:Zc,digest:f=>Yo(Jc,Zc(f))}});new TextEncoder,new TextDecoder;const Qc={...qo,...Ho,...ko,..._n,...Ko,...Zo,...k,...Ne,...yr,...xi};({...qf,...Hf});function Yc(f){return globalThis.Buffer!=null?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):f}function Bf(f=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Yc(globalThis.Buffer.allocUnsafe(f)):new Uint8Array(f)}function Xc(f,r,s,o){return{name:f,prefix:r,encoder:{name:f,prefix:r,encode:s},decoder:{decode:o}}}const eu=Xc("utf8","u",f=>"u"+new TextDecoder("utf8").decode(f),f=>new TextEncoder().encode(f.substring(1))),Xo=Xc("ascii","a",f=>{let r="a";for(let s=0;s<f.length;s++)r+=String.fromCharCode(f[s]);return r},f=>{f=f.substring(1);const r=Bf(f.length);for(let s=0;s<f.length;s++)r[s]=f.charCodeAt(s);return r}),kf={utf8:eu,"utf-8":eu,hex:Qc.base16,latin1:Xo,ascii:Xo,binary:Xo,...Qc};function Vf(f,r="utf8"){const s=kf[r];if(!s)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Yc(globalThis.Buffer.from(f,"utf-8")):s.decoder.decode(`${s.prefix}${f}`)}const tu="wc",Kf=2,ea="core",zi=`${tu}@2:${ea}:`,Gf={name:ea,logger:"error"},Wf={database:":memory:"},Jf="crypto",ru="client_ed25519_seed",Zf=_.ONE_DAY,Qf="keychain",Yf="0.3",Xf="messages",ed="0.3",td=_.SIX_HOURS,rd="publisher",iu="irn",id="error",su="wss://relay.walletconnect.com",nu="wss://relay.walletconnect.org",sd="relayer",pr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},nd="_subscription",Ii={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},od=_.ONE_SECOND,V_={database:":memory:"},ad="2.10.2",cd=1e4,ud="0.3",hd="WALLETCONNECT_CLIENT_ID",ri={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},K_=null,ld="subscription",fd="0.3",dd=_.FIVE_SECONDS*1e3,pd="pairing",gd="0.3",G_=null,js={wc_pairingDelete:{req:{ttl:_.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_.ONE_DAY,prompt:!1,tag:0},res:{ttl:_.ONE_DAY,prompt:!1,tag:0}}},zs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},pi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},vd="history",yd="0.3",md="expirer",kr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},wd="0.3",W_=null,ta="verify-api",Sn="https://verify.walletconnect.com",ou="https://verify.walletconnect.org";class _d{constructor(r,s){this.core=r,this.logger=s,this.keychain=new Map,this.name=Qf,this.version=Yf,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,a)=>{this.isInitialized(),this.keychain.set(o,a),await this.persist()},this.get=o=>{this.isInitialized();const a=this.keychain.get(o);if(typeof a>"u"){const{message:d}=(0,g.Z7)("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(d)}return a},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=r,this.logger=(0,te.generateChildLogger)(s,this.name)}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,(0,g.KC)(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,g.IP)(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class bd{constructor(r,s,o){this.core=r,this.logger=s,this.name=Jf,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),d=At(a);return ke(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=(0,g.Au)();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const d=await this.getClientSeed(),m=At(d),S=(0,g.jd)();return await Ct(S,a,Zf,m)},this.generateSharedKey=(a,d,m)=>{this.isInitialized();const S=this.getPrivateKey(a),M=(0,g.m$)(S,d);return this.setSymKey(M,m)},this.setSymKey=async(a,d)=>{this.isInitialized();const m=d||(0,g.Ym)(a);return await this.keychain.set(m,a),m},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,d,m)=>{this.isInitialized();const S=(0,g.EN)(m),M=Se(d);if((0,g.Q8)(S)){const we=S.senderPublicKey,Ke=S.receiverPublicKey;a=await this.generateSharedKey(we,Ke)}const X=this.getSymKey(a),{type:pe,senderPublicKey:be}=S;return(0,g.HI)({type:pe,symKey:X,message:M,senderPublicKey:be})},this.decode=async(a,d,m)=>{this.isInitialized();const S=(0,g.Ll)(d,m);if((0,g.Q8)(S)){const M=S.receiverPublicKey,X=S.senderPublicKey;a=await this.generateSharedKey(M,X)}try{const M=this.getSymKey(a),X=(0,g.pe)({symKey:M,encoded:d});return ye(X)}catch(M){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(M)}},this.getPayloadType=a=>{const d=(0,g.vB)(a);return(0,g.WG)(d.type)},this.getPayloadSenderPublicKey=a=>{const d=(0,g.vB)(a);return d.senderPublicKey?(0,it.BB)(d.senderPublicKey,g.AW):void 0},this.core=r,this.logger=(0,te.generateChildLogger)(s,this.name),this.keychain=o||new _d(this.core,this.logger)}get context(){return(0,te.getLoggerContext)(this.logger)}async setPrivateKey(r,s){return await this.keychain.set(r,s),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(ru)}catch{r=(0,g.jd)(),await this.keychain.set(ru,r)}return Vf(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ed extends De{constructor(r,s){super(r,s),this.logger=r,this.core=s,this.messages=new Map,this.name=Xf,this.version=ed,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,a)=>{this.isInitialized();const d=(0,g.rj)(a);let m=this.messages.get(o);return typeof m>"u"&&(m={}),typeof m[d]<"u"||(m[d]=a,this.messages.set(o,m),await this.persist()),d},this.get=o=>{this.isInitialized();let a=this.messages.get(o);return typeof a>"u"&&(a={}),a},this.has=(o,a)=>{this.isInitialized();const d=this.get(o),m=(0,g.rj)(a);return typeof d[m]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,te.generateChildLogger)(r,this.name),this.core=s}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,(0,g.KC)(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,g.IP)(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class xd extends _e{constructor(r,s){super(r,s),this.relayer=r,this.logger=s,this.events=new N.EventEmitter,this.name=rd,this.queue=new Map,this.publishTimeout=(0,_.toMiliseconds)(_.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(o,a,d)=>{var m;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}});try{const S=(d==null?void 0:d.ttl)||td,M=(0,g._H)(d),X=(d==null?void 0:d.prompt)||!1,pe=(d==null?void 0:d.tag)||0,be=(d==null?void 0:d.id)||Mt().toString(),we={topic:o,message:a,opts:{ttl:S,relay:M,prompt:X,tag:pe,id:be}},Ke=setTimeout(()=>this.queue.set(be,we),this.publishTimeout);try{await await(0,g.hF)(this.rpcPublish(o,a,S,M,X,pe,be),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(be),this.relayer.events.emit(pr.publish,we)}catch(Ae){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(m=d==null?void 0:d.internal)!=null&&m.throwOnFailedPublish)throw this.removeRequestFromQueue(be),Ae;return}finally{clearTimeout(Ke)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}})}catch(S){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(S),S}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.relayer=r,this.logger=(0,te.generateChildLogger)(s,this.name),this.registerEventListeners()}get context(){return(0,te.getLoggerContext)(this.logger)}rpcPublish(r,s,o,a,d,m,S){var M,X,pe,be;const we={method:(0,g.cO)(a.protocol).publish,params:{topic:r,message:s,ttl:o,prompt:d,tag:m},id:S};return(0,g.o8)((M=we.params)==null?void 0:M.prompt)&&((X=we.params)==null||delete X.prompt),(0,g.o8)((pe=we.params)==null?void 0:pe.tag)&&((be=we.params)==null||delete be.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:we}),this.relayer.request(we)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:s,message:o,opts:a}=r;await this.publish(s,o,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(H.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(pr.connection_stalled);return}this.checkQueue()}),this.relayer.on(pr.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}}class Id{constructor(){this.map=new Map,this.set=(r,s)=>{const o=this.get(r);this.exists(r,s)||this.map.set(r,[...o,s])},this.get=r=>this.map.get(r)||[],this.exists=(r,s)=>this.get(r).includes(s),this.delete=(r,s)=>{if(typeof s>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const o=this.get(r);if(!this.exists(r,s))return;const a=o.filter(d=>d!==s);if(!a.length){this.map.delete(r);return}this.map.set(r,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Pd=Object.defineProperty,Sd=Object.defineProperties,Od=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,Ad=Object.prototype.hasOwnProperty,Cd=Object.prototype.propertyIsEnumerable,cu=(f,r,s)=>r in f?Pd(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Us=(f,r)=>{for(var s in r||(r={}))Ad.call(r,s)&&cu(f,s,r[s]);if(au)for(var s of au(r))Cd.call(r,s)&&cu(f,s,r[s]);return f},ra=(f,r)=>Sd(f,Od(r));class Rd extends Lt{constructor(r,s){super(r,s),this.relayer=r,this.logger=s,this.subscriptions=new Map,this.topicMap=new Id,this.events=new N.EventEmitter,this.name=ld,this.version=fd,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=zi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}});try{const d=(0,g._H)(a),m={topic:o,relay:d};this.pending.set(o,m);const S=await this.rpcSubscribe(o,d);return this.onSubscribe(S,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}}),S}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(o,a.id,a):await this.unsubscribeByTopic(o,a)},this.isSubscribed=async o=>this.topics.includes(o)?!0:await new Promise((a,d)=>{const m=new _.Watch;m.start(this.pendingSubscriptionWatchLabel);const S=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(S),m.stop(this.pendingSubscriptionWatchLabel),a(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=dd&&(clearInterval(S),m.stop(this.pendingSubscriptionWatchLabel),d(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=(0,te.generateChildLogger)(s,this.name),this.clientId=""}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,s){let o=!1;try{o=this.getSubscription(r).topic===s}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,s){const o=this.topicMap.get(r);await Promise.all(o.map(async a=>await this.unsubscribeById(r,a,s)))}async unsubscribeById(r,s,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:s,opts:o}});try{const a=(0,g._H)(o);await this.rpcUnsubscribe(r,s,a);const d=(0,g.D6)("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,s,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:s,opts:o}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(r,s){const o={method:(0,g.cO)(s.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await(0,g.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}return(0,g.rj)(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const s=r[0].relay,o={method:(0,g.cO)(s.protocol).batchSubscribe,params:{topics:r.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await(0,g.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}}rpcUnsubscribe(r,s,o){const a={method:(0,g.cO)(o.protocol).unsubscribe,params:{topic:r,id:s}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(r,s){this.setSubscription(r,ra(Us({},s),{id:r})),this.pending.delete(s.topic)}onBatchSubscribe(r){r.length&&r.forEach(s=>{this.setSubscription(s.id,Us({},s)),this.pending.delete(s.topic)})}async onUnsubscribe(r,s,o){this.events.removeAllListeners(s),this.hasSubscription(s,r)&&this.deleteSubscription(s,o),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,s){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:s}),this.addSubscription(r,s))}addSubscription(r,s){this.subscriptions.set(r,Us({},s)),this.topicMap.set(s.topic,r),this.events.emit(ri.created,s)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const s=this.subscriptions.get(r);if(!s){const{message:o}=(0,g.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return s}deleteSubscription(r,s){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:s});const o=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(o.topic,r),this.events.emit(ri.deleted,ra(Us({},o),{reason:s}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ri.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let s=0;s<r;s++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(ri.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:s}=(0,g.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(s),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(s)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const s=await this.rpcBatchSubscribe(r);(0,g.qt)(s)&&this.onBatchSubscribe(s.map((o,a)=>ra(Us({},r[a]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(H.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(pr.connect,async()=>{await this.onConnect()}),this.relayer.on(pr.disconnect,()=>{this.onDisconnect()}),this.events.on(ri.created,async r=>{const s=ri.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(ri.deleted,async r=>{const s=ri.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const s=setInterval(()=>{this.restartInProgress||(clearInterval(s),r())},this.pollingInterval)})}}var Td=Object.defineProperty,uu=Object.getOwnPropertySymbols,Dd=Object.prototype.hasOwnProperty,Nd=Object.prototype.propertyIsEnumerable,hu=(f,r,s)=>r in f?Td(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Ld=(f,r)=>{for(var s in r||(r={}))Dd.call(r,s)&&hu(f,s,r[s]);if(uu)for(var s of uu(r))Nd.call(r,s)&&hu(f,s,r[s]);return f};class Fd extends Fe{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new N.EventEmitter,this.name=sd,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async s=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(s)}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}},this.onPayloadHandler=s=>{this.onProviderPayload(s)},this.onConnectHandler=()=>{this.events.emit(pr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=s=>{this.logger.error(s),this.events.emit(pr.error,s),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Ii.payload,this.onPayloadHandler),this.provider.on(Ii.connect,this.onConnectHandler),this.provider.on(Ii.disconnect,this.onDisconnectHandler),this.provider.on(Ii.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?(0,te.generateChildLogger)(r.logger,this.name):(0,te.pino)((0,te.getDefaultLoggerOptions)({level:r.logger||id})),this.messages=new Ed(this.logger,r.core),this.subscriber=new Rd(this,this.logger),this.publisher=new xd(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||su,this.projectId=r.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${nu}...`),await this.restartTransport(nu)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},cd)}get context(){return(0,te.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,s,o){this.isInitialized(),await this.publisher.publish(r,s,o),await this.recordMessageEvent({topic:r,message:s,publishedAt:Date.now()})}async subscribe(r,s){var o;this.isInitialized();let a=((o=this.subscriber.topicMap.get(r))==null?void 0:o[0])||"";if(a)return a;let d;const m=S=>{S.topic===r&&(this.subscriber.off(ri.created,m),d())};return await Promise.all([new Promise(S=>{d=S,this.subscriber.on(ri.created,m)}),new Promise(async S=>{a=await this.subscriber.subscribe(r,s),S()})]),a}async unsubscribe(r,s){this.isInitialized(),await this.subscriber.unsubscribe(r,s)}on(r,s){this.events.on(r,s)}once(r,s){this.events.once(r,s)}off(r,s){this.events.off(r,s)}removeListener(r,s){this.events.removeListener(r,s)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await(0,g.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(s=>{if(!this.initialized)return s();this.subscriber.once(ri.resubscribed,()=>{s()})}),new Promise(async(s,o)=>{try{await(0,g.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){o(a);return}s()})])}catch(s){this.logger.error(s);const o=s;if(!this.isConnectionStalled(o.message))throw s;this.provider.events.emit(Ii.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,g.Gg)())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(s=>r.includes(s))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Xr(new To((0,g.$0)({sdkVersion:ad,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:s,message:o}=r;await this.messages.set(s,o)}async shouldIgnoreMessageEvent(r){const{topic:s,message:o}=r;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(s))return this.logger.debug(`Ignoring message for non-subscribed topic ${s}`),!0;const a=this.messages.has(s,o);return a&&this.logger.debug(`Ignoring duplicate message: ${o}`),a}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),Ls(r)){if(!r.method.endsWith(nd))return;const s=r.params,{topic:o,message:a,publishedAt:d}=s.data,m={topic:o,message:a,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ld({type:"event",event:s.id},m)),this.events.emit(s.id,m),await this.acknowledgePayload(r),await this.onMessageEvent(m)}else ds(r)&&this.events.emit(pr.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(pr.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const s=Dt(r.id,!0);await this.provider.connection.send(s)}unregisterProviderListeners(){this.provider.off(Ii.payload,this.onPayloadHandler),this.provider.off(Ii.connect,this.onConnectHandler),this.provider.off(Ii.disconnect,this.onDisconnectHandler),this.provider.off(Ii.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(pr.connection_stalled,()=>{this.restartTransport().catch(s=>this.logger.error(s))});let r=await(0,g.Gg)();(0,g.uw)(async s=>{this.initialized&&r!==s&&(r=s,s?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(pr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},(0,_.toMiliseconds)(od)))}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{const s=setInterval(()=>{this.connected&&(clearInterval(s),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Md=Object.defineProperty,lu=Object.getOwnPropertySymbols,jd=Object.prototype.hasOwnProperty,zd=Object.prototype.propertyIsEnumerable,fu=(f,r,s)=>r in f?Md(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,du=(f,r)=>{for(var s in r||(r={}))jd.call(r,s)&&fu(f,s,r[s]);if(lu)for(var s of lu(r))zd.call(r,s)&&fu(f,s,r[s]);return f};class On extends ce{constructor(r,s,o,a=zi,d=void 0){super(r,s,o,a),this.core=r,this.logger=s,this.name=o,this.map=new Map,this.version=ud,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!(0,g.o8)(m)?this.map.set(this.getKey(m),m):(0,g.xW)(m)?this.map.set(m.id,m):(0,g.h1)(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,S)=>{this.isInitialized(),this.map.has(m)?await this.update(m,S):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:S}),this.map.set(m,S),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(S=>Object.keys(m).every(M=>gs()(S[M],m[M]))):this.values),this.update=async(m,S)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:S});const M=du(du({},this.getData(m)),S);this.map.set(m,M),await this.persist()},this.delete=async(m,S)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:S}),this.map.delete(m),await this.persist())},this.logger=(0,te.generateChildLogger)(s,this.name),this.storagePrefix=a,this.getKey=d}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const s=this.map.get(r);if(!s){const{message:o}=(0,g.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return s}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:s}=(0,g.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(s),new Error(s)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ud{constructor(r,s){this.core=r,this.logger=s,this.name=pd,this.version=gd,this.events=new(ie()),this.initialized=!1,this.storagePrefix=zi,this.ignoredPayloadTypes=[g.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=(0,g.jd)(),a=await this.core.crypto.setSymKey(o),d=(0,g.gn)(_.FIVE_MINUTES),m={protocol:iu},S={topic:a,expiry:d,relay:m,active:!1},M=(0,g.Bv)({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:o,relay:m});return await this.pairings.set(a,S),await this.core.relayer.subscribe(a),this.core.expirer.set(a,d),{topic:a,uri:M}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:a,symKey:d,relay:m}=(0,g.he)(o.uri);let S;if(this.pairings.keys.includes(a)&&(S=this.pairings.get(a),S.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(d,a),await this.core.relayer.subscribe(a,{relay:m}));const M=(0,g.gn)(_.FIVE_MINUTES),X={topic:a,relay:m,expiry:M,active:!1};return await this.pairings.set(a,X),this.core.expirer.set(a,M),o.activatePairing&&await this.activate({topic:a}),this.events.emit(zs.create,X),X},this.activate=async({topic:o})=>{this.isInitialized();const a=(0,g.gn)(_.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:a}),this.core.expirer.set(o,a)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:a}=o;if(this.pairings.keys.includes(a)){const d=await this.sendRequest(a,"wc_pairingPing",{}),{done:m,resolve:S,reject:M}=(0,g.H1)();this.events.once((0,g.E0)("pairing_ping",d),({error:X})=>{X?M(X):S()}),await m()}},this.updateExpiry=async({topic:o,expiry:a})=>{this.isInitialized(),await this.pairings.update(o,{expiry:a})},this.updateMetadata=async({topic:o,metadata:a})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:a}=o;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",(0,g.D6)("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(o,a,d)=>{const m=pt(a,d),S=await this.core.crypto.encode(o,m),M=js[a].req;return this.core.history.set(o,m),this.core.relayer.publish(o,S,M),m.id},this.sendResult=async(o,a,d)=>{const m=Dt(o,d),S=await this.core.crypto.encode(a,m),M=await this.core.history.get(a,o),X=js[M.request.method].res;await this.core.relayer.publish(a,S,X),await this.core.history.resolve(m)},this.sendError=async(o,a,d)=>{const m=St(o,d),S=await this.core.crypto.encode(a,m),M=await this.core.history.get(a,o),X=js[M.request.method]?js[M.request.method].res:js.unregistered_method.res;await this.core.relayer.publish(a,S,X),await this.core.history.resolve(m)},this.deletePairing=async(o,a)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,(0,g.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),a?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(a=>(0,g.Bw)(a.expiry));await Promise.all(o.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=o=>{const{topic:a,payload:d}=o;switch(d.method){case"wc_pairingPing":return this.onPairingPingRequest(a,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,d);default:return this.onUnknownRpcMethodRequest(a,d)}},this.onRelayEventResponse=async o=>{const{topic:a,payload:d}=o,m=(await this.core.history.get(a,d.id)).request.method;switch(m){case"wc_pairingPing":return this.onPairingPingResponse(a,d);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(o,a)=>{const{id:d}=a;try{this.isValidPing({topic:o}),await this.sendResult(d,o,!0),this.events.emit(zs.ping,{id:d,topic:o})}catch(m){await this.sendError(d,o,m),this.logger.error(m)}},this.onPairingPingResponse=(o,a)=>{const{id:d}=a;setTimeout(()=>{hr(a)?this.events.emit((0,g.E0)("pairing_ping",d),{}):Lr(a)&&this.events.emit((0,g.E0)("pairing_ping",d),{error:a.error})},500)},this.onPairingDeleteRequest=async(o,a)=>{const{id:d}=a;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(zs.delete,{id:d,topic:o})}catch(m){await this.sendError(d,o,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(o,a)=>{const{id:d,method:m}=a;try{if(this.registeredMethods.includes(m))return;const S=(0,g.D6)("WC_METHOD_UNSUPPORTED",m);await this.sendError(d,o,S),this.logger.error(S)}catch(S){await this.sendError(d,o,S),this.logger.error(S)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error((0,g.D6)("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{if(!(0,g.EJ)(o)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(a)}if(!(0,g.jv)(o.uri)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(a)}},this.isValidPing=async o=>{if(!(0,g.EJ)(o)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidDisconnect=async o=>{if(!(0,g.EJ)(o)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async o=>{if(!(0,g.M_)(o,!1)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(a)}if(!this.pairings.keys.includes(o)){const{message:a}=(0,g.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(a)}if((0,g.Bw)(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:a}=(0,g.Z7)("EXPIRED",`pairing topic: ${o}`);throw new Error(a)}},this.core=r,this.logger=(0,te.generateChildLogger)(s,this.name),this.pairings=new On(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,te.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(pr.message,async r=>{const{topic:s,message:o}=r;if(!this.pairings.keys.includes(s)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const a=await this.core.crypto.decode(s,o);try{Ls(a)?(this.core.history.set(s,a),this.onRelayEventRequest({topic:s,payload:a})):ds(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:s,payload:a}),this.core.history.delete(s,a.id))}catch(d){this.logger.error(d)}})}registerExpirerEvents(){this.core.expirer.on(kr.expired,async r=>{const{topic:s}=(0,g.iP)(r.target);s&&this.pairings.keys.includes(s)&&(await this.deletePairing(s,!0),this.events.emit(zs.expire,{topic:s}))})}}class qd extends ne{constructor(r,s){super(r,s),this.core=r,this.logger=s,this.records=new Map,this.events=new N.EventEmitter,this.name=vd,this.version=yd,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,a,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:a,chainId:d}),this.records.has(a.id))return;const m={id:a.id,topic:o,request:{method:a.method,params:a.params||null},chainId:d,expiry:(0,g.gn)(_.THIRTY_DAYS)};this.records.set(m.id,m),this.events.emit(pi.created,m)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const a=await this.getRecord(o.id);typeof a.response>"u"&&(a.response=Lr(o)?{error:o.error}:{result:o.result},this.records.set(a.id,a),this.events.emit(pi.updated,a))},this.get=async(o,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:a}),await this.getRecord(a)),this.delete=(o,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(d=>{if(d.topic===o){if(typeof a<"u"&&d.id!==a)return;this.records.delete(d.id),this.events.emit(pi.deleted,d)}})},this.exists=async(o,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===o:!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,te.generateChildLogger)(s,this.name)}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(s=>{if(typeof s.response<"u")return;const o={topic:s.topic,request:pt(s.request.method,s.request.params,s.id),chainId:s.chainId};return r.push(o)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const s=this.records.get(r);if(!s){const{message:o}=(0,g.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return s}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(pi.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:s}=(0,g.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(s),new Error(s)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(pi.created,r=>{const s=pi.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,record:r}),this.persist()}),this.events.on(pi.updated,r=>{const s=pi.updated;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,record:r}),this.persist()}),this.events.on(pi.deleted,r=>{const s=pi.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,record:r}),this.persist()}),this.core.heartbeat.on(H.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{(0,_.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class $d extends Xe{constructor(r,s){super(r,s),this.core=r,this.logger=s,this.expirations=new Map,this.events=new N.EventEmitter,this.name=md,this.version=wd,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const a=this.formatTarget(o);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(o,a)=>{this.isInitialized();const d=this.formatTarget(o),m={target:d,expiry:a};this.expirations.set(d,m),this.checkExpiry(d,m),this.events.emit(kr.created,{target:d,expiration:m})},this.get=o=>{this.isInitialized();const a=this.formatTarget(o);return this.getExpiration(a)},this.del=o=>{if(this.isInitialized(),this.has(o)){const a=this.formatTarget(o),d=this.getExpiration(a);this.expirations.delete(a),this.events.emit(kr.deleted,{target:a,expiration:d})}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,te.generateChildLogger)(s,this.name)}get context(){return(0,te.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return(0,g.Z4)(r);if(typeof r=="number")return(0,g.Gq)(r);const{message:s}=(0,g.Z7)("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(s)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(kr.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:s}=(0,g.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(s),new Error(s)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const s=this.expirations.get(r);if(!s){const{message:o}=(0,g.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return s}checkExpiry(r,s){const{expiry:o}=s;(0,_.toMiliseconds)(o)-Date.now()<=0&&this.expire(r,s)}expire(r,s){this.expirations.delete(r),this.events.emit(kr.expired,{target:r,expiration:s})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,s)=>this.checkExpiry(s,r))}registerEventListeners(){this.core.heartbeat.on(H.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(kr.created,r=>{const s=kr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),this.persist()}),this.events.on(kr.expired,r=>{const s=kr.expired;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),this.persist()}),this.events.on(kr.deleted,r=>{const s=kr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Hd extends V{constructor(r,s){super(r,s),this.projectId=r,this.logger=s,this.name=ta,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async()=>{if(this.verifyDisabled||(0,g.b$)()||!(0,g.jU)())return;const o=Sn;this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(a){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(a)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ou;try{await this.createIframe()}catch(a){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(a),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const a=(o==null?void 0:o.verifyUrl)||Sn;let d;try{d=await this.fetchAttestation(o.attestationId,a)}catch(m){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${a}`),this.logger.info(m),d=await this.fetchAttestation(o.attestationId,ou)}return d},this.fetchAttestation=async(o,a)=>{this.logger.info(`resolving attestation: ${o} from url: ${a}`);const d=this.startAbortTimer(_.ONE_SECOND*2),m=await fetch(`${a}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(d),m.status===200?await m.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const a=d=>{d.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),o())};await Promise.race([new Promise(d=>{if(document.getElementById(ta))return d();window.addEventListener("message",a);const m=document.createElement("iframe");m.id=ta,m.src=`${this.verifyUrl}/${this.projectId}`,m.style.display="none",document.body.append(m),this.iframe=m,o=d}),new Promise((d,m)=>setTimeout(()=>{window.removeEventListener("message",a),m("verify iframe load timeout")},(0,_.toMiliseconds)(_.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=(0,te.generateChildLogger)(s,this.name),this.verifyUrl=Sn,this.abortController=new AbortController,this.isDevEnv=(0,g.UG)()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,te.getLoggerContext)(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,_.toMiliseconds)(r))}}var Bd=Object.defineProperty,pu=Object.getOwnPropertySymbols,kd=Object.prototype.hasOwnProperty,Vd=Object.prototype.propertyIsEnumerable,gu=(f,r,s)=>r in f?Bd(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,vu=(f,r)=>{for(var s in r||(r={}))kd.call(r,s)&&gu(f,s,r[s]);if(pu)for(var s of pu(r))Vd.call(r,s)&&gu(f,s,r[s]);return f};class ia extends G{constructor(r){super(r),this.protocol=tu,this.version=Kf,this.name=ea,this.events=new N.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||su,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const s=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,te.pino)((0,te.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||Gf.logger}));this.logger=(0,te.generateChildLogger)(s,this.name),this.heartbeat=new H.HeartBeat,this.crypto=new bd(this,this.logger,r==null?void 0:r.keychain),this.history=new qd(this,this.logger),this.expirer=new $d(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new he.ZP(vu(vu({},Wf),r==null?void 0:r.storageOptions)),this.relayer=new Fd({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Ud(this,this.logger),this.verify=new Hd(this.projectId||"",this.logger)}static async init(r){const s=new ia(r);await s.initialize();const o=await s.crypto.getClientId();return await s.storage.setItem(hd,o),s}get context(){return(0,te.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const Kd=ia,yu="wc",mu=2,wu="client",sa=`${yu}@${mu}:${wu}:`,na={name:wu,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},J_={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},Z_={database:":memory:"},_u="WALLETCONNECT_DEEPLINK_CHOICE",Q_={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Y_="history",X_="0.3",Gd="proposal",eb=null,bu="Proposal expired",Wd="session",An=_.SEVEN_DAYS,Jd="engine",qs={wc_sessionPropose:{req:{ttl:_.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:_.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:_.THIRTY_SECONDS,prompt:!1,tag:1115}}},oa={min:_.FIVE_MINUTES,max:_.SEVEN_DAYS},Pi={idle:"IDLE",active:"ACTIVE"},Zd="request",Qd=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Yd=Object.defineProperty,Xd=Object.defineProperties,ep=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,xu=(f,r,s)=>r in f?Yd(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Ar=(f,r)=>{for(var s in r||(r={}))tp.call(r,s)&&xu(f,s,r[s]);if(Eu)for(var s of Eu(r))rp.call(r,s)&&xu(f,s,r[s]);return f},$s=(f,r)=>Xd(f,ep(r));class ip extends B{constructor(r){super(r),this.name=Jd,this.events=new(ie()),this.initialized=!1,this.ignoredPayloadTypes=[g.rV],this.requestQueue={state:Pi.idle,queue:[]},this.sessionRequestQueue={state:Pi.idle,queue:[]},this.requestQueueDelay=_.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(qs)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,_.toMiliseconds)(this.requestQueueDelay)))},this.connect=async s=>{await this.isInitialized();const o=$s(Ar({},s),{requiredNamespaces:s.requiredNamespaces||{},optionalNamespaces:s.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:a,requiredNamespaces:d,optionalNamespaces:m,sessionProperties:S,relays:M}=o;let X=a,pe,be=!1;if(X&&(be=this.client.core.pairing.pairings.get(X).active),!X||!be){const{topic:tt,uri:Ge}=await this.client.core.pairing.create();X=tt,pe=Ge}const we=await this.client.core.crypto.generateKeyPair(),Ke=Ar({requiredNamespaces:d,optionalNamespaces:m,relays:M??[{protocol:iu}],proposer:{publicKey:we,metadata:this.client.metadata}},S&&{sessionProperties:S}),{reject:Ae,resolve:vt,done:bt}=(0,g.H1)(_.FIVE_MINUTES,bu);if(this.events.once((0,g.E0)("session_connect"),async({error:tt,session:Ge})=>{if(tt)Ae(tt);else if(Ge){Ge.self.publicKey=we;const xt=$s(Ar({},Ge),{requiredNamespaces:Ge.requiredNamespaces,optionalNamespaces:Ge.optionalNamespaces});await this.client.session.set(Ge.topic,xt),await this.setExpiry(Ge.topic,Ge.expiry),X&&await this.client.core.pairing.updateMetadata({topic:X,metadata:Ge.peer.metadata}),vt(xt)}}),!X){const{message:tt}=(0,g.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${X}`);throw new Error(tt)}const Et=await this.sendRequest({topic:X,method:"wc_sessionPropose",params:Ke}),mr=(0,g.gn)(_.FIVE_MINUTES);return await this.setProposal(Et,Ar({id:Et,expiry:mr},Ke)),{uri:pe,approval:bt}},this.pair=async s=>(await this.isInitialized(),await this.client.core.pairing.pair(s)),this.approve=async s=>{await this.isInitialized(),await this.isValidApprove(s);const{id:o,relayProtocol:a,namespaces:d,sessionProperties:m}=s,S=this.client.proposal.get(o);let{pairingTopic:M,proposer:X,requiredNamespaces:pe,optionalNamespaces:be}=S;M=M||"",(0,g.L5)(pe)||(pe=(0,g.fc)(d,"approve()"));const we=await this.client.core.crypto.generateKeyPair(),Ke=X.publicKey,Ae=await this.client.core.crypto.generateSharedKey(we,Ke);M&&o&&(await this.client.core.pairing.updateMetadata({topic:M,metadata:X.metadata}),await this.sendResult({id:o,topic:M,result:{relay:{protocol:a??"irn"},responderPublicKey:we}}),await this.client.proposal.delete(o,(0,g.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:M}));const vt=Ar({relay:{protocol:a??"irn"},namespaces:d,requiredNamespaces:pe,optionalNamespaces:be,pairingTopic:M,controller:{publicKey:we,metadata:this.client.metadata},expiry:(0,g.gn)(An)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe(Ae),await this.sendRequest({topic:Ae,method:"wc_sessionSettle",params:vt,throwOnFailedPublish:!0});const bt=$s(Ar({},vt),{topic:Ae,pairingTopic:M,acknowledged:!1,self:vt.controller,peer:{publicKey:X.publicKey,metadata:X.metadata},controller:we});return await this.client.session.set(Ae,bt),await this.setExpiry(Ae,(0,g.gn)(An)),{topic:Ae,acknowledged:()=>new Promise(Et=>setTimeout(()=>Et(this.client.session.get(Ae)),500))}},this.reject=async s=>{await this.isInitialized(),await this.isValidReject(s);const{id:o,reason:a}=s,{pairingTopic:d}=this.client.proposal.get(o);d&&(await this.sendError(o,d,a),await this.client.proposal.delete(o,(0,g.D6)("USER_DISCONNECTED")))},this.update=async s=>{await this.isInitialized(),await this.isValidUpdate(s);const{topic:o,namespaces:a}=s,d=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:m,resolve:S,reject:M}=(0,g.H1)();return this.events.once((0,g.E0)("session_update",d),({error:X})=>{X?M(X):S()}),await this.client.session.update(o,{namespaces:a}),{acknowledged:m}},this.extend=async s=>{await this.isInitialized(),await this.isValidExtend(s);const{topic:o}=s,a=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:d,resolve:m,reject:S}=(0,g.H1)();return this.events.once((0,g.E0)("session_extend",a),({error:M})=>{M?S(M):m()}),await this.setExpiry(o,(0,g.gn)(An)),{acknowledged:d}},this.request=async s=>{await this.isInitialized(),await this.isValidRequest(s);const{chainId:o,request:a,topic:d,expiry:m}=s,S=ht(),{done:M,resolve:X,reject:pe}=(0,g.H1)(m,"Request expired. Please try again.");return this.events.once((0,g.E0)("session_request",S),({error:be,result:we})=>{be?pe(be):X(we)}),await Promise.all([new Promise(async be=>{await this.sendRequest({clientRpcId:S,topic:d,method:"wc_sessionRequest",params:{request:a,chainId:o},expiry:m,throwOnFailedPublish:!0}).catch(we=>pe(we)),this.client.events.emit("session_request_sent",{topic:d,request:a,chainId:o,id:S}),be()}),new Promise(async be=>{const we=await this.client.core.storage.getItem(_u);(0,g.Hh)({id:S,topic:d,wcDeepLink:we}),be()}),M()]).then(be=>be[2])},this.respond=async s=>{await this.isInitialized(),await this.isValidRespond(s);const{topic:o,response:a}=s,{id:d}=a;hr(a)?await this.sendResult({id:d,topic:o,result:a.result,throwOnFailedPublish:!0}):Lr(a)&&await this.sendError(d,o,a.error),this.cleanupAfterResponse(s)},this.ping=async s=>{await this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.client.session.keys.includes(o)){const a=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:d,resolve:m,reject:S}=(0,g.H1)();this.events.once((0,g.E0)("session_ping",a),({error:M})=>{M?S(M):m()}),await d()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async s=>{await this.isInitialized(),await this.isValidEmit(s);const{topic:o,event:a,chainId:d}=s;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:a,chainId:d}})},this.disconnect=async s=>{await this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.client.session.keys.includes(o)?(await this.sendRequest({topic:o,method:"wc_sessionDelete",params:(0,g.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(o)):await this.client.core.pairing.disconnect({topic:o})},this.find=s=>(this.isInitialized(),this.client.session.getAll().filter(o=>(0,g.Ih)(o,s))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async s=>{if(s.pairingTopic)try{const o=this.client.core.pairing.pairings.get(s.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(d=>{var m,S;return((m=d.peerMetadata)==null?void 0:m.url)&&((S=d.peerMetadata)==null?void 0:S.url)===s.peer.metadata.url&&d.topic&&d.topic!==o.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(d=>this.client.core.pairing.disconnect({topic:d.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async(s,o)=>{const{self:a}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),this.client.session.delete(s,(0,g.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(_u).catch(d=>this.client.logger.warn(d))},this.deleteProposal=async(s,o)=>{await Promise.all([this.client.proposal.delete(s,(0,g.D6)("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(s)])},this.deletePendingSessionRequest=async(s,o,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(s,o),a?Promise.resolve():this.client.core.expirer.del(s)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(d=>d.id!==s),a&&(this.sessionRequestQueue.state=Pi.idle)},this.setExpiry=async(s,o)=>{this.client.session.keys.includes(s)&&await this.client.session.update(s,{expiry:o}),this.client.core.expirer.set(s,o)},this.setProposal=async(s,o)=>{await this.client.proposal.set(s,o),this.client.core.expirer.set(s,o.expiry)},this.setPendingSessionRequest=async s=>{const o=qs.wc_sessionRequest.req.ttl,{id:a,topic:d,params:m,verifyContext:S}=s;await this.client.pendingRequest.set(a,{id:a,topic:d,params:m,verifyContext:S}),o&&this.client.core.expirer.set(a,(0,g.gn)(o))},this.sendRequest=async s=>{const{topic:o,method:a,params:d,expiry:m,relayRpcId:S,clientRpcId:M,throwOnFailedPublish:X}=s,pe=pt(a,d,M);if((0,g.jU)()&&Qd.includes(a)){const Ke=(0,g.rj)(JSON.stringify(pe));this.client.core.verify.register({attestationId:Ke})}const be=await this.client.core.crypto.encode(o,pe),we=qs[a].req;return m&&(we.ttl=m),S&&(we.id=S),this.client.core.history.set(o,pe),X?(we.internal=$s(Ar({},we.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,be,we)):this.client.core.relayer.publish(o,be,we).catch(Ke=>this.client.logger.error(Ke)),pe.id},this.sendResult=async s=>{const{id:o,topic:a,result:d,throwOnFailedPublish:m}=s,S=Dt(o,d),M=await this.client.core.crypto.encode(a,S),X=await this.client.core.history.get(a,o),pe=qs[X.request.method].res;m?(pe.internal=$s(Ar({},pe.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,M,pe)):this.client.core.relayer.publish(a,M,pe).catch(be=>this.client.logger.error(be)),await this.client.core.history.resolve(S)},this.sendError=async(s,o,a)=>{const d=St(s,a),m=await this.client.core.crypto.encode(o,d),S=await this.client.core.history.get(o,s),M=qs[S.request.method].res;this.client.core.relayer.publish(o,m,M),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const s=[],o=[];this.client.session.getAll().forEach(a=>{(0,g.Bw)(a.expiry)&&s.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{(0,g.Bw)(a.expiry)&&o.push(a.id)}),await Promise.all([...s.map(a=>this.deleteSession(a)),...o.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async s=>{this.requestQueue.queue.push(s),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Pi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Pi.active;const s=this.requestQueue.queue.shift();if(s)try{this.processRequest(s),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=Pi.idle},this.processRequest=s=>{const{topic:o,payload:a}=s,d=a.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(o,a);case"wc_sessionSettle":return this.onSessionSettleRequest(o,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,a);case"wc_sessionExtend":return this.onSessionExtendRequest(o,a);case"wc_sessionPing":return this.onSessionPingRequest(o,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,a);case"wc_sessionRequest":return this.onSessionRequest(o,a);case"wc_sessionEvent":return this.onSessionEventRequest(o,a);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:a}=s,d=(await this.client.core.history.get(o,a.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(o,a);case"wc_sessionSettle":return this.onSessionSettleResponse(o,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,a);case"wc_sessionExtend":return this.onSessionExtendResponse(o,a);case"wc_sessionPing":return this.onSessionPingResponse(o,a);case"wc_sessionRequest":return this.onSessionRequestResponse(o,a);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=s=>{const{topic:o}=s,{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(s,o)=>{const{params:a,id:d}=o;try{this.isValidConnect(Ar({},o.params));const m=(0,g.gn)(_.FIVE_MINUTES),S=Ar({id:d,pairingTopic:s,expiry:m},a);await this.setProposal(d,S);const M=(0,g.rj)(JSON.stringify(o)),X=await this.getVerifyContext(M,S.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:S,verifyContext:X})}catch(m){await this.sendError(d,s,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(s,o)=>{const{id:a}=o;if(hr(o)){const{result:d}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const m=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const S=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:S});const M=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:M});const X=await this.client.core.crypto.generateSharedKey(S,M);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:X});const pe=await this.client.core.relayer.subscribe(X);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:pe}),await this.client.core.pairing.activate({topic:s})}else Lr(o)&&(await this.client.proposal.delete(a,(0,g.D6)("USER_DISCONNECTED")),this.events.emit((0,g.E0)("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(s,o)=>{const{id:a,params:d}=o;try{this.isValidSessionSettleRequest(d);const{relay:m,controller:S,expiry:M,namespaces:X,requiredNamespaces:pe,optionalNamespaces:be,sessionProperties:we,pairingTopic:Ke}=o.params,Ae=Ar({topic:s,relay:m,expiry:M,namespaces:X,acknowledged:!0,pairingTopic:Ke,requiredNamespaces:pe,optionalNamespaces:be,controller:S.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:S.publicKey,metadata:S.metadata}},we&&{sessionProperties:we});await this.sendResult({id:o.id,topic:s,result:!0}),this.events.emit((0,g.E0)("session_connect"),{session:Ae}),this.cleanupDuplicatePairings(Ae)}catch(m){await this.sendError(a,s,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(s,o)=>{const{id:a}=o;hr(o)?(await this.client.session.update(s,{acknowledged:!0}),this.events.emit((0,g.E0)("session_approve",a),{})):Lr(o)&&(await this.client.session.delete(s,(0,g.D6)("USER_DISCONNECTED")),this.events.emit((0,g.E0)("session_approve",a),{error:o.error}))},this.onSessionUpdateRequest=async(s,o)=>{const{params:a,id:d}=o;try{const m=`${s}_session_update`,S=g.O6.get(m);if(S&&this.isRequestOutOfSync(S,d)){this.client.logger.info(`Discarding out of sync request - ${d}`);return}this.isValidUpdate(Ar({topic:s},a)),await this.client.session.update(s,{namespaces:a.namespaces}),await this.sendResult({id:d,topic:s,result:!0}),this.client.events.emit("session_update",{id:d,topic:s,params:a}),g.O6.set(m,d)}catch(m){await this.sendError(d,s,m),this.client.logger.error(m)}},this.isRequestOutOfSync=(s,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(s.toString().slice(0,-3)),this.onSessionUpdateResponse=(s,o)=>{const{id:a}=o;hr(o)?this.events.emit((0,g.E0)("session_update",a),{}):Lr(o)&&this.events.emit((0,g.E0)("session_update",a),{error:o.error})},this.onSessionExtendRequest=async(s,o)=>{const{id:a}=o;try{this.isValidExtend({topic:s}),await this.setExpiry(s,(0,g.gn)(An)),await this.sendResult({id:a,topic:s,result:!0}),this.client.events.emit("session_extend",{id:a,topic:s})}catch(d){await this.sendError(a,s,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(s,o)=>{const{id:a}=o;hr(o)?this.events.emit((0,g.E0)("session_extend",a),{}):Lr(o)&&this.events.emit((0,g.E0)("session_extend",a),{error:o.error})},this.onSessionPingRequest=async(s,o)=>{const{id:a}=o;try{this.isValidPing({topic:s}),await this.sendResult({id:a,topic:s,result:!0}),this.client.events.emit("session_ping",{id:a,topic:s})}catch(d){await this.sendError(a,s,d),this.client.logger.error(d)}},this.onSessionPingResponse=(s,o)=>{const{id:a}=o;setTimeout(()=>{hr(o)?this.events.emit((0,g.E0)("session_ping",a),{}):Lr(o)&&this.events.emit((0,g.E0)("session_ping",a),{error:o.error})},500)},this.onSessionDeleteRequest=async(s,o)=>{const{id:a}=o;try{this.isValidDisconnect({topic:s,reason:o.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(pr.publish,async()=>{d(await this.deleteSession(s))})}),this.sendResult({id:a,topic:s,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:s})}catch(d){this.client.logger.error(d)}},this.onSessionRequest=async(s,o)=>{const{id:a,params:d}=o;try{this.isValidRequest(Ar({topic:s},d));const m=(0,g.rj)(JSON.stringify(pt("wc_sessionRequest",d,a))),S=this.client.session.get(s),M=await this.getVerifyContext(m,S.peer.metadata),X={id:a,topic:s,params:d,verifyContext:M};await this.setPendingSessionRequest(X),this.addSessionRequestToSessionRequestQueue(X),this.processSessionRequestQueue()}catch(m){await this.sendError(a,s,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(s,o)=>{const{id:a}=o;hr(o)?this.events.emit((0,g.E0)("session_request",a),{result:o.result}):Lr(o)&&this.events.emit((0,g.E0)("session_request",a),{error:o.error})},this.onSessionEventRequest=async(s,o)=>{const{id:a,params:d}=o;try{const m=`${s}_session_event_${d.event.name}`,S=g.O6.get(m);if(S&&this.isRequestOutOfSync(S,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(Ar({topic:s},d)),this.client.events.emit("session_event",{id:a,topic:s,params:d}),g.O6.set(m,a)}catch(m){await this.sendError(a,s,m),this.client.logger.error(m)}},this.addSessionRequestToSessionRequestQueue=s=>{this.sessionRequestQueue.queue.push(s)},this.cleanupAfterResponse=s=>{this.deletePendingSessionRequest(s.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Pi.idle,this.processSessionRequestQueue()},(0,_.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Pi.active){this.client.logger.info("session request queue is already active.");return}const s=this.sessionRequestQueue.queue[0];if(!s){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Pi.active,this.client.events.emit("session_request",s)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=s=>{if(s.active)return;const o=this.client.proposal.getAll().find(a=>a.pairingTopic===s.topic);o&&this.onSessionProposeRequest(s.topic,pt("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer},o.id))},this.isValidConnect=async s=>{if(!(0,g.EJ)(s)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(s)}`);throw new Error(M)}const{pairingTopic:o,requiredNamespaces:a,optionalNamespaces:d,sessionProperties:m,relays:S}=s;if((0,g.o8)(o)||await this.isValidPairingTopic(o),!(0,g.PM)(S,!0)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`connect() relays: ${S}`);throw new Error(M)}!(0,g.o8)(a)&&(0,g.L5)(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!(0,g.o8)(d)&&(0,g.L5)(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),(0,g.o8)(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(s,o)=>{const a=(0,g.n)(s,"connect()",o);if(a)throw new Error(a.message)},this.isValidApprove=async s=>{if(!(0,g.EJ)(s))throw new Error((0,g.Z7)("MISSING_OR_INVALID",`approve() params: ${s}`).message);const{id:o,namespaces:a,relayProtocol:d,sessionProperties:m}=s;await this.isValidProposalId(o);const S=this.client.proposal.get(o),M=(0,g.in)(a,"approve()");if(M)throw new Error(M.message);const X=(0,g.rF)(S.requiredNamespaces,a,"approve()");if(X)throw new Error(X.message);if(!(0,g.M_)(d,!0)){const{message:pe}=(0,g.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(pe)}(0,g.o8)(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async s=>{if(!(0,g.EJ)(s)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`reject() params: ${s}`);throw new Error(d)}const{id:o,reason:a}=s;if(await this.isValidProposalId(o),!(0,g.$t)(a)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(d)}},this.isValidSessionSettleRequest=s=>{if(!(0,g.EJ)(s)){const{message:X}=(0,g.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${s}`);throw new Error(X)}const{relay:o,controller:a,namespaces:d,expiry:m}=s;if(!(0,g.Z2)(o)){const{message:X}=(0,g.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(X)}const S=(0,g.Dd)(a,"onSessionSettleRequest()");if(S)throw new Error(S.message);const M=(0,g.in)(d,"onSessionSettleRequest()");if(M)throw new Error(M.message);if((0,g.Bw)(m)){const{message:X}=(0,g.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(X)}},this.isValidUpdate=async s=>{if(!(0,g.EJ)(s)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`update() params: ${s}`);throw new Error(M)}const{topic:o,namespaces:a}=s;await this.isValidSessionTopic(o);const d=this.client.session.get(o),m=(0,g.in)(a,"update()");if(m)throw new Error(m.message);const S=(0,g.rF)(d.requiredNamespaces,a,"update()");if(S)throw new Error(S.message)},this.isValidExtend=async s=>{if(!(0,g.EJ)(s)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`extend() params: ${s}`);throw new Error(a)}const{topic:o}=s;await this.isValidSessionTopic(o)},this.isValidRequest=async s=>{if(!(0,g.EJ)(s)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`request() params: ${s}`);throw new Error(M)}const{topic:o,request:a,chainId:d,expiry:m}=s;await this.isValidSessionTopic(o);const{namespaces:S}=this.client.session.get(o);if(!(0,g.p8)(S,d)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(M)}if(!(0,g.hH)(a)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(M)}if(!(0,g.al)(S,d,a.method)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(M)}if(m&&!(0,g.ON)(m,oa)){const{message:M}=(0,g.Z7)("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${oa.min} and ${oa.max}`);throw new Error(M)}},this.isValidRespond=async s=>{if(!(0,g.EJ)(s)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`respond() params: ${s}`);throw new Error(d)}const{topic:o,response:a}=s;if(await this.isValidSessionTopic(o),!(0,g.JT)(a)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(d)}},this.isValidPing=async s=>{if(!(0,g.EJ)(s)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(a)}const{topic:o}=s;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async s=>{if(!(0,g.EJ)(s)){const{message:S}=(0,g.Z7)("MISSING_OR_INVALID",`emit() params: ${s}`);throw new Error(S)}const{topic:o,event:a,chainId:d}=s;await this.isValidSessionTopic(o);const{namespaces:m}=this.client.session.get(o);if(!(0,g.p8)(m,d)){const{message:S}=(0,g.Z7)("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(S)}if(!(0,g.nf)(a)){const{message:S}=(0,g.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(S)}if(!(0,g.sI)(m,d,a.name)){const{message:S}=(0,g.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(S)}},this.isValidDisconnect=async s=>{if(!(0,g.EJ)(s)){const{message:a}=(0,g.Z7)("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(a)}const{topic:o}=s;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(s,o)=>{const a={verified:{verifyUrl:o.verifyUrl||Sn,validation:"UNKNOWN",origin:o.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:s,verifyUrl:o.verifyUrl});d&&(a.verified.origin=d.origin,a.verified.isScam=d.isScam,a.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.info(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(s,o)=>{Object.values(s).forEach(a=>{if(!(0,g.M_)(a,!1)){const{message:d}=(0,g.Z7)("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(d)}})}}async isInitialized(){if(!this.initialized){const{message:r}=(0,g.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(pr.message,async r=>{const{topic:s,message:o}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const a=await this.client.core.crypto.decode(s,o);try{Ls(a)?(this.client.core.history.set(s,a),this.onRelayEventRequest({topic:s,payload:a})):ds(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:s,payload:a}),this.client.core.history.delete(s,a.id)):this.onRelayEventUnknownPayload({topic:s,payload:a})}catch(d){this.client.logger.error(d)}})}registerExpirerEvents(){this.client.core.expirer.on(kr.expired,async r=>{const{topic:s,id:o}=(0,g.iP)(r.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,(0,g.Z7)("EXPIRED"),!0);s?this.client.session.keys.includes(s)&&(await this.deleteSession(s,!0),this.client.events.emit("session_expire",{topic:s})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(zs.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!(0,g.M_)(r,!1)){const{message:s}=(0,g.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:s}=(0,g.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if((0,g.Bw)(this.client.core.pairing.pairings.get(r).expiry)){const{message:s}=(0,g.Z7)("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}async isValidSessionTopic(r){if(!(0,g.M_)(r,!1)){const{message:s}=(0,g.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(s)}if(!this.client.session.keys.includes(r)){const{message:s}=(0,g.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(s)}if((0,g.Bw)(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:s}=(0,g.Z7)("EXPIRED",`session topic: ${r}`);throw new Error(s)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if((0,g.M_)(r,!1)){const{message:s}=(0,g.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(s)}else{const{message:s}=(0,g.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(s)}}async isValidProposalId(r){if(!(0,g.Q0)(r)){const{message:s}=(0,g.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(s)}if(!this.client.proposal.keys.includes(r)){const{message:s}=(0,g.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(s)}if((0,g.Bw)(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:s}=(0,g.Z7)("EXPIRED",`proposal id: ${r}`);throw new Error(s)}}}class sp extends On{constructor(r,s){super(r,s,Gd,sa),this.core=r,this.logger=s}}class np extends On{constructor(r,s){super(r,s,Wd,sa),this.core=r,this.logger=s}}class op extends On{constructor(r,s){super(r,s,Zd,sa,o=>o.id),this.core=r,this.logger=s}}class aa extends oe{constructor(r){super(r),this.protocol=yu,this.version=mu,this.name=na.name,this.events=new N.EventEmitter,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(a){throw this.logger.error(a.message),a}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(a){throw this.logger.error(a.message),a}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(a){throw this.logger.error(a.message),a}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(a){throw this.logger.error(a.message),a}},this.update=async o=>{try{return await this.engine.update(o)}catch(a){throw this.logger.error(a.message),a}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(a){throw this.logger.error(a.message),a}},this.request=async o=>{try{return await this.engine.request(o)}catch(a){throw this.logger.error(a.message),a}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(a){throw this.logger.error(a.message),a}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(a){throw this.logger.error(a.message),a}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(a){throw this.logger.error(a.message),a}},this.find=o=>{try{return this.engine.find(o)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(r==null?void 0:r.name)||na.name,this.metadata=(r==null?void 0:r.metadata)||(0,g.D)();const s=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,te.pino)((0,te.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||na.logger}));this.core=(r==null?void 0:r.core)||new Kd(r),this.logger=(0,te.generateChildLogger)(s,this.name),this.session=new np(this.core,this.logger),this.proposal=new sp(this.core,this.logger),this.pendingRequest=new op(this.core,this.logger),this.engine=new ip(this)}static async init(r){const s=new aa(r);return await s.initialize(),s}get context(){return(0,te.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}}const tb=null;var ap=U(52830),Iu=U.n(ap);const Pu={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Su=10;class Ou{constructor(r,s=!1){if(this.url=r,this.disableProviderPing=s,this.events=new N.EventEmitter,this.isAvailable=!1,this.registering=!1,!Br(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);this.url=r,this.disableProviderPing=s}get connected(){return this.isAvailable}get connecting(){return this.registering}on(r,s){this.events.on(r,s)}once(r,s){this.events.once(r,s)}off(r,s){this.events.off(r,s)}removeListener(r,s){this.events.removeListener(r,s)}async open(r=this.url){await this.register(r)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(r,s){this.isAvailable||await this.register();try{const o=Se(r),d=await(await Iu()(this.url,Object.assign(Object.assign({},Pu),{body:o}))).json();this.onPayload({data:d})}catch(o){this.onError(r.id,o)}}async register(r=this.url){if(!Br(r))throw new Error(`Provided URL is not compatible with HTTP connection: ${r}`);if(this.registering){const s=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=s||this.events.listenerCount("open")>=s)&&this.events.setMaxListeners(s+1),new Promise((o,a)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),a(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));o()})})}this.url=r,this.registering=!0;try{if(!this.disableProviderPing){const s=Se({id:1,jsonrpc:"2.0",method:"test",params:[]});await Iu()(r,Object.assign(Object.assign({},Pu),{body:s}))}this.onOpen()}catch(s){const o=this.parseError(s);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(r){if(typeof r.data>"u")return;const s=typeof r.data=="string"?ye(r.data):r.data;this.events.emit("payload",s)}onError(r,s){const o=this.parseError(s),a=o.message||o.toString(),d=St(r,a);this.events.emit("payload",d)}parseError(r,s=this.url){return Pt(r,s,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Su&&this.events.setMaxListeners(Su)}}var cp=Ou,ts=cp;const Au="error",up="wss://relay.walletconnect.com",hp="wc",lp="universal_provider",Cu=`${hp}@2:${lp}:`,fp="https://rpc.walletconnect.com/v1/",Si={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Hs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof U.g<"u"?U.g:typeof self<"u"?self:{},ca={exports:{}};(function(f,r){(function(){var s,o="4.17.21",a=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",S="Invalid `variable` option passed into `_.template`",M="__lodash_hash_undefined__",X=500,pe="__lodash_placeholder__",be=1,we=2,Ke=4,Ae=1,vt=2,bt=1,Et=2,mr=4,tt=8,Ge=16,xt=32,wr=64,Ut=128,_r=256,qi=512,Wp=30,Jp="...",Zp=800,Qp=16,Hu=1,Yp=2,Xp=3,is=1/0,$i=9007199254740991,eg=17976931348623157e292,Dn=0/0,gi=4294967295,tg=gi-1,rg=gi>>>1,ig=[["ary",Ut],["bind",bt],["bindKey",Et],["curry",tt],["curryRight",Ge],["flip",qi],["partial",xt],["partialRight",wr],["rearg",_r]],ms="[object Arguments]",Nn="[object Array]",sg="[object AsyncFunction]",ks="[object Boolean]",Vs="[object Date]",ng="[object DOMException]",Ln="[object Error]",Fn="[object Function]",Bu="[object GeneratorFunction]",ii="[object Map]",Ks="[object Number]",og="[object Null]",Oi="[object Object]",ku="[object Promise]",ag="[object Proxy]",Gs="[object RegExp]",si="[object Set]",Ws="[object String]",Mn="[object Symbol]",cg="[object Undefined]",Js="[object WeakMap]",ug="[object WeakSet]",Zs="[object ArrayBuffer]",ws="[object DataView]",ya="[object Float32Array]",ma="[object Float64Array]",wa="[object Int8Array]",_a="[object Int16Array]",ba="[object Int32Array]",Ea="[object Uint8Array]",xa="[object Uint8ClampedArray]",Ia="[object Uint16Array]",Pa="[object Uint32Array]",hg=/\b__p \+= '';/g,lg=/\b(__p \+=) '' \+/g,fg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vu=/&(?:amp|lt|gt|quot|#39);/g,Ku=/[&<>"']/g,dg=RegExp(Vu.source),pg=RegExp(Ku.source),gg=/<%-([\s\S]+?)%>/g,vg=/<%([\s\S]+?)%>/g,Gu=/<%=([\s\S]+?)%>/g,yg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mg=/^\w*$/,wg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sa=/[\\^$.*+?()[\]{}|]/g,_g=RegExp(Sa.source),Oa=/^\s+/,bg=/\s/,Eg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xg=/\{\n\/\* \[wrapped with (.+)\] \*/,Ig=/,? & /,Pg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Sg=/[()=,{}\[\]\/\s]/,Og=/\\(\\)?/g,Ag=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Cg=/^[-+]0x[0-9a-f]+$/i,Rg=/^0b[01]+$/i,Tg=/^\[object .+?Constructor\]$/,Dg=/^0o[0-7]+$/i,Ng=/^(?:0|[1-9]\d*)$/,Lg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jn=/($^)/,Fg=/['\n\r\u2028\u2029\\]/g,zn="\\ud800-\\udfff",Mg="\\u0300-\\u036f",jg="\\ufe20-\\ufe2f",zg="\\u20d0-\\u20ff",Ju=Mg+jg+zg,Zu="\\u2700-\\u27bf",Qu="a-z\\xdf-\\xf6\\xf8-\\xff",Ug="\\xac\\xb1\\xd7\\xf7",qg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$g="\\u2000-\\u206f",Hg=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yu="A-Z\\xc0-\\xd6\\xd8-\\xde",Xu="\\ufe0e\\ufe0f",eh=Ug+qg+$g+Hg,Aa="['\u2019]",Bg="["+zn+"]",th="["+eh+"]",Un="["+Ju+"]",rh="\\d+",kg="["+Zu+"]",ih="["+Qu+"]",sh="[^"+zn+eh+rh+Zu+Qu+Yu+"]",Ca="\\ud83c[\\udffb-\\udfff]",Vg="(?:"+Un+"|"+Ca+")",nh="[^"+zn+"]",Ra="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",_s="["+Yu+"]",oh="\\u200d",ah="(?:"+ih+"|"+sh+")",Kg="(?:"+_s+"|"+sh+")",ch="(?:"+Aa+"(?:d|ll|m|re|s|t|ve))?",uh="(?:"+Aa+"(?:D|LL|M|RE|S|T|VE))?",hh=Vg+"?",lh="["+Xu+"]?",Gg="(?:"+oh+"(?:"+[nh,Ra,Ta].join("|")+")"+lh+hh+")*",Wg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fh=lh+hh+Gg,Zg="(?:"+[kg,Ra,Ta].join("|")+")"+fh,Qg="(?:"+[nh+Un+"?",Un,Ra,Ta,Bg].join("|")+")",Yg=RegExp(Aa,"g"),Xg=RegExp(Un,"g"),Da=RegExp(Ca+"(?="+Ca+")|"+Qg+fh,"g"),e0=RegExp([_s+"?"+ih+"+"+ch+"(?="+[th,_s,"$"].join("|")+")",Kg+"+"+uh+"(?="+[th,_s+ah,"$"].join("|")+")",_s+"?"+ah+"+"+ch,_s+"+"+uh,Jg,Wg,rh,Zg].join("|"),"g"),t0=RegExp("["+oh+zn+Ju+Xu+"]"),r0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,i0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],s0=-1,yt={};yt[ya]=yt[ma]=yt[wa]=yt[_a]=yt[ba]=yt[Ea]=yt[xa]=yt[Ia]=yt[Pa]=!0,yt[ms]=yt[Nn]=yt[Zs]=yt[ks]=yt[ws]=yt[Vs]=yt[Ln]=yt[Fn]=yt[ii]=yt[Ks]=yt[Oi]=yt[Gs]=yt[si]=yt[Ws]=yt[Js]=!1;var ft={};ft[ms]=ft[Nn]=ft[Zs]=ft[ws]=ft[ks]=ft[Vs]=ft[ya]=ft[ma]=ft[wa]=ft[_a]=ft[ba]=ft[ii]=ft[Ks]=ft[Oi]=ft[Gs]=ft[si]=ft[Ws]=ft[Mn]=ft[Ea]=ft[xa]=ft[Ia]=ft[Pa]=!0,ft[Ln]=ft[Fn]=ft[Js]=!1;var n0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},o0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},c0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},u0=parseFloat,h0=parseInt,dh=typeof Hs=="object"&&Hs&&Hs.Object===Object&&Hs,l0=typeof self=="object"&&self&&self.Object===Object&&self,lr=dh||l0||Function("return this")(),Na=r&&!r.nodeType&&r,ss=Na&&!0&&f&&!f.nodeType&&f,ph=ss&&ss.exports===Na,La=ph&&dh.process,Vr=function(){try{var P=ss&&ss.require&&ss.require("util").types;return P||La&&La.binding&&La.binding("util")}catch{}}(),gh=Vr&&Vr.isArrayBuffer,vh=Vr&&Vr.isDate,yh=Vr&&Vr.isMap,mh=Vr&&Vr.isRegExp,wh=Vr&&Vr.isSet,_h=Vr&&Vr.isTypedArray;function Fr(P,z,D){switch(D.length){case 0:return P.call(z);case 1:return P.call(z,D[0]);case 2:return P.call(z,D[0],D[1]);case 3:return P.call(z,D[0],D[1],D[2])}return P.apply(z,D)}function f0(P,z,D,fe){for(var Re=-1,We=P==null?0:P.length;++Re<We;){var rr=P[Re];z(fe,rr,D(rr),P)}return fe}function Kr(P,z){for(var D=-1,fe=P==null?0:P.length;++D<fe&&z(P[D],D,P)!==!1;);return P}function d0(P,z){for(var D=P==null?0:P.length;D--&&z(P[D],D,P)!==!1;);return P}function bh(P,z){for(var D=-1,fe=P==null?0:P.length;++D<fe;)if(!z(P[D],D,P))return!1;return!0}function Hi(P,z){for(var D=-1,fe=P==null?0:P.length,Re=0,We=[];++D<fe;){var rr=P[D];z(rr,D,P)&&(We[Re++]=rr)}return We}function qn(P,z){var D=P==null?0:P.length;return!!D&&bs(P,z,0)>-1}function Fa(P,z,D){for(var fe=-1,Re=P==null?0:P.length;++fe<Re;)if(D(z,P[fe]))return!0;return!1}function It(P,z){for(var D=-1,fe=P==null?0:P.length,Re=Array(fe);++D<fe;)Re[D]=z(P[D],D,P);return Re}function Bi(P,z){for(var D=-1,fe=z.length,Re=P.length;++D<fe;)P[Re+D]=z[D];return P}function Ma(P,z,D,fe){var Re=-1,We=P==null?0:P.length;for(fe&&We&&(D=P[++Re]);++Re<We;)D=z(D,P[Re],Re,P);return D}function p0(P,z,D,fe){var Re=P==null?0:P.length;for(fe&&Re&&(D=P[--Re]);Re--;)D=z(D,P[Re],Re,P);return D}function ja(P,z){for(var D=-1,fe=P==null?0:P.length;++D<fe;)if(z(P[D],D,P))return!0;return!1}var g0=za("length");function v0(P){return P.split("")}function y0(P){return P.match(Pg)||[]}function Eh(P,z,D){var fe;return D(P,function(Re,We,rr){if(z(Re,We,rr))return fe=We,!1}),fe}function $n(P,z,D,fe){for(var Re=P.length,We=D+(fe?1:-1);fe?We--:++We<Re;)if(z(P[We],We,P))return We;return-1}function bs(P,z,D){return z===z?C0(P,z,D):$n(P,xh,D)}function m0(P,z,D,fe){for(var Re=D-1,We=P.length;++Re<We;)if(fe(P[Re],z))return Re;return-1}function xh(P){return P!==P}function Ih(P,z){var D=P==null?0:P.length;return D?qa(P,z)/D:Dn}function za(P){return function(z){return z==null?s:z[P]}}function Ua(P){return function(z){return P==null?s:P[z]}}function Ph(P,z,D,fe,Re){return Re(P,function(We,rr,nt){D=fe?(fe=!1,We):z(D,We,rr,nt)}),D}function w0(P,z){var D=P.length;for(P.sort(z);D--;)P[D]=P[D].value;return P}function qa(P,z){for(var D,fe=-1,Re=P.length;++fe<Re;){var We=z(P[fe]);We!==s&&(D=D===s?We:D+We)}return D}function $a(P,z){for(var D=-1,fe=Array(P);++D<P;)fe[D]=z(D);return fe}function _0(P,z){return It(z,function(D){return[D,P[D]]})}function Sh(P){return P&&P.slice(0,Rh(P)+1).replace(Oa,"")}function Mr(P){return function(z){return P(z)}}function Ha(P,z){return It(z,function(D){return P[D]})}function Qs(P,z){return P.has(z)}function Oh(P,z){for(var D=-1,fe=P.length;++D<fe&&bs(z,P[D],0)>-1;);return D}function Ah(P,z){for(var D=P.length;D--&&bs(z,P[D],0)>-1;);return D}function b0(P,z){for(var D=P.length,fe=0;D--;)P[D]===z&&++fe;return fe}var E0=Ua(n0),x0=Ua(o0);function I0(P){return"\\"+c0[P]}function P0(P,z){return P==null?s:P[z]}function Es(P){return t0.test(P)}function S0(P){return r0.test(P)}function O0(P){for(var z,D=[];!(z=P.next()).done;)D.push(z.value);return D}function Ba(P){var z=-1,D=Array(P.size);return P.forEach(function(fe,Re){D[++z]=[Re,fe]}),D}function Ch(P,z){return function(D){return P(z(D))}}function ki(P,z){for(var D=-1,fe=P.length,Re=0,We=[];++D<fe;){var rr=P[D];(rr===z||rr===pe)&&(P[D]=pe,We[Re++]=D)}return We}function Hn(P){var z=-1,D=Array(P.size);return P.forEach(function(fe){D[++z]=fe}),D}function A0(P){var z=-1,D=Array(P.size);return P.forEach(function(fe){D[++z]=[fe,fe]}),D}function C0(P,z,D){for(var fe=D-1,Re=P.length;++fe<Re;)if(P[fe]===z)return fe;return-1}function R0(P,z,D){for(var fe=D+1;fe--;)if(P[fe]===z)return fe;return fe}function xs(P){return Es(P)?D0(P):g0(P)}function ni(P){return Es(P)?N0(P):v0(P)}function Rh(P){for(var z=P.length;z--&&bg.test(P.charAt(z)););return z}var T0=Ua(a0);function D0(P){for(var z=Da.lastIndex=0;Da.test(P);)++z;return z}function N0(P){return P.match(Da)||[]}function L0(P){return P.match(e0)||[]}var F0=function P(z){z=z==null?lr:Is.defaults(lr.Object(),z,Is.pick(lr,i0));var D=z.Array,fe=z.Date,Re=z.Error,We=z.Function,rr=z.Math,nt=z.Object,ka=z.RegExp,M0=z.String,Gr=z.TypeError,Bn=D.prototype,j0=We.prototype,Ps=nt.prototype,kn=z["__core-js_shared__"],Vn=j0.toString,Qe=Ps.hasOwnProperty,z0=0,Th=function(){var e=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Kn=Ps.toString,U0=Vn.call(nt),q0=lr._,$0=ka("^"+Vn.call(Qe).replace(Sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gn=ph?z.Buffer:s,Vi=z.Symbol,Wn=z.Uint8Array,Dh=Gn?Gn.allocUnsafe:s,Jn=Ch(nt.getPrototypeOf,nt),Nh=nt.create,Lh=Ps.propertyIsEnumerable,Zn=Bn.splice,Fh=Vi?Vi.isConcatSpreadable:s,Ys=Vi?Vi.iterator:s,ns=Vi?Vi.toStringTag:s,Qn=function(){try{var e=hs(nt,"defineProperty");return e({},"",{}),e}catch{}}(),H0=z.clearTimeout!==lr.clearTimeout&&z.clearTimeout,B0=fe&&fe.now!==lr.Date.now&&fe.now,k0=z.setTimeout!==lr.setTimeout&&z.setTimeout,Yn=rr.ceil,Xn=rr.floor,Va=nt.getOwnPropertySymbols,V0=Gn?Gn.isBuffer:s,Mh=z.isFinite,K0=Bn.join,G0=Ch(nt.keys,nt),ir=rr.max,gr=rr.min,W0=fe.now,J0=z.parseInt,jh=rr.random,Z0=Bn.reverse,Ka=hs(z,"DataView"),Xs=hs(z,"Map"),Ga=hs(z,"Promise"),Ss=hs(z,"Set"),en=hs(z,"WeakMap"),tn=hs(nt,"create"),eo=en&&new en,Os={},Q0=ls(Ka),Y0=ls(Xs),X0=ls(Ga),ev=ls(Ss),tv=ls(en),to=Vi?Vi.prototype:s,rn=to?to.valueOf:s,zh=to?to.toString:s;function p(e){if(Nt(e)&&!Le(e)&&!(e instanceof He)){if(e instanceof Wr)return e;if(Qe.call(e,"__wrapped__"))return Ul(e)}return new Wr(e)}var As=function(){function e(){}return function(t){if(!Ot(t))return{};if(Nh)return Nh(t);e.prototype=t;var n=new e;return e.prototype=s,n}}();function ro(){}function Wr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=s}p.templateSettings={escape:gg,evaluate:vg,interpolate:Gu,variable:"",imports:{_:p}},p.prototype=ro.prototype,p.prototype.constructor=p,Wr.prototype=As(ro.prototype),Wr.prototype.constructor=Wr;function He(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gi,this.__views__=[]}function rv(){var e=new He(this.__wrapped__);return e.__actions__=Cr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Cr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Cr(this.__views__),e}function iv(){if(this.__filtered__){var e=new He(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function sv(){var e=this.__wrapped__.value(),t=this.__dir__,n=Le(e),u=t<0,l=n?e.length:0,v=vy(0,l,this.__views__),w=v.start,b=v.end,O=b-w,q=u?b:w-1,$=this.__iteratees__,K=$.length,ue=0,ve=gr(O,this.__takeCount__);if(!n||!u&&l==O&&ve==O)return cl(e,this.__actions__);var xe=[];e:for(;O--&&ue<ve;){q+=t;for(var ze=-1,Ie=e[q];++ze<K;){var $e=$[ze],Be=$e.iteratee,Ur=$e.type,xr=Be(Ie);if(Ur==Yp)Ie=xr;else if(!xr){if(Ur==Hu)continue e;break e}}xe[ue++]=Ie}return xe}He.prototype=As(ro.prototype),He.prototype.constructor=He;function os(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var u=e[t];this.set(u[0],u[1])}}function nv(){this.__data__=tn?tn(null):{},this.size=0}function ov(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function av(e){var t=this.__data__;if(tn){var n=t[e];return n===M?s:n}return Qe.call(t,e)?t[e]:s}function cv(e){var t=this.__data__;return tn?t[e]!==s:Qe.call(t,e)}function uv(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=tn&&t===s?M:t,this}os.prototype.clear=nv,os.prototype.delete=ov,os.prototype.get=av,os.prototype.has=cv,os.prototype.set=uv;function Ai(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var u=e[t];this.set(u[0],u[1])}}function hv(){this.__data__=[],this.size=0}function lv(e){var t=this.__data__,n=io(t,e);if(n<0)return!1;var u=t.length-1;return n==u?t.pop():Zn.call(t,n,1),--this.size,!0}function fv(e){var t=this.__data__,n=io(t,e);return n<0?s:t[n][1]}function dv(e){return io(this.__data__,e)>-1}function pv(e,t){var n=this.__data__,u=io(n,e);return u<0?(++this.size,n.push([e,t])):n[u][1]=t,this}Ai.prototype.clear=hv,Ai.prototype.delete=lv,Ai.prototype.get=fv,Ai.prototype.has=dv,Ai.prototype.set=pv;function Ci(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var u=e[t];this.set(u[0],u[1])}}function gv(){this.size=0,this.__data__={hash:new os,map:new(Xs||Ai),string:new os}}function vv(e){var t=vo(this,e).delete(e);return this.size-=t?1:0,t}function yv(e){return vo(this,e).get(e)}function mv(e){return vo(this,e).has(e)}function wv(e,t){var n=vo(this,e),u=n.size;return n.set(e,t),this.size+=n.size==u?0:1,this}Ci.prototype.clear=gv,Ci.prototype.delete=vv,Ci.prototype.get=yv,Ci.prototype.has=mv,Ci.prototype.set=wv;function as(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ci;++t<n;)this.add(e[t])}function _v(e){return this.__data__.set(e,M),this}function bv(e){return this.__data__.has(e)}as.prototype.add=as.prototype.push=_v,as.prototype.has=bv;function oi(e){var t=this.__data__=new Ai(e);this.size=t.size}function Ev(){this.__data__=new Ai,this.size=0}function xv(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Iv(e){return this.__data__.get(e)}function Pv(e){return this.__data__.has(e)}function Sv(e,t){var n=this.__data__;if(n instanceof Ai){var u=n.__data__;if(!Xs||u.length<a-1)return u.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ci(u)}return n.set(e,t),this.size=n.size,this}oi.prototype.clear=Ev,oi.prototype.delete=xv,oi.prototype.get=Iv,oi.prototype.has=Pv,oi.prototype.set=Sv;function Uh(e,t){var n=Le(e),u=!n&&fs(e),l=!n&&!u&&Zi(e),v=!n&&!u&&!l&&Ds(e),w=n||u||l||v,b=w?$a(e.length,M0):[],O=b.length;for(var q in e)(t||Qe.call(e,q))&&!(w&&(q=="length"||l&&(q=="offset"||q=="parent")||v&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||Ni(q,O)))&&b.push(q);return b}function qh(e){var t=e.length;return t?e[sc(0,t-1)]:s}function Ov(e,t){return yo(Cr(e),cs(t,0,e.length))}function Av(e){return yo(Cr(e))}function Wa(e,t,n){(n!==s&&!ai(e[t],n)||n===s&&!(t in e))&&Ri(e,t,n)}function sn(e,t,n){var u=e[t];(!(Qe.call(e,t)&&ai(u,n))||n===s&&!(t in e))&&Ri(e,t,n)}function io(e,t){for(var n=e.length;n--;)if(ai(e[n][0],t))return n;return-1}function Cv(e,t,n,u){return Ki(e,function(l,v,w){t(u,l,n(l),w)}),u}function $h(e,t){return e&&yi(t,cr(t),e)}function Rv(e,t){return e&&yi(t,Tr(t),e)}function Ri(e,t,n){t=="__proto__"&&Qn?Qn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ja(e,t){for(var n=-1,u=t.length,l=D(u),v=e==null;++n<u;)l[n]=v?s:Cc(e,t[n]);return l}function cs(e,t,n){return e===e&&(n!==s&&(e=e<=n?e:n),t!==s&&(e=e>=t?e:t)),e}function Jr(e,t,n,u,l,v){var w,b=t&be,O=t&we,q=t&Ke;if(n&&(w=l?n(e,u,l,v):n(e)),w!==s)return w;if(!Ot(e))return e;var $=Le(e);if($){if(w=my(e),!b)return Cr(e,w)}else{var K=vr(e),ue=K==Fn||K==Bu;if(Zi(e))return ll(e,b);if(K==Oi||K==ms||ue&&!l){if(w=O||ue?{}:Rl(e),!b)return O?ay(e,Rv(w,e)):oy(e,$h(w,e))}else{if(!ft[K])return l?e:{};w=wy(e,K,b)}}v||(v=new oi);var ve=v.get(e);if(ve)return ve;v.set(e,w),of(e)?e.forEach(function(Ie){w.add(Jr(Ie,t,n,Ie,e,v))}):sf(e)&&e.forEach(function(Ie,$e){w.set($e,Jr(Ie,t,n,$e,e,v))});var xe=q?O?gc:pc:O?Tr:cr,ze=$?s:xe(e);return Kr(ze||e,function(Ie,$e){ze&&($e=Ie,Ie=e[$e]),sn(w,$e,Jr(Ie,t,n,$e,e,v))}),w}function Tv(e){var t=cr(e);return function(n){return Hh(n,e,t)}}function Hh(e,t,n){var u=n.length;if(e==null)return!u;for(e=nt(e);u--;){var l=n[u],v=t[l],w=e[l];if(w===s&&!(l in e)||!v(w))return!1}return!0}function Bh(e,t,n){if(typeof e!="function")throw new Gr(m);return ln(function(){e.apply(s,n)},t)}function nn(e,t,n,u){var l=-1,v=qn,w=!0,b=e.length,O=[],q=t.length;if(!b)return O;n&&(t=It(t,Mr(n))),u?(v=Fa,w=!1):t.length>=a&&(v=Qs,w=!1,t=new as(t));e:for(;++l<b;){var $=e[l],K=n==null?$:n($);if($=u||$!==0?$:0,w&&K===K){for(var ue=q;ue--;)if(t[ue]===K)continue e;O.push($)}else v(t,K,u)||O.push($)}return O}var Ki=vl(vi),kh=vl(Qa,!0);function Dv(e,t){var n=!0;return Ki(e,function(u,l,v){return n=!!t(u,l,v),n}),n}function so(e,t,n){for(var u=-1,l=e.length;++u<l;){var v=e[u],w=t(v);if(w!=null&&(b===s?w===w&&!zr(w):n(w,b)))var b=w,O=v}return O}function Nv(e,t,n,u){var l=e.length;for(n=Me(n),n<0&&(n=-n>l?0:l+n),u=u===s||u>l?l:Me(u),u<0&&(u+=l),u=n>u?0:cf(u);n<u;)e[n++]=t;return e}function Vh(e,t){var n=[];return Ki(e,function(u,l,v){t(u,l,v)&&n.push(u)}),n}function fr(e,t,n,u,l){var v=-1,w=e.length;for(n||(n=by),l||(l=[]);++v<w;){var b=e[v];t>0&&n(b)?t>1?fr(b,t-1,n,u,l):Bi(l,b):u||(l[l.length]=b)}return l}var Za=yl(),Kh=yl(!0);function vi(e,t){return e&&Za(e,t,cr)}function Qa(e,t){return e&&Kh(e,t,cr)}function no(e,t){return Hi(t,function(n){return Li(e[n])})}function us(e,t){t=Wi(t,e);for(var n=0,u=t.length;e!=null&&n<u;)e=e[mi(t[n++])];return n&&n==u?e:s}function Gh(e,t,n){var u=t(e);return Le(e)?u:Bi(u,n(e))}function br(e){return e==null?e===s?cg:og:ns&&ns in nt(e)?gy(e):Ay(e)}function Ya(e,t){return e>t}function Lv(e,t){return e!=null&&Qe.call(e,t)}function Fv(e,t){return e!=null&&t in nt(e)}function Mv(e,t,n){return e>=gr(t,n)&&e<ir(t,n)}function Xa(e,t,n){for(var u=n?Fa:qn,l=e[0].length,v=e.length,w=v,b=D(v),O=1/0,q=[];w--;){var $=e[w];w&&t&&($=It($,Mr(t))),O=gr($.length,O),b[w]=!n&&(t||l>=120&&$.length>=120)?new as(w&&$):s}$=e[0];var K=-1,ue=b[0];e:for(;++K<l&&q.length<O;){var ve=$[K],xe=t?t(ve):ve;if(ve=n||ve!==0?ve:0,!(ue?Qs(ue,xe):u(q,xe,n))){for(w=v;--w;){var ze=b[w];if(!(ze?Qs(ze,xe):u(e[w],xe,n)))continue e}ue&&ue.push(xe),q.push(ve)}}return q}function jv(e,t,n,u){return vi(e,function(l,v,w){t(u,n(l),v,w)}),u}function on(e,t,n){t=Wi(t,e),e=Ll(e,t);var u=e==null?e:e[mi(Qr(t))];return u==null?s:Fr(u,e,n)}function Wh(e){return Nt(e)&&br(e)==ms}function zv(e){return Nt(e)&&br(e)==Zs}function Uv(e){return Nt(e)&&br(e)==Vs}function an(e,t,n,u,l){return e===t?!0:e==null||t==null||!Nt(e)&&!Nt(t)?e!==e&&t!==t:qv(e,t,n,u,an,l)}function qv(e,t,n,u,l,v){var w=Le(e),b=Le(t),O=w?Nn:vr(e),q=b?Nn:vr(t);O=O==ms?Oi:O,q=q==ms?Oi:q;var $=O==Oi,K=q==Oi,ue=O==q;if(ue&&Zi(e)){if(!Zi(t))return!1;w=!0,$=!1}if(ue&&!$)return v||(v=new oi),w||Ds(e)?Ol(e,t,n,u,l,v):dy(e,t,O,n,u,l,v);if(!(n&Ae)){var ve=$&&Qe.call(e,"__wrapped__"),xe=K&&Qe.call(t,"__wrapped__");if(ve||xe){var ze=ve?e.value():e,Ie=xe?t.value():t;return v||(v=new oi),l(ze,Ie,n,u,v)}}return ue?(v||(v=new oi),py(e,t,n,u,l,v)):!1}function $v(e){return Nt(e)&&vr(e)==ii}function ec(e,t,n,u){var l=n.length,v=l,w=!u;if(e==null)return!v;for(e=nt(e);l--;){var b=n[l];if(w&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++l<v;){b=n[l];var O=b[0],q=e[O],$=b[1];if(w&&b[2]){if(q===s&&!(O in e))return!1}else{var K=new oi;if(u)var ue=u(q,$,O,e,t,K);if(!(ue===s?an($,q,Ae|vt,u,K):ue))return!1}}return!0}function Jh(e){if(!Ot(e)||xy(e))return!1;var t=Li(e)?$0:Tg;return t.test(ls(e))}function Hv(e){return Nt(e)&&br(e)==Gs}function Bv(e){return Nt(e)&&vr(e)==si}function kv(e){return Nt(e)&&xo(e.length)&&!!yt[br(e)]}function Zh(e){return typeof e=="function"?e:e==null?Dr:typeof e=="object"?Le(e)?Xh(e[0],e[1]):Yh(e):wf(e)}function tc(e){if(!hn(e))return G0(e);var t=[];for(var n in nt(e))Qe.call(e,n)&&n!="constructor"&&t.push(n);return t}function Vv(e){if(!Ot(e))return Oy(e);var t=hn(e),n=[];for(var u in e)u=="constructor"&&(t||!Qe.call(e,u))||n.push(u);return n}function rc(e,t){return e<t}function Qh(e,t){var n=-1,u=Rr(e)?D(e.length):[];return Ki(e,function(l,v,w){u[++n]=t(l,v,w)}),u}function Yh(e){var t=yc(e);return t.length==1&&t[0][2]?Dl(t[0][0],t[0][1]):function(n){return n===e||ec(n,e,t)}}function Xh(e,t){return wc(e)&&Tl(t)?Dl(mi(e),t):function(n){var u=Cc(n,e);return u===s&&u===t?Rc(n,e):an(t,u,Ae|vt)}}function oo(e,t,n,u,l){e!==t&&Za(t,function(v,w){if(l||(l=new oi),Ot(v))Kv(e,t,w,n,oo,u,l);else{var b=u?u(bc(e,w),v,w+"",e,t,l):s;b===s&&(b=v),Wa(e,w,b)}},Tr)}function Kv(e,t,n,u,l,v,w){var b=bc(e,n),O=bc(t,n),q=w.get(O);if(q){Wa(e,n,q);return}var $=v?v(b,O,n+"",e,t,w):s,K=$===s;if(K){var ue=Le(O),ve=!ue&&Zi(O),xe=!ue&&!ve&&Ds(O);$=O,ue||ve||xe?Le(b)?$=b:qt(b)?$=Cr(b):ve?(K=!1,$=ll(O,!0)):xe?(K=!1,$=fl(O,!0)):$=[]:fn(O)||fs(O)?($=b,fs(b)?$=uf(b):(!Ot(b)||Li(b))&&($=Rl(O))):K=!1}K&&(w.set(O,$),l($,O,u,v,w),w.delete(O)),Wa(e,n,$)}function el(e,t){var n=e.length;if(n)return t+=t<0?n:0,Ni(t,n)?e[t]:s}function tl(e,t,n){t.length?t=It(t,function(v){return Le(v)?function(w){return us(w,v.length===1?v[0]:v)}:v}):t=[Dr];var u=-1;t=It(t,Mr(Ee()));var l=Qh(e,function(v,w,b){var O=It(t,function(q){return q(v)});return{criteria:O,index:++u,value:v}});return w0(l,function(v,w){return ny(v,w,n)})}function Gv(e,t){return rl(e,t,function(n,u){return Rc(e,u)})}function rl(e,t,n){for(var u=-1,l=t.length,v={};++u<l;){var w=t[u],b=us(e,w);n(b,w)&&cn(v,Wi(w,e),b)}return v}function Wv(e){return function(t){return us(t,e)}}function ic(e,t,n,u){var l=u?m0:bs,v=-1,w=t.length,b=e;for(e===t&&(t=Cr(t)),n&&(b=It(e,Mr(n)));++v<w;)for(var O=0,q=t[v],$=n?n(q):q;(O=l(b,$,O,u))>-1;)b!==e&&Zn.call(b,O,1),Zn.call(e,O,1);return e}function il(e,t){for(var n=e?t.length:0,u=n-1;n--;){var l=t[n];if(n==u||l!==v){var v=l;Ni(l)?Zn.call(e,l,1):ac(e,l)}}return e}function sc(e,t){return e+Xn(jh()*(t-e+1))}function Jv(e,t,n,u){for(var l=-1,v=ir(Yn((t-e)/(n||1)),0),w=D(v);v--;)w[u?v:++l]=e,e+=n;return w}function nc(e,t){var n="";if(!e||t<1||t>$i)return n;do t%2&&(n+=e),t=Xn(t/2),t&&(e+=e);while(t);return n}function Ue(e,t){return Ec(Nl(e,t,Dr),e+"")}function Zv(e){return qh(Ns(e))}function Qv(e,t){var n=Ns(e);return yo(n,cs(t,0,n.length))}function cn(e,t,n,u){if(!Ot(e))return e;t=Wi(t,e);for(var l=-1,v=t.length,w=v-1,b=e;b!=null&&++l<v;){var O=mi(t[l]),q=n;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(l!=w){var $=b[O];q=u?u($,O,b):s,q===s&&(q=Ot($)?$:Ni(t[l+1])?[]:{})}sn(b,O,q),b=b[O]}return e}var sl=eo?function(e,t){return eo.set(e,t),e}:Dr,Yv=Qn?function(e,t){return Qn(e,"toString",{configurable:!0,enumerable:!1,value:Dc(t),writable:!0})}:Dr;function Xv(e){return yo(Ns(e))}function Zr(e,t,n){var u=-1,l=e.length;t<0&&(t=-t>l?0:l+t),n=n>l?l:n,n<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var v=D(l);++u<l;)v[u]=e[u+t];return v}function ey(e,t){var n;return Ki(e,function(u,l,v){return n=t(u,l,v),!n}),!!n}function ao(e,t,n){var u=0,l=e==null?u:e.length;if(typeof t=="number"&&t===t&&l<=rg){for(;u<l;){var v=u+l>>>1,w=e[v];w!==null&&!zr(w)&&(n?w<=t:w<t)?u=v+1:l=v}return l}return oc(e,t,Dr,n)}function oc(e,t,n,u){var l=0,v=e==null?0:e.length;if(v===0)return 0;t=n(t);for(var w=t!==t,b=t===null,O=zr(t),q=t===s;l<v;){var $=Xn((l+v)/2),K=n(e[$]),ue=K!==s,ve=K===null,xe=K===K,ze=zr(K);if(w)var Ie=u||xe;else q?Ie=xe&&(u||ue):b?Ie=xe&&ue&&(u||!ve):O?Ie=xe&&ue&&!ve&&(u||!ze):ve||ze?Ie=!1:Ie=u?K<=t:K<t;Ie?l=$+1:v=$}return gr(v,tg)}function nl(e,t){for(var n=-1,u=e.length,l=0,v=[];++n<u;){var w=e[n],b=t?t(w):w;if(!n||!ai(b,O)){var O=b;v[l++]=w===0?0:w}}return v}function ol(e){return typeof e=="number"?e:zr(e)?Dn:+e}function jr(e){if(typeof e=="string")return e;if(Le(e))return It(e,jr)+"";if(zr(e))return zh?zh.call(e):"";var t=e+"";return t=="0"&&1/e==-is?"-0":t}function Gi(e,t,n){var u=-1,l=qn,v=e.length,w=!0,b=[],O=b;if(n)w=!1,l=Fa;else if(v>=a){var q=t?null:ly(e);if(q)return Hn(q);w=!1,l=Qs,O=new as}else O=t?[]:b;e:for(;++u<v;){var $=e[u],K=t?t($):$;if($=n||$!==0?$:0,w&&K===K){for(var ue=O.length;ue--;)if(O[ue]===K)continue e;t&&O.push(K),b.push($)}else l(O,K,n)||(O!==b&&O.push(K),b.push($))}return b}function ac(e,t){return t=Wi(t,e),e=Ll(e,t),e==null||delete e[mi(Qr(t))]}function al(e,t,n,u){return cn(e,t,n(us(e,t)),u)}function co(e,t,n,u){for(var l=e.length,v=u?l:-1;(u?v--:++v<l)&&t(e[v],v,e););return n?Zr(e,u?0:v,u?v+1:l):Zr(e,u?v+1:0,u?l:v)}function cl(e,t){var n=e;return n instanceof He&&(n=n.value()),Ma(t,function(u,l){return l.func.apply(l.thisArg,Bi([u],l.args))},n)}function cc(e,t,n){var u=e.length;if(u<2)return u?Gi(e[0]):[];for(var l=-1,v=D(u);++l<u;)for(var w=e[l],b=-1;++b<u;)b!=l&&(v[l]=nn(v[l]||w,e[b],t,n));return Gi(fr(v,1),t,n)}function ul(e,t,n){for(var u=-1,l=e.length,v=t.length,w={};++u<l;){var b=u<v?t[u]:s;n(w,e[u],b)}return w}function uc(e){return qt(e)?e:[]}function hc(e){return typeof e=="function"?e:Dr}function Wi(e,t){return Le(e)?e:wc(e,t)?[e]:zl(Je(e))}var ty=Ue;function Ji(e,t,n){var u=e.length;return n=n===s?u:n,!t&&n>=u?e:Zr(e,t,n)}var hl=H0||function(e){return lr.clearTimeout(e)};function ll(e,t){if(t)return e.slice();var n=e.length,u=Dh?Dh(n):new e.constructor(n);return e.copy(u),u}function lc(e){var t=new e.constructor(e.byteLength);return new Wn(t).set(new Wn(e)),t}function ry(e,t){var n=t?lc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function iy(e){var t=new e.constructor(e.source,Wu.exec(e));return t.lastIndex=e.lastIndex,t}function sy(e){return rn?nt(rn.call(e)):{}}function fl(e,t){var n=t?lc(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function dl(e,t){if(e!==t){var n=e!==s,u=e===null,l=e===e,v=zr(e),w=t!==s,b=t===null,O=t===t,q=zr(t);if(!b&&!q&&!v&&e>t||v&&w&&O&&!b&&!q||u&&w&&O||!n&&O||!l)return 1;if(!u&&!v&&!q&&e<t||q&&n&&l&&!u&&!v||b&&n&&l||!w&&l||!O)return-1}return 0}function ny(e,t,n){for(var u=-1,l=e.criteria,v=t.criteria,w=l.length,b=n.length;++u<w;){var O=dl(l[u],v[u]);if(O){if(u>=b)return O;var q=n[u];return O*(q=="desc"?-1:1)}}return e.index-t.index}function pl(e,t,n,u){for(var l=-1,v=e.length,w=n.length,b=-1,O=t.length,q=ir(v-w,0),$=D(O+q),K=!u;++b<O;)$[b]=t[b];for(;++l<w;)(K||l<v)&&($[n[l]]=e[l]);for(;q--;)$[b++]=e[l++];return $}function gl(e,t,n,u){for(var l=-1,v=e.length,w=-1,b=n.length,O=-1,q=t.length,$=ir(v-b,0),K=D($+q),ue=!u;++l<$;)K[l]=e[l];for(var ve=l;++O<q;)K[ve+O]=t[O];for(;++w<b;)(ue||l<v)&&(K[ve+n[w]]=e[l++]);return K}function Cr(e,t){var n=-1,u=e.length;for(t||(t=D(u));++n<u;)t[n]=e[n];return t}function yi(e,t,n,u){var l=!n;n||(n={});for(var v=-1,w=t.length;++v<w;){var b=t[v],O=u?u(n[b],e[b],b,n,e):s;O===s&&(O=e[b]),l?Ri(n,b,O):sn(n,b,O)}return n}function oy(e,t){return yi(e,mc(e),t)}function ay(e,t){return yi(e,Al(e),t)}function uo(e,t){return function(n,u){var l=Le(n)?f0:Cv,v=t?t():{};return l(n,e,Ee(u,2),v)}}function Cs(e){return Ue(function(t,n){var u=-1,l=n.length,v=l>1?n[l-1]:s,w=l>2?n[2]:s;for(v=e.length>3&&typeof v=="function"?(l--,v):s,w&&Er(n[0],n[1],w)&&(v=l<3?s:v,l=1),t=nt(t);++u<l;){var b=n[u];b&&e(t,b,u,v)}return t})}function vl(e,t){return function(n,u){if(n==null)return n;if(!Rr(n))return e(n,u);for(var l=n.length,v=t?l:-1,w=nt(n);(t?v--:++v<l)&&u(w[v],v,w)!==!1;);return n}}function yl(e){return function(t,n,u){for(var l=-1,v=nt(t),w=u(t),b=w.length;b--;){var O=w[e?b:++l];if(n(v[O],O,v)===!1)break}return t}}function cy(e,t,n){var u=t&bt,l=un(e);function v(){var w=this&&this!==lr&&this instanceof v?l:e;return w.apply(u?n:this,arguments)}return v}function ml(e){return function(t){t=Je(t);var n=Es(t)?ni(t):s,u=n?n[0]:t.charAt(0),l=n?Ji(n,1).join(""):t.slice(1);return u[e]()+l}}function Rs(e){return function(t){return Ma(yf(vf(t).replace(Yg,"")),e,"")}}function un(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=As(e.prototype),u=e.apply(n,t);return Ot(u)?u:n}}function uy(e,t,n){var u=un(e);function l(){for(var v=arguments.length,w=D(v),b=v,O=Ts(l);b--;)w[b]=arguments[b];var q=v<3&&w[0]!==O&&w[v-1]!==O?[]:ki(w,O);if(v-=q.length,v<n)return xl(e,t,ho,l.placeholder,s,w,q,s,s,n-v);var $=this&&this!==lr&&this instanceof l?u:e;return Fr($,this,w)}return l}function wl(e){return function(t,n,u){var l=nt(t);if(!Rr(t)){var v=Ee(n,3);t=cr(t),n=function(b){return v(l[b],b,l)}}var w=e(t,n,u);return w>-1?l[v?t[w]:w]:s}}function _l(e){return Di(function(t){var n=t.length,u=n,l=Wr.prototype.thru;for(e&&t.reverse();u--;){var v=t[u];if(typeof v!="function")throw new Gr(m);if(l&&!w&&go(v)=="wrapper")var w=new Wr([],!0)}for(u=w?u:n;++u<n;){v=t[u];var b=go(v),O=b=="wrapper"?vc(v):s;O&&_c(O[0])&&O[1]==(Ut|tt|xt|_r)&&!O[4].length&&O[9]==1?w=w[go(O[0])].apply(w,O[3]):w=v.length==1&&_c(v)?w[b]():w.thru(v)}return function(){var q=arguments,$=q[0];if(w&&q.length==1&&Le($))return w.plant($).value();for(var K=0,ue=n?t[K].apply(this,q):$;++K<n;)ue=t[K].call(this,ue);return ue}})}function ho(e,t,n,u,l,v,w,b,O,q){var $=t&Ut,K=t&bt,ue=t&Et,ve=t&(tt|Ge),xe=t&qi,ze=ue?s:un(e);function Ie(){for(var $e=arguments.length,Be=D($e),Ur=$e;Ur--;)Be[Ur]=arguments[Ur];if(ve)var xr=Ts(Ie),qr=b0(Be,xr);if(u&&(Be=pl(Be,u,l,ve)),v&&(Be=gl(Be,v,w,ve)),$e-=qr,ve&&$e<q){var $t=ki(Be,xr);return xl(e,t,ho,Ie.placeholder,n,Be,$t,b,O,q-$e)}var ci=K?n:this,Mi=ue?ci[e]:e;return $e=Be.length,b?Be=Cy(Be,b):xe&&$e>1&&Be.reverse(),$&&O<$e&&(Be.length=O),this&&this!==lr&&this instanceof Ie&&(Mi=ze||un(Mi)),Mi.apply(ci,Be)}return Ie}function bl(e,t){return function(n,u){return jv(n,e,t(u),{})}}function lo(e,t){return function(n,u){var l;if(n===s&&u===s)return t;if(n!==s&&(l=n),u!==s){if(l===s)return u;typeof n=="string"||typeof u=="string"?(n=jr(n),u=jr(u)):(n=ol(n),u=ol(u)),l=e(n,u)}return l}}function fc(e){return Di(function(t){return t=It(t,Mr(Ee())),Ue(function(n){var u=this;return e(t,function(l){return Fr(l,u,n)})})})}function fo(e,t){t=t===s?" ":jr(t);var n=t.length;if(n<2)return n?nc(t,e):t;var u=nc(t,Yn(e/xs(t)));return Es(t)?Ji(ni(u),0,e).join(""):u.slice(0,e)}function hy(e,t,n,u){var l=t&bt,v=un(e);function w(){for(var b=-1,O=arguments.length,q=-1,$=u.length,K=D($+O),ue=this&&this!==lr&&this instanceof w?v:e;++q<$;)K[q]=u[q];for(;O--;)K[q++]=arguments[++b];return Fr(ue,l?n:this,K)}return w}function El(e){return function(t,n,u){return u&&typeof u!="number"&&Er(t,n,u)&&(n=u=s),t=Fi(t),n===s?(n=t,t=0):n=Fi(n),u=u===s?t<n?1:-1:Fi(u),Jv(t,n,u,e)}}function po(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Yr(t),n=Yr(n)),e(t,n)}}function xl(e,t,n,u,l,v,w,b,O,q){var $=t&tt,K=$?w:s,ue=$?s:w,ve=$?v:s,xe=$?s:v;t|=$?xt:wr,t&=~($?wr:xt),t&mr||(t&=~(bt|Et));var ze=[e,t,l,ve,K,xe,ue,b,O,q],Ie=n.apply(s,ze);return _c(e)&&Fl(Ie,ze),Ie.placeholder=u,Ml(Ie,e,t)}function dc(e){var t=rr[e];return function(n,u){if(n=Yr(n),u=u==null?0:gr(Me(u),292),u&&Mh(n)){var l=(Je(n)+"e").split("e"),v=t(l[0]+"e"+(+l[1]+u));return l=(Je(v)+"e").split("e"),+(l[0]+"e"+(+l[1]-u))}return t(n)}}var ly=Ss&&1/Hn(new Ss([,-0]))[1]==is?function(e){return new Ss(e)}:Fc;function Il(e){return function(t){var n=vr(t);return n==ii?Ba(t):n==si?A0(t):_0(t,e(t))}}function Ti(e,t,n,u,l,v,w,b){var O=t&Et;if(!O&&typeof e!="function")throw new Gr(m);var q=u?u.length:0;if(q||(t&=~(xt|wr),u=l=s),w=w===s?w:ir(Me(w),0),b=b===s?b:Me(b),q-=l?l.length:0,t&wr){var $=u,K=l;u=l=s}var ue=O?s:vc(e),ve=[e,t,n,u,l,$,K,v,w,b];if(ue&&Sy(ve,ue),e=ve[0],t=ve[1],n=ve[2],u=ve[3],l=ve[4],b=ve[9]=ve[9]===s?O?0:e.length:ir(ve[9]-q,0),!b&&t&(tt|Ge)&&(t&=~(tt|Ge)),!t||t==bt)var xe=cy(e,t,n);else t==tt||t==Ge?xe=uy(e,t,b):(t==xt||t==(bt|xt))&&!l.length?xe=hy(e,t,n,u):xe=ho.apply(s,ve);var ze=ue?sl:Fl;return Ml(ze(xe,ve),e,t)}function Pl(e,t,n,u){return e===s||ai(e,Ps[n])&&!Qe.call(u,n)?t:e}function Sl(e,t,n,u,l,v){return Ot(e)&&Ot(t)&&(v.set(t,e),oo(e,t,s,Sl,v),v.delete(t)),e}function fy(e){return fn(e)?s:e}function Ol(e,t,n,u,l,v){var w=n&Ae,b=e.length,O=t.length;if(b!=O&&!(w&&O>b))return!1;var q=v.get(e),$=v.get(t);if(q&&$)return q==t&&$==e;var K=-1,ue=!0,ve=n&vt?new as:s;for(v.set(e,t),v.set(t,e);++K<b;){var xe=e[K],ze=t[K];if(u)var Ie=w?u(ze,xe,K,t,e,v):u(xe,ze,K,e,t,v);if(Ie!==s){if(Ie)continue;ue=!1;break}if(ve){if(!ja(t,function($e,Be){if(!Qs(ve,Be)&&(xe===$e||l(xe,$e,n,u,v)))return ve.push(Be)})){ue=!1;break}}else if(!(xe===ze||l(xe,ze,n,u,v))){ue=!1;break}}return v.delete(e),v.delete(t),ue}function dy(e,t,n,u,l,v,w){switch(n){case ws:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zs:return!(e.byteLength!=t.byteLength||!v(new Wn(e),new Wn(t)));case ks:case Vs:case Ks:return ai(+e,+t);case Ln:return e.name==t.name&&e.message==t.message;case Gs:case Ws:return e==t+"";case ii:var b=Ba;case si:var O=u&Ae;if(b||(b=Hn),e.size!=t.size&&!O)return!1;var q=w.get(e);if(q)return q==t;u|=vt,w.set(e,t);var $=Ol(b(e),b(t),u,l,v,w);return w.delete(e),$;case Mn:if(rn)return rn.call(e)==rn.call(t)}return!1}function py(e,t,n,u,l,v){var w=n&Ae,b=pc(e),O=b.length,q=pc(t),$=q.length;if(O!=$&&!w)return!1;for(var K=O;K--;){var ue=b[K];if(!(w?ue in t:Qe.call(t,ue)))return!1}var ve=v.get(e),xe=v.get(t);if(ve&&xe)return ve==t&&xe==e;var ze=!0;v.set(e,t),v.set(t,e);for(var Ie=w;++K<O;){ue=b[K];var $e=e[ue],Be=t[ue];if(u)var Ur=w?u(Be,$e,ue,t,e,v):u($e,Be,ue,e,t,v);if(!(Ur===s?$e===Be||l($e,Be,n,u,v):Ur)){ze=!1;break}Ie||(Ie=ue=="constructor")}if(ze&&!Ie){var xr=e.constructor,qr=t.constructor;xr!=qr&&"constructor"in e&&"constructor"in t&&!(typeof xr=="function"&&xr instanceof xr&&typeof qr=="function"&&qr instanceof qr)&&(ze=!1)}return v.delete(e),v.delete(t),ze}function Di(e){return Ec(Nl(e,s,Hl),e+"")}function pc(e){return Gh(e,cr,mc)}function gc(e){return Gh(e,Tr,Al)}var vc=eo?function(e){return eo.get(e)}:Fc;function go(e){for(var t=e.name+"",n=Os[t],u=Qe.call(Os,t)?n.length:0;u--;){var l=n[u],v=l.func;if(v==null||v==e)return l.name}return t}function Ts(e){var t=Qe.call(p,"placeholder")?p:e;return t.placeholder}function Ee(){var e=p.iteratee||Nc;return e=e===Nc?Zh:e,arguments.length?e(arguments[0],arguments[1]):e}function vo(e,t){var n=e.__data__;return Ey(t)?n[typeof t=="string"?"string":"hash"]:n.map}function yc(e){for(var t=cr(e),n=t.length;n--;){var u=t[n],l=e[u];t[n]=[u,l,Tl(l)]}return t}function hs(e,t){var n=P0(e,t);return Jh(n)?n:s}function gy(e){var t=Qe.call(e,ns),n=e[ns];try{e[ns]=s;var u=!0}catch{}var l=Kn.call(e);return u&&(t?e[ns]=n:delete e[ns]),l}var mc=Va?function(e){return e==null?[]:(e=nt(e),Hi(Va(e),function(t){return Lh.call(e,t)}))}:Mc,Al=Va?function(e){for(var t=[];e;)Bi(t,mc(e)),e=Jn(e);return t}:Mc,vr=br;(Ka&&vr(new Ka(new ArrayBuffer(1)))!=ws||Xs&&vr(new Xs)!=ii||Ga&&vr(Ga.resolve())!=ku||Ss&&vr(new Ss)!=si||en&&vr(new en)!=Js)&&(vr=function(e){var t=br(e),n=t==Oi?e.constructor:s,u=n?ls(n):"";if(u)switch(u){case Q0:return ws;case Y0:return ii;case X0:return ku;case ev:return si;case tv:return Js}return t});function vy(e,t,n){for(var u=-1,l=n.length;++u<l;){var v=n[u],w=v.size;switch(v.type){case"drop":e+=w;break;case"dropRight":t-=w;break;case"take":t=gr(t,e+w);break;case"takeRight":e=ir(e,t-w);break}}return{start:e,end:t}}function yy(e){var t=e.match(xg);return t?t[1].split(Ig):[]}function Cl(e,t,n){t=Wi(t,e);for(var u=-1,l=t.length,v=!1;++u<l;){var w=mi(t[u]);if(!(v=e!=null&&n(e,w)))break;e=e[w]}return v||++u!=l?v:(l=e==null?0:e.length,!!l&&xo(l)&&Ni(w,l)&&(Le(e)||fs(e)))}function my(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Qe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Rl(e){return typeof e.constructor=="function"&&!hn(e)?As(Jn(e)):{}}function wy(e,t,n){var u=e.constructor;switch(t){case Zs:return lc(e);case ks:case Vs:return new u(+e);case ws:return ry(e,n);case ya:case ma:case wa:case _a:case ba:case Ea:case xa:case Ia:case Pa:return fl(e,n);case ii:return new u;case Ks:case Ws:return new u(e);case Gs:return iy(e);case si:return new u;case Mn:return sy(e)}}function _y(e,t){var n=t.length;if(!n)return e;var u=n-1;return t[u]=(n>1?"& ":"")+t[u],t=t.join(n>2?", ":" "),e.replace(Eg,`{
/* [wrapped with `+t+`] */
`)}function by(e){return Le(e)||fs(e)||!!(Fh&&e&&e[Fh])}function Ni(e,t){var n=typeof e;return t=t??$i,!!t&&(n=="number"||n!="symbol"&&Ng.test(e))&&e>-1&&e%1==0&&e<t}function Er(e,t,n){if(!Ot(n))return!1;var u=typeof t;return(u=="number"?Rr(n)&&Ni(t,n.length):u=="string"&&t in n)?ai(n[t],e):!1}function wc(e,t){if(Le(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||zr(e)?!0:mg.test(e)||!yg.test(e)||t!=null&&e in nt(t)}function Ey(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function _c(e){var t=go(e),n=p[t];if(typeof n!="function"||!(t in He.prototype))return!1;if(e===n)return!0;var u=vc(n);return!!u&&e===u[0]}function xy(e){return!!Th&&Th in e}var Iy=kn?Li:jc;function hn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ps;return e===n}function Tl(e){return e===e&&!Ot(e)}function Dl(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==s||e in nt(n))}}function Py(e){var t=bo(e,function(u){return n.size===X&&n.clear(),u}),n=t.cache;return t}function Sy(e,t){var n=e[1],u=t[1],l=n|u,v=l<(bt|Et|Ut),w=u==Ut&&n==tt||u==Ut&&n==_r&&e[7].length<=t[8]||u==(Ut|_r)&&t[7].length<=t[8]&&n==tt;if(!(v||w))return e;u&bt&&(e[2]=t[2],l|=n&bt?0:mr);var b=t[3];if(b){var O=e[3];e[3]=O?pl(O,b,t[4]):b,e[4]=O?ki(e[3],pe):t[4]}return b=t[5],b&&(O=e[5],e[5]=O?gl(O,b,t[6]):b,e[6]=O?ki(e[5],pe):t[6]),b=t[7],b&&(e[7]=b),u&Ut&&(e[8]=e[8]==null?t[8]:gr(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function Oy(e){var t=[];if(e!=null)for(var n in nt(e))t.push(n);return t}function Ay(e){return Kn.call(e)}function Nl(e,t,n){return t=ir(t===s?e.length-1:t,0),function(){for(var u=arguments,l=-1,v=ir(u.length-t,0),w=D(v);++l<v;)w[l]=u[t+l];l=-1;for(var b=D(t+1);++l<t;)b[l]=u[l];return b[t]=n(w),Fr(e,this,b)}}function Ll(e,t){return t.length<2?e:us(e,Zr(t,0,-1))}function Cy(e,t){for(var n=e.length,u=gr(t.length,n),l=Cr(e);u--;){var v=t[u];e[u]=Ni(v,n)?l[v]:s}return e}function bc(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Fl=jl(sl),ln=k0||function(e,t){return lr.setTimeout(e,t)},Ec=jl(Yv);function Ml(e,t,n){var u=t+"";return Ec(e,_y(u,Ry(yy(u),n)))}function jl(e){var t=0,n=0;return function(){var u=W0(),l=Qp-(u-n);if(n=u,l>0){if(++t>=Zp)return arguments[0]}else t=0;return e.apply(s,arguments)}}function yo(e,t){var n=-1,u=e.length,l=u-1;for(t=t===s?u:t;++n<t;){var v=sc(n,l),w=e[v];e[v]=e[n],e[n]=w}return e.length=t,e}var zl=Py(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wg,function(n,u,l,v){t.push(l?v.replace(Og,"$1"):u||n)}),t});function mi(e){if(typeof e=="string"||zr(e))return e;var t=e+"";return t=="0"&&1/e==-is?"-0":t}function ls(e){if(e!=null){try{return Vn.call(e)}catch{}try{return e+""}catch{}}return""}function Ry(e,t){return Kr(ig,function(n){var u="_."+n[0];t&n[1]&&!qn(e,u)&&e.push(u)}),e.sort()}function Ul(e){if(e instanceof He)return e.clone();var t=new Wr(e.__wrapped__,e.__chain__);return t.__actions__=Cr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ty(e,t,n){(n?Er(e,t,n):t===s)?t=1:t=ir(Me(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var l=0,v=0,w=D(Yn(u/t));l<u;)w[v++]=Zr(e,l,l+=t);return w}function Dy(e){for(var t=-1,n=e==null?0:e.length,u=0,l=[];++t<n;){var v=e[t];v&&(l[u++]=v)}return l}function Ny(){var e=arguments.length;if(!e)return[];for(var t=D(e-1),n=arguments[0],u=e;u--;)t[u-1]=arguments[u];return Bi(Le(n)?Cr(n):[n],fr(t,1))}var Ly=Ue(function(e,t){return qt(e)?nn(e,fr(t,1,qt,!0)):[]}),Fy=Ue(function(e,t){var n=Qr(t);return qt(n)&&(n=s),qt(e)?nn(e,fr(t,1,qt,!0),Ee(n,2)):[]}),My=Ue(function(e,t){var n=Qr(t);return qt(n)&&(n=s),qt(e)?nn(e,fr(t,1,qt,!0),s,n):[]});function jy(e,t,n){var u=e==null?0:e.length;return u?(t=n||t===s?1:Me(t),Zr(e,t<0?0:t,u)):[]}function zy(e,t,n){var u=e==null?0:e.length;return u?(t=n||t===s?1:Me(t),t=u-t,Zr(e,0,t<0?0:t)):[]}function Uy(e,t){return e&&e.length?co(e,Ee(t,3),!0,!0):[]}function qy(e,t){return e&&e.length?co(e,Ee(t,3),!0):[]}function $y(e,t,n,u){var l=e==null?0:e.length;return l?(n&&typeof n!="number"&&Er(e,t,n)&&(n=0,u=l),Nv(e,t,n,u)):[]}function ql(e,t,n){var u=e==null?0:e.length;if(!u)return-1;var l=n==null?0:Me(n);return l<0&&(l=ir(u+l,0)),$n(e,Ee(t,3),l)}function $l(e,t,n){var u=e==null?0:e.length;if(!u)return-1;var l=u-1;return n!==s&&(l=Me(n),l=n<0?ir(u+l,0):gr(l,u-1)),$n(e,Ee(t,3),l,!0)}function Hl(e){var t=e==null?0:e.length;return t?fr(e,1):[]}function Hy(e){var t=e==null?0:e.length;return t?fr(e,is):[]}function By(e,t){var n=e==null?0:e.length;return n?(t=t===s?1:Me(t),fr(e,t)):[]}function ky(e){for(var t=-1,n=e==null?0:e.length,u={};++t<n;){var l=e[t];u[l[0]]=l[1]}return u}function Bl(e){return e&&e.length?e[0]:s}function Vy(e,t,n){var u=e==null?0:e.length;if(!u)return-1;var l=n==null?0:Me(n);return l<0&&(l=ir(u+l,0)),bs(e,t,l)}function Ky(e){var t=e==null?0:e.length;return t?Zr(e,0,-1):[]}var Gy=Ue(function(e){var t=It(e,uc);return t.length&&t[0]===e[0]?Xa(t):[]}),Wy=Ue(function(e){var t=Qr(e),n=It(e,uc);return t===Qr(n)?t=s:n.pop(),n.length&&n[0]===e[0]?Xa(n,Ee(t,2)):[]}),Jy=Ue(function(e){var t=Qr(e),n=It(e,uc);return t=typeof t=="function"?t:s,t&&n.pop(),n.length&&n[0]===e[0]?Xa(n,s,t):[]});function Zy(e,t){return e==null?"":K0.call(e,t)}function Qr(e){var t=e==null?0:e.length;return t?e[t-1]:s}function Qy(e,t,n){var u=e==null?0:e.length;if(!u)return-1;var l=u;return n!==s&&(l=Me(n),l=l<0?ir(u+l,0):gr(l,u-1)),t===t?R0(e,t,l):$n(e,xh,l,!0)}function Yy(e,t){return e&&e.length?el(e,Me(t)):s}var Xy=Ue(kl);function kl(e,t){return e&&e.length&&t&&t.length?ic(e,t):e}function em(e,t,n){return e&&e.length&&t&&t.length?ic(e,t,Ee(n,2)):e}function tm(e,t,n){return e&&e.length&&t&&t.length?ic(e,t,s,n):e}var rm=Di(function(e,t){var n=e==null?0:e.length,u=Ja(e,t);return il(e,It(t,function(l){return Ni(l,n)?+l:l}).sort(dl)),u});function im(e,t){var n=[];if(!(e&&e.length))return n;var u=-1,l=[],v=e.length;for(t=Ee(t,3);++u<v;){var w=e[u];t(w,u,e)&&(n.push(w),l.push(u))}return il(e,l),n}function xc(e){return e==null?e:Z0.call(e)}function sm(e,t,n){var u=e==null?0:e.length;return u?(n&&typeof n!="number"&&Er(e,t,n)?(t=0,n=u):(t=t==null?0:Me(t),n=n===s?u:Me(n)),Zr(e,t,n)):[]}function nm(e,t){return ao(e,t)}function om(e,t,n){return oc(e,t,Ee(n,2))}function am(e,t){var n=e==null?0:e.length;if(n){var u=ao(e,t);if(u<n&&ai(e[u],t))return u}return-1}function cm(e,t){return ao(e,t,!0)}function um(e,t,n){return oc(e,t,Ee(n,2),!0)}function hm(e,t){var n=e==null?0:e.length;if(n){var u=ao(e,t,!0)-1;if(ai(e[u],t))return u}return-1}function lm(e){return e&&e.length?nl(e):[]}function fm(e,t){return e&&e.length?nl(e,Ee(t,2)):[]}function dm(e){var t=e==null?0:e.length;return t?Zr(e,1,t):[]}function pm(e,t,n){return e&&e.length?(t=n||t===s?1:Me(t),Zr(e,0,t<0?0:t)):[]}function gm(e,t,n){var u=e==null?0:e.length;return u?(t=n||t===s?1:Me(t),t=u-t,Zr(e,t<0?0:t,u)):[]}function vm(e,t){return e&&e.length?co(e,Ee(t,3),!1,!0):[]}function ym(e,t){return e&&e.length?co(e,Ee(t,3)):[]}var mm=Ue(function(e){return Gi(fr(e,1,qt,!0))}),wm=Ue(function(e){var t=Qr(e);return qt(t)&&(t=s),Gi(fr(e,1,qt,!0),Ee(t,2))}),_m=Ue(function(e){var t=Qr(e);return t=typeof t=="function"?t:s,Gi(fr(e,1,qt,!0),s,t)});function bm(e){return e&&e.length?Gi(e):[]}function Em(e,t){return e&&e.length?Gi(e,Ee(t,2)):[]}function xm(e,t){return t=typeof t=="function"?t:s,e&&e.length?Gi(e,s,t):[]}function Ic(e){if(!(e&&e.length))return[];var t=0;return e=Hi(e,function(n){if(qt(n))return t=ir(n.length,t),!0}),$a(t,function(n){return It(e,za(n))})}function Vl(e,t){if(!(e&&e.length))return[];var n=Ic(e);return t==null?n:It(n,function(u){return Fr(t,s,u)})}var Im=Ue(function(e,t){return qt(e)?nn(e,t):[]}),Pm=Ue(function(e){return cc(Hi(e,qt))}),Sm=Ue(function(e){var t=Qr(e);return qt(t)&&(t=s),cc(Hi(e,qt),Ee(t,2))}),Om=Ue(function(e){var t=Qr(e);return t=typeof t=="function"?t:s,cc(Hi(e,qt),s,t)}),Am=Ue(Ic);function Cm(e,t){return ul(e||[],t||[],sn)}function Rm(e,t){return ul(e||[],t||[],cn)}var Tm=Ue(function(e){var t=e.length,n=t>1?e[t-1]:s;return n=typeof n=="function"?(e.pop(),n):s,Vl(e,n)});function Kl(e){var t=p(e);return t.__chain__=!0,t}function Dm(e,t){return t(e),e}function mo(e,t){return t(e)}var Nm=Di(function(e){var t=e.length,n=t?e[0]:0,u=this.__wrapped__,l=function(v){return Ja(v,e)};return t>1||this.__actions__.length||!(u instanceof He)||!Ni(n)?this.thru(l):(u=u.slice(n,+n+(t?1:0)),u.__actions__.push({func:mo,args:[l],thisArg:s}),new Wr(u,this.__chain__).thru(function(v){return t&&!v.length&&v.push(s),v}))});function Lm(){return Kl(this)}function Fm(){return new Wr(this.value(),this.__chain__)}function Mm(){this.__values__===s&&(this.__values__=af(this.value()));var e=this.__index__>=this.__values__.length,t=e?s:this.__values__[this.__index__++];return{done:e,value:t}}function jm(){return this}function zm(e){for(var t,n=this;n instanceof ro;){var u=Ul(n);u.__index__=0,u.__values__=s,t?l.__wrapped__=u:t=u;var l=u;n=n.__wrapped__}return l.__wrapped__=e,t}function Um(){var e=this.__wrapped__;if(e instanceof He){var t=e;return this.__actions__.length&&(t=new He(this)),t=t.reverse(),t.__actions__.push({func:mo,args:[xc],thisArg:s}),new Wr(t,this.__chain__)}return this.thru(xc)}function qm(){return cl(this.__wrapped__,this.__actions__)}var $m=uo(function(e,t,n){Qe.call(e,n)?++e[n]:Ri(e,n,1)});function Hm(e,t,n){var u=Le(e)?bh:Dv;return n&&Er(e,t,n)&&(t=s),u(e,Ee(t,3))}function Bm(e,t){var n=Le(e)?Hi:Vh;return n(e,Ee(t,3))}var km=wl(ql),Vm=wl($l);function Km(e,t){return fr(wo(e,t),1)}function Gm(e,t){return fr(wo(e,t),is)}function Wm(e,t,n){return n=n===s?1:Me(n),fr(wo(e,t),n)}function Gl(e,t){var n=Le(e)?Kr:Ki;return n(e,Ee(t,3))}function Wl(e,t){var n=Le(e)?d0:kh;return n(e,Ee(t,3))}var Jm=uo(function(e,t,n){Qe.call(e,n)?e[n].push(t):Ri(e,n,[t])});function Zm(e,t,n,u){e=Rr(e)?e:Ns(e),n=n&&!u?Me(n):0;var l=e.length;return n<0&&(n=ir(l+n,0)),Io(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&bs(e,t,n)>-1}var Qm=Ue(function(e,t,n){var u=-1,l=typeof t=="function",v=Rr(e)?D(e.length):[];return Ki(e,function(w){v[++u]=l?Fr(t,w,n):on(w,t,n)}),v}),Ym=uo(function(e,t,n){Ri(e,n,t)});function wo(e,t){var n=Le(e)?It:Qh;return n(e,Ee(t,3))}function Xm(e,t,n,u){return e==null?[]:(Le(t)||(t=t==null?[]:[t]),n=u?s:n,Le(n)||(n=n==null?[]:[n]),tl(e,t,n))}var e1=uo(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function t1(e,t,n){var u=Le(e)?Ma:Ph,l=arguments.length<3;return u(e,Ee(t,4),n,l,Ki)}function r1(e,t,n){var u=Le(e)?p0:Ph,l=arguments.length<3;return u(e,Ee(t,4),n,l,kh)}function i1(e,t){var n=Le(e)?Hi:Vh;return n(e,Eo(Ee(t,3)))}function s1(e){var t=Le(e)?qh:Zv;return t(e)}function n1(e,t,n){(n?Er(e,t,n):t===s)?t=1:t=Me(t);var u=Le(e)?Ov:Qv;return u(e,t)}function o1(e){var t=Le(e)?Av:Xv;return t(e)}function a1(e){if(e==null)return 0;if(Rr(e))return Io(e)?xs(e):e.length;var t=vr(e);return t==ii||t==si?e.size:tc(e).length}function c1(e,t,n){var u=Le(e)?ja:ey;return n&&Er(e,t,n)&&(t=s),u(e,Ee(t,3))}var u1=Ue(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Er(e,t[0],t[1])?t=[]:n>2&&Er(t[0],t[1],t[2])&&(t=[t[0]]),tl(e,fr(t,1),[])}),_o=B0||function(){return lr.Date.now()};function h1(e,t){if(typeof t!="function")throw new Gr(m);return e=Me(e),function(){if(--e<1)return t.apply(this,arguments)}}function Jl(e,t,n){return t=n?s:t,t=e&&t==null?e.length:t,Ti(e,Ut,s,s,s,s,t)}function Zl(e,t){var n;if(typeof t!="function")throw new Gr(m);return e=Me(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=s),n}}var Pc=Ue(function(e,t,n){var u=bt;if(n.length){var l=ki(n,Ts(Pc));u|=xt}return Ti(e,u,t,n,l)}),Ql=Ue(function(e,t,n){var u=bt|Et;if(n.length){var l=ki(n,Ts(Ql));u|=xt}return Ti(t,u,e,n,l)});function Yl(e,t,n){t=n?s:t;var u=Ti(e,tt,s,s,s,s,s,t);return u.placeholder=Yl.placeholder,u}function Xl(e,t,n){t=n?s:t;var u=Ti(e,Ge,s,s,s,s,s,t);return u.placeholder=Xl.placeholder,u}function ef(e,t,n){var u,l,v,w,b,O,q=0,$=!1,K=!1,ue=!0;if(typeof e!="function")throw new Gr(m);t=Yr(t)||0,Ot(n)&&($=!!n.leading,K="maxWait"in n,v=K?ir(Yr(n.maxWait)||0,t):v,ue="trailing"in n?!!n.trailing:ue);function ve($t){var ci=u,Mi=l;return u=l=s,q=$t,w=e.apply(Mi,ci),w}function xe($t){return q=$t,b=ln($e,t),$?ve($t):w}function ze($t){var ci=$t-O,Mi=$t-q,_f=t-ci;return K?gr(_f,v-Mi):_f}function Ie($t){var ci=$t-O,Mi=$t-q;return O===s||ci>=t||ci<0||K&&Mi>=v}function $e(){var $t=_o();if(Ie($t))return Be($t);b=ln($e,ze($t))}function Be($t){return b=s,ue&&u?ve($t):(u=l=s,w)}function Ur(){b!==s&&hl(b),q=0,u=O=l=b=s}function xr(){return b===s?w:Be(_o())}function qr(){var $t=_o(),ci=Ie($t);if(u=arguments,l=this,O=$t,ci){if(b===s)return xe(O);if(K)return hl(b),b=ln($e,t),ve(O)}return b===s&&(b=ln($e,t)),w}return qr.cancel=Ur,qr.flush=xr,qr}var l1=Ue(function(e,t){return Bh(e,1,t)}),f1=Ue(function(e,t,n){return Bh(e,Yr(t)||0,n)});function d1(e){return Ti(e,qi)}function bo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Gr(m);var n=function(){var u=arguments,l=t?t.apply(this,u):u[0],v=n.cache;if(v.has(l))return v.get(l);var w=e.apply(this,u);return n.cache=v.set(l,w)||v,w};return n.cache=new(bo.Cache||Ci),n}bo.Cache=Ci;function Eo(e){if(typeof e!="function")throw new Gr(m);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function p1(e){return Zl(2,e)}var g1=ty(function(e,t){t=t.length==1&&Le(t[0])?It(t[0],Mr(Ee())):It(fr(t,1),Mr(Ee()));var n=t.length;return Ue(function(u){for(var l=-1,v=gr(u.length,n);++l<v;)u[l]=t[l].call(this,u[l]);return Fr(e,this,u)})}),Sc=Ue(function(e,t){var n=ki(t,Ts(Sc));return Ti(e,xt,s,t,n)}),tf=Ue(function(e,t){var n=ki(t,Ts(tf));return Ti(e,wr,s,t,n)}),v1=Di(function(e,t){return Ti(e,_r,s,s,s,t)});function y1(e,t){if(typeof e!="function")throw new Gr(m);return t=t===s?t:Me(t),Ue(e,t)}function m1(e,t){if(typeof e!="function")throw new Gr(m);return t=t==null?0:ir(Me(t),0),Ue(function(n){var u=n[t],l=Ji(n,0,t);return u&&Bi(l,u),Fr(e,this,l)})}function w1(e,t,n){var u=!0,l=!0;if(typeof e!="function")throw new Gr(m);return Ot(n)&&(u="leading"in n?!!n.leading:u,l="trailing"in n?!!n.trailing:l),ef(e,t,{leading:u,maxWait:t,trailing:l})}function _1(e){return Jl(e,1)}function b1(e,t){return Sc(hc(t),e)}function E1(){if(!arguments.length)return[];var e=arguments[0];return Le(e)?e:[e]}function x1(e){return Jr(e,Ke)}function I1(e,t){return t=typeof t=="function"?t:s,Jr(e,Ke,t)}function P1(e){return Jr(e,be|Ke)}function S1(e,t){return t=typeof t=="function"?t:s,Jr(e,be|Ke,t)}function O1(e,t){return t==null||Hh(e,t,cr(t))}function ai(e,t){return e===t||e!==e&&t!==t}var A1=po(Ya),C1=po(function(e,t){return e>=t}),fs=Wh(function(){return arguments}())?Wh:function(e){return Nt(e)&&Qe.call(e,"callee")&&!Lh.call(e,"callee")},Le=D.isArray,R1=gh?Mr(gh):zv;function Rr(e){return e!=null&&xo(e.length)&&!Li(e)}function qt(e){return Nt(e)&&Rr(e)}function T1(e){return e===!0||e===!1||Nt(e)&&br(e)==ks}var Zi=V0||jc,D1=vh?Mr(vh):Uv;function N1(e){return Nt(e)&&e.nodeType===1&&!fn(e)}function L1(e){if(e==null)return!0;if(Rr(e)&&(Le(e)||typeof e=="string"||typeof e.splice=="function"||Zi(e)||Ds(e)||fs(e)))return!e.length;var t=vr(e);if(t==ii||t==si)return!e.size;if(hn(e))return!tc(e).length;for(var n in e)if(Qe.call(e,n))return!1;return!0}function F1(e,t){return an(e,t)}function M1(e,t,n){n=typeof n=="function"?n:s;var u=n?n(e,t):s;return u===s?an(e,t,s,n):!!u}function Oc(e){if(!Nt(e))return!1;var t=br(e);return t==Ln||t==ng||typeof e.message=="string"&&typeof e.name=="string"&&!fn(e)}function j1(e){return typeof e=="number"&&Mh(e)}function Li(e){if(!Ot(e))return!1;var t=br(e);return t==Fn||t==Bu||t==sg||t==ag}function rf(e){return typeof e=="number"&&e==Me(e)}function xo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=$i}function Ot(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Nt(e){return e!=null&&typeof e=="object"}var sf=yh?Mr(yh):$v;function z1(e,t){return e===t||ec(e,t,yc(t))}function U1(e,t,n){return n=typeof n=="function"?n:s,ec(e,t,yc(t),n)}function q1(e){return nf(e)&&e!=+e}function $1(e){if(Iy(e))throw new Re(d);return Jh(e)}function H1(e){return e===null}function B1(e){return e==null}function nf(e){return typeof e=="number"||Nt(e)&&br(e)==Ks}function fn(e){if(!Nt(e)||br(e)!=Oi)return!1;var t=Jn(e);if(t===null)return!0;var n=Qe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Vn.call(n)==U0}var Ac=mh?Mr(mh):Hv;function k1(e){return rf(e)&&e>=-$i&&e<=$i}var of=wh?Mr(wh):Bv;function Io(e){return typeof e=="string"||!Le(e)&&Nt(e)&&br(e)==Ws}function zr(e){return typeof e=="symbol"||Nt(e)&&br(e)==Mn}var Ds=_h?Mr(_h):kv;function V1(e){return e===s}function K1(e){return Nt(e)&&vr(e)==Js}function G1(e){return Nt(e)&&br(e)==ug}var W1=po(rc),J1=po(function(e,t){return e<=t});function af(e){if(!e)return[];if(Rr(e))return Io(e)?ni(e):Cr(e);if(Ys&&e[Ys])return O0(e[Ys]());var t=vr(e),n=t==ii?Ba:t==si?Hn:Ns;return n(e)}function Fi(e){if(!e)return e===0?e:0;if(e=Yr(e),e===is||e===-is){var t=e<0?-1:1;return t*eg}return e===e?e:0}function Me(e){var t=Fi(e),n=t%1;return t===t?n?t-n:t:0}function cf(e){return e?cs(Me(e),0,gi):0}function Yr(e){if(typeof e=="number")return e;if(zr(e))return Dn;if(Ot(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ot(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Sh(e);var n=Rg.test(e);return n||Dg.test(e)?h0(e.slice(2),n?2:8):Cg.test(e)?Dn:+e}function uf(e){return yi(e,Tr(e))}function Z1(e){return e?cs(Me(e),-$i,$i):e===0?e:0}function Je(e){return e==null?"":jr(e)}var Q1=Cs(function(e,t){if(hn(t)||Rr(t)){yi(t,cr(t),e);return}for(var n in t)Qe.call(t,n)&&sn(e,n,t[n])}),hf=Cs(function(e,t){yi(t,Tr(t),e)}),Po=Cs(function(e,t,n,u){yi(t,Tr(t),e,u)}),Y1=Cs(function(e,t,n,u){yi(t,cr(t),e,u)}),X1=Di(Ja);function ew(e,t){var n=As(e);return t==null?n:$h(n,t)}var tw=Ue(function(e,t){e=nt(e);var n=-1,u=t.length,l=u>2?t[2]:s;for(l&&Er(t[0],t[1],l)&&(u=1);++n<u;)for(var v=t[n],w=Tr(v),b=-1,O=w.length;++b<O;){var q=w[b],$=e[q];($===s||ai($,Ps[q])&&!Qe.call(e,q))&&(e[q]=v[q])}return e}),rw=Ue(function(e){return e.push(s,Sl),Fr(lf,s,e)});function iw(e,t){return Eh(e,Ee(t,3),vi)}function sw(e,t){return Eh(e,Ee(t,3),Qa)}function nw(e,t){return e==null?e:Za(e,Ee(t,3),Tr)}function ow(e,t){return e==null?e:Kh(e,Ee(t,3),Tr)}function aw(e,t){return e&&vi(e,Ee(t,3))}function cw(e,t){return e&&Qa(e,Ee(t,3))}function uw(e){return e==null?[]:no(e,cr(e))}function hw(e){return e==null?[]:no(e,Tr(e))}function Cc(e,t,n){var u=e==null?s:us(e,t);return u===s?n:u}function lw(e,t){return e!=null&&Cl(e,t,Lv)}function Rc(e,t){return e!=null&&Cl(e,t,Fv)}var fw=bl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Kn.call(t)),e[t]=n},Dc(Dr)),dw=bl(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Kn.call(t)),Qe.call(e,t)?e[t].push(n):e[t]=[n]},Ee),pw=Ue(on);function cr(e){return Rr(e)?Uh(e):tc(e)}function Tr(e){return Rr(e)?Uh(e,!0):Vv(e)}function gw(e,t){var n={};return t=Ee(t,3),vi(e,function(u,l,v){Ri(n,t(u,l,v),u)}),n}function vw(e,t){var n={};return t=Ee(t,3),vi(e,function(u,l,v){Ri(n,l,t(u,l,v))}),n}var yw=Cs(function(e,t,n){oo(e,t,n)}),lf=Cs(function(e,t,n,u){oo(e,t,n,u)}),mw=Di(function(e,t){var n={};if(e==null)return n;var u=!1;t=It(t,function(v){return v=Wi(v,e),u||(u=v.length>1),v}),yi(e,gc(e),n),u&&(n=Jr(n,be|we|Ke,fy));for(var l=t.length;l--;)ac(n,t[l]);return n});function ww(e,t){return ff(e,Eo(Ee(t)))}var _w=Di(function(e,t){return e==null?{}:Gv(e,t)});function ff(e,t){if(e==null)return{};var n=It(gc(e),function(u){return[u]});return t=Ee(t),rl(e,n,function(u,l){return t(u,l[0])})}function bw(e,t,n){t=Wi(t,e);var u=-1,l=t.length;for(l||(l=1,e=s);++u<l;){var v=e==null?s:e[mi(t[u])];v===s&&(u=l,v=n),e=Li(v)?v.call(e):v}return e}function Ew(e,t,n){return e==null?e:cn(e,t,n)}function xw(e,t,n,u){return u=typeof u=="function"?u:s,e==null?e:cn(e,t,n,u)}var df=Il(cr),pf=Il(Tr);function Iw(e,t,n){var u=Le(e),l=u||Zi(e)||Ds(e);if(t=Ee(t,4),n==null){var v=e&&e.constructor;l?n=u?new v:[]:Ot(e)?n=Li(v)?As(Jn(e)):{}:n={}}return(l?Kr:vi)(e,function(w,b,O){return t(n,w,b,O)}),n}function Pw(e,t){return e==null?!0:ac(e,t)}function Sw(e,t,n){return e==null?e:al(e,t,hc(n))}function Ow(e,t,n,u){return u=typeof u=="function"?u:s,e==null?e:al(e,t,hc(n),u)}function Ns(e){return e==null?[]:Ha(e,cr(e))}function Aw(e){return e==null?[]:Ha(e,Tr(e))}function Cw(e,t,n){return n===s&&(n=t,t=s),n!==s&&(n=Yr(n),n=n===n?n:0),t!==s&&(t=Yr(t),t=t===t?t:0),cs(Yr(e),t,n)}function Rw(e,t,n){return t=Fi(t),n===s?(n=t,t=0):n=Fi(n),e=Yr(e),Mv(e,t,n)}function Tw(e,t,n){if(n&&typeof n!="boolean"&&Er(e,t,n)&&(t=n=s),n===s&&(typeof t=="boolean"?(n=t,t=s):typeof e=="boolean"&&(n=e,e=s)),e===s&&t===s?(e=0,t=1):(e=Fi(e),t===s?(t=e,e=0):t=Fi(t)),e>t){var u=e;e=t,t=u}if(n||e%1||t%1){var l=jh();return gr(e+l*(t-e+u0("1e-"+((l+"").length-1))),t)}return sc(e,t)}var Dw=Rs(function(e,t,n){return t=t.toLowerCase(),e+(n?gf(t):t)});function gf(e){return Tc(Je(e).toLowerCase())}function vf(e){return e=Je(e),e&&e.replace(Lg,E0).replace(Xg,"")}function Nw(e,t,n){e=Je(e),t=jr(t);var u=e.length;n=n===s?u:cs(Me(n),0,u);var l=n;return n-=t.length,n>=0&&e.slice(n,l)==t}function Lw(e){return e=Je(e),e&&pg.test(e)?e.replace(Ku,x0):e}function Fw(e){return e=Je(e),e&&_g.test(e)?e.replace(Sa,"\\$&"):e}var Mw=Rs(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),jw=Rs(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),zw=ml("toLowerCase");function Uw(e,t,n){e=Je(e),t=Me(t);var u=t?xs(e):0;if(!t||u>=t)return e;var l=(t-u)/2;return fo(Xn(l),n)+e+fo(Yn(l),n)}function qw(e,t,n){e=Je(e),t=Me(t);var u=t?xs(e):0;return t&&u<t?e+fo(t-u,n):e}function $w(e,t,n){e=Je(e),t=Me(t);var u=t?xs(e):0;return t&&u<t?fo(t-u,n)+e:e}function Hw(e,t,n){return n||t==null?t=0:t&&(t=+t),J0(Je(e).replace(Oa,""),t||0)}function Bw(e,t,n){return(n?Er(e,t,n):t===s)?t=1:t=Me(t),nc(Je(e),t)}function kw(){var e=arguments,t=Je(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Vw=Rs(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Kw(e,t,n){return n&&typeof n!="number"&&Er(e,t,n)&&(t=n=s),n=n===s?gi:n>>>0,n?(e=Je(e),e&&(typeof t=="string"||t!=null&&!Ac(t))&&(t=jr(t),!t&&Es(e))?Ji(ni(e),0,n):e.split(t,n)):[]}var Gw=Rs(function(e,t,n){return e+(n?" ":"")+Tc(t)});function Ww(e,t,n){return e=Je(e),n=n==null?0:cs(Me(n),0,e.length),t=jr(t),e.slice(n,n+t.length)==t}function Jw(e,t,n){var u=p.templateSettings;n&&Er(e,t,n)&&(t=s),e=Je(e),t=Po({},t,u,Pl);var l=Po({},t.imports,u.imports,Pl),v=cr(l),w=Ha(l,v),b,O,q=0,$=t.interpolate||jn,K="__p += '",ue=ka((t.escape||jn).source+"|"+$.source+"|"+($===Gu?Ag:jn).source+"|"+(t.evaluate||jn).source+"|$","g"),ve="//# sourceURL="+(Qe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++s0+"]")+`
`;e.replace(ue,function(Ie,$e,Be,Ur,xr,qr){return Be||(Be=Ur),K+=e.slice(q,qr).replace(Fg,I0),$e&&(b=!0,K+=`' +
__e(`+$e+`) +
'`),xr&&(O=!0,K+=`';
`+xr+`;
__p += '`),Be&&(K+=`' +
((__t = (`+Be+`)) == null ? '' : __t) +
'`),q=qr+Ie.length,Ie}),K+=`';
`;var xe=Qe.call(t,"variable")&&t.variable;if(!xe)K=`with (obj) {
`+K+`
}
`;else if(Sg.test(xe))throw new Re(S);K=(O?K.replace(hg,""):K).replace(lg,"$1").replace(fg,"$1;"),K="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+K+`return __p
}`;var ze=mf(function(){return We(v,ve+"return "+K).apply(s,w)});if(ze.source=K,Oc(ze))throw ze;return ze}function Zw(e){return Je(e).toLowerCase()}function Qw(e){return Je(e).toUpperCase()}function Yw(e,t,n){if(e=Je(e),e&&(n||t===s))return Sh(e);if(!e||!(t=jr(t)))return e;var u=ni(e),l=ni(t),v=Oh(u,l),w=Ah(u,l)+1;return Ji(u,v,w).join("")}function Xw(e,t,n){if(e=Je(e),e&&(n||t===s))return e.slice(0,Rh(e)+1);if(!e||!(t=jr(t)))return e;var u=ni(e),l=Ah(u,ni(t))+1;return Ji(u,0,l).join("")}function e_(e,t,n){if(e=Je(e),e&&(n||t===s))return e.replace(Oa,"");if(!e||!(t=jr(t)))return e;var u=ni(e),l=Oh(u,ni(t));return Ji(u,l).join("")}function t_(e,t){var n=Wp,u=Jp;if(Ot(t)){var l="separator"in t?t.separator:l;n="length"in t?Me(t.length):n,u="omission"in t?jr(t.omission):u}e=Je(e);var v=e.length;if(Es(e)){var w=ni(e);v=w.length}if(n>=v)return e;var b=n-xs(u);if(b<1)return u;var O=w?Ji(w,0,b).join(""):e.slice(0,b);if(l===s)return O+u;if(w&&(b+=O.length-b),Ac(l)){if(e.slice(b).search(l)){var q,$=O;for(l.global||(l=ka(l.source,Je(Wu.exec(l))+"g")),l.lastIndex=0;q=l.exec($);)var K=q.index;O=O.slice(0,K===s?b:K)}}else if(e.indexOf(jr(l),b)!=b){var ue=O.lastIndexOf(l);ue>-1&&(O=O.slice(0,ue))}return O+u}function r_(e){return e=Je(e),e&&dg.test(e)?e.replace(Vu,T0):e}var i_=Rs(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Tc=ml("toUpperCase");function yf(e,t,n){return e=Je(e),t=n?s:t,t===s?S0(e)?L0(e):y0(e):e.match(t)||[]}var mf=Ue(function(e,t){try{return Fr(e,s,t)}catch(n){return Oc(n)?n:new Re(n)}}),s_=Di(function(e,t){return Kr(t,function(n){n=mi(n),Ri(e,n,Pc(e[n],e))}),e});function n_(e){var t=e==null?0:e.length,n=Ee();return e=t?It(e,function(u){if(typeof u[1]!="function")throw new Gr(m);return[n(u[0]),u[1]]}):[],Ue(function(u){for(var l=-1;++l<t;){var v=e[l];if(Fr(v[0],this,u))return Fr(v[1],this,u)}})}function o_(e){return Tv(Jr(e,be))}function Dc(e){return function(){return e}}function a_(e,t){return e==null||e!==e?t:e}var c_=_l(),u_=_l(!0);function Dr(e){return e}function Nc(e){return Zh(typeof e=="function"?e:Jr(e,be))}function h_(e){return Yh(Jr(e,be))}function l_(e,t){return Xh(e,Jr(t,be))}var f_=Ue(function(e,t){return function(n){return on(n,e,t)}}),d_=Ue(function(e,t){return function(n){return on(e,n,t)}});function Lc(e,t,n){var u=cr(t),l=no(t,u);n==null&&!(Ot(t)&&(l.length||!u.length))&&(n=t,t=e,e=this,l=no(t,cr(t)));var v=!(Ot(n)&&"chain"in n)||!!n.chain,w=Li(e);return Kr(l,function(b){var O=t[b];e[b]=O,w&&(e.prototype[b]=function(){var q=this.__chain__;if(v||q){var $=e(this.__wrapped__),K=$.__actions__=Cr(this.__actions__);return K.push({func:O,args:arguments,thisArg:e}),$.__chain__=q,$}return O.apply(e,Bi([this.value()],arguments))})}),e}function p_(){return lr._===this&&(lr._=q0),this}function Fc(){}function g_(e){return e=Me(e),Ue(function(t){return el(t,e)})}var v_=fc(It),y_=fc(bh),m_=fc(ja);function wf(e){return wc(e)?za(mi(e)):Wv(e)}function w_(e){return function(t){return e==null?s:us(e,t)}}var __=El(),b_=El(!0);function Mc(){return[]}function jc(){return!1}function E_(){return{}}function x_(){return""}function I_(){return!0}function P_(e,t){if(e=Me(e),e<1||e>$i)return[];var n=gi,u=gr(e,gi);t=Ee(t),e-=gi;for(var l=$a(u,t);++n<e;)t(n);return l}function S_(e){return Le(e)?It(e,mi):zr(e)?[e]:Cr(zl(Je(e)))}function O_(e){var t=++z0;return Je(e)+t}var A_=lo(function(e,t){return e+t},0),C_=dc("ceil"),R_=lo(function(e,t){return e/t},1),T_=dc("floor");function D_(e){return e&&e.length?so(e,Dr,Ya):s}function N_(e,t){return e&&e.length?so(e,Ee(t,2),Ya):s}function L_(e){return Ih(e,Dr)}function F_(e,t){return Ih(e,Ee(t,2))}function M_(e){return e&&e.length?so(e,Dr,rc):s}function j_(e,t){return e&&e.length?so(e,Ee(t,2),rc):s}var z_=lo(function(e,t){return e*t},1),U_=dc("round"),q_=lo(function(e,t){return e-t},0);function $_(e){return e&&e.length?qa(e,Dr):0}function H_(e,t){return e&&e.length?qa(e,Ee(t,2)):0}return p.after=h1,p.ary=Jl,p.assign=Q1,p.assignIn=hf,p.assignInWith=Po,p.assignWith=Y1,p.at=X1,p.before=Zl,p.bind=Pc,p.bindAll=s_,p.bindKey=Ql,p.castArray=E1,p.chain=Kl,p.chunk=Ty,p.compact=Dy,p.concat=Ny,p.cond=n_,p.conforms=o_,p.constant=Dc,p.countBy=$m,p.create=ew,p.curry=Yl,p.curryRight=Xl,p.debounce=ef,p.defaults=tw,p.defaultsDeep=rw,p.defer=l1,p.delay=f1,p.difference=Ly,p.differenceBy=Fy,p.differenceWith=My,p.drop=jy,p.dropRight=zy,p.dropRightWhile=Uy,p.dropWhile=qy,p.fill=$y,p.filter=Bm,p.flatMap=Km,p.flatMapDeep=Gm,p.flatMapDepth=Wm,p.flatten=Hl,p.flattenDeep=Hy,p.flattenDepth=By,p.flip=d1,p.flow=c_,p.flowRight=u_,p.fromPairs=ky,p.functions=uw,p.functionsIn=hw,p.groupBy=Jm,p.initial=Ky,p.intersection=Gy,p.intersectionBy=Wy,p.intersectionWith=Jy,p.invert=fw,p.invertBy=dw,p.invokeMap=Qm,p.iteratee=Nc,p.keyBy=Ym,p.keys=cr,p.keysIn=Tr,p.map=wo,p.mapKeys=gw,p.mapValues=vw,p.matches=h_,p.matchesProperty=l_,p.memoize=bo,p.merge=yw,p.mergeWith=lf,p.method=f_,p.methodOf=d_,p.mixin=Lc,p.negate=Eo,p.nthArg=g_,p.omit=mw,p.omitBy=ww,p.once=p1,p.orderBy=Xm,p.over=v_,p.overArgs=g1,p.overEvery=y_,p.overSome=m_,p.partial=Sc,p.partialRight=tf,p.partition=e1,p.pick=_w,p.pickBy=ff,p.property=wf,p.propertyOf=w_,p.pull=Xy,p.pullAll=kl,p.pullAllBy=em,p.pullAllWith=tm,p.pullAt=rm,p.range=__,p.rangeRight=b_,p.rearg=v1,p.reject=i1,p.remove=im,p.rest=y1,p.reverse=xc,p.sampleSize=n1,p.set=Ew,p.setWith=xw,p.shuffle=o1,p.slice=sm,p.sortBy=u1,p.sortedUniq=lm,p.sortedUniqBy=fm,p.split=Kw,p.spread=m1,p.tail=dm,p.take=pm,p.takeRight=gm,p.takeRightWhile=vm,p.takeWhile=ym,p.tap=Dm,p.throttle=w1,p.thru=mo,p.toArray=af,p.toPairs=df,p.toPairsIn=pf,p.toPath=S_,p.toPlainObject=uf,p.transform=Iw,p.unary=_1,p.union=mm,p.unionBy=wm,p.unionWith=_m,p.uniq=bm,p.uniqBy=Em,p.uniqWith=xm,p.unset=Pw,p.unzip=Ic,p.unzipWith=Vl,p.update=Sw,p.updateWith=Ow,p.values=Ns,p.valuesIn=Aw,p.without=Im,p.words=yf,p.wrap=b1,p.xor=Pm,p.xorBy=Sm,p.xorWith=Om,p.zip=Am,p.zipObject=Cm,p.zipObjectDeep=Rm,p.zipWith=Tm,p.entries=df,p.entriesIn=pf,p.extend=hf,p.extendWith=Po,Lc(p,p),p.add=A_,p.attempt=mf,p.camelCase=Dw,p.capitalize=gf,p.ceil=C_,p.clamp=Cw,p.clone=x1,p.cloneDeep=P1,p.cloneDeepWith=S1,p.cloneWith=I1,p.conformsTo=O1,p.deburr=vf,p.defaultTo=a_,p.divide=R_,p.endsWith=Nw,p.eq=ai,p.escape=Lw,p.escapeRegExp=Fw,p.every=Hm,p.find=km,p.findIndex=ql,p.findKey=iw,p.findLast=Vm,p.findLastIndex=$l,p.findLastKey=sw,p.floor=T_,p.forEach=Gl,p.forEachRight=Wl,p.forIn=nw,p.forInRight=ow,p.forOwn=aw,p.forOwnRight=cw,p.get=Cc,p.gt=A1,p.gte=C1,p.has=lw,p.hasIn=Rc,p.head=Bl,p.identity=Dr,p.includes=Zm,p.indexOf=Vy,p.inRange=Rw,p.invoke=pw,p.isArguments=fs,p.isArray=Le,p.isArrayBuffer=R1,p.isArrayLike=Rr,p.isArrayLikeObject=qt,p.isBoolean=T1,p.isBuffer=Zi,p.isDate=D1,p.isElement=N1,p.isEmpty=L1,p.isEqual=F1,p.isEqualWith=M1,p.isError=Oc,p.isFinite=j1,p.isFunction=Li,p.isInteger=rf,p.isLength=xo,p.isMap=sf,p.isMatch=z1,p.isMatchWith=U1,p.isNaN=q1,p.isNative=$1,p.isNil=B1,p.isNull=H1,p.isNumber=nf,p.isObject=Ot,p.isObjectLike=Nt,p.isPlainObject=fn,p.isRegExp=Ac,p.isSafeInteger=k1,p.isSet=of,p.isString=Io,p.isSymbol=zr,p.isTypedArray=Ds,p.isUndefined=V1,p.isWeakMap=K1,p.isWeakSet=G1,p.join=Zy,p.kebabCase=Mw,p.last=Qr,p.lastIndexOf=Qy,p.lowerCase=jw,p.lowerFirst=zw,p.lt=W1,p.lte=J1,p.max=D_,p.maxBy=N_,p.mean=L_,p.meanBy=F_,p.min=M_,p.minBy=j_,p.stubArray=Mc,p.stubFalse=jc,p.stubObject=E_,p.stubString=x_,p.stubTrue=I_,p.multiply=z_,p.nth=Yy,p.noConflict=p_,p.noop=Fc,p.now=_o,p.pad=Uw,p.padEnd=qw,p.padStart=$w,p.parseInt=Hw,p.random=Tw,p.reduce=t1,p.reduceRight=r1,p.repeat=Bw,p.replace=kw,p.result=bw,p.round=U_,p.runInContext=P,p.sample=s1,p.size=a1,p.snakeCase=Vw,p.some=c1,p.sortedIndex=nm,p.sortedIndexBy=om,p.sortedIndexOf=am,p.sortedLastIndex=cm,p.sortedLastIndexBy=um,p.sortedLastIndexOf=hm,p.startCase=Gw,p.startsWith=Ww,p.subtract=q_,p.sum=$_,p.sumBy=H_,p.template=Jw,p.times=P_,p.toFinite=Fi,p.toInteger=Me,p.toLength=cf,p.toLower=Zw,p.toNumber=Yr,p.toSafeInteger=Z1,p.toString=Je,p.toUpper=Qw,p.trim=Yw,p.trimEnd=Xw,p.trimStart=e_,p.truncate=t_,p.unescape=r_,p.uniqueId=O_,p.upperCase=i_,p.upperFirst=Tc,p.each=Gl,p.eachRight=Wl,p.first=Bl,Lc(p,function(){var e={};return vi(p,function(t,n){Qe.call(p.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),p.VERSION=o,Kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),Kr(["drop","take"],function(e,t){He.prototype[e]=function(n){n=n===s?1:ir(Me(n),0);var u=this.__filtered__&&!t?new He(this):this.clone();return u.__filtered__?u.__takeCount__=gr(n,u.__takeCount__):u.__views__.push({size:gr(n,gi),type:e+(u.__dir__<0?"Right":"")}),u},He.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Kr(["filter","map","takeWhile"],function(e,t){var n=t+1,u=n==Hu||n==Xp;He.prototype[e]=function(l){var v=this.clone();return v.__iteratees__.push({iteratee:Ee(l,3),type:n}),v.__filtered__=v.__filtered__||u,v}}),Kr(["head","last"],function(e,t){var n="take"+(t?"Right":"");He.prototype[e]=function(){return this[n](1).value()[0]}}),Kr(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");He.prototype[e]=function(){return this.__filtered__?new He(this):this[n](1)}}),He.prototype.compact=function(){return this.filter(Dr)},He.prototype.find=function(e){return this.filter(e).head()},He.prototype.findLast=function(e){return this.reverse().find(e)},He.prototype.invokeMap=Ue(function(e,t){return typeof e=="function"?new He(this):this.map(function(n){return on(n,e,t)})}),He.prototype.reject=function(e){return this.filter(Eo(Ee(e)))},He.prototype.slice=function(e,t){e=Me(e);var n=this;return n.__filtered__&&(e>0||t<0)?new He(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==s&&(t=Me(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},He.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},He.prototype.toArray=function(){return this.take(gi)},vi(He.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),l=p[u?"take"+(t=="last"?"Right":""):t],v=u||/^find/.test(t);l&&(p.prototype[t]=function(){var w=this.__wrapped__,b=u?[1]:arguments,O=w instanceof He,q=b[0],$=O||Le(w),K=function($e){var Be=l.apply(p,Bi([$e],b));return u&&ue?Be[0]:Be};$&&n&&typeof q=="function"&&q.length!=1&&(O=$=!1);var ue=this.__chain__,ve=!!this.__actions__.length,xe=v&&!ue,ze=O&&!ve;if(!v&&$){w=ze?w:new He(this);var Ie=e.apply(w,b);return Ie.__actions__.push({func:mo,args:[K],thisArg:s}),new Wr(Ie,ue)}return xe&&ze?e.apply(this,b):(Ie=this.thru(K),xe?u?Ie.value()[0]:Ie.value():Ie)})}),Kr(["pop","push","shift","sort","splice","unshift"],function(e){var t=Bn[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var l=arguments;if(u&&!this.__chain__){var v=this.value();return t.apply(Le(v)?v:[],l)}return this[n](function(w){return t.apply(Le(w)?w:[],l)})}}),vi(He.prototype,function(e,t){var n=p[t];if(n){var u=n.name+"";Qe.call(Os,u)||(Os[u]=[]),Os[u].push({name:t,func:n})}}),Os[ho(s,Et).name]=[{name:"wrapper",func:s}],He.prototype.clone=rv,He.prototype.reverse=iv,He.prototype.value=sv,p.prototype.at=Nm,p.prototype.chain=Lm,p.prototype.commit=Fm,p.prototype.next=Mm,p.prototype.plant=zm,p.prototype.reverse=Um,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=qm,p.prototype.first=p.prototype.head,Ys&&(p.prototype[Ys]=jm),p},Is=F0();ss?((ss.exports=Is)._=Is,Na._=Is):lr._=Is}).call(Hs)})(ca,ca.exports);var dp=Object.defineProperty,pp=Object.defineProperties,gp=Object.getOwnPropertyDescriptors,Ru=Object.getOwnPropertySymbols,vp=Object.prototype.hasOwnProperty,yp=Object.prototype.propertyIsEnumerable,Tu=(f,r,s)=>r in f?dp(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Cn=(f,r)=>{for(var s in r||(r={}))vp.call(r,s)&&Tu(f,s,r[s]);if(Ru)for(var s of Ru(r))yp.call(r,s)&&Tu(f,s,r[s]);return f},mp=(f,r)=>pp(f,gp(r));function Ui(f,r,s){var o;const a=(0,g.DQ)(f);return((o=r.rpcMap)==null?void 0:o[a.reference])||`${fp}?chainId=${a.namespace}:${a.reference}&projectId=${s}`}function rs(f){return f.includes(":")?f.split(":")[1]:f}function Du(f){return f.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function wp(f,r){const s=Object.keys(r.namespaces).filter(a=>a.includes(f));if(!s.length)return[];const o=[];return s.forEach(a=>{const d=r.namespaces[a].accounts;o.push(...d)}),o}function _p(f={},r={}){const s=Nu(f),o=Nu(r);return ca.exports.merge(s,o)}function Nu(f){var r,s,o,a;const d={};if(!(0,g.L5)(f))return d;for(const[m,S]of Object.entries(f)){const M=(0,g.gp)(m)?[m]:S.chains,X=S.methods||[],pe=S.events||[],be=S.rpcMap||{},we=(0,g.M)(m);d[we]=mp(Cn(Cn({},d[we]),S),{chains:(0,g.eG)(M,(r=d[we])==null?void 0:r.chains),methods:(0,g.eG)(X,(s=d[we])==null?void 0:s.methods),events:(0,g.eG)(pe,(o=d[we])==null?void 0:o.events),rpcMap:Cn(Cn({},be),(a=d[we])==null?void 0:a.rpcMap)})}return d}function bp(f){return f.includes(":")?f.split(":")[2]:f}function Ep(f){const r={};for(const[s,o]of Object.entries(f)){const a=o.methods||[],d=o.events||[],m=o.accounts||[],S=(0,g.gp)(s)?[s]:o.chains?o.chains:Du(o.accounts);r[s]={chains:S,methods:a,events:d,accounts:m}}return r}function ua(f){return typeof f=="number"?f:f.includes("0x")?parseInt(f,16):f.includes(":")?Number(f.split(":")[1]):Number(f)}const Lu={},_t=f=>Lu[f],ha=(f,r)=>{Lu[f]=r};class xp{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=rs(s);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Ip{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(parseInt(r),s),this.chainId=parseInt(r),this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,s){const o=s||Ui(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new Ou(o,_t("disableProviderPing")))}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=parseInt(rs(s));r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}async handleSwitchChain(r){var s,o;let a=r.request.params?(s=r.request.params[0])==null?void 0:s.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const d=parseInt(a,16);if(this.isChainApproved(d))this.setDefaultChain(`${d}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:a}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${d}`);else throw new Error(`Failed to switch to chain 'eip155:${d}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class Pp{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=rs(s);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Sp{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=rs(s);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Op{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{const o=this.getCardanoRPCUrl(s),a=rs(s);r[a]=this.createHttpProvider(a,o)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}getCardanoRPCUrl(r){const s=this.namespace.rpcMap;if(s)return s[r]}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||this.getCardanoRPCUrl(r);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Ap{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=rs(s);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Cp{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){this.httpProviders[r]||this.setHttpProvider(r,s),this.chainId=r,this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;const a=rs(s);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Xr(new ts(o,_t("disableProviderPing")))}}class Rp{constructor(r){this.name="near",this.namespace=r.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,s){if(this.chainId=r,!this.httpProviders[r]){const o=s||Ui(`${this.name}:${r}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,o)}this.events.emit(Si.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(s=>s.split(":")[1]===this.chainId.toString()).map(s=>s.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(s=>{var o;r[s]=this.createHttpProvider(s,(o=this.namespace.rpcMap)==null?void 0:o[s])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,s=this.httpProviders[r];if(typeof s>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return s}setHttpProvider(r,s){const o=this.createHttpProvider(r,s);o&&(this.httpProviders[r]=o)}createHttpProvider(r,s){const o=s||Ui(r,this.namespace);return typeof o>"u"?void 0:new Xr(new ts(o,_t("disableProviderPing")))}}var Tp=Object.defineProperty,Dp=Object.defineProperties,Np=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Lp=Object.prototype.hasOwnProperty,Fp=Object.prototype.propertyIsEnumerable,Mu=(f,r,s)=>r in f?Tp(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Rn=(f,r)=>{for(var s in r||(r={}))Lp.call(r,s)&&Mu(f,s,r[s]);if(Fu)for(var s of Fu(r))Fp.call(r,s)&&Mu(f,s,r[s]);return f},la=(f,r)=>Dp(f,Np(r));class fa{constructor(r){this.events=new(ie()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,te.pino)((0,te.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||Au})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const s=new fa(r);return await s.initialize(),s}async request(r,s){const[o,a]=this.validateChain(s);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Rn({},r),chainId:`${o}:${a}`,topic:this.session.topic})}sendAsync(r,s,o){this.request(r,o).then(a=>s(null,a)).catch(a=>s(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:(0,g.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,s){this.events.on(r,s)}once(r,s){this.events.once(r,s)}removeListener(r,s){this.events.removeListener(r,s)}off(r,s){this.events.off(r,s)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let s=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(s>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:a}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await a().then(d=>{this.session=d,this.namespaces||(this.namespaces=Ep(d.namespaces),this.persist("namespaces",this.namespaces))}).catch(d=>{if(d.message!==bu)throw d;s++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,s){try{if(!this.session)return;const[o,a]=this.validateChain(r);this.getProvider(o).setDefaultChain(a,s)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const s=this.client.pairing.getAll();if((0,g.qt)(s)){for(const o of s)r.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${s.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await aa.init({logger:this.providerOpts.logger||Au,relayUrl:this.providerOpts.relayUrl||up,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(s=>(0,g.M)(s)))];ha("client",this.client),ha("events",this.events),ha("disableProviderPing",this.disableProviderPing),r.forEach(s=>{if(!this.session)return;const o=wp(s,this.session),a=Du(o),d=_p(this.namespaces,this.optionalNamespaces),m=la(Rn({},d[s]),{accounts:o,chains:a});switch(s){case"eip155":this.rpcProviders[s]=new Ip({namespace:m});break;case"solana":this.rpcProviders[s]=new Pp({namespace:m});break;case"cosmos":this.rpcProviders[s]=new Sp({namespace:m});break;case"polkadot":this.rpcProviders[s]=new xp({namespace:m});break;case"cip34":this.rpcProviders[s]=new Op({namespace:m});break;case"elrond":this.rpcProviders[s]=new Ap({namespace:m});break;case"multiversx":this.rpcProviders[s]=new Cp({namespace:m});break;case"near":this.rpcProviders[s]=new Rp({namespace:m});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:s}=r,{event:o}=s;if(o.name==="accountsChanged"){const a=o.data;a&&(0,g.qt)(a)&&this.events.emit("accountsChanged",a.map(bp))}else if(o.name==="chainChanged"){const a=s.chainId,d=s.event.data,m=(0,g.M)(a),S=ua(a)!==ua(d)?`${m}:${ua(d)}`:a;this.onChainChanged(S)}else this.events.emit(o.name,o.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:s})=>{var o;const{namespaces:a}=s,d=(o=this.client)==null?void 0:o.session.get(r);this.session=la(Rn({},d),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:s})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",la(Rn({},(0,g.D6)("USER_DISCONNECTED")),{data:r.topic}))}),this.on(Si.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var s;this.getProvider(r).updateNamespace((s=this.session)==null?void 0:s.namespaces[r])})}setNamespaces(r){const{namespaces:s,optionalNamespaces:o,sessionProperties:a}=r;s&&Object.keys(s).length&&(this.namespaces=s),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",s),this.persist("optionalNamespaces",o)}validateChain(r){const[s,o]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[s,o];if(s&&!Object.keys(this.namespaces||{}).map(m=>(0,g.M)(m)).includes(s))throw new Error(`Namespace '${s}' is not configured. Please call connect() first with namespace config.`);if(s&&o)return[s,o];const a=(0,g.M)(Object.keys(this.namespaces)[0]),d=this.rpcProviders[a].getDefaultChain();return[a,d]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,s=!1){var o;if(!this.namespaces)return;const[a,d]=this.validateChain(r);s||this.getProvider(a).setDefaultChain(d),((o=this.namespaces[a])!=null?o:this.namespaces[`${a}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,s){this.client.core.storage.setItem(`${Cu}/${r}`,s)}async getFromStore(r){return await this.client.core.storage.getItem(`${Cu}/${r}`)}}const Mp=fa,jp="wc",zp="ethereum_provider",Up=`${jp}@2:${zp}:`,qp="https://rpc.walletconnect.com/v1/",da=["eth_sendTransaction","personal_sign"],ju=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],pa=["chainChanged","accountsChanged"],zu=["chainChanged","accountsChanged","message","disconnect","connect"];var $p=Object.defineProperty,Hp=Object.defineProperties,Bp=Object.getOwnPropertyDescriptors,Uu=Object.getOwnPropertySymbols,kp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,qu=(f,r,s)=>r in f?$p(f,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[r]=s,Bs=(f,r)=>{for(var s in r||(r={}))kp.call(r,s)&&qu(f,s,r[s]);if(Uu)for(var s of Uu(r))Vp.call(r,s)&&qu(f,s,r[s]);return f},$u=(f,r)=>Hp(f,Bp(r));function Tn(f){return Number(f[0].split(":")[1])}function ga(f){return`0x${f.toString(16)}`}function Kp(f){const{chains:r,optionalChains:s,methods:o,optionalMethods:a,events:d,optionalEvents:m,rpcMap:S}=f;if(!(0,g.qt)(r))throw new Error("Invalid chains");const M={chains:r,methods:o||da,events:d||pa,rpcMap:Bs({},r.length?{[Tn(r)]:S[Tn(r)]}:{})},X=d==null?void 0:d.filter(Ke=>!pa.includes(Ke)),pe=o==null?void 0:o.filter(Ke=>!da.includes(Ke));if(!s&&!m&&!a&&!(X!=null&&X.length)&&!(pe!=null&&pe.length))return{required:r.length?M:void 0};const be=(X==null?void 0:X.length)&&(pe==null?void 0:pe.length)||!s,we={chains:[...new Set(be?M.chains.concat(s||[]):s)],methods:[...new Set(M.methods.concat(a!=null&&a.length?a:ju))],events:[...new Set(M.events.concat(m!=null&&m.length?m:zu))],rpcMap:S};return{required:r.length?M:void 0,optional:s.length?we:void 0}}class va{constructor(){this.events=new N.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Up,this.on=(r,s)=>(this.events.on(r,s),this),this.once=(r,s)=>(this.events.once(r,s),this),this.removeListener=(r,s)=>(this.events.removeListener(r,s),this),this.off=(r,s)=>(this.events.off(r,s),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const s=new va;return await s.initialize(r),s}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,s){this.signer.sendAsync(r,s,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:s,optional:o}=Kp(this.rpc);try{const a=await new Promise(async(m,S)=>{var M;this.rpc.showQrModal&&((M=this.modal)==null||M.subscribeModal(X=>{!X.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),S(new Error("Connection request reset. Please try again.")))})),await this.signer.connect($u(Bs({namespaces:Bs({},s&&{[this.namespace]:s})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(X=>{m(X)}).catch(X=>{S(new Error(X.message))})});if(!a)return;const d=(0,g.gu)(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:d),this.setAccounts(d),this.events.emit("connect",{chainId:ga(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:s}=r,{event:o}=s;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const s=parseInt(r);this.chainId=s,this.events.emit("chainChanged",ga(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",$u(Bs({},(0,g.D6)("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var s,o;this.rpc.showQrModal&&((s=this.modal)==null||s.closeModal(),(o=this.modal)==null||o.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const s=r.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",ga(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const s=this.parseChainId(r);this.chainId=s,this.switchEthereumChain(s)}}parseAccountId(r){const[s,o,a]=r.split(":");return{chainId:`${s}:${o}`,address:a}}setAccounts(r){this.accounts=r.filter(s=>this.parseChainId(this.parseAccountId(s).chainId)===this.chainId).map(s=>this.parseAccountId(s).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var s,o;const a=(s=r==null?void 0:r.chains)!=null?s:[],d=(o=r==null?void 0:r.optionalChains)!=null?o:[],m=a.concat(d);if(!m.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const S=a.length?(r==null?void 0:r.methods)||da:[],M=a.length?(r==null?void 0:r.events)||pa:[],X=(r==null?void 0:r.optionalMethods)||[],pe=(r==null?void 0:r.optionalEvents)||[],be=(r==null?void 0:r.rpcMap)||this.buildRpcMap(m,r.projectId),we=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(Ke=>this.formatChainId(Ke)),optionalChains:d.map(Ke=>this.formatChainId(Ke)),methods:S,events:M,optionalMethods:X,optionalEvents:pe,rpcMap:be,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:we,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,s){const o={};return r.forEach(a=>{o[a]=this.getRpcUrl(a,s)}),o}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?Tn(this.rpc.chains):Tn(this.rpc.optionalChains),this.signer=await Mp.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let s;try{const{WalletConnectModal:o}=await U.e(8690).then(U.bind(U,8690));s=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(s)try{this.modal=new s(Bs({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:s,optionalChains:o,rpcMap:a}=r;s&&(0,g.qt)(s)&&(this.rpc.chains=s.map(d=>this.formatChainId(d)),s.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)})),o&&(0,g.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(d=>this.formatChainId(d)),o.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)}))}getRpcUrl(r,s){var o;return((o=this.rpc.rpcMap)==null?void 0:o[r])||`${qp}?chainId=eip155:${r}&projectId=${s||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),s=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:s==null?void 0:s.accounts),this.setAccounts(s==null?void 0:s.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(s=>this.parseAccount(s))}}const Gp=va},36900:function(Te,T,U){"use strict";U.d(T,{q:function(){return N}});class N{}},15890:function(Te,T,U){"use strict";U.r(T),U.d(T,{IEvents:function(){return N.q}});var N=U(36900)},15782:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.HEARTBEAT_EVENTS=T.HEARTBEAT_INTERVAL=void 0;const N=U(46196);T.HEARTBEAT_INTERVAL=N.FIVE_SECONDS,T.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},95635:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),U(47108).__exportStar(U(15782),T)},20538:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.HeartBeat=void 0;const N=U(47108),ie=U(72100),g=U(46196),he=U(88490),H=U(95635);class te extends he.IHeartBeat{constructor(G){super(G),this.events=new ie.EventEmitter,this.interval=H.HEARTBEAT_INTERVAL,this.interval=(G==null?void 0:G.interval)||H.HEARTBEAT_INTERVAL}static init(G){return N.__awaiter(this,void 0,void 0,function*(){const Y=new te(G);return yield Y.init(),Y})}init(){return N.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(G,Y){this.events.on(G,Y)}once(G,Y){this.events.once(G,Y)}off(G,Y){this.events.off(G,Y)}removeListener(G,Y){this.events.removeListener(G,Y)}initialize(){return N.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),g.toMiliseconds(this.interval))})}pulse(){this.events.emit(H.HEARTBEAT_EVENTS.pulse)}}T.HeartBeat=te},37875:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0});const N=U(47108);N.__exportStar(U(20538),T),N.__exportStar(U(88490),T),N.__exportStar(U(95635),T)},54554:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IHeartBeat=void 0;const N=U(15890);class ie extends N.IEvents{constructor(he){super()}}T.IHeartBeat=ie},88490:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),U(47108).__exportStar(U(54554),T)},70891:function(Te,T,U){"use strict";var N;N={value:!0},N=void 0;const ie=U(47108),g=U(12634),he=ie.__importDefault(U(43564)),H=U(54961);class te{constructor(){this.localStorage=he.default}getKeys(){return ie.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ie.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(H.parseEntry)})}getItem(G){return ie.__awaiter(this,void 0,void 0,function*(){const Y=this.localStorage.getItem(G);if(Y!==null)return g.safeJsonParse(Y)})}setItem(G,Y){return ie.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(G,g.safeJsonStringify(Y))})}removeItem(G){return ie.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(G)})}}N=te,T.ZP=te},43564:function(Te,T,U){"use strict";(function(){"use strict";let N;function ie(){}N=ie,N.prototype.getItem=function(g){return this.hasOwnProperty(g)?String(this[g]):null},N.prototype.setItem=function(g,he){this[g]=String(he)},N.prototype.removeItem=function(g){delete this[g]},N.prototype.clear=function(){const g=this;Object.keys(g).forEach(function(he){g[he]=void 0,delete g[he]})},N.prototype.key=function(g){return g=g||0,Object.keys(this)[g]},N.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof U.g<"u"&&U.g.localStorage?Te.exports=U.g.localStorage:typeof window<"u"&&window.localStorage?Te.exports=window.localStorage:Te.exports=new ie})()},54961:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0});const N=U(47108);N.__exportStar(U(1941),T),N.__exportStar(U(79038),T)},1941:function(Te,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.IKeyValueStorage=void 0;class U{}T.IKeyValueStorage=U},79038:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.parseEntry=void 0;const N=U(12634);function ie(g){var he;return[g[0],N.safeJsonParse((he=g[1])!==null&&he!==void 0?he:"")]}T.parseEntry=ie},42392:function(Te,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PINO_CUSTOM_CONTEXT_KEY=T.PINO_LOGGER_DEFAULTS=void 0,T.PINO_LOGGER_DEFAULTS={level:"info"},T.PINO_CUSTOM_CONTEXT_KEY="custom_context"},71315:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.pino=void 0;const N=U(47108),ie=N.__importDefault(U(86984));Object.defineProperty(T,"pino",{enumerable:!0,get:function(){return ie.default}}),N.__exportStar(U(42392),T),N.__exportStar(U(48992),T)},48992:function(Te,T,U){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.generateChildLogger=T.formatChildLoggerContext=T.getLoggerContext=T.setBrowserLoggerContext=T.getBrowserLoggerContext=T.getDefaultLoggerOptions=void 0;const N=U(42392);function ie(G){return Object.assign(Object.assign({},G),{level:(G==null?void 0:G.level)||N.PINO_LOGGER_DEFAULTS.level})}T.getDefaultLoggerOptions=ie;function g(G,Y=N.PINO_CUSTOM_CONTEXT_KEY){return G[Y]||""}T.getBrowserLoggerContext=g;function he(G,Y,ne=N.PINO_CUSTOM_CONTEXT_KEY){return G[ne]=Y,G}T.setBrowserLoggerContext=he;function H(G,Y=N.PINO_CUSTOM_CONTEXT_KEY){let ne="";return typeof G.bindings>"u"?ne=g(G,Y):ne=G.bindings().context||"",ne}T.getLoggerContext=H;function te(G,Y,ne=N.PINO_CUSTOM_CONTEXT_KEY){const De=H(G,ne);return De.trim()?`${De}/${Y}`:Y}T.formatChildLoggerContext=te;function Pe(G,Y,ne=N.PINO_CUSTOM_CONTEXT_KEY){const De=te(G,Y,ne),_e=G.child({context:De});return he(_e,De,ne)}T.generateChildLogger=Pe},42995:function(){},52830:function(Te,T){var U=typeof self<"u"?self:this,N=function(){function g(){this.fetch=!1,this.DOMException=U.DOMException}return g.prototype=U,new g}();(function(g){var he=function(H){var te={searchParams:"URLSearchParams"in g,iterable:"Symbol"in g&&"iterator"in Symbol,blob:"FileReader"in g&&"Blob"in g&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in g,arrayBuffer:"ArrayBuffer"in g};function Pe(A){return A&&DataView.prototype.isPrototypeOf(A)}if(te.arrayBuffer)var G=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Y=ArrayBuffer.isView||function(A){return A&&G.indexOf(Object.prototype.toString.call(A))>-1};function ne(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function De(A){return typeof A!="string"&&(A=String(A)),A}function _e(A){var x={next:function(){var _=A.shift();return{done:_===void 0,value:_}}};return te.iterable&&(x[Symbol.iterator]=function(){return x}),x}function Fe(A){this.map={},A instanceof Fe?A.forEach(function(x,_){this.append(_,x)},this):Array.isArray(A)?A.forEach(function(x){this.append(x[0],x[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(x){this.append(x,A[x])},this)}Fe.prototype.append=function(A,x){A=ne(A),x=De(x);var _=this.map[A];this.map[A]=_?_+", "+x:x},Fe.prototype.delete=function(A){delete this.map[ne(A)]},Fe.prototype.get=function(A){return A=ne(A),this.has(A)?this.map[A]:null},Fe.prototype.has=function(A){return this.map.hasOwnProperty(ne(A))},Fe.prototype.set=function(A,x){this.map[ne(A)]=De(x)},Fe.prototype.forEach=function(A,x){for(var _ in this.map)this.map.hasOwnProperty(_)&&A.call(x,this.map[_],_,this)},Fe.prototype.keys=function(){var A=[];return this.forEach(function(x,_){A.push(_)}),_e(A)},Fe.prototype.values=function(){var A=[];return this.forEach(function(x){A.push(x)}),_e(A)},Fe.prototype.entries=function(){var A=[];return this.forEach(function(x,_){A.push([_,x])}),_e(A)},te.iterable&&(Fe.prototype[Symbol.iterator]=Fe.prototype.entries);function ce(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function rt(A){return new Promise(function(x,_){A.onload=function(){x(A.result)},A.onerror=function(){_(A.error)}})}function Lt(A){var x=new FileReader,_=rt(x);return x.readAsArrayBuffer(A),_}function Ye(A){var x=new FileReader,_=rt(x);return x.readAsText(A),_}function Xe(A){for(var x=new Uint8Array(A),_=new Array(x.length),me=0;me<x.length;me++)_[me]=String.fromCharCode(x[me]);return _.join("")}function Z(A){if(A.slice)return A.slice(0);var x=new Uint8Array(A.byteLength);return x.set(new Uint8Array(A)),x.buffer}function V(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:te.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:te.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:te.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():te.arrayBuffer&&te.blob&&Pe(A)?(this._bodyArrayBuffer=Z(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):te.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||Y(A))?this._bodyArrayBuffer=Z(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):te.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},te.blob&&(this.blob=function(){var A=ce(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ce(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Lt)}),this.text=function(){var A=ce(this);if(A)return A;if(this._bodyBlob)return Ye(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Xe(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},te.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var ee=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function oe(A){var x=A.toUpperCase();return ee.indexOf(x)>-1?x:A}function C(A,x){x=x||{};var _=x.body;if(A instanceof C){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,x.headers||(this.headers=new Fe(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!_&&A._bodyInit!=null&&(_=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new Fe(x.headers)),this.method=oe(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function B(A){var x=new FormData;return A.trim().split("&").forEach(function(_){if(_){var me=_.split("="),Ce=me.shift().replace(/\+/g," "),Q=me.join("=").replace(/\+/g," ");x.append(decodeURIComponent(Ce),decodeURIComponent(Q))}}),x}function W(A){var x=new Fe,_=A.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(me){var Ce=me.split(":"),Q=Ce.shift().trim();if(Q){var ae=Ce.join(":").trim();x.append(Q,ae)}}),x}V.call(C.prototype);function de(A,x){x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in x?x.statusText:"OK",this.headers=new Fe(x.headers),this.url=x.url||"",this._initBody(A)}V.call(de.prototype),de.prototype.clone=function(){return new de(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Fe(this.headers),url:this.url})},de.error=function(){var A=new de(null,{status:0,statusText:""});return A.type="error",A};var ye=[301,302,303,307,308];de.redirect=function(A,x){if(ye.indexOf(x)===-1)throw new RangeError("Invalid status code");return new de(null,{status:x,headers:{location:A}})},H.DOMException=g.DOMException;try{new H.DOMException}catch{H.DOMException=function(x,_){this.message=x,this.name=_;var me=Error(x);this.stack=me.stack},H.DOMException.prototype=Object.create(Error.prototype),H.DOMException.prototype.constructor=H.DOMException}function Se(A,x){return new Promise(function(_,me){var Ce=new C(A,x);if(Ce.signal&&Ce.signal.aborted)return me(new H.DOMException("Aborted","AbortError"));var Q=new XMLHttpRequest;function ae(){Q.abort()}Q.onload=function(){var se={status:Q.status,statusText:Q.statusText,headers:W(Q.getAllResponseHeaders()||"")};se.url="responseURL"in Q?Q.responseURL:se.headers.get("X-Request-URL");var re="response"in Q?Q.response:Q.responseText;_(new de(re,se))},Q.onerror=function(){me(new TypeError("Network request failed"))},Q.ontimeout=function(){me(new TypeError("Network request failed"))},Q.onabort=function(){me(new H.DOMException("Aborted","AbortError"))},Q.open(Ce.method,Ce.url,!0),Ce.credentials==="include"?Q.withCredentials=!0:Ce.credentials==="omit"&&(Q.withCredentials=!1),"responseType"in Q&&te.blob&&(Q.responseType="blob"),Ce.headers.forEach(function(se,re){Q.setRequestHeader(re,se)}),Ce.signal&&(Ce.signal.addEventListener("abort",ae),Q.onreadystatechange=function(){Q.readyState===4&&Ce.signal.removeEventListener("abort",ae)}),Q.send(typeof Ce._bodyInit>"u"?null:Ce._bodyInit)})}return Se.polyfill=!0,g.fetch||(g.fetch=Se,g.Headers=Fe,g.Request=C,g.Response=de),H.Headers=Fe,H.Request=C,H.Response=de,H.fetch=Se,Object.defineProperty(H,"__esModule",{value:!0}),H}({})})(N),N.fetch.ponyfill=!0,delete N.fetch.polyfill;var ie=N;T=ie.fetch,T.default=ie.fetch,T.fetch=ie.fetch,T.Headers=ie.Headers,T.Request=ie.Request,T.Response=ie.Response,Te.exports=T},72100:function(Te){"use strict";var T=typeof Reflect=="object"?Reflect:null,U=T&&typeof T.apply=="function"?T.apply:function(V,ee,oe){return Function.prototype.apply.call(V,ee,oe)},N;T&&typeof T.ownKeys=="function"?N=T.ownKeys:Object.getOwnPropertySymbols?N=function(V){return Object.getOwnPropertyNames(V).concat(Object.getOwnPropertySymbols(V))}:N=function(V){return Object.getOwnPropertyNames(V)};function ie(Z){console&&console.warn&&console.warn(Z)}var g=Number.isNaN||function(V){return V!==V};function he(){he.init.call(this)}Te.exports=he,Te.exports.once=Lt,he.EventEmitter=he,he.prototype._events=void 0,he.prototype._eventsCount=0,he.prototype._maxListeners=void 0;var H=10;function te(Z){if(typeof Z!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Z)}Object.defineProperty(he,"defaultMaxListeners",{enumerable:!0,get:function(){return H},set:function(Z){if(typeof Z!="number"||Z<0||g(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");H=Z}}),he.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},he.prototype.setMaxListeners=function(V){if(typeof V!="number"||V<0||g(V))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+V+".");return this._maxListeners=V,this};function Pe(Z){return Z._maxListeners===void 0?he.defaultMaxListeners:Z._maxListeners}he.prototype.getMaxListeners=function(){return Pe(this)},he.prototype.emit=function(V){for(var ee=[],oe=1;oe<arguments.length;oe++)ee.push(arguments[oe]);var C=V==="error",B=this._events;if(B!==void 0)C=C&&B.error===void 0;else if(!C)return!1;if(C){var W;if(ee.length>0&&(W=ee[0]),W instanceof Error)throw W;var de=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw de.context=W,de}var ye=B[V];if(ye===void 0)return!1;if(typeof ye=="function")U(ye,this,ee);else for(var Se=ye.length,A=Fe(ye,Se),oe=0;oe<Se;++oe)U(A[oe],this,ee);return!0};function G(Z,V,ee,oe){var C,B,W;if(te(ee),B=Z._events,B===void 0?(B=Z._events=Object.create(null),Z._eventsCount=0):(B.newListener!==void 0&&(Z.emit("newListener",V,ee.listener?ee.listener:ee),B=Z._events),W=B[V]),W===void 0)W=B[V]=ee,++Z._eventsCount;else if(typeof W=="function"?W=B[V]=oe?[ee,W]:[W,ee]:oe?W.unshift(ee):W.push(ee),C=Pe(Z),C>0&&W.length>C&&!W.warned){W.warned=!0;var de=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");de.name="MaxListenersExceededWarning",de.emitter=Z,de.type=V,de.count=W.length,ie(de)}return Z}he.prototype.addListener=function(V,ee){return G(this,V,ee,!1)},he.prototype.on=he.prototype.addListener,he.prototype.prependListener=function(V,ee){return G(this,V,ee,!0)};function Y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ne(Z,V,ee){var oe={fired:!1,wrapFn:void 0,target:Z,type:V,listener:ee},C=Y.bind(oe);return C.listener=ee,oe.wrapFn=C,C}he.prototype.once=function(V,ee){return te(ee),this.on(V,ne(this,V,ee)),this},he.prototype.prependOnceListener=function(V,ee){return te(ee),this.prependListener(V,ne(this,V,ee)),this},he.prototype.removeListener=function(V,ee){var oe,C,B,W,de;if(te(ee),C=this._events,C===void 0)return this;if(oe=C[V],oe===void 0)return this;if(oe===ee||oe.listener===ee)--this._eventsCount===0?this._events=Object.create(null):(delete C[V],C.removeListener&&this.emit("removeListener",V,oe.listener||ee));else if(typeof oe!="function"){for(B=-1,W=oe.length-1;W>=0;W--)if(oe[W]===ee||oe[W].listener===ee){de=oe[W].listener,B=W;break}if(B<0)return this;B===0?oe.shift():ce(oe,B),oe.length===1&&(C[V]=oe[0]),C.removeListener!==void 0&&this.emit("removeListener",V,de||ee)}return this},he.prototype.off=he.prototype.removeListener,he.prototype.removeAllListeners=function(V){var ee,oe,C;if(oe=this._events,oe===void 0)return this;if(oe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):oe[V]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete oe[V]),this;if(arguments.length===0){var B=Object.keys(oe),W;for(C=0;C<B.length;++C)W=B[C],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ee=oe[V],typeof ee=="function")this.removeListener(V,ee);else if(ee!==void 0)for(C=ee.length-1;C>=0;C--)this.removeListener(V,ee[C]);return this};function De(Z,V,ee){var oe=Z._events;if(oe===void 0)return[];var C=oe[V];return C===void 0?[]:typeof C=="function"?ee?[C.listener||C]:[C]:ee?rt(C):Fe(C,C.length)}he.prototype.listeners=function(V){return De(this,V,!0)},he.prototype.rawListeners=function(V){return De(this,V,!1)},he.listenerCount=function(Z,V){return typeof Z.listenerCount=="function"?Z.listenerCount(V):_e.call(Z,V)},he.prototype.listenerCount=_e;function _e(Z){var V=this._events;if(V!==void 0){var ee=V[Z];if(typeof ee=="function")return 1;if(ee!==void 0)return ee.length}return 0}he.prototype.eventNames=function(){return this._eventsCount>0?N(this._events):[]};function Fe(Z,V){for(var ee=new Array(V),oe=0;oe<V;++oe)ee[oe]=Z[oe];return ee}function ce(Z,V){for(;V+1<Z.length;V++)Z[V]=Z[V+1];Z.pop()}function rt(Z){for(var V=new Array(Z.length),ee=0;ee<V.length;++ee)V[ee]=Z[ee].listener||Z[ee];return V}function Lt(Z,V){return new Promise(function(ee,oe){function C(W){Z.removeListener(V,B),oe(W)}function B(){typeof Z.removeListener=="function"&&Z.removeListener("error",C),ee([].slice.call(arguments))}Xe(Z,V,B,{once:!0}),V!=="error"&&Ye(Z,C,{once:!0})})}function Ye(Z,V,ee){typeof Z.on=="function"&&Xe(Z,"error",V,ee)}function Xe(Z,V,ee,oe){if(typeof Z.on=="function")oe.once?Z.once(V,ee):Z.on(V,ee);else if(typeof Z.addEventListener=="function")Z.addEventListener(V,function C(B){oe.once&&Z.removeEventListener(V,C),ee(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Z)}},5899:function(Te,T,U){Te=U.nmd(Te);var N=200,ie="__lodash_hash_undefined__",g=1,he=2,H=9007199254740991,te="[object Arguments]",Pe="[object Array]",G="[object AsyncFunction]",Y="[object Boolean]",ne="[object Date]",De="[object Error]",_e="[object Function]",Fe="[object GeneratorFunction]",ce="[object Map]",rt="[object Number]",Lt="[object Null]",Ye="[object Object]",Xe="[object Promise]",Z="[object Proxy]",V="[object RegExp]",ee="[object Set]",oe="[object String]",C="[object Symbol]",B="[object Undefined]",W="[object WeakMap]",de="[object ArrayBuffer]",ye="[object DataView]",Se="[object Float32Array]",A="[object Float64Array]",x="[object Int8Array]",_="[object Int16Array]",me="[object Int32Array]",Ce="[object Uint8Array]",Q="[object Uint8ClampedArray]",ae="[object Uint16Array]",se="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ot=/^\[object .+?Constructor\]$/,mt=/^(?:0|[1-9]\d*)$/,qe={};qe[Se]=qe[A]=qe[x]=qe[_]=qe[me]=qe[Ce]=qe[Q]=qe[ae]=qe[se]=!0,qe[te]=qe[Pe]=qe[de]=qe[Y]=qe[ye]=qe[ne]=qe[De]=qe[_e]=qe[ce]=qe[rt]=qe[Ye]=qe[V]=qe[ee]=qe[oe]=qe[W]=!1;var $r=typeof U.g=="object"&&U.g&&U.g.Object===Object&&U.g,ui=typeof self=="object"&&self&&self.Object===Object&&self,at=$r||ui||Function("return this")(),F=T&&!T.nodeType&&T,j=F&&!0&&Te&&!Te.nodeType&&Te,R=j&&j.exports===F,h=R&&$r.process,E=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),ge=E&&E.isTypedArray;function Oe(y,I){for(var k=-1,le=y==null?0:y.length,st=0,Ne=[];++k<le;){var wt=y[k];I(wt,k,y)&&(Ne[st++]=wt)}return Ne}function ke(y,I){for(var k=-1,le=I.length,st=y.length;++k<le;)y[st+k]=I[k];return y}function dt(y,I){for(var k=-1,le=y==null?0:y.length;++k<le;)if(I(y[k],k,y))return!0;return!1}function Ve(y,I){for(var k=-1,le=Array(y);++k<y;)le[k]=I(k);return le}function et(y){return function(I){return y(I)}}function Ht(y,I){return y.has(I)}function ur(y,I){return y==null?void 0:y[I]}function Zt(y){var I=-1,k=Array(y.size);return y.forEach(function(le,st){k[++I]=[st,le]}),k}function Qt(y,I){return function(k){return y(I(k))}}function At(y){var I=-1,k=Array(y.size);return y.forEach(function(le){k[++I]=le}),k}var Ct=Array.prototype,Rt=Function.prototype,ct=Object.prototype,it=at["__core-js_shared__"],ut=Rt.toString,Ze=ct.hasOwnProperty,Bt=function(){var y=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Yt=ct.toString,sr=RegExp("^"+ut.call(Ze).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=R?at.Buffer:void 0,nr=at.Symbol,Ir=at.Uint8Array,or=ct.propertyIsEnumerable,Nr=Ct.splice,dr=nr?nr.toStringTag:void 0,Hr=Object.getOwnPropertySymbols,wi=Xt?Xt.isBuffer:void 0,_i=Qt(Object.keys,Object),hi=ji(at,"DataView"),bi=ji(at,"Map"),Pt=ji(at,"Promise"),Tt=ji(at,"Set"),Ft=ji(at,"WeakMap"),ht=ji(Object,"create"),Mt=Ei(hi),pt=Ei(bi),Dt=Ei(Pt),St=Ei(Tt),kt=Ei(Ft),jt=nr?nr.prototype:void 0,zt=jt?jt.valueOf:void 0;function lt(y){var I=-1,k=y==null?0:y.length;for(this.clear();++I<k;){var le=y[I];this.set(le[0],le[1])}}function Vt(){this.__data__=ht?ht(null):{},this.size=0}function Kt(y){var I=this.has(y)&&delete this.__data__[y];return this.size-=I?1:0,I}function Gt(y){var I=this.__data__;if(ht){var k=I[y];return k===ie?void 0:k}return Ze.call(I,y)?I[y]:void 0}function Wt(y){var I=this.__data__;return ht?I[y]!==void 0:Ze.call(I,y)}function dn(y,I){var k=this.__data__;return this.size+=this.has(y)?0:1,k[y]=ht&&I===void 0?ie:I,this}lt.prototype.clear=Vt,lt.prototype.delete=Kt,lt.prototype.get=Gt,lt.prototype.has=Wt,lt.prototype.set=dn;function Br(y){var I=-1,k=y==null?0:y.length;for(this.clear();++I<k;){var le=y[I];this.set(le[0],le[1])}}function pn(){this.__data__=[],this.size=0}function So(y){var I=this.__data__,k=gs(I,y);if(k<0)return!1;var le=I.length-1;return k==le?I.pop():Nr.call(I,k,1),--this.size,!0}function gn(y){var I=this.__data__,k=gs(I,y);return k<0?void 0:I[k][1]}function Ls(y){return gs(this.__data__,y)>-1}function ds(y,I){var k=this.__data__,le=gs(k,y);return le<0?(++this.size,k.push([y,I])):k[le][1]=I,this}Br.prototype.clear=pn,Br.prototype.delete=So,Br.prototype.get=gn,Br.prototype.has=Ls,Br.prototype.set=ds;function hr(y){var I=-1,k=y==null?0:y.length;for(this.clear();++I<k;){var le=y[I];this.set(le[0],le[1])}}function Lr(){this.size=0,this.__data__={hash:new lt,map:new(bi||Br),string:new lt}}function zc(y){var I=li(this,y).delete(y);return this.size-=I?1:0,I}function Xr(y){return li(this,y).get(y)}function Uc(y){return li(this,y).has(y)}function qc(y,I){var k=li(this,y),le=k.size;return k.set(y,I),this.size+=k.size==le?0:1,this}hr.prototype.clear=Lr,hr.prototype.delete=zc,hr.prototype.get=Xr,hr.prototype.has=Uc,hr.prototype.set=qc;function ps(y){var I=-1,k=y==null?0:y.length;for(this.__data__=new hr;++I<k;)this.add(y[I])}function Oo(y){return this.__data__.set(y,ie),this}function $c(y){return this.__data__.has(y)}ps.prototype.add=ps.prototype.push=Oo,ps.prototype.has=$c;function ei(y){var I=this.__data__=new Br(y);this.size=I.size}function vn(){this.__data__=new Br,this.size=0}function Ao(y){var I=this.__data__,k=I.delete(y);return this.size=I.size,k}function Co(y){return this.__data__.get(y)}function Ro(y){return this.__data__.has(y)}function To(y,I){var k=this.__data__;if(k instanceof Br){var le=k.__data__;if(!bi||le.length<N-1)return le.push([y,I]),this.size=++k.size,this;k=this.__data__=new hr(le)}return k.set(y,I),this.size=k.size,this}ei.prototype.clear=vn,ei.prototype.delete=Ao,ei.prototype.get=Co,ei.prototype.has=Ro,ei.prototype.set=To;function Do(y,I){var k=vs(y),le=!k&&Vo(y),st=!k&&!le&&Ms(y),Ne=!k&&!le&&!st&&In(y),wt=k||le||st||Ne,Jt=wt?Ve(y.length,String):[],tr=Jt.length;for(var gt in y)(I||Ze.call(y,gt))&&!(wt&&(gt=="length"||st&&(gt=="offset"||gt=="parent")||Ne&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||qo(gt,tr)))&&Jt.push(gt);return Jt}function gs(y,I){for(var k=y.length;k--;)if(_n(y[k][0],I))return k;return-1}function No(y,I,k){var le=I(y);return vs(y)?le:ke(le,k(y))}function Qi(y){return y==null?y===void 0?B:Lt:dr&&dr in Object(y)?Uo(y):ko(y)}function yn(y){return Xi(y)&&Qi(y)==te}function Fs(y,I,k,le,st){return y===I?!0:y==null||I==null||!Xi(y)&&!Xi(I)?y!==y&&I!==I:Lo(y,I,k,le,Fs,st)}function Lo(y,I,k,le,st,Ne){var wt=vs(y),Jt=vs(I),tr=wt?Pe:fi(y),gt=Jt?Pe:fi(I);tr=tr==te?Ye:tr,gt=gt==te?Ye:gt;var yr=tr==Ye,Pr=gt==Ye,ar=tr==gt;if(ar&&Ms(y)){if(!Ms(I))return!1;wt=!0,yr=!1}if(ar&&!yr)return Ne||(Ne=new ei),wt||In(y)?mn(y,I,k,le,st,Ne):wn(y,I,tr,k,le,st,Ne);if(!(k&g)){var Sr=yr&&Ze.call(y,"__wrapped__"),Or=Pr&&Ze.call(I,"__wrapped__");if(Sr||Or){var di=Sr?y.value():y,ti=Or?I.value():I;return Ne||(Ne=new ei),st(di,ti,k,le,Ne)}}return ar?(Ne||(Ne=new ei),zo(y,I,k,le,st,Ne)):!1}function Fo(y){if(!xn(y)||Ho(y))return!1;var I=bn(y)?sr:ot;return I.test(Ei(y))}function Mo(y){return Xi(y)&&En(y.length)&&!!qe[Qi(y)]}function jo(y){if(!Bo(y))return _i(y);var I=[];for(var k in Object(y))Ze.call(y,k)&&k!="constructor"&&I.push(k);return I}function mn(y,I,k,le,st,Ne){var wt=k&g,Jt=y.length,tr=I.length;if(Jt!=tr&&!(wt&&tr>Jt))return!1;var gt=Ne.get(y);if(gt&&Ne.get(I))return gt==I;var yr=-1,Pr=!0,ar=k&he?new ps:void 0;for(Ne.set(y,I),Ne.set(I,y);++yr<Jt;){var Sr=y[yr],Or=I[yr];if(le)var di=wt?le(Or,Sr,yr,I,y,Ne):le(Sr,Or,yr,y,I,Ne);if(di!==void 0){if(di)continue;Pr=!1;break}if(ar){if(!dt(I,function(ti,xi){if(!Ht(ar,xi)&&(Sr===ti||st(Sr,ti,k,le,Ne)))return ar.push(xi)})){Pr=!1;break}}else if(!(Sr===Or||st(Sr,Or,k,le,Ne))){Pr=!1;break}}return Ne.delete(y),Ne.delete(I),Pr}function wn(y,I,k,le,st,Ne,wt){switch(k){case ye:if(y.byteLength!=I.byteLength||y.byteOffset!=I.byteOffset)return!1;y=y.buffer,I=I.buffer;case de:return!(y.byteLength!=I.byteLength||!Ne(new Ir(y),new Ir(I)));case Y:case ne:case rt:return _n(+y,+I);case De:return y.name==I.name&&y.message==I.message;case V:case oe:return y==I+"";case ce:var Jt=Zt;case ee:var tr=le&g;if(Jt||(Jt=At),y.size!=I.size&&!tr)return!1;var gt=wt.get(y);if(gt)return gt==I;le|=he,wt.set(y,I);var yr=mn(Jt(y),Jt(I),le,st,Ne,wt);return wt.delete(y),yr;case C:if(zt)return zt.call(y)==zt.call(I)}return!1}function zo(y,I,k,le,st,Ne){var wt=k&g,Jt=Yi(y),tr=Jt.length,gt=Yi(I),yr=gt.length;if(tr!=yr&&!wt)return!1;for(var Pr=tr;Pr--;){var ar=Jt[Pr];if(!(wt?ar in I:Ze.call(I,ar)))return!1}var Sr=Ne.get(y);if(Sr&&Ne.get(I))return Sr==I;var Or=!0;Ne.set(y,I),Ne.set(I,y);for(var di=wt;++Pr<tr;){ar=Jt[Pr];var ti=y[ar],xi=I[ar];if(le)var Pn=wt?le(xi,ti,ar,I,y,Ne):le(ti,xi,ar,y,I,Ne);if(!(Pn===void 0?ti===xi||st(ti,xi,k,le,Ne):Pn)){Or=!1;break}di||(di=ar=="constructor")}if(Or&&!di){var es=y.constructor,ys=I.constructor;es!=ys&&"constructor"in y&&"constructor"in I&&!(typeof es=="function"&&es instanceof es&&typeof ys=="function"&&ys instanceof ys)&&(Or=!1)}return Ne.delete(y),Ne.delete(I),Or}function Yi(y){return No(y,Wo,er)}function li(y,I){var k=y.__data__;return $o(I)?k[typeof I=="string"?"string":"hash"]:k.map}function ji(y,I){var k=ur(y,I);return Fo(k)?k:void 0}function Uo(y){var I=Ze.call(y,dr),k=y[dr];try{y[dr]=void 0;var le=!0}catch{}var st=Yt.call(y);return le&&(I?y[dr]=k:delete y[dr]),st}var er=Hr?function(y){return y==null?[]:(y=Object(y),Oe(Hr(y),function(I){return or.call(y,I)}))}:Jo,fi=Qi;(hi&&fi(new hi(new ArrayBuffer(1)))!=ye||bi&&fi(new bi)!=ce||Pt&&fi(Pt.resolve())!=Xe||Tt&&fi(new Tt)!=ee||Ft&&fi(new Ft)!=W)&&(fi=function(y){var I=Qi(y),k=I==Ye?y.constructor:void 0,le=k?Ei(k):"";if(le)switch(le){case Mt:return ye;case pt:return ce;case Dt:return Xe;case St:return ee;case kt:return W}return I});function qo(y,I){return I=I??H,!!I&&(typeof y=="number"||mt.test(y))&&y>-1&&y%1==0&&y<I}function $o(y){var I=typeof y;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?y!=="__proto__":y===null}function Ho(y){return!!Bt&&Bt in y}function Bo(y){var I=y&&y.constructor,k=typeof I=="function"&&I.prototype||ct;return y===k}function ko(y){return Yt.call(y)}function Ei(y){if(y!=null){try{return ut.call(y)}catch{}try{return y+""}catch{}}return""}function _n(y,I){return y===I||y!==y&&I!==I}var Vo=yn(function(){return arguments}())?yn:function(y){return Xi(y)&&Ze.call(y,"callee")&&!or.call(y,"callee")},vs=Array.isArray;function Ko(y){return y!=null&&En(y.length)&&!bn(y)}var Ms=wi||Zo;function Go(y,I){return Fs(y,I)}function bn(y){if(!xn(y))return!1;var I=Qi(y);return I==_e||I==Fe||I==G||I==Z}function En(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=H}function xn(y){var I=typeof y;return y!=null&&(I=="object"||I=="function")}function Xi(y){return y!=null&&typeof y=="object"}var In=ge?et(ge):Mo;function Wo(y){return Ko(y)?Do(y):jo(y)}function Jo(){return[]}function Zo(){return!1}Te.exports=Go},57828:function(Te){"use strict";function T(N){try{return JSON.stringify(N)}catch{return'"[Circular]"'}}Te.exports=U;function U(N,ie,g){var he=g&&g.stringify||T,H=1;if(typeof N=="object"&&N!==null){var te=ie.length+H;if(te===1)return N;var Pe=new Array(te);Pe[0]=he(N);for(var G=1;G<te;G++)Pe[G]=he(ie[G]);return Pe.join(" ")}if(typeof N!="string")return N;var Y=ie.length;if(Y===0)return N;for(var ne="",De=1-H,_e=-1,Fe=N&&N.length||0,ce=0;ce<Fe;){if(N.charCodeAt(ce)===37&&ce+1<Fe){switch(_e=_e>-1?_e:0,N.charCodeAt(ce+1)){case 100:case 102:if(De>=Y||ie[De]==null)break;_e<ce&&(ne+=N.slice(_e,ce)),ne+=Number(ie[De]),_e=ce+2,ce++;break;case 105:if(De>=Y||ie[De]==null)break;_e<ce&&(ne+=N.slice(_e,ce)),ne+=Math.floor(Number(ie[De])),_e=ce+2,ce++;break;case 79:case 111:case 106:if(De>=Y||ie[De]===void 0)break;_e<ce&&(ne+=N.slice(_e,ce));var rt=typeof ie[De];if(rt==="string"){ne+="'"+ie[De]+"'",_e=ce+2,ce++;break}if(rt==="function"){ne+=ie[De].name||"<anonymous>",_e=ce+2,ce++;break}ne+=he(ie[De]),_e=ce+2,ce++;break;case 115:if(De>=Y)break;_e<ce&&(ne+=N.slice(_e,ce)),ne+=String(ie[De]),_e=ce+2,ce++;break;case 37:_e<ce&&(ne+=N.slice(_e,ce)),ne+="%",_e=ce+2,ce++,De--;break}++De}++ce}return _e===-1?N:(_e<Fe&&(ne+=N.slice(_e)),ne)}},12634:function(Te,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function U(ie){if(typeof ie!="string")throw new Error(`Cannot safe json parse value of type ${typeof ie}`);try{return JSON.parse(ie)}catch{return ie}}T.safeJsonParse=U;function N(ie){return typeof ie=="string"?ie:JSON.stringify(ie,(g,he)=>typeof he>"u"?null:he)}T.safeJsonStringify=N},85783:function(Te){"use strict";Te.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},86984:function(Te,T,U){"use strict";const N=U(57828);Te.exports=H;const ie=oe().console||{},g={mapHttpRequest:rt,mapHttpResponse:rt,wrapRequestSerializer:Lt,wrapResponseSerializer:Lt,wrapErrorSerializer:Lt,req:rt,res:rt,err:Fe};function he(C,B){return Array.isArray(C)?C.filter(function(de){return de!=="!stdSerializers.err"}):C===!0?Object.keys(B):!1}function H(C){C=C||{},C.browser=C.browser||{};const B=C.browser.transmit;if(B&&typeof B.send!="function")throw Error("pino: transmit option must have a send function");const W=C.browser.write||ie;C.browser.write&&(C.browser.asObject=!0);const de=C.serializers||{},ye=he(C.browser.serialize,de);let Se=C.browser.serialize;Array.isArray(C.browser.serialize)&&C.browser.serialize.indexOf("!stdSerializers.err")>-1&&(Se=!1);const A=["error","fatal","warn","info","debug","trace"];typeof W=="function"&&(W.error=W.fatal=W.warn=W.info=W.debug=W.trace=W),C.enabled===!1&&(C.level="silent");const x=C.level||"info",_=Object.create(W);_.log||(_.log=Ye),Object.defineProperty(_,"levelVal",{get:Ce}),Object.defineProperty(_,"level",{get:Q,set:ae});const me={transmit:B,serialize:ye,asObject:C.browser.asObject,levels:A,timestamp:ce(C)};_.levels=H.levels,_.level=x,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=Ye,_.serializers=de,_._serialize=ye,_._stdErrSerialize=Se,_.child=se,B&&(_._logEvent=_e());function Ce(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Q(){return this._level}function ae(re){if(re!=="silent"&&!this.levels.values[re])throw Error("unknown level "+re);this._level=re,te(me,_,"error","log"),te(me,_,"fatal","error"),te(me,_,"warn","error"),te(me,_,"info","log"),te(me,_,"debug","log"),te(me,_,"trace","log")}function se(re,ot){if(!re)throw new Error("missing bindings for child Pino");ot=ot||{},ye&&re.serializers&&(ot.serializers=re.serializers);const mt=ot.serializers;if(ye&&mt){var qe=Object.assign({},de,mt),$r=C.browser.serialize===!0?Object.keys(qe):ye;delete re.serializers,Y([re],$r,qe,this._stdErrSerialize)}function ui(at){this._childLevel=(at._childLevel|0)+1,this.error=ne(at,re,"error"),this.fatal=ne(at,re,"fatal"),this.warn=ne(at,re,"warn"),this.info=ne(at,re,"info"),this.debug=ne(at,re,"debug"),this.trace=ne(at,re,"trace"),qe&&(this.serializers=qe,this._serialize=$r),B&&(this._logEvent=_e([].concat(at._logEvent.bindings,re)))}return ui.prototype=this,new ui(this)}return _}H.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},H.stdSerializers=g,H.stdTimeFunctions=Object.assign({},{nullTime:Xe,epochTime:Z,unixTime:V,isoTime:ee});function te(C,B,W,de){const ye=Object.getPrototypeOf(B);B[W]=B.levelVal>B.levels.values[W]?Ye:ye[W]?ye[W]:ie[W]||ie[de]||Ye,Pe(C,B,W)}function Pe(C,B,W){!C.transmit&&B[W]===Ye||(B[W]=function(de){return function(){const Se=C.timestamp(),A=new Array(arguments.length),x=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ie?ie:this;for(var _=0;_<A.length;_++)A[_]=arguments[_];if(C.serialize&&!C.asObject&&Y(A,this._serialize,this.serializers,this._stdErrSerialize),C.asObject?de.call(x,G(this,W,A,Se)):de.apply(x,A),C.transmit){const me=C.transmit.level||B.level,Ce=H.levels.values[me],Q=H.levels.values[W];if(Q<Ce)return;De(this,{ts:Se,methodLevel:W,methodValue:Q,transmitLevel:me,transmitValue:H.levels.values[C.transmit.level||B.level],send:C.transmit.send,val:B.levelVal},A)}}}(B[W]))}function G(C,B,W,de){C._serialize&&Y(W,C._serialize,C.serializers,C._stdErrSerialize);const ye=W.slice();let Se=ye[0];const A={};de&&(A.time=de),A.level=H.levels.values[B];let x=(C._childLevel|0)+1;if(x<1&&(x=1),Se!==null&&typeof Se=="object"){for(;x--&&typeof ye[0]=="object";)Object.assign(A,ye.shift());Se=ye.length?N(ye.shift(),ye):void 0}else typeof Se=="string"&&(Se=N(ye.shift(),ye));return Se!==void 0&&(A.msg=Se),A}function Y(C,B,W,de){for(const ye in C)if(de&&C[ye]instanceof Error)C[ye]=H.stdSerializers.err(C[ye]);else if(typeof C[ye]=="object"&&!Array.isArray(C[ye]))for(const Se in C[ye])B&&B.indexOf(Se)>-1&&Se in W&&(C[ye][Se]=W[Se](C[ye][Se]))}function ne(C,B,W){return function(){const de=new Array(1+arguments.length);de[0]=B;for(var ye=1;ye<de.length;ye++)de[ye]=arguments[ye-1];return C[W].apply(this,de)}}function De(C,B,W){const de=B.send,ye=B.ts,Se=B.methodLevel,A=B.methodValue,x=B.val,_=C._logEvent.bindings;Y(W,C._serialize||Object.keys(C.serializers),C.serializers,C._stdErrSerialize===void 0?!0:C._stdErrSerialize),C._logEvent.ts=ye,C._logEvent.messages=W.filter(function(me){return _.indexOf(me)===-1}),C._logEvent.level.label=Se,C._logEvent.level.value=A,de(Se,C._logEvent,x),C._logEvent=_e(_)}function _e(C){return{ts:0,messages:[],bindings:C||[],level:{label:"",value:0}}}function Fe(C){const B={type:C.constructor.name,msg:C.message,stack:C.stack};for(const W in C)B[W]===void 0&&(B[W]=C[W]);return B}function ce(C){return typeof C.timestamp=="function"?C.timestamp:C.timestamp===!1?Xe:Z}function rt(){return{}}function Lt(C){return C}function Ye(){}function Xe(){return!1}function Z(){return Date.now()}function V(){return Math.round(Date.now()/1e3)}function ee(){return new Date(Date.now()).toISOString()}function oe(){function C(B){return typeof B<"u"&&B}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return C(self)||C(window)||C(this)||{}}}}}]);
