(self.webpackChunk_ant_design_web3_docs=self.webpackChunk_ant_design_web3_docs||[]).push([[3594],{6050:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var B=P(5554);function oe(x,_){return _===void 0&&(_=0),(x[_+0]<<8|x[_+1])<<16>>16}p.readInt16BE=oe;function ue(x,_){return _===void 0&&(_=0),(x[_+0]<<8|x[_+1])>>>0}p.readUint16BE=ue;function ge(x,_){return _===void 0&&(_=0),(x[_+1]<<8|x[_])<<16>>16}p.readInt16LE=ge;function M(x,_){return _===void 0&&(_=0),(x[_+1]<<8|x[_])>>>0}p.readUint16LE=M;function Y(x,_,S){return _===void 0&&(_=new Uint8Array(2)),S===void 0&&(S=0),_[S+0]=x>>>8,_[S+1]=x>>>0,_}p.writeUint16BE=Y,p.writeInt16BE=Y;function j(x,_,S){return _===void 0&&(_=new Uint8Array(2)),S===void 0&&(S=0),_[S+0]=x>>>0,_[S+1]=x>>>8,_}p.writeUint16LE=j,p.writeInt16LE=j;function T(x,_){return _===void 0&&(_=0),x[_]<<24|x[_+1]<<16|x[_+2]<<8|x[_+3]}p.readInt32BE=T;function C(x,_){return _===void 0&&(_=0),(x[_]<<24|x[_+1]<<16|x[_+2]<<8|x[_+3])>>>0}p.readUint32BE=C;function F(x,_){return _===void 0&&(_=0),x[_+3]<<24|x[_+2]<<16|x[_+1]<<8|x[_]}p.readInt32LE=F;function ee(x,_){return _===void 0&&(_=0),(x[_+3]<<24|x[_+2]<<16|x[_+1]<<8|x[_])>>>0}p.readUint32LE=ee;function ae(x,_,S){return _===void 0&&(_=new Uint8Array(4)),S===void 0&&(S=0),_[S+0]=x>>>24,_[S+1]=x>>>16,_[S+2]=x>>>8,_[S+3]=x>>>0,_}p.writeUint32BE=ae,p.writeInt32BE=ae;function G(x,_,S){return _===void 0&&(_=new Uint8Array(4)),S===void 0&&(S=0),_[S+0]=x>>>0,_[S+1]=x>>>8,_[S+2]=x>>>16,_[S+3]=x>>>24,_}p.writeUint32LE=G,p.writeInt32LE=G;function ie(x,_){_===void 0&&(_=0);var S=T(x,_),Q=T(x,_+4);return S*4294967296+Q-(Q>>31)*4294967296}p.readInt64BE=ie;function ce(x,_){_===void 0&&(_=0);var S=C(x,_),Q=C(x,_+4);return S*4294967296+Q}p.readUint64BE=ce;function Ee(x,_){_===void 0&&(_=0);var S=F(x,_),Q=F(x,_+4);return Q*4294967296+S-(S>>31)*4294967296}p.readInt64LE=Ee;function be(x,_){_===void 0&&(_=0);var S=ee(x,_),Q=ee(x,_+4);return Q*4294967296+S}p.readUint64LE=be;function Re(x,_,S){return _===void 0&&(_=new Uint8Array(8)),S===void 0&&(S=0),ae(x/4294967296>>>0,_,S),ae(x>>>0,_,S+4),_}p.writeUint64BE=Re,p.writeInt64BE=Re;function Be(x,_,S){return _===void 0&&(_=new Uint8Array(8)),S===void 0&&(S=0),G(x>>>0,_,S),G(x/4294967296>>>0,_,S+4),_}p.writeUint64LE=Be,p.writeInt64LE=Be;function Le(x,_,S){if(S===void 0&&(S=0),x%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(x/8>_.length-S)throw new Error("readUintBE: array is too short for the given bitLength");for(var Q=0,J=1,re=x/8+S-1;re>=S;re--)Q+=_[re]*J,J*=256;return Q}p.readUintBE=Le;function ye(x,_,S){if(S===void 0&&(S=0),x%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(x/8>_.length-S)throw new Error("readUintLE: array is too short for the given bitLength");for(var Q=0,J=1,re=S;re<S+x/8;re++)Q+=_[re]*J,J*=256;return Q}p.readUintLE=ye;function we(x,_,S,Q){if(S===void 0&&(S=new Uint8Array(x/8)),Q===void 0&&(Q=0),x%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!B.isSafeInteger(_))throw new Error("writeUintBE value must be an integer");for(var J=1,re=x/8+Q-1;re>=Q;re--)S[re]=_/J&255,J*=256;return S}p.writeUintBE=we;function m(x,_,S,Q){if(S===void 0&&(S=new Uint8Array(x/8)),Q===void 0&&(Q=0),x%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!B.isSafeInteger(_))throw new Error("writeUintLE value must be an integer");for(var J=1,re=Q;re<Q+x/8;re++)S[re]=_/J&255,J*=256;return S}p.writeUintLE=m;function h(x,_){_===void 0&&(_=0);var S=new DataView(x.buffer,x.byteOffset,x.byteLength);return S.getFloat32(_)}p.readFloat32BE=h;function b(x,_){_===void 0&&(_=0);var S=new DataView(x.buffer,x.byteOffset,x.byteLength);return S.getFloat32(_,!0)}p.readFloat32LE=b;function q(x,_){_===void 0&&(_=0);var S=new DataView(x.buffer,x.byteOffset,x.byteLength);return S.getFloat64(_)}p.readFloat64BE=q;function O(x,_){_===void 0&&(_=0);var S=new DataView(x.buffer,x.byteOffset,x.byteLength);return S.getFloat64(_,!0)}p.readFloat64LE=O;function H(x,_,S){_===void 0&&(_=new Uint8Array(4)),S===void 0&&(S=0);var Q=new DataView(_.buffer,_.byteOffset,_.byteLength);return Q.setFloat32(S,x),_}p.writeFloat32BE=H;function D(x,_,S){_===void 0&&(_=new Uint8Array(4)),S===void 0&&(S=0);var Q=new DataView(_.buffer,_.byteOffset,_.byteLength);return Q.setFloat32(S,x,!0),_}p.writeFloat32LE=D;function E(x,_,S){_===void 0&&(_=new Uint8Array(8)),S===void 0&&(S=0);var Q=new DataView(_.buffer,_.byteOffset,_.byteLength);return Q.setFloat64(S,x),_}p.writeFloat64BE=E;function I(x,_,S){_===void 0&&(_=new Uint8Array(8)),S===void 0&&(S=0);var Q=new DataView(_.buffer,_.byteOffset,_.byteLength);return Q.setFloat64(S,x,!0),_}p.writeFloat64LE=I},11541:function(Ae,p,P){"use strict";var B;B={value:!0};var oe=P(26090),ue=P(53482),ge=P(49644),M=P(6050),Y=P(59872);p.Cv=32,p.WH=12,p.pg=16;var j=new Uint8Array(16),T=function(){function C(F){if(this.nonceLength=p.WH,this.tagLength=p.pg,F.length!==p.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(F)}return C.prototype.seal=function(F,ee,ae,G){if(F.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var ie=new Uint8Array(16);ie.set(F,ie.length-F.length);var ce=new Uint8Array(32);oe.stream(this._key,ie,ce,4);var Ee=ee.length+this.tagLength,be;if(G){if(G.length!==Ee)throw new Error("ChaCha20Poly1305: incorrect destination length");be=G}else be=new Uint8Array(Ee);return oe.streamXOR(this._key,ie,ee,be,4),this._authenticate(be.subarray(be.length-this.tagLength,be.length),ce,be.subarray(0,be.length-this.tagLength),ae),ge.wipe(ie),be},C.prototype.open=function(F,ee,ae,G){if(F.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(ee.length<this.tagLength)return null;var ie=new Uint8Array(16);ie.set(F,ie.length-F.length);var ce=new Uint8Array(32);oe.stream(this._key,ie,ce,4);var Ee=new Uint8Array(this.tagLength);if(this._authenticate(Ee,ce,ee.subarray(0,ee.length-this.tagLength),ae),!Y.equal(Ee,ee.subarray(ee.length-this.tagLength,ee.length)))return null;var be=ee.length-this.tagLength,Re;if(G){if(G.length!==be)throw new Error("ChaCha20Poly1305: incorrect destination length");Re=G}else Re=new Uint8Array(be);return oe.streamXOR(this._key,ie,ee.subarray(0,ee.length-this.tagLength),Re,4),ge.wipe(ie),Re},C.prototype.clean=function(){return ge.wipe(this._key),this},C.prototype._authenticate=function(F,ee,ae,G){var ie=new ue.Poly1305(ee);G&&(ie.update(G),G.length%16>0&&ie.update(j.subarray(G.length%16))),ie.update(ae),ae.length%16>0&&ie.update(j.subarray(ae.length%16));var ce=new Uint8Array(8);G&&M.writeUint64LE(G.length,ce),ie.update(ce),M.writeUint64LE(ae.length,ce),ie.update(ce);for(var Ee=ie.digest(),be=0;be<Ee.length;be++)F[be]=Ee[be];ie.clean(),ge.wipe(Ee),ge.wipe(ce)},C}();p.OK=T},26090:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var B=P(6050),oe=P(49644),ue=20;function ge(T,C,F){for(var ee=1634760805,ae=857760878,G=2036477234,ie=1797285236,ce=F[3]<<24|F[2]<<16|F[1]<<8|F[0],Ee=F[7]<<24|F[6]<<16|F[5]<<8|F[4],be=F[11]<<24|F[10]<<16|F[9]<<8|F[8],Re=F[15]<<24|F[14]<<16|F[13]<<8|F[12],Be=F[19]<<24|F[18]<<16|F[17]<<8|F[16],Le=F[23]<<24|F[22]<<16|F[21]<<8|F[20],ye=F[27]<<24|F[26]<<16|F[25]<<8|F[24],we=F[31]<<24|F[30]<<16|F[29]<<8|F[28],m=C[3]<<24|C[2]<<16|C[1]<<8|C[0],h=C[7]<<24|C[6]<<16|C[5]<<8|C[4],b=C[11]<<24|C[10]<<16|C[9]<<8|C[8],q=C[15]<<24|C[14]<<16|C[13]<<8|C[12],O=ee,H=ae,D=G,E=ie,I=ce,x=Ee,_=be,S=Re,Q=Be,J=Le,re=ye,Pe=we,le=m,De=h,Ie=b,Te=q,Me=0;Me<ue;Me+=2)O=O+I|0,le^=O,le=le>>>32-16|le<<16,Q=Q+le|0,I^=Q,I=I>>>32-12|I<<12,H=H+x|0,De^=H,De=De>>>32-16|De<<16,J=J+De|0,x^=J,x=x>>>32-12|x<<12,D=D+_|0,Ie^=D,Ie=Ie>>>32-16|Ie<<16,re=re+Ie|0,_^=re,_=_>>>32-12|_<<12,E=E+S|0,Te^=E,Te=Te>>>32-16|Te<<16,Pe=Pe+Te|0,S^=Pe,S=S>>>32-12|S<<12,D=D+_|0,Ie^=D,Ie=Ie>>>32-8|Ie<<8,re=re+Ie|0,_^=re,_=_>>>32-7|_<<7,E=E+S|0,Te^=E,Te=Te>>>32-8|Te<<8,Pe=Pe+Te|0,S^=Pe,S=S>>>32-7|S<<7,H=H+x|0,De^=H,De=De>>>32-8|De<<8,J=J+De|0,x^=J,x=x>>>32-7|x<<7,O=O+I|0,le^=O,le=le>>>32-8|le<<8,Q=Q+le|0,I^=Q,I=I>>>32-7|I<<7,O=O+x|0,Te^=O,Te=Te>>>32-16|Te<<16,re=re+Te|0,x^=re,x=x>>>32-12|x<<12,H=H+_|0,le^=H,le=le>>>32-16|le<<16,Pe=Pe+le|0,_^=Pe,_=_>>>32-12|_<<12,D=D+S|0,De^=D,De=De>>>32-16|De<<16,Q=Q+De|0,S^=Q,S=S>>>32-12|S<<12,E=E+I|0,Ie^=E,Ie=Ie>>>32-16|Ie<<16,J=J+Ie|0,I^=J,I=I>>>32-12|I<<12,D=D+S|0,De^=D,De=De>>>32-8|De<<8,Q=Q+De|0,S^=Q,S=S>>>32-7|S<<7,E=E+I|0,Ie^=E,Ie=Ie>>>32-8|Ie<<8,J=J+Ie|0,I^=J,I=I>>>32-7|I<<7,H=H+_|0,le^=H,le=le>>>32-8|le<<8,Pe=Pe+le|0,_^=Pe,_=_>>>32-7|_<<7,O=O+x|0,Te^=O,Te=Te>>>32-8|Te<<8,re=re+Te|0,x^=re,x=x>>>32-7|x<<7;B.writeUint32LE(O+ee|0,T,0),B.writeUint32LE(H+ae|0,T,4),B.writeUint32LE(D+G|0,T,8),B.writeUint32LE(E+ie|0,T,12),B.writeUint32LE(I+ce|0,T,16),B.writeUint32LE(x+Ee|0,T,20),B.writeUint32LE(_+be|0,T,24),B.writeUint32LE(S+Re|0,T,28),B.writeUint32LE(Q+Be|0,T,32),B.writeUint32LE(J+Le|0,T,36),B.writeUint32LE(re+ye|0,T,40),B.writeUint32LE(Pe+we|0,T,44),B.writeUint32LE(le+m|0,T,48),B.writeUint32LE(De+h|0,T,52),B.writeUint32LE(Ie+b|0,T,56),B.writeUint32LE(Te+q|0,T,60)}function M(T,C,F,ee,ae){if(ae===void 0&&(ae=0),T.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(ee.length<F.length)throw new Error("ChaCha: destination is shorter than source");var G,ie;if(ae===0){if(C.length!==8&&C.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");G=new Uint8Array(16),ie=G.length-C.length,G.set(C,ie)}else{if(C.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");G=C,ie=ae}for(var ce=new Uint8Array(64),Ee=0;Ee<F.length;Ee+=64){ge(ce,G,T);for(var be=Ee;be<Ee+64&&be<F.length;be++)ee[be]=F[be]^ce[be-Ee];j(G,0,ie)}return oe.wipe(ce),ae===0&&oe.wipe(G),ee}p.streamXOR=M;function Y(T,C,F,ee){return ee===void 0&&(ee=0),oe.wipe(F),M(T,C,F,F,ee)}p.stream=Y;function j(T,C,F){for(var ee=1;F--;)ee=ee+(T[C]&255)|0,T[C]=ee&255,ee>>>=8,C++;if(ee>0)throw new Error("ChaCha: counter overflow")}},59872:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0});function P(ge,M,Y){return~(ge-1)&M|ge-1&Y}p.select=P;function B(ge,M){return(ge|0)-(M|0)-1>>>31&1}p.lessOrEqual=B;function oe(ge,M){if(ge.length!==M.length)return 0;for(var Y=0,j=0;j<ge.length;j++)Y|=ge[j]^M[j];return 1&Y-1>>>8}p.compare=oe;function ue(ge,M){return ge.length===0||M.length===0?!1:oe(ge,M)!==0}p.equal=ue},61326:function(Ae,p,P){"use strict";var B;B={value:!0},B=B=B=p.Xx=B=B=p._w=p.aP=p.KS=B=p.jQ=void 0;const oe=P(4883),ue=P(21318),ge=P(49644);p.jQ=64,B=32,p.KS=64,p.aP=32;function M(Z){const ne=new Float64Array(16);if(Z)for(let V=0;V<Z.length;V++)ne[V]=Z[V];return ne}const Y=new Uint8Array(32);Y[0]=9;const j=M(),T=M([1]),C=M([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),F=M([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ee=M([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ae=M([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),G=M([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ie(Z,ne){for(let V=0;V<16;V++)Z[V]=ne[V]|0}function ce(Z){let ne=1;for(let V=0;V<16;V++){let f=Z[V]+ne+65535;ne=Math.floor(f/65536),Z[V]=f-ne*65536}Z[0]+=ne-1+37*(ne-1)}function Ee(Z,ne,V){const f=~(V-1);for(let U=0;U<16;U++){const xe=f&(Z[U]^ne[U]);Z[U]^=xe,ne[U]^=xe}}function be(Z,ne){const V=M(),f=M();for(let U=0;U<16;U++)f[U]=ne[U];ce(f),ce(f),ce(f);for(let U=0;U<2;U++){V[0]=f[0]-65517;for(let ze=1;ze<15;ze++)V[ze]=f[ze]-65535-(V[ze-1]>>16&1),V[ze-1]&=65535;V[15]=f[15]-32767-(V[14]>>16&1);const xe=V[15]>>16&1;V[14]&=65535,Ee(f,V,1-xe)}for(let U=0;U<16;U++)Z[2*U]=f[U]&255,Z[2*U+1]=f[U]>>8}function Re(Z,ne){let V=0;for(let f=0;f<32;f++)V|=Z[f]^ne[f];return(1&V-1>>>8)-1}function Be(Z,ne){const V=new Uint8Array(32),f=new Uint8Array(32);return be(V,Z),be(f,ne),Re(V,f)}function Le(Z){const ne=new Uint8Array(32);return be(ne,Z),ne[0]&1}function ye(Z,ne){for(let V=0;V<16;V++)Z[V]=ne[2*V]+(ne[2*V+1]<<8);Z[15]&=32767}function we(Z,ne,V){for(let f=0;f<16;f++)Z[f]=ne[f]+V[f]}function m(Z,ne,V){for(let f=0;f<16;f++)Z[f]=ne[f]-V[f]}function h(Z,ne,V){let f,U,xe=0,ze=0,ot=0,Dt=0,lt=0,ft=0,Bt=0,qt=0,vt=0,dt=0,ut=0,at=0,st=0,it=0,Ze=0,et=0,Ye=0,yt=0,mt=0,bt=0,It=0,St=0,Ot=0,At=0,ai=0,gi=0,Ni=0,ki=0,un=0,hn=0,Es=0,Yt=V[0],Qt=V[1],kt=V[2],Xt=V[3],Zt=V[4],Wt=V[5],Vt=V[6],er=V[7],tr=V[8],rr=V[9],ir=V[10],nr=V[11],sr=V[12],or=V[13],ar=V[14],cr=V[15];f=ne[0],xe+=f*Yt,ze+=f*Qt,ot+=f*kt,Dt+=f*Xt,lt+=f*Zt,ft+=f*Wt,Bt+=f*Vt,qt+=f*er,vt+=f*tr,dt+=f*rr,ut+=f*ir,at+=f*nr,st+=f*sr,it+=f*or,Ze+=f*ar,et+=f*cr,f=ne[1],ze+=f*Yt,ot+=f*Qt,Dt+=f*kt,lt+=f*Xt,ft+=f*Zt,Bt+=f*Wt,qt+=f*Vt,vt+=f*er,dt+=f*tr,ut+=f*rr,at+=f*ir,st+=f*nr,it+=f*sr,Ze+=f*or,et+=f*ar,Ye+=f*cr,f=ne[2],ot+=f*Yt,Dt+=f*Qt,lt+=f*kt,ft+=f*Xt,Bt+=f*Zt,qt+=f*Wt,vt+=f*Vt,dt+=f*er,ut+=f*tr,at+=f*rr,st+=f*ir,it+=f*nr,Ze+=f*sr,et+=f*or,Ye+=f*ar,yt+=f*cr,f=ne[3],Dt+=f*Yt,lt+=f*Qt,ft+=f*kt,Bt+=f*Xt,qt+=f*Zt,vt+=f*Wt,dt+=f*Vt,ut+=f*er,at+=f*tr,st+=f*rr,it+=f*ir,Ze+=f*nr,et+=f*sr,Ye+=f*or,yt+=f*ar,mt+=f*cr,f=ne[4],lt+=f*Yt,ft+=f*Qt,Bt+=f*kt,qt+=f*Xt,vt+=f*Zt,dt+=f*Wt,ut+=f*Vt,at+=f*er,st+=f*tr,it+=f*rr,Ze+=f*ir,et+=f*nr,Ye+=f*sr,yt+=f*or,mt+=f*ar,bt+=f*cr,f=ne[5],ft+=f*Yt,Bt+=f*Qt,qt+=f*kt,vt+=f*Xt,dt+=f*Zt,ut+=f*Wt,at+=f*Vt,st+=f*er,it+=f*tr,Ze+=f*rr,et+=f*ir,Ye+=f*nr,yt+=f*sr,mt+=f*or,bt+=f*ar,It+=f*cr,f=ne[6],Bt+=f*Yt,qt+=f*Qt,vt+=f*kt,dt+=f*Xt,ut+=f*Zt,at+=f*Wt,st+=f*Vt,it+=f*er,Ze+=f*tr,et+=f*rr,Ye+=f*ir,yt+=f*nr,mt+=f*sr,bt+=f*or,It+=f*ar,St+=f*cr,f=ne[7],qt+=f*Yt,vt+=f*Qt,dt+=f*kt,ut+=f*Xt,at+=f*Zt,st+=f*Wt,it+=f*Vt,Ze+=f*er,et+=f*tr,Ye+=f*rr,yt+=f*ir,mt+=f*nr,bt+=f*sr,It+=f*or,St+=f*ar,Ot+=f*cr,f=ne[8],vt+=f*Yt,dt+=f*Qt,ut+=f*kt,at+=f*Xt,st+=f*Zt,it+=f*Wt,Ze+=f*Vt,et+=f*er,Ye+=f*tr,yt+=f*rr,mt+=f*ir,bt+=f*nr,It+=f*sr,St+=f*or,Ot+=f*ar,At+=f*cr,f=ne[9],dt+=f*Yt,ut+=f*Qt,at+=f*kt,st+=f*Xt,it+=f*Zt,Ze+=f*Wt,et+=f*Vt,Ye+=f*er,yt+=f*tr,mt+=f*rr,bt+=f*ir,It+=f*nr,St+=f*sr,Ot+=f*or,At+=f*ar,ai+=f*cr,f=ne[10],ut+=f*Yt,at+=f*Qt,st+=f*kt,it+=f*Xt,Ze+=f*Zt,et+=f*Wt,Ye+=f*Vt,yt+=f*er,mt+=f*tr,bt+=f*rr,It+=f*ir,St+=f*nr,Ot+=f*sr,At+=f*or,ai+=f*ar,gi+=f*cr,f=ne[11],at+=f*Yt,st+=f*Qt,it+=f*kt,Ze+=f*Xt,et+=f*Zt,Ye+=f*Wt,yt+=f*Vt,mt+=f*er,bt+=f*tr,It+=f*rr,St+=f*ir,Ot+=f*nr,At+=f*sr,ai+=f*or,gi+=f*ar,Ni+=f*cr,f=ne[12],st+=f*Yt,it+=f*Qt,Ze+=f*kt,et+=f*Xt,Ye+=f*Zt,yt+=f*Wt,mt+=f*Vt,bt+=f*er,It+=f*tr,St+=f*rr,Ot+=f*ir,At+=f*nr,ai+=f*sr,gi+=f*or,Ni+=f*ar,ki+=f*cr,f=ne[13],it+=f*Yt,Ze+=f*Qt,et+=f*kt,Ye+=f*Xt,yt+=f*Zt,mt+=f*Wt,bt+=f*Vt,It+=f*er,St+=f*tr,Ot+=f*rr,At+=f*ir,ai+=f*nr,gi+=f*sr,Ni+=f*or,ki+=f*ar,un+=f*cr,f=ne[14],Ze+=f*Yt,et+=f*Qt,Ye+=f*kt,yt+=f*Xt,mt+=f*Zt,bt+=f*Wt,It+=f*Vt,St+=f*er,Ot+=f*tr,At+=f*rr,ai+=f*ir,gi+=f*nr,Ni+=f*sr,ki+=f*or,un+=f*ar,hn+=f*cr,f=ne[15],et+=f*Yt,Ye+=f*Qt,yt+=f*kt,mt+=f*Xt,bt+=f*Zt,It+=f*Wt,St+=f*Vt,Ot+=f*er,At+=f*tr,ai+=f*rr,gi+=f*ir,Ni+=f*nr,ki+=f*sr,un+=f*or,hn+=f*ar,Es+=f*cr,xe+=38*Ye,ze+=38*yt,ot+=38*mt,Dt+=38*bt,lt+=38*It,ft+=38*St,Bt+=38*Ot,qt+=38*At,vt+=38*ai,dt+=38*gi,ut+=38*Ni,at+=38*ki,st+=38*un,it+=38*hn,Ze+=38*Es,U=1,f=xe+U+65535,U=Math.floor(f/65536),xe=f-U*65536,f=ze+U+65535,U=Math.floor(f/65536),ze=f-U*65536,f=ot+U+65535,U=Math.floor(f/65536),ot=f-U*65536,f=Dt+U+65535,U=Math.floor(f/65536),Dt=f-U*65536,f=lt+U+65535,U=Math.floor(f/65536),lt=f-U*65536,f=ft+U+65535,U=Math.floor(f/65536),ft=f-U*65536,f=Bt+U+65535,U=Math.floor(f/65536),Bt=f-U*65536,f=qt+U+65535,U=Math.floor(f/65536),qt=f-U*65536,f=vt+U+65535,U=Math.floor(f/65536),vt=f-U*65536,f=dt+U+65535,U=Math.floor(f/65536),dt=f-U*65536,f=ut+U+65535,U=Math.floor(f/65536),ut=f-U*65536,f=at+U+65535,U=Math.floor(f/65536),at=f-U*65536,f=st+U+65535,U=Math.floor(f/65536),st=f-U*65536,f=it+U+65535,U=Math.floor(f/65536),it=f-U*65536,f=Ze+U+65535,U=Math.floor(f/65536),Ze=f-U*65536,f=et+U+65535,U=Math.floor(f/65536),et=f-U*65536,xe+=U-1+37*(U-1),U=1,f=xe+U+65535,U=Math.floor(f/65536),xe=f-U*65536,f=ze+U+65535,U=Math.floor(f/65536),ze=f-U*65536,f=ot+U+65535,U=Math.floor(f/65536),ot=f-U*65536,f=Dt+U+65535,U=Math.floor(f/65536),Dt=f-U*65536,f=lt+U+65535,U=Math.floor(f/65536),lt=f-U*65536,f=ft+U+65535,U=Math.floor(f/65536),ft=f-U*65536,f=Bt+U+65535,U=Math.floor(f/65536),Bt=f-U*65536,f=qt+U+65535,U=Math.floor(f/65536),qt=f-U*65536,f=vt+U+65535,U=Math.floor(f/65536),vt=f-U*65536,f=dt+U+65535,U=Math.floor(f/65536),dt=f-U*65536,f=ut+U+65535,U=Math.floor(f/65536),ut=f-U*65536,f=at+U+65535,U=Math.floor(f/65536),at=f-U*65536,f=st+U+65535,U=Math.floor(f/65536),st=f-U*65536,f=it+U+65535,U=Math.floor(f/65536),it=f-U*65536,f=Ze+U+65535,U=Math.floor(f/65536),Ze=f-U*65536,f=et+U+65535,U=Math.floor(f/65536),et=f-U*65536,xe+=U-1+37*(U-1),Z[0]=xe,Z[1]=ze,Z[2]=ot,Z[3]=Dt,Z[4]=lt,Z[5]=ft,Z[6]=Bt,Z[7]=qt,Z[8]=vt,Z[9]=dt,Z[10]=ut,Z[11]=at,Z[12]=st,Z[13]=it,Z[14]=Ze,Z[15]=et}function b(Z,ne){h(Z,ne,ne)}function q(Z,ne){const V=M();let f;for(f=0;f<16;f++)V[f]=ne[f];for(f=253;f>=0;f--)b(V,V),f!==2&&f!==4&&h(V,V,ne);for(f=0;f<16;f++)Z[f]=V[f]}function O(Z,ne){const V=M();let f;for(f=0;f<16;f++)V[f]=ne[f];for(f=250;f>=0;f--)b(V,V),f!==1&&h(V,V,ne);for(f=0;f<16;f++)Z[f]=V[f]}function H(Z,ne){const V=M(),f=M(),U=M(),xe=M(),ze=M(),ot=M(),Dt=M(),lt=M(),ft=M();m(V,Z[1],Z[0]),m(ft,ne[1],ne[0]),h(V,V,ft),we(f,Z[0],Z[1]),we(ft,ne[0],ne[1]),h(f,f,ft),h(U,Z[3],ne[3]),h(U,U,F),h(xe,Z[2],ne[2]),we(xe,xe,xe),m(ze,f,V),m(ot,xe,U),we(Dt,xe,U),we(lt,f,V),h(Z[0],ze,ot),h(Z[1],lt,Dt),h(Z[2],Dt,ot),h(Z[3],ze,lt)}function D(Z,ne,V){for(let f=0;f<4;f++)Ee(Z[f],ne[f],V)}function E(Z,ne){const V=M(),f=M(),U=M();q(U,ne[2]),h(V,ne[0],U),h(f,ne[1],U),be(Z,f),Z[31]^=Le(V)<<7}function I(Z,ne,V){ie(Z[0],j),ie(Z[1],T),ie(Z[2],T),ie(Z[3],j);for(let f=255;f>=0;--f){const U=V[f/8|0]>>(f&7)&1;D(Z,ne,U),H(ne,Z),H(Z,Z),D(Z,ne,U)}}function x(Z,ne){const V=[M(),M(),M(),M()];ie(V[0],ee),ie(V[1],ae),ie(V[2],T),h(V[3],ee,ae),I(Z,V,ne)}function _(Z){if(Z.length!==p.aP)throw new Error(`ed25519: seed must be ${p.aP} bytes`);const ne=(0,ue.hash)(Z);ne[0]&=248,ne[31]&=127,ne[31]|=64;const V=new Uint8Array(32),f=[M(),M(),M(),M()];x(f,ne),E(V,f);const U=new Uint8Array(64);return U.set(Z),U.set(V,32),{publicKey:V,secretKey:U}}p._w=_;function S(Z){const ne=(0,oe.randomBytes)(32,Z),V=_(ne);return(0,ge.wipe)(ne),V}B=S;function Q(Z){if(Z.length!==p.KS)throw new Error(`ed25519: secret key must be ${p.KS} bytes`);return new Uint8Array(Z.subarray(32))}B=Q;const J=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function re(Z,ne){let V,f,U,xe;for(f=63;f>=32;--f){for(V=0,U=f-32,xe=f-12;U<xe;++U)ne[U]+=V-16*ne[f]*J[U-(f-32)],V=Math.floor((ne[U]+128)/256),ne[U]-=V*256;ne[U]+=V,ne[f]=0}for(V=0,U=0;U<32;U++)ne[U]+=V-(ne[31]>>4)*J[U],V=ne[U]>>8,ne[U]&=255;for(U=0;U<32;U++)ne[U]-=V*J[U];for(f=0;f<32;f++)ne[f+1]+=ne[f]>>8,Z[f]=ne[f]&255}function Pe(Z){const ne=new Float64Array(64);for(let V=0;V<64;V++)ne[V]=Z[V];for(let V=0;V<64;V++)Z[V]=0;re(Z,ne)}function le(Z,ne){const V=new Float64Array(64),f=[M(),M(),M(),M()],U=(0,ue.hash)(Z.subarray(0,32));U[0]&=248,U[31]&=127,U[31]|=64;const xe=new Uint8Array(64);xe.set(U.subarray(32),32);const ze=new ue.SHA512;ze.update(xe.subarray(32)),ze.update(ne);const ot=ze.digest();ze.clean(),Pe(ot),x(f,ot),E(xe,f),ze.reset(),ze.update(xe.subarray(0,32)),ze.update(Z.subarray(32)),ze.update(ne);const Dt=ze.digest();Pe(Dt);for(let lt=0;lt<32;lt++)V[lt]=ot[lt];for(let lt=0;lt<32;lt++)for(let ft=0;ft<32;ft++)V[lt+ft]+=Dt[lt]*U[ft];return re(xe.subarray(32),V),xe}p.Xx=le;function De(Z,ne){const V=M(),f=M(),U=M(),xe=M(),ze=M(),ot=M(),Dt=M();return ie(Z[2],T),ye(Z[1],ne),b(U,Z[1]),h(xe,U,C),m(U,U,Z[2]),we(xe,Z[2],xe),b(ze,xe),b(ot,ze),h(Dt,ot,ze),h(V,Dt,U),h(V,V,xe),O(V,V),h(V,V,U),h(V,V,xe),h(V,V,xe),h(Z[0],V,xe),b(f,Z[0]),h(f,f,xe),Be(f,U)&&h(Z[0],Z[0],G),b(f,Z[0]),h(f,f,xe),Be(f,U)?-1:(Le(Z[0])===ne[31]>>7&&m(Z[0],j,Z[0]),h(Z[3],Z[0],Z[1]),0)}function Ie(Z,ne,V){const f=new Uint8Array(32),U=[M(),M(),M(),M()],xe=[M(),M(),M(),M()];if(V.length!==p.jQ)throw new Error(`ed25519: signature must be ${p.jQ} bytes`);if(De(xe,Z))return!1;const ze=new ue.SHA512;ze.update(V.subarray(0,32)),ze.update(Z),ze.update(ne);const ot=ze.digest();return Pe(ot),I(U,xe,ot),x(xe,V.subarray(32)),H(U,xe),E(f,U),!Re(V,f)}B=Ie;function Te(Z){let ne=[M(),M(),M(),M()];if(De(ne,Z))throw new Error("Ed25519: invalid public key");let V=M(),f=M(),U=ne[1];we(V,T,U),m(f,T,U),q(f,f),h(V,V,f);let xe=new Uint8Array(32);return be(xe,V),xe}B=Te;function Me(Z){const ne=(0,ue.hash)(Z.subarray(0,32));ne[0]&=248,ne[31]&=127,ne[31]|=64;const V=new Uint8Array(ne.subarray(0,32));return(0,ge.wipe)(ne),V}B=Me},94719:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0});function P(B){return typeof B.saveState<"u"&&typeof B.restoreState<"u"&&typeof B.cleanSavedState<"u"}p.isSerializableHash=P},45306:function(Ae,p,P){"use strict";var B;B={value:!0};var oe=P(65629),ue=P(49644),ge=function(){function M(Y,j,T,C){T===void 0&&(T=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=Y,this._info=C;var F=oe.hmac(this._hash,T,j);this._hmac=new oe.HMAC(Y,F),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return M.prototype._fillBuffer=function(){this._counter[0]++;var Y=this._counter[0];if(Y===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),Y>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},M.prototype.expand=function(Y){for(var j=new Uint8Array(Y),T=0;T<j.length;T++)this._bufpos===this._buffer.length&&this._fillBuffer(),j[T]=this._buffer[this._bufpos++];return j},M.prototype.clean=function(){this._hmac.clean(),ue.wipe(this._buffer),ue.wipe(this._counter),this._bufpos=0},M}();p.t=ge},65629:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var B=P(94719),oe=P(59872),ue=P(49644),ge=function(){function Y(j,T){this._finished=!1,this._inner=new j,this._outer=new j,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var C=new Uint8Array(this.blockSize);T.length>this.blockSize?this._inner.update(T).finish(C).clean():C.set(T);for(var F=0;F<C.length;F++)C[F]^=54;this._inner.update(C);for(var F=0;F<C.length;F++)C[F]^=106;this._outer.update(C),B.isSerializableHash(this._inner)&&B.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ue.wipe(C)}return Y.prototype.reset=function(){if(!B.isSerializableHash(this._inner)||!B.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},Y.prototype.clean=function(){B.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),B.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},Y.prototype.update=function(j){return this._inner.update(j),this},Y.prototype.finish=function(j){return this._finished?(this._outer.finish(j),this):(this._inner.finish(j),this._outer.update(j.subarray(0,this.digestLength)).finish(j),this._finished=!0,this)},Y.prototype.digest=function(){var j=new Uint8Array(this.digestLength);return this.finish(j),j},Y.prototype.saveState=function(){if(!B.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},Y.prototype.restoreState=function(j){if(!B.isSerializableHash(this._inner)||!B.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(j),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},Y.prototype.cleanSavedState=function(j){if(!B.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(j)},Y}();p.HMAC=ge;function M(Y,j,T){var C=new ge(Y,j);C.update(T);var F=C.digest();return C.clean(),F}p.hmac=M,p.equal=oe.equal},5554:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0});function P(Y,j){var T=Y>>>16&65535,C=Y&65535,F=j>>>16&65535,ee=j&65535;return C*ee+(T*ee+C*F<<16>>>0)|0}p.mul=Math.imul||P;function B(Y,j){return Y+j|0}p.add=B;function oe(Y,j){return Y-j|0}p.sub=oe;function ue(Y,j){return Y<<j|Y>>>32-j}p.rotl=ue;function ge(Y,j){return Y<<32-j|Y>>>j}p.rotr=ge;function M(Y){return typeof Y=="number"&&isFinite(Y)&&Math.floor(Y)===Y}p.isInteger=Number.isInteger||M,p.MAX_SAFE_INTEGER=9007199254740991,p.isSafeInteger=function(Y){return p.isInteger(Y)&&Y>=-p.MAX_SAFE_INTEGER&&Y<=p.MAX_SAFE_INTEGER}},53482:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var B=P(59872),oe=P(49644);p.DIGEST_LENGTH=16;var ue=function(){function Y(j){this.digestLength=p.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var T=j[0]|j[1]<<8;this._r[0]=T&8191;var C=j[2]|j[3]<<8;this._r[1]=(T>>>13|C<<3)&8191;var F=j[4]|j[5]<<8;this._r[2]=(C>>>10|F<<6)&7939;var ee=j[6]|j[7]<<8;this._r[3]=(F>>>7|ee<<9)&8191;var ae=j[8]|j[9]<<8;this._r[4]=(ee>>>4|ae<<12)&255,this._r[5]=ae>>>1&8190;var G=j[10]|j[11]<<8;this._r[6]=(ae>>>14|G<<2)&8191;var ie=j[12]|j[13]<<8;this._r[7]=(G>>>11|ie<<5)&8065;var ce=j[14]|j[15]<<8;this._r[8]=(ie>>>8|ce<<8)&8191,this._r[9]=ce>>>5&127,this._pad[0]=j[16]|j[17]<<8,this._pad[1]=j[18]|j[19]<<8,this._pad[2]=j[20]|j[21]<<8,this._pad[3]=j[22]|j[23]<<8,this._pad[4]=j[24]|j[25]<<8,this._pad[5]=j[26]|j[27]<<8,this._pad[6]=j[28]|j[29]<<8,this._pad[7]=j[30]|j[31]<<8}return Y.prototype._blocks=function(j,T,C){for(var F=this._fin?0:2048,ee=this._h[0],ae=this._h[1],G=this._h[2],ie=this._h[3],ce=this._h[4],Ee=this._h[5],be=this._h[6],Re=this._h[7],Be=this._h[8],Le=this._h[9],ye=this._r[0],we=this._r[1],m=this._r[2],h=this._r[3],b=this._r[4],q=this._r[5],O=this._r[6],H=this._r[7],D=this._r[8],E=this._r[9];C>=16;){var I=j[T+0]|j[T+1]<<8;ee+=I&8191;var x=j[T+2]|j[T+3]<<8;ae+=(I>>>13|x<<3)&8191;var _=j[T+4]|j[T+5]<<8;G+=(x>>>10|_<<6)&8191;var S=j[T+6]|j[T+7]<<8;ie+=(_>>>7|S<<9)&8191;var Q=j[T+8]|j[T+9]<<8;ce+=(S>>>4|Q<<12)&8191,Ee+=Q>>>1&8191;var J=j[T+10]|j[T+11]<<8;be+=(Q>>>14|J<<2)&8191;var re=j[T+12]|j[T+13]<<8;Re+=(J>>>11|re<<5)&8191;var Pe=j[T+14]|j[T+15]<<8;Be+=(re>>>8|Pe<<8)&8191,Le+=Pe>>>5|F;var le=0,De=le;De+=ee*ye,De+=ae*(5*E),De+=G*(5*D),De+=ie*(5*H),De+=ce*(5*O),le=De>>>13,De&=8191,De+=Ee*(5*q),De+=be*(5*b),De+=Re*(5*h),De+=Be*(5*m),De+=Le*(5*we),le+=De>>>13,De&=8191;var Ie=le;Ie+=ee*we,Ie+=ae*ye,Ie+=G*(5*E),Ie+=ie*(5*D),Ie+=ce*(5*H),le=Ie>>>13,Ie&=8191,Ie+=Ee*(5*O),Ie+=be*(5*q),Ie+=Re*(5*b),Ie+=Be*(5*h),Ie+=Le*(5*m),le+=Ie>>>13,Ie&=8191;var Te=le;Te+=ee*m,Te+=ae*we,Te+=G*ye,Te+=ie*(5*E),Te+=ce*(5*D),le=Te>>>13,Te&=8191,Te+=Ee*(5*H),Te+=be*(5*O),Te+=Re*(5*q),Te+=Be*(5*b),Te+=Le*(5*h),le+=Te>>>13,Te&=8191;var Me=le;Me+=ee*h,Me+=ae*m,Me+=G*we,Me+=ie*ye,Me+=ce*(5*E),le=Me>>>13,Me&=8191,Me+=Ee*(5*D),Me+=be*(5*H),Me+=Re*(5*O),Me+=Be*(5*q),Me+=Le*(5*b),le+=Me>>>13,Me&=8191;var Z=le;Z+=ee*b,Z+=ae*h,Z+=G*m,Z+=ie*we,Z+=ce*ye,le=Z>>>13,Z&=8191,Z+=Ee*(5*E),Z+=be*(5*D),Z+=Re*(5*H),Z+=Be*(5*O),Z+=Le*(5*q),le+=Z>>>13,Z&=8191;var ne=le;ne+=ee*q,ne+=ae*b,ne+=G*h,ne+=ie*m,ne+=ce*we,le=ne>>>13,ne&=8191,ne+=Ee*ye,ne+=be*(5*E),ne+=Re*(5*D),ne+=Be*(5*H),ne+=Le*(5*O),le+=ne>>>13,ne&=8191;var V=le;V+=ee*O,V+=ae*q,V+=G*b,V+=ie*h,V+=ce*m,le=V>>>13,V&=8191,V+=Ee*we,V+=be*ye,V+=Re*(5*E),V+=Be*(5*D),V+=Le*(5*H),le+=V>>>13,V&=8191;var f=le;f+=ee*H,f+=ae*O,f+=G*q,f+=ie*b,f+=ce*h,le=f>>>13,f&=8191,f+=Ee*m,f+=be*we,f+=Re*ye,f+=Be*(5*E),f+=Le*(5*D),le+=f>>>13,f&=8191;var U=le;U+=ee*D,U+=ae*H,U+=G*O,U+=ie*q,U+=ce*b,le=U>>>13,U&=8191,U+=Ee*h,U+=be*m,U+=Re*we,U+=Be*ye,U+=Le*(5*E),le+=U>>>13,U&=8191;var xe=le;xe+=ee*E,xe+=ae*D,xe+=G*H,xe+=ie*O,xe+=ce*q,le=xe>>>13,xe&=8191,xe+=Ee*b,xe+=be*h,xe+=Re*m,xe+=Be*we,xe+=Le*ye,le+=xe>>>13,xe&=8191,le=(le<<2)+le|0,le=le+De|0,De=le&8191,le=le>>>13,Ie+=le,ee=De,ae=Ie,G=Te,ie=Me,ce=Z,Ee=ne,be=V,Re=f,Be=U,Le=xe,T+=16,C-=16}this._h[0]=ee,this._h[1]=ae,this._h[2]=G,this._h[3]=ie,this._h[4]=ce,this._h[5]=Ee,this._h[6]=be,this._h[7]=Re,this._h[8]=Be,this._h[9]=Le},Y.prototype.finish=function(j,T){T===void 0&&(T=0);var C=new Uint16Array(10),F,ee,ae,G;if(this._leftover){for(G=this._leftover,this._buffer[G++]=1;G<16;G++)this._buffer[G]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(F=this._h[1]>>>13,this._h[1]&=8191,G=2;G<10;G++)this._h[G]+=F,F=this._h[G]>>>13,this._h[G]&=8191;for(this._h[0]+=F*5,F=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=F,F=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=F,C[0]=this._h[0]+5,F=C[0]>>>13,C[0]&=8191,G=1;G<10;G++)C[G]=this._h[G]+F,F=C[G]>>>13,C[G]&=8191;for(C[9]-=8192,ee=(F^1)-1,G=0;G<10;G++)C[G]&=ee;for(ee=~ee,G=0;G<10;G++)this._h[G]=this._h[G]&ee|C[G];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,ae=this._h[0]+this._pad[0],this._h[0]=ae&65535,G=1;G<8;G++)ae=(this._h[G]+this._pad[G]|0)+(ae>>>16)|0,this._h[G]=ae&65535;return j[T+0]=this._h[0]>>>0,j[T+1]=this._h[0]>>>8,j[T+2]=this._h[1]>>>0,j[T+3]=this._h[1]>>>8,j[T+4]=this._h[2]>>>0,j[T+5]=this._h[2]>>>8,j[T+6]=this._h[3]>>>0,j[T+7]=this._h[3]>>>8,j[T+8]=this._h[4]>>>0,j[T+9]=this._h[4]>>>8,j[T+10]=this._h[5]>>>0,j[T+11]=this._h[5]>>>8,j[T+12]=this._h[6]>>>0,j[T+13]=this._h[6]>>>8,j[T+14]=this._h[7]>>>0,j[T+15]=this._h[7]>>>8,this._finished=!0,this},Y.prototype.update=function(j){var T=0,C=j.length,F;if(this._leftover){F=16-this._leftover,F>C&&(F=C);for(var ee=0;ee<F;ee++)this._buffer[this._leftover+ee]=j[T+ee];if(C-=F,T+=F,this._leftover+=F,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(C>=16&&(F=C-C%16,this._blocks(j,T,F),T+=F,C-=F),C){for(var ee=0;ee<C;ee++)this._buffer[this._leftover+ee]=j[T+ee];this._leftover+=C}return this},Y.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var j=new Uint8Array(16);return this.finish(j),j},Y.prototype.clean=function(){return oe.wipe(this._buffer),oe.wipe(this._r),oe.wipe(this._h),oe.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},Y}();p.Poly1305=ue;function ge(Y,j){var T=new ue(Y);T.update(j);var C=T.digest();return T.clean(),C}p.oneTimeAuth=ge;function M(Y,j){return Y.length!==p.DIGEST_LENGTH||j.length!==p.DIGEST_LENGTH?!1:B.equal(Y,j)}p.equal=M},4883:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.randomStringForEntropy=p.randomString=p.randomUint32=p.randomBytes=p.defaultRandomSource=void 0;const B=P(69490),oe=P(6050),ue=P(49644);p.defaultRandomSource=new B.SystemRandomSource;function ge(C,F=p.defaultRandomSource){return F.randomBytes(C)}p.randomBytes=ge;function M(C=p.defaultRandomSource){const F=ge(4,C),ee=(0,oe.readUint32LE)(F);return(0,ue.wipe)(F),ee}p.randomUint32=M;const Y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function j(C,F=Y,ee=p.defaultRandomSource){if(F.length<2)throw new Error("randomString charset is too short");if(F.length>256)throw new Error("randomString charset is too long");let ae="";const G=F.length,ie=256-256%G;for(;C>0;){const ce=ge(Math.ceil(C*256/ie),ee);for(let Ee=0;Ee<ce.length&&C>0;Ee++){const be=ce[Ee];be<ie&&(ae+=F.charAt(be%G),C--)}(0,ue.wipe)(ce)}return ae}p.randomString=j;function T(C,F=Y,ee=p.defaultRandomSource){const ae=Math.ceil(C/(Math.log(F.length)/Math.LN2));return j(ae,F,ee)}p.randomStringForEntropy=T},95774:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.BrowserRandomSource=void 0;const P=65536;class B{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const ue=typeof self<"u"?self.crypto||self.msCrypto:null;ue&&ue.getRandomValues!==void 0&&(this._crypto=ue,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(ue){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const ge=new Uint8Array(ue);for(let M=0;M<ge.length;M+=P)this._crypto.getRandomValues(ge.subarray(M,M+Math.min(ge.length-M,P)));return ge}}p.BrowserRandomSource=B},26485:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.NodeRandomSource=void 0;const B=P(49644);class oe{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const ge=P(10985);ge&&ge.randomBytes&&(this._crypto=ge,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(ge){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let M=this._crypto.randomBytes(ge);if(M.length!==ge)throw new Error("NodeRandomSource: got fewer bytes than requested");const Y=new Uint8Array(ge);for(let j=0;j<Y.length;j++)Y[j]=M[j];return(0,B.wipe)(M),Y}}p.NodeRandomSource=oe},69490:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.SystemRandomSource=void 0;const B=P(95774),oe=P(26485);class ue{constructor(){if(this.isAvailable=!1,this.name="",this._source=new B.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new oe.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(M){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(M)}}p.SystemRandomSource=ue},76846:function(Ae,p,P){"use strict";var B;B={value:!0};var oe=P(6050),ue=P(49644);p.k=32,p.cn=64;var ge=function(){function T(){this.digestLength=p.k,this.blockSize=p.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return T.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},T.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},T.prototype.clean=function(){ue.wipe(this._buffer),ue.wipe(this._temp),this.reset()},T.prototype.update=function(C,F){if(F===void 0&&(F=C.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var ee=0;if(this._bytesHashed+=F,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&F>0;)this._buffer[this._bufferLength++]=C[ee++],F--;this._bufferLength===this.blockSize&&(Y(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(F>=this.blockSize&&(ee=Y(this._temp,this._state,C,ee,F),F%=this.blockSize);F>0;)this._buffer[this._bufferLength++]=C[ee++],F--;return this},T.prototype.finish=function(C){if(!this._finished){var F=this._bytesHashed,ee=this._bufferLength,ae=F/536870912|0,G=F<<3,ie=F%64<56?64:128;this._buffer[ee]=128;for(var ce=ee+1;ce<ie-8;ce++)this._buffer[ce]=0;oe.writeUint32BE(ae,this._buffer,ie-8),oe.writeUint32BE(G,this._buffer,ie-4),Y(this._temp,this._state,this._buffer,0,ie),this._finished=!0}for(var ce=0;ce<this.digestLength/4;ce++)oe.writeUint32BE(this._state[ce],C,ce*4);return this},T.prototype.digest=function(){var C=new Uint8Array(this.digestLength);return this.finish(C),C},T.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},T.prototype.restoreState=function(C){return this._state.set(C.state),this._bufferLength=C.bufferLength,C.buffer&&this._buffer.set(C.buffer),this._bytesHashed=C.bytesHashed,this._finished=!1,this},T.prototype.cleanSavedState=function(C){ue.wipe(C.state),C.buffer&&ue.wipe(C.buffer),C.bufferLength=0,C.bytesHashed=0},T}();p.mE=ge;var M=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Y(T,C,F,ee,ae){for(;ae>=64;){for(var G=C[0],ie=C[1],ce=C[2],Ee=C[3],be=C[4],Re=C[5],Be=C[6],Le=C[7],ye=0;ye<16;ye++){var we=ee+ye*4;T[ye]=oe.readUint32BE(F,we)}for(var ye=16;ye<64;ye++){var m=T[ye-2],h=(m>>>17|m<<32-17)^(m>>>19|m<<32-19)^m>>>10;m=T[ye-15];var b=(m>>>7|m<<32-7)^(m>>>18|m<<32-18)^m>>>3;T[ye]=(h+T[ye-7]|0)+(b+T[ye-16]|0)}for(var ye=0;ye<64;ye++){var h=(((be>>>6|be<<26)^(be>>>11|be<<21)^(be>>>25|be<<7))+(be&Re^~be&Be)|0)+(Le+(M[ye]+T[ye]|0)|0)|0,b=((G>>>2|G<<32-2)^(G>>>13|G<<32-13)^(G>>>22|G<<32-22))+(G&ie^G&ce^ie&ce)|0;Le=Be,Be=Re,Re=be,be=Ee+h|0,Ee=ce,ce=ie,ie=G,G=h+b|0}C[0]+=G,C[1]+=ie,C[2]+=ce,C[3]+=Ee,C[4]+=be,C[5]+=Re,C[6]+=Be,C[7]+=Le,ee+=64,ae-=64}return ee}function j(T){var C=new ge;C.update(T);var F=C.digest();return C.clean(),F}p.vp=j},21318:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var B=P(6050),oe=P(49644);p.DIGEST_LENGTH=64,p.BLOCK_SIZE=128;var ue=function(){function j(){this.digestLength=p.DIGEST_LENGTH,this.blockSize=p.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return j.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},j.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},j.prototype.clean=function(){oe.wipe(this._buffer),oe.wipe(this._tempHi),oe.wipe(this._tempLo),this.reset()},j.prototype.update=function(T,C){if(C===void 0&&(C=T.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var F=0;if(this._bytesHashed+=C,this._bufferLength>0){for(;this._bufferLength<p.BLOCK_SIZE&&C>0;)this._buffer[this._bufferLength++]=T[F++],C--;this._bufferLength===this.blockSize&&(M(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(C>=this.blockSize&&(F=M(this._tempHi,this._tempLo,this._stateHi,this._stateLo,T,F,C),C%=this.blockSize);C>0;)this._buffer[this._bufferLength++]=T[F++],C--;return this},j.prototype.finish=function(T){if(!this._finished){var C=this._bytesHashed,F=this._bufferLength,ee=C/536870912|0,ae=C<<3,G=C%128<112?128:256;this._buffer[F]=128;for(var ie=F+1;ie<G-8;ie++)this._buffer[ie]=0;B.writeUint32BE(ee,this._buffer,G-8),B.writeUint32BE(ae,this._buffer,G-4),M(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,G),this._finished=!0}for(var ie=0;ie<this.digestLength/8;ie++)B.writeUint32BE(this._stateHi[ie],T,ie*8),B.writeUint32BE(this._stateLo[ie],T,ie*8+4);return this},j.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},j.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},j.prototype.restoreState=function(T){return this._stateHi.set(T.stateHi),this._stateLo.set(T.stateLo),this._bufferLength=T.bufferLength,T.buffer&&this._buffer.set(T.buffer),this._bytesHashed=T.bytesHashed,this._finished=!1,this},j.prototype.cleanSavedState=function(T){oe.wipe(T.stateHi),oe.wipe(T.stateLo),T.buffer&&oe.wipe(T.buffer),T.bufferLength=0,T.bytesHashed=0},j}();p.SHA512=ue;var ge=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function M(j,T,C,F,ee,ae,G){for(var ie=C[0],ce=C[1],Ee=C[2],be=C[3],Re=C[4],Be=C[5],Le=C[6],ye=C[7],we=F[0],m=F[1],h=F[2],b=F[3],q=F[4],O=F[5],H=F[6],D=F[7],E,I,x,_,S,Q,J,re;G>=128;){for(var Pe=0;Pe<16;Pe++){var le=8*Pe+ae;j[Pe]=B.readUint32BE(ee,le),T[Pe]=B.readUint32BE(ee,le+4)}for(var Pe=0;Pe<80;Pe++){var De=ie,Ie=ce,Te=Ee,Me=be,Z=Re,ne=Be,V=Le,f=ye,U=we,xe=m,ze=h,ot=b,Dt=q,lt=O,ft=H,Bt=D;if(E=ye,I=D,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=(Re>>>14|q<<32-14)^(Re>>>18|q<<32-18)^(q>>>41-32|Re<<32-(41-32)),I=(q>>>14|Re<<32-14)^(q>>>18|Re<<32-18)^(Re>>>41-32|q<<32-(41-32)),S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,E=Re&Be^~Re&Le,I=q&O^~q&H,S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,E=ge[Pe*2],I=ge[Pe*2+1],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,E=j[Pe%16],I=T[Pe%16],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,x=J&65535|re<<16,_=S&65535|Q<<16,E=x,I=_,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=(ie>>>28|we<<32-28)^(we>>>34-32|ie<<32-(34-32))^(we>>>39-32|ie<<32-(39-32)),I=(we>>>28|ie<<32-28)^(ie>>>34-32|we<<32-(34-32))^(ie>>>39-32|we<<32-(39-32)),S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,E=ie&ce^ie&Ee^ce&Ee,I=we&m^we&h^m&h,S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,f=J&65535|re<<16,Bt=S&65535|Q<<16,E=Me,I=ot,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=x,I=_,S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,Me=J&65535|re<<16,ot=S&65535|Q<<16,ce=De,Ee=Ie,be=Te,Re=Me,Be=Z,Le=ne,ye=V,ie=f,m=U,h=xe,b=ze,q=ot,O=Dt,H=lt,D=ft,we=Bt,Pe%16===15)for(var le=0;le<16;le++)E=j[le],I=T[le],S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=j[(le+9)%16],I=T[(le+9)%16],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,x=j[(le+1)%16],_=T[(le+1)%16],E=(x>>>1|_<<32-1)^(x>>>8|_<<32-8)^x>>>7,I=(_>>>1|x<<32-1)^(_>>>8|x<<32-8)^(_>>>7|x<<32-7),S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,x=j[(le+14)%16],_=T[(le+14)%16],E=(x>>>19|_<<32-19)^(_>>>61-32|x<<32-(61-32))^x>>>6,I=(_>>>19|x<<32-19)^(x>>>61-32|_<<32-(61-32))^(_>>>6|x<<32-6),S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,j[le]=J&65535|re<<16,T[le]=S&65535|Q<<16}E=ie,I=we,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[0],I=F[0],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[0]=ie=J&65535|re<<16,F[0]=we=S&65535|Q<<16,E=ce,I=m,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[1],I=F[1],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[1]=ce=J&65535|re<<16,F[1]=m=S&65535|Q<<16,E=Ee,I=h,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[2],I=F[2],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[2]=Ee=J&65535|re<<16,F[2]=h=S&65535|Q<<16,E=be,I=b,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[3],I=F[3],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[3]=be=J&65535|re<<16,F[3]=b=S&65535|Q<<16,E=Re,I=q,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[4],I=F[4],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[4]=Re=J&65535|re<<16,F[4]=q=S&65535|Q<<16,E=Be,I=O,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[5],I=F[5],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[5]=Be=J&65535|re<<16,F[5]=O=S&65535|Q<<16,E=Le,I=H,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[6],I=F[6],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[6]=Le=J&65535|re<<16,F[6]=H=S&65535|Q<<16,E=ye,I=D,S=I&65535,Q=I>>>16,J=E&65535,re=E>>>16,E=C[7],I=F[7],S+=I&65535,Q+=I>>>16,J+=E&65535,re+=E>>>16,Q+=S>>>16,J+=Q>>>16,re+=J>>>16,C[7]=ye=J&65535|re<<16,F[7]=D=S&65535|Q<<16,ae+=128,G-=128}return ae}function Y(j){var T=new ue;T.update(j);var C=T.digest();return T.clean(),C}p.hash=Y},49644:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0});function P(B){for(var oe=0;oe<B.length;oe++)B[oe]=0;return B}p.wipe=P},9267:function(Ae,p,P){"use strict";var B;B={value:!0},p.gi=p.Au=B=B=B=B=p.KS=p.kz=void 0;const oe=P(4883),ue=P(49644);p.kz=32,p.KS=32,B=32;function ge(ye){const we=new Float64Array(16);if(ye)for(let m=0;m<ye.length;m++)we[m]=ye[m];return we}const M=new Uint8Array(32);M[0]=9;const Y=ge([56129,1]);function j(ye){let we=1;for(let m=0;m<16;m++){let h=ye[m]+we+65535;we=Math.floor(h/65536),ye[m]=h-we*65536}ye[0]+=we-1+37*(we-1)}function T(ye,we,m){const h=~(m-1);for(let b=0;b<16;b++){const q=h&(ye[b]^we[b]);ye[b]^=q,we[b]^=q}}function C(ye,we){const m=ge(),h=ge();for(let b=0;b<16;b++)h[b]=we[b];j(h),j(h),j(h);for(let b=0;b<2;b++){m[0]=h[0]-65517;for(let O=1;O<15;O++)m[O]=h[O]-65535-(m[O-1]>>16&1),m[O-1]&=65535;m[15]=h[15]-32767-(m[14]>>16&1);const q=m[15]>>16&1;m[14]&=65535,T(h,m,1-q)}for(let b=0;b<16;b++)ye[2*b]=h[b]&255,ye[2*b+1]=h[b]>>8}function F(ye,we){for(let m=0;m<16;m++)ye[m]=we[2*m]+(we[2*m+1]<<8);ye[15]&=32767}function ee(ye,we,m){for(let h=0;h<16;h++)ye[h]=we[h]+m[h]}function ae(ye,we,m){for(let h=0;h<16;h++)ye[h]=we[h]-m[h]}function G(ye,we,m){let h,b,q=0,O=0,H=0,D=0,E=0,I=0,x=0,_=0,S=0,Q=0,J=0,re=0,Pe=0,le=0,De=0,Ie=0,Te=0,Me=0,Z=0,ne=0,V=0,f=0,U=0,xe=0,ze=0,ot=0,Dt=0,lt=0,ft=0,Bt=0,qt=0,vt=m[0],dt=m[1],ut=m[2],at=m[3],st=m[4],it=m[5],Ze=m[6],et=m[7],Ye=m[8],yt=m[9],mt=m[10],bt=m[11],It=m[12],St=m[13],Ot=m[14],At=m[15];h=we[0],q+=h*vt,O+=h*dt,H+=h*ut,D+=h*at,E+=h*st,I+=h*it,x+=h*Ze,_+=h*et,S+=h*Ye,Q+=h*yt,J+=h*mt,re+=h*bt,Pe+=h*It,le+=h*St,De+=h*Ot,Ie+=h*At,h=we[1],O+=h*vt,H+=h*dt,D+=h*ut,E+=h*at,I+=h*st,x+=h*it,_+=h*Ze,S+=h*et,Q+=h*Ye,J+=h*yt,re+=h*mt,Pe+=h*bt,le+=h*It,De+=h*St,Ie+=h*Ot,Te+=h*At,h=we[2],H+=h*vt,D+=h*dt,E+=h*ut,I+=h*at,x+=h*st,_+=h*it,S+=h*Ze,Q+=h*et,J+=h*Ye,re+=h*yt,Pe+=h*mt,le+=h*bt,De+=h*It,Ie+=h*St,Te+=h*Ot,Me+=h*At,h=we[3],D+=h*vt,E+=h*dt,I+=h*ut,x+=h*at,_+=h*st,S+=h*it,Q+=h*Ze,J+=h*et,re+=h*Ye,Pe+=h*yt,le+=h*mt,De+=h*bt,Ie+=h*It,Te+=h*St,Me+=h*Ot,Z+=h*At,h=we[4],E+=h*vt,I+=h*dt,x+=h*ut,_+=h*at,S+=h*st,Q+=h*it,J+=h*Ze,re+=h*et,Pe+=h*Ye,le+=h*yt,De+=h*mt,Ie+=h*bt,Te+=h*It,Me+=h*St,Z+=h*Ot,ne+=h*At,h=we[5],I+=h*vt,x+=h*dt,_+=h*ut,S+=h*at,Q+=h*st,J+=h*it,re+=h*Ze,Pe+=h*et,le+=h*Ye,De+=h*yt,Ie+=h*mt,Te+=h*bt,Me+=h*It,Z+=h*St,ne+=h*Ot,V+=h*At,h=we[6],x+=h*vt,_+=h*dt,S+=h*ut,Q+=h*at,J+=h*st,re+=h*it,Pe+=h*Ze,le+=h*et,De+=h*Ye,Ie+=h*yt,Te+=h*mt,Me+=h*bt,Z+=h*It,ne+=h*St,V+=h*Ot,f+=h*At,h=we[7],_+=h*vt,S+=h*dt,Q+=h*ut,J+=h*at,re+=h*st,Pe+=h*it,le+=h*Ze,De+=h*et,Ie+=h*Ye,Te+=h*yt,Me+=h*mt,Z+=h*bt,ne+=h*It,V+=h*St,f+=h*Ot,U+=h*At,h=we[8],S+=h*vt,Q+=h*dt,J+=h*ut,re+=h*at,Pe+=h*st,le+=h*it,De+=h*Ze,Ie+=h*et,Te+=h*Ye,Me+=h*yt,Z+=h*mt,ne+=h*bt,V+=h*It,f+=h*St,U+=h*Ot,xe+=h*At,h=we[9],Q+=h*vt,J+=h*dt,re+=h*ut,Pe+=h*at,le+=h*st,De+=h*it,Ie+=h*Ze,Te+=h*et,Me+=h*Ye,Z+=h*yt,ne+=h*mt,V+=h*bt,f+=h*It,U+=h*St,xe+=h*Ot,ze+=h*At,h=we[10],J+=h*vt,re+=h*dt,Pe+=h*ut,le+=h*at,De+=h*st,Ie+=h*it,Te+=h*Ze,Me+=h*et,Z+=h*Ye,ne+=h*yt,V+=h*mt,f+=h*bt,U+=h*It,xe+=h*St,ze+=h*Ot,ot+=h*At,h=we[11],re+=h*vt,Pe+=h*dt,le+=h*ut,De+=h*at,Ie+=h*st,Te+=h*it,Me+=h*Ze,Z+=h*et,ne+=h*Ye,V+=h*yt,f+=h*mt,U+=h*bt,xe+=h*It,ze+=h*St,ot+=h*Ot,Dt+=h*At,h=we[12],Pe+=h*vt,le+=h*dt,De+=h*ut,Ie+=h*at,Te+=h*st,Me+=h*it,Z+=h*Ze,ne+=h*et,V+=h*Ye,f+=h*yt,U+=h*mt,xe+=h*bt,ze+=h*It,ot+=h*St,Dt+=h*Ot,lt+=h*At,h=we[13],le+=h*vt,De+=h*dt,Ie+=h*ut,Te+=h*at,Me+=h*st,Z+=h*it,ne+=h*Ze,V+=h*et,f+=h*Ye,U+=h*yt,xe+=h*mt,ze+=h*bt,ot+=h*It,Dt+=h*St,lt+=h*Ot,ft+=h*At,h=we[14],De+=h*vt,Ie+=h*dt,Te+=h*ut,Me+=h*at,Z+=h*st,ne+=h*it,V+=h*Ze,f+=h*et,U+=h*Ye,xe+=h*yt,ze+=h*mt,ot+=h*bt,Dt+=h*It,lt+=h*St,ft+=h*Ot,Bt+=h*At,h=we[15],Ie+=h*vt,Te+=h*dt,Me+=h*ut,Z+=h*at,ne+=h*st,V+=h*it,f+=h*Ze,U+=h*et,xe+=h*Ye,ze+=h*yt,ot+=h*mt,Dt+=h*bt,lt+=h*It,ft+=h*St,Bt+=h*Ot,qt+=h*At,q+=38*Te,O+=38*Me,H+=38*Z,D+=38*ne,E+=38*V,I+=38*f,x+=38*U,_+=38*xe,S+=38*ze,Q+=38*ot,J+=38*Dt,re+=38*lt,Pe+=38*ft,le+=38*Bt,De+=38*qt,b=1,h=q+b+65535,b=Math.floor(h/65536),q=h-b*65536,h=O+b+65535,b=Math.floor(h/65536),O=h-b*65536,h=H+b+65535,b=Math.floor(h/65536),H=h-b*65536,h=D+b+65535,b=Math.floor(h/65536),D=h-b*65536,h=E+b+65535,b=Math.floor(h/65536),E=h-b*65536,h=I+b+65535,b=Math.floor(h/65536),I=h-b*65536,h=x+b+65535,b=Math.floor(h/65536),x=h-b*65536,h=_+b+65535,b=Math.floor(h/65536),_=h-b*65536,h=S+b+65535,b=Math.floor(h/65536),S=h-b*65536,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=re+b+65535,b=Math.floor(h/65536),re=h-b*65536,h=Pe+b+65535,b=Math.floor(h/65536),Pe=h-b*65536,h=le+b+65535,b=Math.floor(h/65536),le=h-b*65536,h=De+b+65535,b=Math.floor(h/65536),De=h-b*65536,h=Ie+b+65535,b=Math.floor(h/65536),Ie=h-b*65536,q+=b-1+37*(b-1),b=1,h=q+b+65535,b=Math.floor(h/65536),q=h-b*65536,h=O+b+65535,b=Math.floor(h/65536),O=h-b*65536,h=H+b+65535,b=Math.floor(h/65536),H=h-b*65536,h=D+b+65535,b=Math.floor(h/65536),D=h-b*65536,h=E+b+65535,b=Math.floor(h/65536),E=h-b*65536,h=I+b+65535,b=Math.floor(h/65536),I=h-b*65536,h=x+b+65535,b=Math.floor(h/65536),x=h-b*65536,h=_+b+65535,b=Math.floor(h/65536),_=h-b*65536,h=S+b+65535,b=Math.floor(h/65536),S=h-b*65536,h=Q+b+65535,b=Math.floor(h/65536),Q=h-b*65536,h=J+b+65535,b=Math.floor(h/65536),J=h-b*65536,h=re+b+65535,b=Math.floor(h/65536),re=h-b*65536,h=Pe+b+65535,b=Math.floor(h/65536),Pe=h-b*65536,h=le+b+65535,b=Math.floor(h/65536),le=h-b*65536,h=De+b+65535,b=Math.floor(h/65536),De=h-b*65536,h=Ie+b+65535,b=Math.floor(h/65536),Ie=h-b*65536,q+=b-1+37*(b-1),ye[0]=q,ye[1]=O,ye[2]=H,ye[3]=D,ye[4]=E,ye[5]=I,ye[6]=x,ye[7]=_,ye[8]=S,ye[9]=Q,ye[10]=J,ye[11]=re,ye[12]=Pe,ye[13]=le,ye[14]=De,ye[15]=Ie}function ie(ye,we){G(ye,we,we)}function ce(ye,we){const m=ge();for(let h=0;h<16;h++)m[h]=we[h];for(let h=253;h>=0;h--)ie(m,m),h!==2&&h!==4&&G(m,m,we);for(let h=0;h<16;h++)ye[h]=m[h]}function Ee(ye,we){const m=new Uint8Array(32),h=new Float64Array(80),b=ge(),q=ge(),O=ge(),H=ge(),D=ge(),E=ge();for(let S=0;S<31;S++)m[S]=ye[S];m[31]=ye[31]&127|64,m[0]&=248,F(h,we);for(let S=0;S<16;S++)q[S]=h[S];b[0]=H[0]=1;for(let S=254;S>=0;--S){const Q=m[S>>>3]>>>(S&7)&1;T(b,q,Q),T(O,H,Q),ee(D,b,O),ae(b,b,O),ee(O,q,H),ae(q,q,H),ie(H,D),ie(E,b),G(b,O,b),G(O,q,D),ee(D,b,O),ae(b,b,O),ie(q,b),ae(O,H,E),G(b,O,Y),ee(b,b,H),G(O,O,b),G(b,H,E),G(H,q,h),ie(q,D),T(b,q,Q),T(O,H,Q)}for(let S=0;S<16;S++)h[S+16]=b[S],h[S+32]=O[S],h[S+48]=q[S],h[S+64]=H[S];const I=h.subarray(32),x=h.subarray(16);ce(I,I),G(x,x,I);const _=new Uint8Array(32);return C(_,x),_}B=Ee;function be(ye){return Ee(ye,M)}B=be;function Re(ye){if(ye.length!==p.KS)throw new Error(`x25519: seed must be ${p.KS} bytes`);const we=new Uint8Array(ye);return{publicKey:be(we),secretKey:we}}B=Re;function Be(ye){const we=(0,oe.randomBytes)(32,ye),m=Re(we);return(0,ue.wipe)(we),m}p.Au=Be;function Le(ye,we,m=!1){if(ye.length!==p.kz)throw new Error("X25519: incorrect secret key length");if(we.length!==p.kz)throw new Error("X25519: incorrect public key length");const h=Ee(ye,we);if(m){let b=0;for(let q=0;q<h.length;q++)b|=h[q];if(b===0)throw new Error("X25519: invalid shared key")}return h}p.gi=Le},42120:function(Ae,p,P){"use strict";var B=P(21320).default,oe=P(28152).default,ue=P(38887).default,ge=P(27566).default,M=P(67855).default,Y=P(30126),j=P(54525),T=P(61200),C=P(1469),F=function(h){return h==null},ee=Symbol("encodeFragmentIdentifier");function ae(m){switch(m.arrayFormat){case"index":return function(b){return function(q,O){var H=q.length;return O===void 0||m.skipNull&&O===null||m.skipEmptyString&&O===""?q:O===null?[].concat(M(q),[[ce(b,m),"[",H,"]"].join("")]):[].concat(M(q),[[ce(b,m),"[",ce(H,m),"]=",ce(O,m)].join("")])}};case"bracket":return function(b){return function(q,O){return O===void 0||m.skipNull&&O===null||m.skipEmptyString&&O===""?q:O===null?[].concat(M(q),[[ce(b,m),"[]"].join("")]):[].concat(M(q),[[ce(b,m),"[]=",ce(O,m)].join("")])}};case"colon-list-separator":return function(b){return function(q,O){return O===void 0||m.skipNull&&O===null||m.skipEmptyString&&O===""?q:O===null?[].concat(M(q),[[ce(b,m),":list="].join("")]):[].concat(M(q),[[ce(b,m),":list=",ce(O,m)].join("")])}};case"comma":case"separator":case"bracket-separator":{var h=m.arrayFormat==="bracket-separator"?"[]=":"=";return function(b){return function(q,O){return O===void 0||m.skipNull&&O===null||m.skipEmptyString&&O===""?q:(O=O===null?"":O,q.length===0?[[ce(b,m),h,ce(O,m)].join("")]:[[q,ce(O,m)].join(m.arrayFormatSeparator)])}}}default:return function(b){return function(q,O){return O===void 0||m.skipNull&&O===null||m.skipEmptyString&&O===""?q:O===null?[].concat(M(q),[ce(b,m)]):[].concat(M(q),[[ce(b,m),"=",ce(O,m)].join("")])}}}}function G(m){var h;switch(m.arrayFormat){case"index":return function(b,q,O){if(h=/\[(\d*)\]$/.exec(b),b=b.replace(/\[\d*\]$/,""),!h){O[b]=q;return}O[b]===void 0&&(O[b]={}),O[b][h[1]]=q};case"bracket":return function(b,q,O){if(h=/(\[\])$/.exec(b),b=b.replace(/\[\]$/,""),!h){O[b]=q;return}if(O[b]===void 0){O[b]=[q];return}O[b]=[].concat(O[b],q)};case"colon-list-separator":return function(b,q,O){if(h=/(:list)$/.exec(b),b=b.replace(/:list$/,""),!h){O[b]=q;return}if(O[b]===void 0){O[b]=[q];return}O[b]=[].concat(O[b],q)};case"comma":case"separator":return function(b,q,O){var H=typeof q=="string"&&q.includes(m.arrayFormatSeparator),D=typeof q=="string"&&!H&&Ee(q,m).includes(m.arrayFormatSeparator);q=D?Ee(q,m):q;var E=H||D?q.split(m.arrayFormatSeparator).map(function(I){return Ee(I,m)}):q===null?q:Ee(q,m);O[b]=E};case"bracket-separator":return function(b,q,O){var H=/(\[\])$/.test(b);if(b=b.replace(/\[\]$/,""),!H){O[b]=q&&Ee(q,m);return}var D=q===null?[]:q.split(m.arrayFormatSeparator).map(function(E){return Ee(E,m)});if(O[b]===void 0){O[b]=D;return}O[b]=[].concat(O[b],D)};default:return function(b,q,O){if(O[b]===void 0){O[b]=q;return}O[b]=[].concat(O[b],q)}}}function ie(m){if(typeof m!="string"||m.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ce(m,h){return h.encode?h.strict?Y(m):encodeURIComponent(m):m}function Ee(m,h){return h.decode?j(m):m}function be(m){return Array.isArray(m)?m.sort():ge(m)==="object"?be(Object.keys(m)).sort(function(h,b){return Number(h)-Number(b)}).map(function(h){return m[h]}):m}function Re(m){var h=m.indexOf("#");return h!==-1&&(m=m.slice(0,h)),m}function Be(m){var h="",b=m.indexOf("#");return b!==-1&&(h=m.slice(b)),h}function Le(m){m=Re(m);var h=m.indexOf("?");return h===-1?"":m.slice(h+1)}function ye(m,h){return h.parseNumbers&&!Number.isNaN(Number(m))&&typeof m=="string"&&m.trim()!==""?m=Number(m):h.parseBooleans&&m!==null&&(m.toLowerCase()==="true"||m.toLowerCase()==="false")&&(m=m.toLowerCase()==="true"),m}function we(m,h){h=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},h),ie(h.arrayFormatSeparator);var b=G(h),q=Object.create(null);if(typeof m!="string"||(m=m.trim().replace(/^[?#&]/,""),!m))return q;var O=ue(m.split("&")),H;try{for(O.s();!(H=O.n()).done;){var D=H.value;if(D!==""){var E=T(h.decode?D.replace(/\+/g," "):D,"="),I=oe(E,2),x=I[0],_=I[1];_=_===void 0?null:["comma","separator","bracket-separator"].includes(h.arrayFormat)?_:Ee(_,h),b(Ee(x,h),_,q)}}}catch(Ie){O.e(Ie)}finally{O.f()}for(var S=0,Q=Object.keys(q);S<Q.length;S++){var J=Q[S],re=q[J];if(ge(re)==="object"&&re!==null)for(var Pe=0,le=Object.keys(re);Pe<le.length;Pe++){var De=le[Pe];re[De]=ye(re[De],h)}else q[J]=ye(re,h)}return h.sort===!1?q:(h.sort===!0?Object.keys(q).sort():Object.keys(q).sort(h.sort)).reduce(function(Ie,Te){var Me=q[Te];return Me&&ge(Me)==="object"&&!Array.isArray(Me)?Ie[Te]=be(Me):Ie[Te]=Me,Ie},Object.create(null))}p.extract=Le,p.parse=we,p.stringify=function(m,h){if(!m)return"";h=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},h),ie(h.arrayFormatSeparator);for(var b=function(_){return h.skipNull&&F(m[_])||h.skipEmptyString&&m[_]===""},q=ae(h),O={},H=0,D=Object.keys(m);H<D.length;H++){var E=D[H];b(E)||(O[E]=m[E])}var I=Object.keys(O);return h.sort!==!1&&I.sort(h.sort),I.map(function(x){var _=m[x];return _===void 0?"":_===null?ce(x,h):Array.isArray(_)?_.length===0&&h.arrayFormat==="bracket-separator"?ce(x,h)+"[]":_.reduce(q(x),[]).join("&"):ce(x,h)+"="+ce(_,h)}).filter(function(x){return x.length>0}).join("&")},p.parseUrl=function(m,h){h=Object.assign({decode:!0},h);var b=T(m,"#"),q=oe(b,2),O=q[0],H=q[1];return Object.assign({url:O.split("?")[0]||"",query:we(Le(m),h)},h&&h.parseFragmentIdentifier&&H?{fragmentIdentifier:Ee(H,h)}:{})},p.stringifyUrl=function(m,h){h=Object.assign(B({encode:!0,strict:!0},ee,!0),h);var b=Re(m.url).split("?")[0]||"",q=p.extract(m.url),O=p.parse(q,{sort:!1}),H=Object.assign(O,m.query),D=p.stringify(H,h);D&&(D="?".concat(D));var E=Be(m.url);return m.fragmentIdentifier&&(E="#".concat(h[ee]?ce(m.fragmentIdentifier,h):m.fragmentIdentifier)),"".concat(b).concat(D).concat(E)},p.pick=function(m,h,b){b=Object.assign(B({parseFragmentIdentifier:!0},ee,!1),b);var q=p.parseUrl(m,b),O=q.url,H=q.query,D=q.fragmentIdentifier;return p.stringifyUrl({url:O,query:C(H,h),fragmentIdentifier:D},b)},p.exclude=function(m,h,b){var q=Array.isArray(h)?function(O){return!h.includes(O)}:function(O,H){return!h(O,H)};return p.pick(m,q,b)}},61200:function(Ae){"use strict";Ae.exports=function(p,P){if(!(typeof p=="string"&&typeof P=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(P==="")return[p];var B=p.indexOf(P);return B===-1?[p]:[p.slice(0,B),p.slice(B+P.length)]}},30126:function(Ae){"use strict";Ae.exports=function(p){return encodeURIComponent(p).replace(/[!'()*]/g,function(P){return"%".concat(P.charCodeAt(0).toString(16).toUpperCase())})}},92234:function(Ae,p,P){"use strict";P.r(p),P.d(p,{__assign:function(){return M},__asyncDelegator:function(){return Le},__asyncGenerator:function(){return Be},__asyncValues:function(){return ye},__await:function(){return Re},__awaiter:function(){return F},__classPrivateFieldGet:function(){return b},__classPrivateFieldSet:function(){return q},__createBinding:function(){return ae},__decorate:function(){return j},__exportStar:function(){return G},__extends:function(){return ge},__generator:function(){return ee},__importDefault:function(){return h},__importStar:function(){return m},__makeTemplateObject:function(){return we},__metadata:function(){return C},__param:function(){return T},__read:function(){return ce},__rest:function(){return Y},__spread:function(){return Ee},__spreadArrays:function(){return be},__values:function(){return ie}});var B=P(27566),oe=P.n(B);var ue=function(H,D){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,I){E.__proto__=I}||function(E,I){for(var x in I)I.hasOwnProperty(x)&&(E[x]=I[x])},ue(H,D)};function ge(O,H){ue(O,H);function D(){this.constructor=O}O.prototype=H===null?Object.create(H):(D.prototype=H.prototype,new D)}var M=function(){return M=Object.assign||function(D){for(var E,I=1,x=arguments.length;I<x;I++){E=arguments[I];for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(D[_]=E[_])}return D},M.apply(this,arguments)};function Y(O,H){var D={};for(var E in O)Object.prototype.hasOwnProperty.call(O,E)&&H.indexOf(E)<0&&(D[E]=O[E]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,E=Object.getOwnPropertySymbols(O);I<E.length;I++)H.indexOf(E[I])<0&&Object.prototype.propertyIsEnumerable.call(O,E[I])&&(D[E[I]]=O[E[I]]);return D}function j(O,H,D,E){var I=arguments.length,x=I<3?H:E===null?E=Object.getOwnPropertyDescriptor(H,D):E,_;if((typeof Reflect>"u"?"undefined":oe()(Reflect))==="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(O,H,D,E);else for(var S=O.length-1;S>=0;S--)(_=O[S])&&(x=(I<3?_(x):I>3?_(H,D,x):_(H,D))||x);return I>3&&x&&Object.defineProperty(H,D,x),x}function T(O,H){return function(D,E){H(D,E,O)}}function C(O,H){if((typeof Reflect>"u"?"undefined":oe()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,H)}function F(O,H,D,E){function I(x){return x instanceof D?x:new D(function(_){_(x)})}return new(D||(D=Promise))(function(x,_){function S(re){try{J(E.next(re))}catch(Pe){_(Pe)}}function Q(re){try{J(E.throw(re))}catch(Pe){_(Pe)}}function J(re){re.done?x(re.value):I(re.value).then(S,Q)}J((E=E.apply(O,H||[])).next())})}function ee(O,H){var D={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},E,I,x,_;return _={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function S(J){return function(re){return Q([J,re])}}function Q(J){if(E)throw new TypeError("Generator is already executing.");for(;D;)try{if(E=1,I&&(x=J[0]&2?I.return:J[0]?I.throw||((x=I.return)&&x.call(I),0):I.next)&&!(x=x.call(I,J[1])).done)return x;switch(I=0,x&&(J=[J[0]&2,x.value]),J[0]){case 0:case 1:x=J;break;case 4:return D.label++,{value:J[1],done:!1};case 5:D.label++,I=J[1],J=[0];continue;case 7:J=D.ops.pop(),D.trys.pop();continue;default:if(x=D.trys,!(x=x.length>0&&x[x.length-1])&&(J[0]===6||J[0]===2)){D=0;continue}if(J[0]===3&&(!x||J[1]>x[0]&&J[1]<x[3])){D.label=J[1];break}if(J[0]===6&&D.label<x[1]){D.label=x[1],x=J;break}if(x&&D.label<x[2]){D.label=x[2],D.ops.push(J);break}x[2]&&D.ops.pop(),D.trys.pop();continue}J=H.call(O,D)}catch(re){J=[6,re],I=0}finally{E=x=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}}function ae(O,H,D,E){E===void 0&&(E=D),O[E]=H[D]}function G(O,H){for(var D in O)D!=="default"&&!H.hasOwnProperty(D)&&(H[D]=O[D])}function ie(O){var H=typeof Symbol=="function"&&Symbol.iterator,D=H&&O[H],E=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&E>=O.length&&(O=void 0),{value:O&&O[E++],done:!O}}};throw new TypeError(H?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(O,H){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var E=D.call(O),I,x=[],_;try{for(;(H===void 0||H-- >0)&&!(I=E.next()).done;)x.push(I.value)}catch(S){_={error:S}}finally{try{I&&!I.done&&(D=E.return)&&D.call(E)}finally{if(_)throw _.error}}return x}function Ee(){for(var O=[],H=0;H<arguments.length;H++)O=O.concat(ce(arguments[H]));return O}function be(){for(var O=0,H=0,D=arguments.length;H<D;H++)O+=arguments[H].length;for(var E=Array(O),I=0,H=0;H<D;H++)for(var x=arguments[H],_=0,S=x.length;_<S;_++,I++)E[I]=x[_];return E}function Re(O){return this instanceof Re?(this.v=O,this):new Re(O)}function Be(O,H,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=D.apply(O,H||[]),I,x=[];return I={},_("next"),_("throw"),_("return"),I[Symbol.asyncIterator]=function(){return this},I;function _(le){E[le]&&(I[le]=function(De){return new Promise(function(Ie,Te){x.push([le,De,Ie,Te])>1||S(le,De)})})}function S(le,De){try{Q(E[le](De))}catch(Ie){Pe(x[0][3],Ie)}}function Q(le){le.value instanceof Re?Promise.resolve(le.value.v).then(J,re):Pe(x[0][2],le)}function J(le){S("next",le)}function re(le){S("throw",le)}function Pe(le,De){le(De),x.shift(),x.length&&S(x[0][0],x[0][1])}}function Le(O){var H,D;return H={},E("next"),E("throw",function(I){throw I}),E("return"),H[Symbol.iterator]=function(){return this},H;function E(I,x){H[I]=O[I]?function(_){return(D=!D)?{value:Re(O[I](_)),done:I==="return"}:x?x(_):_}:x}}function ye(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=O[Symbol.asyncIterator],D;return H?H.call(O):(O=typeof ie=="function"?ie(O):O[Symbol.iterator](),D={},E("next"),E("throw"),E("return"),D[Symbol.asyncIterator]=function(){return this},D);function E(x){D[x]=O[x]&&function(_){return new Promise(function(S,Q){_=O[x](_),I(S,Q,_.done,_.value)})}}function I(x,_,S,Q){Promise.resolve(Q).then(function(J){x({value:J,done:S})},_)}}function we(O,H){return Object.defineProperty?Object.defineProperty(O,"raw",{value:H}):O.raw=H,O}function m(O){if(O&&O.__esModule)return O;var H={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(H[D]=O[D]);return H.default=O,H}function h(O){return O&&O.__esModule?O:{default:O}}function b(O,H){if(!H.has(O))throw new TypeError("attempted to get private field on non-instance");return H.get(O)}function q(O,H,D){if(!H.has(O))throw new TypeError("attempted to set private field on non-instance");return H.set(O,D),D}},72165:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.isBrowserCryptoAvailable=p.getSubtleCrypto=p.getBrowerCrypto=void 0;function B(){return(P.g===null||P.g===void 0?void 0:P.g.crypto)||(P.g===null||P.g===void 0?void 0:P.g.msCrypto)||{}}p.getBrowerCrypto=B;function oe(){const ge=B();return ge.subtle||ge.webkitSubtle}p.getSubtleCrypto=oe;function ue(){return!!B()&&!!oe()}p.isBrowserCryptoAvailable=ue},73027:function(Ae,p,P){"use strict";var B=P(14224);Object.defineProperty(p,"__esModule",{value:!0}),p.isBrowser=p.isNode=p.isReactNative=void 0;function oe(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}p.isReactNative=oe;function ue(){return typeof B<"u"&&typeof B.versions<"u"&&typeof B.versions.node<"u"}p.isNode=ue;function ge(){return!oe()&&!ue()}p.isBrowser=ge},88497:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});const B=P(92234);B.__exportStar(P(72165),p),B.__exportStar(P(73027),p)},93594:function(Ae,p,P){"use strict";P.d(p,{EthereumProvider:function(){return Iw}});var B={};P.r(B),P.d(B,{identity:function(){return U}});var oe={};P.r(oe),P.d(oe,{base2:function(){return xe}});var ue={};P.r(ue),P.d(ue,{base8:function(){return ze}});var ge={};P.r(ge),P.d(ge,{base10:function(){return ot}});var M={};P.r(M),P.d(M,{base16:function(){return Dt},base16upper:function(){return lt}});var Y={};P.r(Y),P.d(Y,{base32:function(){return ft},base32hex:function(){return dt},base32hexpad:function(){return at},base32hexpadupper:function(){return st},base32hexupper:function(){return ut},base32pad:function(){return qt},base32padupper:function(){return vt},base32upper:function(){return Bt},base32z:function(){return it}});var j={};P.r(j),P.d(j,{base36:function(){return Ze},base36upper:function(){return et}});var T={};P.r(T),P.d(T,{base58btc:function(){return Ye},base58flickr:function(){return yt}});var C={};P.r(C),P.d(C,{base64:function(){return mt},base64pad:function(){return bt},base64url:function(){return It},base64urlpad:function(){return St}});var F={};P.r(F),P.d(F,{base256emoji:function(){return ki}});var ee={};P.r(ee),P.d(ee,{sha256:function(){return sp},sha512:function(){return op}});var ae={};P.r(ae),P.d(ae,{identity:function(){return cp}});var G={};P.r(G),P.d(G,{code:function(){return hp},decode:function(){return fp},encode:function(){return lp},name:function(){return up}});var ie={};P.r(ie),P.d(ie,{code:function(){return vp},decode:function(){return mp},encode:function(){return yp},name:function(){return gp}});var ce=P(72100),Ee=P.n(ce),be=P(11541),Re=P(45306),Be=P(4883),Le=P(76846),ye=P(9267);function we(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function m(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null?asUint8Array(globalThis.Buffer.alloc(s)):new Uint8Array(s)}function h(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?we(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function b(s,e){e||(e=s.reduce((u,d)=>u+d.length,0));const r=h(e);let o=0;for(const u of s)r.set(u,o),o+=u.length;return we(r)}function q(s,e){if(s.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var u=0;u<s.length;u++){var d=s.charAt(u),v=d.charCodeAt(0);if(r[v]!==255)throw new TypeError(d+" is ambiguous");r[v]=u}var A=s.length,z=s.charAt(0),R=Math.log(A)/Math.log(256),W=Math.log(256)/Math.log(A);function te(fe){if(fe instanceof Uint8Array||(ArrayBuffer.isView(fe)?fe=new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):Array.isArray(fe)&&(fe=Uint8Array.from(fe))),!(fe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(fe.length===0)return"";for(var Ce=0,He=0,We=0,Et=fe.length;We!==Et&&fe[We]===0;)We++,Ce++;for(var tt=(Et-We)*W+1>>>0,Ge=new Uint8Array(tt);We!==Et;){for(var Ve=fe[We],wt=0,_t=tt-1;(Ve!==0||wt<He)&&_t!==-1;_t--,wt++)Ve+=256*Ge[_t]>>>0,Ge[_t]=Ve%A>>>0,Ve=Ve/A>>>0;if(Ve!==0)throw new Error("Non-zero carry");He=wt,We++}for(var Tt=tt-He;Tt!==tt&&Ge[Tt]===0;)Tt++;for(var Lr=z.repeat(Ce);Tt<tt;++Tt)Lr+=s.charAt(Ge[Tt]);return Lr}function pe(fe){if(typeof fe!="string")throw new TypeError("Expected String");if(fe.length===0)return new Uint8Array;var Ce=0;if(fe[Ce]!==" "){for(var He=0,We=0;fe[Ce]===z;)He++,Ce++;for(var Et=(fe.length-Ce)*R+1>>>0,tt=new Uint8Array(Et);fe[Ce];){var Ge=r[fe.charCodeAt(Ce)];if(Ge===255)return;for(var Ve=0,wt=Et-1;(Ge!==0||Ve<We)&&wt!==-1;wt--,Ve++)Ge+=A*tt[wt]>>>0,tt[wt]=Ge%256>>>0,Ge=Ge/256>>>0;if(Ge!==0)throw new Error("Non-zero carry");We=Ve,Ce++}if(fe[Ce]!==" "){for(var _t=Et-We;_t!==Et&&tt[_t]===0;)_t++;for(var Tt=new Uint8Array(He+(Et-_t)),Lr=He;_t!==Et;)Tt[Lr++]=tt[_t++];return Tt}}}function Ne(fe){var Ce=pe(fe);if(Ce)return Ce;throw new Error(`Non-${e} character`)}return{encode:te,decodeUnsafe:pe,decode:Ne}}var O=q,H=O,D=H;const E=new Uint8Array(0),I=s=>s.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),x=s=>{const e=s.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):E},_=(s,e)=>{if(s===e)return!0;if(s.byteLength!==e.byteLength)return!1;for(let r=0;r<s.byteLength;r++)if(s[r]!==e[r])return!1;return!0},S=s=>{if(s instanceof Uint8Array&&s.constructor.name==="Uint8Array")return s;if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw new Error("Unknown type, must be binary type")},Q=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),J=s=>new TextEncoder().encode(s),re=s=>new TextDecoder().decode(s);class Pe{constructor(e,r,o){this.name=e,this.prefix=r,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class le{constructor(e,r,o){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=o}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ie(this,e)}}class De{constructor(e){this.decoders=e}or(e){return Ie(this,e)}decode(e){const r=e[0],o=this.decoders[r];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ie=(s,e)=>new De({...s.decoders||{[s.prefix]:s},...e.decoders||{[e.prefix]:e}});class Te{constructor(e,r,o,u){this.name=e,this.prefix=r,this.baseEncode=o,this.baseDecode=u,this.encoder=new Pe(e,r,o),this.decoder=new le(e,r,u)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Me=({name:s,prefix:e,encode:r,decode:o})=>new Te(s,e,r,o),Z=({prefix:s,name:e,alphabet:r})=>{const{encode:o,decode:u}=D(r,e);return Me({prefix:s,name:e,encode:o,decode:d=>S(u(d))})},ne=(s,e,r,o)=>{const u={};for(let W=0;W<e.length;++W)u[e[W]]=W;let d=s.length;for(;s[d-1]==="=";)--d;const v=new Uint8Array(d*r/8|0);let A=0,z=0,R=0;for(let W=0;W<d;++W){const te=u[s[W]];if(te===void 0)throw new SyntaxError(`Non-${o} character`);z=z<<r|te,A+=r,A>=8&&(A-=8,v[R++]=255&z>>A)}if(A>=r||255&z<<8-A)throw new SyntaxError("Unexpected end of data");return v},V=(s,e,r)=>{const o=e[e.length-1]==="=",u=(1<<r)-1;let d="",v=0,A=0;for(let z=0;z<s.length;++z)for(A=A<<8|s[z],v+=8;v>r;)v-=r,d+=e[u&A>>v];if(v&&(d+=e[u&A<<r-v]),o)for(;d.length*r&7;)d+="=";return d},f=({name:s,prefix:e,bitsPerChar:r,alphabet:o})=>Me({prefix:e,name:s,encode(u){return V(u,o,r)},decode(u){return ne(u,o,r,s)}}),U=Me({prefix:"\0",name:"identity",encode:s=>re(s),decode:s=>J(s)}),xe=f({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ze=f({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ot=Z({prefix:"9",name:"base10",alphabet:"0123456789"}),Dt=f({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lt=f({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ft=f({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Bt=f({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qt=f({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vt=f({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dt=f({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ut=f({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),at=f({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),st=f({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),it=f({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ze=Z({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),et=Z({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ye=Z({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yt=Z({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mt=f({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bt=f({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),It=f({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),St=f({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Ot=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),At=Ot.reduce((s,e,r)=>(s[r]=e,s),[]),ai=Ot.reduce((s,e,r)=>(s[e.codePointAt(0)]=r,s),[]);function gi(s){return s.reduce((e,r)=>(e+=At[r],e),"")}function Ni(s){const e=[];for(const r of s){const o=ai[r.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(o)}return new Uint8Array(e)}const ki=Me({prefix:"\u{1F680}",name:"base256emoji",encode:gi,decode:Ni});var un=kt,hn=128,Es=127,Yt=~Es,Qt=Math.pow(2,31);function kt(s,e,r){e=e||[],r=r||0;for(var o=r;s>=Qt;)e[r++]=s&255|hn,s/=128;for(;s&Yt;)e[r++]=s&255|hn,s>>>=7;return e[r]=s|0,kt.bytes=r-o+1,e}var Xt=Vt,Zt=128,Wt=127;function Vt(s,o){var r=0,o=o||0,u=0,d=o,v,A=s.length;do{if(d>=A)throw Vt.bytes=0,new RangeError("Could not decode varint");v=s[d++],r+=u<28?(v&Wt)<<u:(v&Wt)*Math.pow(2,u),u+=7}while(v>=Zt);return Vt.bytes=d-o,r}var er=Math.pow(2,7),tr=Math.pow(2,14),rr=Math.pow(2,21),ir=Math.pow(2,28),nr=Math.pow(2,35),sr=Math.pow(2,42),or=Math.pow(2,49),ar=Math.pow(2,56),cr=Math.pow(2,63),Zd=function(s){return s<er?1:s<tr?2:s<rr?3:s<ir?4:s<nr?5:s<sr?6:s<or?7:s<ar?8:s<cr?9:10},ep={encode:un,decode:Xt,encodingLength:Zd},tp=ep,Ds=tp;const qo=(s,e=0)=>[Ds.decode(s,e),Ds.decode.bytes],Is=(s,e,r=0)=>(Ds.encode(s,e,r),e),xs=s=>Ds.encodingLength(s),Ss=(s,e)=>{const r=e.byteLength,o=xs(s),u=o+xs(r),d=new Uint8Array(u+r);return Is(s,d,0),Is(r,d,o),d.set(e,u),new ko(s,r,e,d)},rp=s=>{const e=S(s),[r,o]=qo(e),[u,d]=qo(e.subarray(o)),v=e.subarray(o+d);if(v.byteLength!==u)throw new Error("Incorrect length");return new ko(r,u,v,e)},ip=(s,e)=>s===e?!0:s.code===e.code&&s.size===e.size&&_(s.bytes,e.bytes);class ko{constructor(e,r,o,u){this.code=e,this.size=r,this.digest=o,this.bytes=u}}const nu=({name:s,code:e,encode:r})=>new np(s,e,r);class np{constructor(e,r,o){this.name=e,this.code=r,this.encode=o}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Ss(this.code,r):r.then(o=>Ss(this.code,o))}else throw Error("Unknown type, must be binary type")}}const su=s=>async e=>new Uint8Array(await crypto.subtle.digest(s,e)),sp=nu({name:"sha2-256",code:18,encode:su("SHA-256")}),op=nu({name:"sha2-512",code:19,encode:su("SHA-512")}),ou=0,ap="identity",au=S,cp={code:ou,name:ap,encode:au,digest:s=>Ss(ou,au(s))},up="raw",hp=85,lp=s=>S(s),fp=s=>S(s),dp=new TextEncoder,pp=new TextDecoder,gp="json",vp=512,yp=s=>dp.encode(JSON.stringify(s)),mp=s=>JSON.parse(pp.decode(s));class mr{constructor(e,r,o,u){this.code=r,this.version=e,this.multihash=o,this.bytes=u,this.byteOffset=u.byteOffset,this.byteLength=u.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Ps,byteLength:Ps,code:Os,version:Os,multihash:Os,bytes:Os,_baseCache:Ps,asCID:Ps})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==Bn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ep)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return mr.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,o=Ss(e,r);return mr.createV1(this.code,o)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ip(this.multihash,e.multihash)}toString(e){const{bytes:r,version:o,_baseCache:u}=this;switch(o){case 0:return _p(r,u,e||Ye.encoder);default:return bp(r,u,e||ft.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Ip(/^0\.0/,xp),!!(e&&(e[uu]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof mr)return e;if(e!=null&&e.asCID===e){const{version:r,code:o,multihash:u,bytes:d}=e;return new mr(r,o,u,d||cu(r,o,u.bytes))}else if(e!=null&&e[uu]===!0){const{version:r,multihash:o,code:u}=e,d=rp(o);return mr.create(r,u,d)}else return null}static create(e,r,o){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Bn)throw new Error(`Version 0 CID must use dag-pb (code: ${Bn}) block encoding`);return new mr(e,r,o,o.bytes)}case 1:{const u=cu(e,r,o.bytes);return new mr(e,r,o,u)}default:throw new Error("Invalid version")}}static createV0(e){return mr.create(0,Bn,e)}static createV1(e,r){return mr.create(1,e,r)}static decode(e){const[r,o]=mr.decodeFirst(e);if(o.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=mr.inspectBytes(e),o=r.size-r.multihashSize,u=S(e.subarray(o,o+r.multihashSize));if(u.byteLength!==r.multihashSize)throw new Error("Incorrect length");const d=u.subarray(r.multihashSize-r.digestSize),v=new ko(r.multihashCode,r.digestSize,d,u);return[r.version===0?mr.createV0(v):mr.createV1(r.codec,v),e.subarray(r.size)]}static inspectBytes(e){let r=0;const o=()=>{const[te,pe]=qo(e.subarray(r));return r+=pe,te};let u=o(),d=Bn;if(u===18?(u=0,r=0):u===1&&(d=o()),u!==0&&u!==1)throw new RangeError(`Invalid CID version ${u}`);const v=r,A=o(),z=o(),R=r+z,W=R-v;return{version:u,codec:d,multihashCode:A,digestSize:z,multihashSize:W,size:R}}static parse(e,r){const[o,u]=wp(e,r),d=mr.decode(u);return d._baseCache.set(o,e),d}}const wp=(s,e)=>{switch(s[0]){case"Q":{const r=e||Ye;return[Ye.prefix,r.decode(`${Ye.prefix}${s}`)]}case Ye.prefix:{const r=e||Ye;return[Ye.prefix,r.decode(s)]}case ft.prefix:{const r=e||ft;return[ft.prefix,r.decode(s)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[s[0],e.decode(s)]}}},_p=(s,e,r)=>{const{prefix:o}=r;if(o!==Ye.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const u=e.get(o);if(u==null){const d=r.encode(s).slice(1);return e.set(o,d),d}else return u},bp=(s,e,r)=>{const{prefix:o}=r,u=e.get(o);if(u==null){const d=r.encode(s);return e.set(o,d),d}else return u},Bn=112,Ep=18,cu=(s,e,r)=>{const o=xs(s),u=o+xs(e),d=new Uint8Array(u+r.byteLength);return Is(s,d,0),Is(e,d,o),d.set(r,u),d},uu=Symbol.for("@ipld/js-cid/CID"),Os={writable:!1,configurable:!1,enumerable:!0},Ps={writable:!1,enumerable:!1,configurable:!1},Dp="0.0.0-dev",Ip=(s,e)=>{if(s.test(Dp))console.warn(e);else throw new Error(e)},xp=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,hu={...B,...oe,...ue,...ge,...M,...Y,...j,...T,...C,...F},b5={...ee,...ae},E5={raw:G,json:ie};function lu(s,e,r,o){return{name:s,prefix:e,encoder:{name:s,prefix:e,encode:r},decoder:{decode:o}}}const fu=lu("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),Wo=lu("ascii","a",s=>{let e="a";for(let r=0;r<s.length;r++)e+=String.fromCharCode(s[r]);return e},s=>{s=s.substring(1);const e=h(s.length);for(let r=0;r<s.length;r++)e[r]=s.charCodeAt(r);return e});var du={utf8:fu,"utf-8":fu,hex:hu.base16,latin1:Wo,ascii:Wo,binary:Wo,...hu};function Sr(s,e="utf8"){const r=du[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?we(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}function wr(s,e="utf8"){const r=du[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(s.buffer,s.byteOffset,s.byteLength).toString("utf8"):r.encoder.encode(s).substring(1)}var Cs=P(14224),pu=function(s,e,r){if(r||arguments.length===2)for(var o=0,u=e.length,d;o<u;o++)(d||!(o in e))&&(d||(d=Array.prototype.slice.call(e,0,o)),d[o]=e[o]);return s.concat(d||Array.prototype.slice.call(e))},Sp=function(){function s(e,r,o){this.name=e,this.version=r,this.os=o,this.type="browser"}return s}(),Op=function(){function s(e){this.version=e,this.type="node",this.name="node",this.os=Cs.platform}return s}(),Pp=function(){function s(e,r,o,u){this.name=e,this.version=r,this.os=o,this.bot=u,this.type="bot-device"}return s}(),Cp=function(){function s(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return s}(),Ap=function(){function s(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return s}(),Rp=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Np=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,gu=3,Tp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Rp]],vu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Fp(s){return s?mu(s):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ap:typeof navigator<"u"?mu(navigator.userAgent):Lp()}function yu(s){return s!==""&&Tp.reduce(function(e,r){var o=r[0],u=r[1];if(e)return e;var d=u.exec(s);return!!d&&[o,d]},!1)}function I5(s){var e=yu(s);return e?e[0]:null}function mu(s){var e=yu(s);if(!e)return null;var r=e[0],o=e[1];if(r==="searchbot")return new Cp;var u=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);u?u.length<gu&&(u=pu(pu([],u,!0),Mp(gu-u.length),!0)):u=[];var d=u.join("."),v=Up(s),A=Np.exec(s);return A&&A[1]?new Pp(r,d,v,A[1]):new Sp(r,d,v)}function Up(s){for(var e=0,r=vu.length;e<r;e++){var o=vu[e],u=o[0],d=o[1],v=d.exec(s);if(v)return u}return null}function Lp(){var s=typeof Cs<"u"&&Cs.version;return s?new Op(Cs.version.slice(1)):null}function Mp(s){for(var e=[],r=0;r<s;r++)e.push("0");return e}var $e=P(46196),$n=P(73079),jp=P(42669),As=P(42120),x5=P(87993);const Bp={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var Go=P(14224);const Rs=":";function wu(s){const[e,r]=s.split(Rs);return{namespace:e,reference:r}}function $p(s){const{namespace:e,reference:r}=s;return[e,r].join(Rs)}function _u(s){const[e,r,o]=s.split(Rs);return{namespace:e,reference:r,address:o}}function zp(s){const{namespace:e,reference:r,address:o}=s;return[e,r,o].join(Rs)}function bu(s,e){const r=[];return s.forEach(o=>{const u=e(o);r.includes(u)||r.push(u)}),r}function Hp(s){const{address:e}=_u(s);return e}function Kp(s){const{namespace:e,reference:r}=_u(s);return $p({namespace:e,reference:r})}function S5(s,e){const{namespace:r,reference:o}=wu(e);return zp({namespace:r,reference:o,address:s})}function O5(s){return bu(s,Hp)}function Vp(s){return bu(s,Kp)}function qp(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...u.accounts)}),r}function P5(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...Vp(u.accounts))}),r}function C5(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...Jo(o,u))}),r}function Jo(s,e){return s.includes(":")?[s]:e.chains||[]}const Yo=s=>s==null?void 0:s.split(":"),kp=s=>{const e=s&&Yo(s);if(e)return e[3]},A5=s=>{const e=s&&Yo(s);if(e)return e[2]+":"+e[3]},Wp=s=>{const e=s&&Yo(s);if(e)return e.pop()},R5=(s,e)=>{const r=`${s.domain} wants you to sign in with your Ethereum account:`,o=Wp(e),u=s.statement,d=`URI: ${s.aud}`,v=`Version: ${s.version}`,A=`Chain ID: ${kp(e)}`,z=`Nonce: ${s.nonce}`,R=`Issued At: ${s.iat}`,W=s.resources&&s.resources.length>0?`Resources:
${s.resources.map(te=>`- ${te}`).join(`
`)}`:void 0;return[r,o,"",u,"",d,v,A,z,R,W].filter(te=>te!=null).join(`
`)},Eu="base10",_r="base16",Qo="base64pad",Xo="utf8",Du=0,Wi=1,Gp=0,Iu=1,Zo=12,ea=32;function Jp(){const s=ye.Au();return{privateKey:wr(s.secretKey,_r),publicKey:wr(s.publicKey,_r)}}function ta(){const s=(0,Be.randomBytes)(ea);return wr(s,_r)}function Yp(s,e){const r=ye.gi(Sr(s,_r),Sr(e,_r),!0),o=new Re.t(Le.mE,r).expand(ea);return wr(o,_r)}function Qp(s){const e=(0,Le.vp)(Sr(s,_r));return wr(e,_r)}function ln(s){const e=(0,Le.vp)(Sr(s,Xo));return wr(e,_r)}function Xp(s){return Sr(`${s}`,Eu)}function zn(s){return Number(wr(s,Eu))}function Zp(s){const e=Xp(typeof s.type<"u"?s.type:Du);if(zn(e)===Wi&&typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof s.senderPublicKey<"u"?Sr(s.senderPublicKey,_r):void 0,o=typeof s.iv<"u"?Sr(s.iv,_r):(0,Be.randomBytes)(Zo),u=new be.OK(Sr(s.symKey,_r)).seal(o,Sr(s.message,Xo));return tg({type:e,sealed:u,iv:o,senderPublicKey:r})}function eg(s){const e=new be.OK(Sr(s.symKey,_r)),{sealed:r,iv:o}=Ns(s.encoded),u=e.open(o,r);if(u===null)throw new Error("Failed to decrypt");return wr(u,Xo)}function tg(s){if(zn(s.type)===Wi){if(typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return wr(b([s.type,s.senderPublicKey,s.iv,s.sealed]),Qo)}return wr(b([s.type,s.iv,s.sealed]),Qo)}function Ns(s){const e=Sr(s,Qo),r=e.slice(Gp,Iu),o=Iu;if(zn(r)===Wi){const A=o+ea,z=A+Zo,R=e.slice(o,A),W=e.slice(A,z),te=e.slice(z);return{type:r,sealed:te,iv:W,senderPublicKey:R}}const u=o+Zo,d=e.slice(o,u),v=e.slice(u);return{type:r,sealed:v,iv:d}}function rg(s,e){const r=Ns(s);return xu({type:zn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?wr(r.senderPublicKey,_r):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function xu(s){const e=(s==null?void 0:s.type)||Du;if(e===Wi){if(typeof(s==null?void 0:s.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(s==null?void 0:s.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:s==null?void 0:s.senderPublicKey,receiverPublicKey:s==null?void 0:s.receiverPublicKey}}function Su(s){return s.type===Wi&&typeof s.senderPublicKey=="string"&&typeof s.receiverPublicKey=="string"}var ig=Object.defineProperty,Ou=Object.getOwnPropertySymbols,ng=Object.prototype.hasOwnProperty,sg=Object.prototype.propertyIsEnumerable,Pu=(s,e,r)=>e in s?ig(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Cu=(s,e)=>{for(var r in e||(e={}))ng.call(e,r)&&Pu(s,r,e[r]);if(Ou)for(var r of Ou(e))sg.call(e,r)&&Pu(s,r,e[r]);return s};const og="ReactNative",Or={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ra=" ",N5=":",ag="/",Au=2,T5=1e3,cg="js";function ia(){return typeof Go<"u"&&typeof Go.versions<"u"&&typeof Go.versions.node<"u"}function fn(){return!(0,$n.getDocument)()&&!!(0,$n.getNavigator)()&&navigator.product===og}function dn(){return!ia()&&!!(0,$n.getNavigator)()&&!!(0,$n.getDocument)()}function pn(){return fn()?Or.reactNative:ia()?Or.node:dn()?Or.browser:Or.unknown}function ug(){var s;try{return fn()&&typeof P.g<"u"&&typeof(P.g==null?void 0:P.g.Application)<"u"?(s=P.g.Application)==null?void 0:s.applicationId:void 0}catch{return}}function hg(s,e){let r=As.parse(s);return r=Cu(Cu({},r),e),s=As.stringify(r),s}function lg(){return(0,jp.D)()||{name:"",description:"",url:"",icons:[""]}}function F5(s,e){var r;const o=pn(),u={protocol:s,version:e,env:o};return o==="browser"&&(u.host=((r=he())==null?void 0:r.host)||"unknown"),u}function fg(){if(pn()===Or.reactNative&&typeof P.g<"u"&&typeof(P.g==null?void 0:P.g.Platform)<"u"){const{OS:r,Version:o}=P.g.Platform;return[r,o].join("-")}const s=Fp();if(s===null)return"unknown";const e=s.os?s.os.replace(" ","").toLowerCase():"unknown";return s.type==="browser"?[e,s.name,s.version].join("-"):[e,s.version].join("-")}function dg(){var s;const e=pn();return e===Or.browser?[e,((s=(0,$n.getLocation)())==null?void 0:s.host)||"unknown"].join(":"):e}function pg(s,e,r){const o=fg(),u=dg();return[[s,e].join("-"),[cg,r].join("-"),o,u].join("/")}function gg({protocol:s,version:e,relayUrl:r,sdkVersion:o,auth:u,projectId:d,useOnCloseEvent:v,bundleId:A}){const z=r.split("?"),R=pg(s,e,o),W={auth:u,ua:R,projectId:d,useOnCloseEvent:v||void 0,origin:A||void 0},te=hg(z[1]||"",W);return z[0]+"?"+te}function U5(s){let e=(s.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof e<"u"?s.split("://")[1]:s;return e=e==="wss"?"https":"http",[e,r].join("://")}function L5(s,e,r){if(!s[e]||typeof s[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function vg(s,e=Au){return yg(s.split(ag),e)}function M5(s){return vg(s).join(ra)}function Gi(s,e){return s.filter(r=>e.includes(r)).length===s.length}function yg(s,e=Au){return s.slice(Math.max(s.length-e,0))}function Ru(s){return Object.fromEntries(s.entries())}function Nu(s){return new Map(Object.entries(s))}function j5(s,e){const r={};return Object.keys(s).forEach(o=>{r[o]=e(s[o])}),r}const B5=s=>s;function mg(s){return s.trim().replace(/^\w/,e=>e.toUpperCase())}function $5(s){return s.split(ra).map(e=>mg(e)).join(ra)}function gn(s=$e.FIVE_MINUTES,e){const r=(0,$e.toMiliseconds)(s||$e.FIVE_MINUTES);let o,u,d;return{resolve:v=>{d&&o&&(clearTimeout(d),o(v))},reject:v=>{d&&u&&(clearTimeout(d),u(v))},done:()=>new Promise((v,A)=>{d=setTimeout(()=>{A(new Error(e))},r),o=v,u=A})}}function Hn(s,e,r){return new Promise(async(o,u)=>{const d=setTimeout(()=>u(new Error(r)),e);try{const v=await s;o(v)}catch(v){u(v)}clearTimeout(d)})}function Tu(s,e){if(typeof e=="string"&&e.startsWith(`${s}:`))return e;if(s.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(s.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${s}`)}function wg(s){return Tu("topic",s)}function _g(s){return Tu("id",s)}function Fu(s){const[e,r]=s.split(":"),o={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")o.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))o.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return o}function Ur(s,e){return(0,$e.fromMiliseconds)((e||Date.now())+(0,$e.toMiliseconds)(s))}function Ti(s){return Date.now()>=(0,$e.toMiliseconds)(s)}function zt(s,e){return`${s}${e?`:${e}`:""}`}function ci(s=[],e=[]){return[...new Set([...s,...e])]}async function bg({id:s,topic:e,wcDeepLink:r}){try{if(!r)return;const o=typeof r=="string"?JSON.parse(r):r;let u=o==null?void 0:o.href;if(typeof u!="string")return;u.endsWith("/")&&(u=u.slice(0,-1));const d=`${u}/wc?requestId=${s}&sessionTopic=${e}`,v=pn();v===Or.browser?d.startsWith("https://")?window.open(d,"_blank","noreferrer noopener"):window.open(d,"_self","noreferrer noopener"):v===Or.reactNative&&typeof(P.g==null?void 0:P.g.Linking)<"u"&&await P.g.Linking.openURL(d)}catch(o){console.error(o)}}async function Eg(s,e){try{return await s.getItem(e)||(dn()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const Dg="irn";function na(s){return(s==null?void 0:s.relay)||{protocol:Dg}}function Ts(s){const e=Bp[s];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${s}`);return e}var Ig=Object.defineProperty,xg=Object.defineProperties,Sg=Object.getOwnPropertyDescriptors,Uu=Object.getOwnPropertySymbols,Og=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable,Lu=(s,e,r)=>e in s?Ig(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Cg=(s,e)=>{for(var r in e||(e={}))Og.call(e,r)&&Lu(s,r,e[r]);if(Uu)for(var r of Uu(e))Pg.call(e,r)&&Lu(s,r,e[r]);return s},Ag=(s,e)=>xg(s,Sg(e));function Rg(s,e="-"){const r={},o="relay"+e;return Object.keys(s).forEach(u=>{if(u.startsWith(o)){const d=u.replace(o,""),v=s[u];r[d]=v}}),r}function Mu(s){s=s.includes("wc://")?s.replace("wc://",""):s,s=s.includes("wc:")?s.replace("wc:",""):s;const e=s.indexOf(":"),r=s.indexOf("?")!==-1?s.indexOf("?"):void 0,o=s.substring(0,e),u=s.substring(e+1,r).split("@"),d=typeof r<"u"?s.substring(r):"",v=As.parse(d);return{protocol:o,topic:Ng(u[0]),version:parseInt(u[1],10),symKey:v.symKey,relay:Rg(v),expiryTimestamp:v.expiryTimestamp?parseInt(v.expiryTimestamp,10):void 0}}function Ng(s){return s.startsWith("//")?s.substring(2):s}function Tg(s,e="-"){const r="relay",o={};return Object.keys(s).forEach(u=>{const d=r+e+u;s[u]&&(o[d]=s[u])}),o}function Fg(s){return`${s.protocol}:${s.topic}@${s.version}?`+As.stringify(Ag(Cg({symKey:s.symKey},Tg(s.relay)),{expiryTimestamp:s.expiryTimestamp}))}var Ug=Object.defineProperty,Lg=Object.defineProperties,Mg=Object.getOwnPropertyDescriptors,ju=Object.getOwnPropertySymbols,jg=Object.prototype.hasOwnProperty,Bg=Object.prototype.propertyIsEnumerable,Bu=(s,e,r)=>e in s?Ug(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,$g=(s,e)=>{for(var r in e||(e={}))jg.call(e,r)&&Bu(s,r,e[r]);if(ju)for(var r of ju(e))Bg.call(e,r)&&Bu(s,r,e[r]);return s},zg=(s,e)=>Lg(s,Mg(e));function vn(s){const e=[];return s.forEach(r=>{const[o,u]=r.split(":");e.push(`${o}:${u}`)}),e}function Hg(s){const e=[];return Object.values(s).forEach(r=>{e.push(...vn(r.accounts))}),e}function Kg(s,e){const r=[];return Object.values(s).forEach(o=>{vn(o.accounts).includes(e)&&r.push(...o.methods)}),r}function Vg(s,e){const r=[];return Object.values(s).forEach(o=>{vn(o.accounts).includes(e)&&r.push(...o.events)}),r}function z5(s,e){const r=Ls(s,e);if(r)throw new Error(r.message);const o={};for(const[u,d]of Object.entries(s))o[u]={methods:d.methods,events:d.events,chains:d.accounts.map(v=>`${v.split(":")[0]}:${v.split(":")[1]}`)};return o}function H5(s){const{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:o}=s,u=$u(e),d=$u(r),v={};Object.keys(o).forEach(R=>{const W=o[R].chains,te=o[R].methods,pe=o[R].events,Ne=o[R].accounts;W.forEach(fe=>{if(!Ne.some(Ce=>Ce.includes(fe)))throw new Error(`No accounts provided for chain ${fe} in namespace ${R}`)}),v[R]={chains:W,methods:te,events:pe,accounts:Ne}});const A=oa(e,v,"approve()");if(A)throw new Error(A.message);const z={};return!Object.keys(e).length&&!Object.keys(r).length?v:(Object.keys(u).forEach(R=>{const W=o[R].chains.filter(fe=>{var Ce,He;return(He=(Ce=u[R])==null?void 0:Ce.chains)==null?void 0:He.includes(fe)}),te=o[R].methods.filter(fe=>{var Ce,He;return(He=(Ce=u[R])==null?void 0:Ce.methods)==null?void 0:He.includes(fe)}),pe=o[R].events.filter(fe=>{var Ce,He;return(He=(Ce=u[R])==null?void 0:Ce.events)==null?void 0:He.includes(fe)}),Ne=W.map(fe=>o[R].accounts.filter(Ce=>Ce.includes(`${fe}:`))).flat();z[R]={chains:W,methods:te,events:pe,accounts:Ne}}),Object.keys(d).forEach(R=>{var W,te,pe,Ne,fe,Ce;if(!o[R])return;const He=(te=(W=d[R])==null?void 0:W.chains)==null?void 0:te.filter(Ge=>o[R].chains.includes(Ge)),We=o[R].methods.filter(Ge=>{var Ve,wt;return(wt=(Ve=d[R])==null?void 0:Ve.methods)==null?void 0:wt.includes(Ge)}),Et=o[R].events.filter(Ge=>{var Ve,wt;return(wt=(Ve=d[R])==null?void 0:Ve.events)==null?void 0:wt.includes(Ge)}),tt=He==null?void 0:He.map(Ge=>o[R].accounts.filter(Ve=>Ve.includes(`${Ge}:`))).flat();z[R]={chains:ci((pe=z[R])==null?void 0:pe.chains,He),methods:ci((Ne=z[R])==null?void 0:Ne.methods,We),events:ci((fe=z[R])==null?void 0:fe.events,Et),accounts:ci((Ce=z[R])==null?void 0:Ce.accounts,tt)}}),z)}function Fs(s){return s.includes(":")}function yn(s){return Fs(s)?s.split(":")[0]:s}function $u(s){var e,r,o;const u={};if(!mn(s))return u;for(const[d,v]of Object.entries(s)){const A=Fs(d)?[d]:v.chains,z=v.methods||[],R=v.events||[],W=yn(d);u[W]=zg($g({},u[W]),{chains:ci(A,(e=u[W])==null?void 0:e.chains),methods:ci(z,(r=u[W])==null?void 0:r.methods),events:ci(R,(o=u[W])==null?void 0:o.events)})}return u}const qg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kg={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Se(s,e){const{message:r,code:o}=kg[s];return{message:e?`${r} ${e}`:r,code:o}}function Ut(s,e){const{message:r,code:o}=qg[s];return{message:e?`${r} ${e}`:r,code:o}}function ui(s,e){return Array.isArray(s)?typeof e<"u"&&s.length?s.every(e):!0:!1}function mn(s){return Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length}function br(s){return typeof s>"u"}function ur(s,e){return e&&br(s)?!0:typeof s=="string"&&!!s.trim().length}function sa(s,e){return e&&br(s)?!0:typeof s=="number"&&!isNaN(s)}function Wg(s,e){const{requiredNamespaces:r}=e,o=Object.keys(s.namespaces),u=Object.keys(r);let d=!0;return Gi(u,o)?(o.forEach(v=>{const{accounts:A,methods:z,events:R}=s.namespaces[v],W=vn(A),te=r[v];(!Gi(Jo(v,te),W)||!Gi(te.methods,z)||!Gi(te.events,R))&&(d=!1)}),d):!1}function Us(s){return ur(s,!1)&&s.includes(":")?s.split(":").length===2:!1}function Gg(s){if(ur(s,!1)&&s.includes(":")){const e=s.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Us(r)}}return!1}function Jg(s){if(ur(s,!1))try{return typeof new URL(s)<"u"}catch{return!1}return!1}function Yg(s){var e;return(e=s==null?void 0:s.proposer)==null?void 0:e.publicKey}function Qg(s){return s==null?void 0:s.topic}function Xg(s,e){let r=null;return ur(s==null?void 0:s.publicKey,!1)||(r=Se("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function zu(s){let e=!0;return ui(s)?s.length&&(e=s.every(r=>ur(r,!1))):e=!1,e}function Zg(s,e,r){let o=null;return ui(e)&&e.length?e.forEach(u=>{o||Us(u)||(o=Ut("UNSUPPORTED_CHAINS",`${r}, chain ${u} should be a string and conform to "namespace:chainId" format`))}):Us(s)||(o=Ut("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),o}function e0(s,e,r){let o=null;return Object.entries(s).forEach(([u,d])=>{if(o)return;const v=Zg(u,Jo(u,d),`${e} ${r}`);v&&(o=v)}),o}function t0(s,e){let r=null;return ui(s)?s.forEach(o=>{r||Gg(o)||(r=Ut("UNSUPPORTED_ACCOUNTS",`${e}, account ${o} should be a string and conform to "namespace:chainId:address" format`))}):r=Ut("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function r0(s,e){let r=null;return Object.values(s).forEach(o=>{if(r)return;const u=t0(o==null?void 0:o.accounts,`${e} namespace`);u&&(r=u)}),r}function i0(s,e){let r=null;return zu(s==null?void 0:s.methods)?zu(s==null?void 0:s.events)||(r=Ut("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Ut("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Hu(s,e){let r=null;return Object.values(s).forEach(o=>{if(r)return;const u=i0(o,`${e}, namespace`);u&&(r=u)}),r}function n0(s,e,r){let o=null;if(s&&mn(s)){const u=Hu(s,e);u&&(o=u);const d=e0(s,e,r);d&&(o=d)}else o=Se("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return o}function Ls(s,e){let r=null;if(s&&mn(s)){const o=Hu(s,e);o&&(r=o);const u=r0(s,e);u&&(r=u)}else r=Se("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Ku(s){return ur(s.protocol,!0)}function s0(s,e){let r=!1;return e&&!s?r=!0:s&&ui(s)&&s.length&&s.forEach(o=>{r=Ku(o)}),r}function o0(s){return typeof s=="number"}function Pr(s){return typeof s<"u"&&typeof s!==null}function a0(s){return!(!s||typeof s!="object"||!s.code||!sa(s.code,!1)||!s.message||!ur(s.message,!1))}function c0(s){return!(br(s)||!ur(s.method,!1))}function u0(s){return!(br(s)||br(s.result)&&br(s.error)||!sa(s.id,!1)||!ur(s.jsonrpc,!1))}function h0(s){return!(br(s)||!ur(s.name,!1))}function Vu(s,e){return!(!Us(e)||!Hg(s).includes(e))}function l0(s,e,r){return ur(r,!1)?Kg(s,e).includes(r):!1}function f0(s,e,r){return ur(r,!1)?Vg(s,e).includes(r):!1}function oa(s,e,r){let o=null;const u=d0(s),d=p0(e),v=Object.keys(u),A=Object.keys(d),z=qu(Object.keys(s)),R=qu(Object.keys(e)),W=z.filter(te=>!R.includes(te));return W.length&&(o=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${W.toString()}
      Received: ${Object.keys(e).toString()}`)),Gi(v,A)||(o=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${v.toString()}
      Approved: ${A.toString()}`)),Object.keys(e).forEach(te=>{if(!te.includes(":")||o)return;const pe=vn(e[te].accounts);pe.includes(te)||(o=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${te}
        Required: ${te}
        Approved: ${pe.toString()}`))}),v.forEach(te=>{o||(Gi(u[te].methods,d[te].methods)?Gi(u[te].events,d[te].events)||(o=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${te}`)):o=Se("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${te}`))}),o}function d0(s){const e={};return Object.keys(s).forEach(r=>{var o;r.includes(":")?e[r]=s[r]:(o=s[r].chains)==null||o.forEach(u=>{e[u]={methods:s[r].methods,events:s[r].events}})}),e}function qu(s){return[...new Set(s.map(e=>e.includes(":")?e.split(":")[0]:e))]}function p0(s){const e={};return Object.keys(s).forEach(r=>{if(r.includes(":"))e[r]=s[r];else{const o=vn(s[r].accounts);o==null||o.forEach(u=>{e[u]={accounts:s[r].accounts.filter(d=>d.includes(`${u}:`)),methods:s[r].methods,events:s[r].events}})}}),e}function g0(s,e){return sa(s,!1)&&s<=e.max&&s>=e.min}function ku(){const s=pn();return new Promise(e=>{switch(s){case Or.browser:e(v0());break;case Or.reactNative:e(y0());break;case Or.node:e(m0());break;default:e(!0)}})}function v0(){return dn()&&(navigator==null?void 0:navigator.onLine)}async function y0(){if(fn()&&typeof P.g<"u"&&P.g!=null&&P.g.NetInfo){const s=await(P.g==null?void 0:P.g.NetInfo.fetch());return s==null?void 0:s.isConnected}return!0}function m0(){return!0}function w0(s){switch(pn()){case Or.browser:_0(s);break;case Or.reactNative:b0(s);break;case Or.node:break}}function _0(s){!fn()&&dn()&&(window.addEventListener("online",()=>s(!0)),window.addEventListener("offline",()=>s(!1)))}function b0(s){var e;fn()&&typeof P.g<"u"&&P.g!=null&&P.g.NetInfo&&((e=P.g)==null||e.NetInfo.addEventListener(r=>s(r==null?void 0:r.isConnected)))}const aa={};class Ms{static get(e){return aa[e]}static set(e,r){aa[e]=r}static delete(e){delete aa[e]}}const E0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,D0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,I0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function x0(s,e){if(s==="__proto__"||s==="constructor"&&e&&typeof e=="object"&&"prototype"in e){S0(s);return}return e}function S0(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function Kn(s,e={}){if(typeof s!="string")return s;const r=s.trim();if(s[0]==='"'&&s.at(-1)==='"'&&!s.includes("\\"))return r.slice(1,-1);if(r.length<=9){const o=r.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!I0.test(s)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(E0.test(s)||D0.test(s)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,x0)}return JSON.parse(s)}catch(o){if(e.strict)throw o;return s}}function K5(s,e={}){return Kn(s,{...e,strict:!0})}var ca=P(55872).Buffer;function O0(s){return!s||typeof s.then!="function"?Promise.resolve(s):s}function hr(s,...e){try{return O0(s(...e))}catch(r){return Promise.reject(r)}}function P0(s){const e=typeof s;return s===null||e!=="object"&&e!=="function"}function C0(s){const e=Object.getPrototypeOf(s);return!e||e.isPrototypeOf(Object)}function js(s){if(P0(s))return String(s);if(C0(s)||Array.isArray(s))return JSON.stringify(s);if(typeof s.toJSON=="function")return js(s.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Wu(){if(typeof ca===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const ua="base64:";function A0(s){if(typeof s=="string")return s;Wu();const e=ca.from(s).toString("base64");return ua+e}function R0(s){return typeof s!="string"||!s.startsWith(ua)?s:(Wu(),ca.from(s.slice(ua.length),"base64"))}const N0=null;function V5(s,e){if(e=Vn(e),!e)return s;const r={...s};for(const o of N0)r[o]=(u="",...d)=>s[o](e+u,...d);return r.getKeys=(o="",...u)=>s.getKeys(e+o,...u).then(d=>d.map(v=>v.slice(e.length))),r}function Cr(s){return s?s.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function T0(...s){return Cr(s.join(":"))}function Vn(s){return s=Cr(s),s?s+":":""}function q5(s){return s}const F0="memory",U0=()=>{const s=new Map;return{name:F0,options:{},hasItem(e){return s.has(e)},getItem(e){return s.get(e)??null},getItemRaw(e){return s.get(e)??null},setItem(e,r){s.set(e,r)},setItemRaw(e,r){s.set(e,r)},removeItem(e){s.delete(e)},getKeys(){return Array.from(s.keys())},clear(){s.clear()},dispose(){s.clear()}}};function L0(s={}){const e={mounts:{"":s.driver||U0()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=R=>{for(const W of e.mountpoints)if(R.startsWith(W))return{base:W,relativeKey:R.slice(W.length),driver:e.mounts[W]};return{base:"",relativeKey:R,driver:e.mounts[""]}},o=(R,W)=>e.mountpoints.filter(te=>te.startsWith(R)||W&&R.startsWith(te)).map(te=>({relativeBase:R.length>te.length?R.slice(te.length):void 0,mountpoint:te,driver:e.mounts[te]})),u=(R,W)=>{if(e.watching){W=Cr(W);for(const te of e.watchListeners)te(R,W)}},d=async()=>{if(!e.watching){e.watching=!0;for(const R in e.mounts)e.unwatch[R]=await Gu(e.mounts[R],u,R)}},v=async()=>{if(e.watching){for(const R in e.unwatch)await e.unwatch[R]();e.unwatch={},e.watching=!1}},A=(R,W,te)=>{const pe=new Map,Ne=fe=>{let Ce=pe.get(fe.base);return Ce||(Ce={driver:fe.driver,base:fe.base,items:[]},pe.set(fe.base,Ce)),Ce};for(const fe of R){const Ce=typeof fe=="string",He=Cr(Ce?fe:fe.key),We=Ce?void 0:fe.value,Et=Ce||!fe.options?W:{...W,...fe.options},tt=r(He);Ne(tt).items.push({key:He,value:We,relativeKey:tt.relativeKey,options:Et})}return Promise.all([...pe.values()].map(fe=>te(fe))).then(fe=>fe.flat())},z={hasItem(R,W={}){R=Cr(R);const{relativeKey:te,driver:pe}=r(R);return hr(pe.hasItem,te,W)},getItem(R,W={}){R=Cr(R);const{relativeKey:te,driver:pe}=r(R);return hr(pe.getItem,te,W).then(Ne=>Kn(Ne))},getItems(R,W){return A(R,W,te=>te.driver.getItems?hr(te.driver.getItems,te.items.map(pe=>({key:pe.relativeKey,options:pe.options})),W).then(pe=>pe.map(Ne=>({key:T0(te.base,Ne.key),value:Kn(Ne.value)}))):Promise.all(te.items.map(pe=>hr(te.driver.getItem,pe.relativeKey,pe.options).then(Ne=>({key:pe.key,value:Kn(Ne)})))))},getItemRaw(R,W={}){R=Cr(R);const{relativeKey:te,driver:pe}=r(R);return pe.getItemRaw?hr(pe.getItemRaw,te,W):hr(pe.getItem,te,W).then(Ne=>R0(Ne))},async setItem(R,W,te={}){if(W===void 0)return z.removeItem(R);R=Cr(R);const{relativeKey:pe,driver:Ne}=r(R);Ne.setItem&&(await hr(Ne.setItem,pe,js(W),te),Ne.watch||u("update",R))},async setItems(R,W){await A(R,W,async te=>{te.driver.setItems&&await hr(te.driver.setItems,te.items.map(pe=>({key:pe.relativeKey,value:js(pe.value),options:pe.options})),W),te.driver.setItem&&await Promise.all(te.items.map(pe=>hr(te.driver.setItem,pe.relativeKey,js(pe.value),pe.options)))})},async setItemRaw(R,W,te={}){if(W===void 0)return z.removeItem(R,te);R=Cr(R);const{relativeKey:pe,driver:Ne}=r(R);if(Ne.setItemRaw)await hr(Ne.setItemRaw,pe,W,te);else if(Ne.setItem)await hr(Ne.setItem,pe,A0(W),te);else return;Ne.watch||u("update",R)},async removeItem(R,W={}){typeof W=="boolean"&&(W={removeMeta:W}),R=Cr(R);const{relativeKey:te,driver:pe}=r(R);pe.removeItem&&(await hr(pe.removeItem,te,W),(W.removeMeta||W.removeMata)&&await hr(pe.removeItem,te+"$",W),pe.watch||u("remove",R))},async getMeta(R,W={}){typeof W=="boolean"&&(W={nativeOnly:W}),R=Cr(R);const{relativeKey:te,driver:pe}=r(R),Ne=Object.create(null);if(pe.getMeta&&Object.assign(Ne,await hr(pe.getMeta,te,W)),!W.nativeOnly){const fe=await hr(pe.getItem,te+"$",W).then(Ce=>Kn(Ce));fe&&typeof fe=="object"&&(typeof fe.atime=="string"&&(fe.atime=new Date(fe.atime)),typeof fe.mtime=="string"&&(fe.mtime=new Date(fe.mtime)),Object.assign(Ne,fe))}return Ne},setMeta(R,W,te={}){return this.setItem(R+"$",W,te)},removeMeta(R,W={}){return this.removeItem(R+"$",W)},async getKeys(R,W={}){R=Vn(R);const te=o(R,!0);let pe=[];const Ne=[];for(const fe of te){const He=(await hr(fe.driver.getKeys,fe.relativeBase,W)).map(We=>fe.mountpoint+Cr(We)).filter(We=>!pe.some(Et=>We.startsWith(Et)));Ne.push(...He),pe=[fe.mountpoint,...pe.filter(We=>!We.startsWith(fe.mountpoint))]}return R?Ne.filter(fe=>fe.startsWith(R)&&!fe.endsWith("$")):Ne.filter(fe=>!fe.endsWith("$"))},async clear(R,W={}){R=Vn(R),await Promise.all(o(R,!1).map(async te=>{if(te.driver.clear)return hr(te.driver.clear,te.relativeBase,W);if(te.driver.removeItem){const pe=await te.driver.getKeys(te.relativeBase||"",W);return Promise.all(pe.map(Ne=>te.driver.removeItem(Ne,W)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(R=>Ju(R)))},async watch(R){return await d(),e.watchListeners.push(R),async()=>{e.watchListeners=e.watchListeners.filter(W=>W!==R),e.watchListeners.length===0&&await v()}},async unwatch(){e.watchListeners=[],await v()},mount(R,W){if(R=Vn(R),R&&e.mounts[R])throw new Error(`already mounted at ${R}`);return R&&(e.mountpoints.push(R),e.mountpoints.sort((te,pe)=>pe.length-te.length)),e.mounts[R]=W,e.watching&&Promise.resolve(Gu(W,u,R)).then(te=>{e.unwatch[R]=te}).catch(console.error),z},async unmount(R,W=!0){R=Vn(R),!(!R||!e.mounts[R])&&(e.watching&&R in e.unwatch&&(e.unwatch[R](),delete e.unwatch[R]),W&&await Ju(e.mounts[R]),e.mountpoints=e.mountpoints.filter(te=>te!==R),delete e.mounts[R])},getMount(R=""){R=Cr(R)+":";const W=r(R);return{driver:W.driver,base:W.base}},getMounts(R="",W={}){return R=Cr(R),o(R,W.parents).map(pe=>({driver:pe.driver,base:pe.mountpoint}))}};return z}async function k5(s,e){e=normalizeBaseKey(e);const r=await s.getKeys(e),o={};return await Promise.all(r.map(async u=>{o[u.slice(e.length)]=await s.getItem(u)})),o}async function W5(s,e,r=""){r=normalizeBaseKey(r),await Promise.all(Object.entries(e).map(o=>s.setItem(r+o[0],o[1])))}function Gu(s,e,r){return s.watch?s.watch((o,u)=>e(o,r+u)):()=>{}}async function Ju(s){typeof s.dispose=="function"&&await hr(s.dispose)}const G5={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"};function Ar(s){return new Promise((e,r)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>r(s.error)})}function Yu(s,e){const r=indexedDB.open(s);r.onupgradeneeded=()=>r.result.createObjectStore(e);const o=Ar(r);return(u,d)=>o.then(v=>d(v.transaction(e,u).objectStore(e)))}let ha;function Xr(){return ha||(ha=Yu("keyval-store","keyval")),ha}function Qu(s,e=Xr()){return e("readonly",r=>Ar(r.get(s)))}function M0(s,e,r=Xr()){return r("readwrite",o=>(o.put(e,s),Ar(o.transaction)))}function J5(s,e=Xr()){return e("readwrite",r=>(s.forEach(o=>r.put(o[1],o[0])),Ar(r.transaction)))}function Y5(s,e=Xr()){return e("readonly",r=>Promise.all(s.map(o=>Ar(r.get(o)))))}function Q5(s,e,r=Xr()){return r("readwrite",o=>new Promise((u,d)=>{o.get(s).onsuccess=function(){try{o.put(e(this.result),s),u(Ar(o.transaction))}catch(v){d(v)}}}))}function j0(s,e=Xr()){return e("readwrite",r=>(r.delete(s),Ar(r.transaction)))}function X5(s,e=Xr()){return e("readwrite",r=>(s.forEach(o=>r.delete(o)),Ar(r.transaction)))}function B0(s=Xr()){return s("readwrite",e=>(e.clear(),Ar(e.transaction)))}function la(s,e){return s.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ar(s.transaction)}function $0(s=Xr()){return s("readonly",e=>{if(e.getAllKeys)return Ar(e.getAllKeys());const r=[];return la(e,o=>r.push(o.key)).then(()=>r)})}function Z5(s=Xr()){return s("readonly",e=>{if(e.getAll)return Ar(e.getAll());const r=[];return la(e,o=>r.push(o.value)).then(()=>r)})}function eI(s=Xr()){return s("readonly",e=>{if(e.getAll&&e.getAllKeys)return Promise.all([Ar(e.getAllKeys()),Ar(e.getAll())]).then(([o,u])=>o.map((d,v)=>[d,u[v]]));const r=[];return s("readonly",o=>la(o,u=>r.push([u.key,u.value])).then(()=>r))})}const z0=s=>JSON.stringify(s,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),H0=s=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=s.replace(e,'$1"$2n"$3');return JSON.parse(r,(o,u)=>typeof u=="string"&&u.match(/^\d+n$/)?BigInt(u.substring(0,u.length-1)):u)};function qn(s){if(typeof s!="string")throw new Error(`Cannot safe json parse value of type ${typeof s}`);try{return H0(s)}catch{return s}}function Ji(s){return typeof s=="string"?s:z0(s)||""}function tI(s){return s}const K0="idb-keyval";var V0=(s={})=>{const e=s.base&&s.base.length>0?`${s.base}:`:"",r=u=>e+u;let o;return s.dbName&&s.storeName&&(o=Yu(s.dbName,s.storeName)),{name:K0,options:s,async hasItem(u){return!(typeof await Qu(r(u),o)>"u")},async getItem(u){return await Qu(r(u),o)??null},setItem(u,d){return M0(r(u),d,o)},removeItem(u){return j0(r(u),o)},getKeys(){return $0(o)},clear(){return B0(o)}}};const q0="WALLET_CONNECT_V2_INDEXED_DB",k0="keyvaluestorage";class W0{constructor(){this.indexedDb=L0({driver:V0({dbName:q0,storeName:k0})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Ji(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof P.g<"u"?P.g:typeof self<"u"?self:{},Bs={exports:{}};(function(){let s;function e(){}s=e,s.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},s.prototype.setItem=function(r,o){this[r]=String(o)},s.prototype.removeItem=function(r){delete this[r]},s.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(o){r[o]=void 0,delete r[o]})},s.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},s.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof fa<"u"&&fa.localStorage?Bs.exports=fa.localStorage:typeof window<"u"&&window.localStorage?Bs.exports=window.localStorage:Bs.exports=new e})();function G0(s){var e;return[s[0],qn((e=s[1])!=null?e:"")]}class J0{constructor(){this.localStorage=Bs.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(G0)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return qn(r)}async setItem(e,r){this.localStorage.setItem(e,Ji(r))}async removeItem(e){this.localStorage.removeItem(e)}}const Y0="wc_storage_version",Xu=1,Q0=async(s,e,r)=>{const o=Y0,u=await e.getItem(o);if(u&&u>=Xu){r(e);return}const d=await s.getKeys();if(!d.length){r(e);return}const v=[];for(;d.length;){const A=d.shift();if(!A)continue;const z=A.toLowerCase();if(z.includes("wc@")||z.includes("walletconnect")||z.includes("wc_")||z.includes("wallet_connect")){const R=await s.getItem(A);await e.setItem(A,R),v.push(A)}}await e.setItem(o,Xu),r(e),X0(s,v)},X0=async(s,e)=>{e.length&&e.forEach(async r=>{await s.removeItem(r)})};class Z0{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new J0;this.storage=e;try{const r=new W0;Q0(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}var kn=P(37875),pt=P(71315),wn=P(36900);class ev extends wn.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class rI{constructor(e,r,o){this.core=e,this.logger=r}}class tv extends wn.q{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class rv{constructor(e,r){this.logger=e,this.core=r}}class iv extends wn.q{constructor(e,r){super(),this.relayer=e,this.logger=r}}class nv extends wn.q{constructor(e){super()}}class sv{constructor(e,r,o,u){this.core=e,this.logger=r,this.name=o}}class iI{constructor(){this.map=new Map}}class ov extends wn.q{constructor(e,r){super(),this.relayer=e,this.logger=r}}class nI{constructor(e,r){this.core=e,this.logger=r}}class av extends wn.q{constructor(e,r){super(),this.core=e,this.logger=r}}class sI{constructor(e,r){this.logger=e,this.core=r}}class cv{constructor(e,r){this.projectId=e,this.logger=r}}class uv{constructor(e,r){this.projectId=e,this.logger=r}}class oI extends null{constructor(){super()}}class hv{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class aI extends null{constructor(){super()}}class lv{constructor(e){this.client=e}}var Zu=P(61326);const fv="EdDSA",dv="JWT",eh=".",th="base64url",pv="utf8",gv="utf8",vv=":",yv="did",mv="key",rh="base58btc",wv="z",_v="K36",cI=32,bv=32;function $s(s){return safeJsonParse(toString(fromString(s,JWT_ENCODING),JSON_ENCODING))}function zs(s){return wr(Sr(Ji(s),pv),th)}function ih(s){const e=Sr(_v,rh),r=wv+wr(b([e,s]),rh);return[yv,mv,r].join(vv)}function uI(s){const[e,r,o]=s.split(DID_DELIMITER);if(e!==DID_PREFIX||r!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const d=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(d.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const A=d.slice(2);if(A.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return A}function Ev(s){return wr(s,th)}function Dv(s){return fromString(s,JWT_ENCODING)}function Iv(s){return Sr([zs(s.header),zs(s.payload)].join(eh),gv)}function hI(s){const e=toString(s,DATA_ENCODING).split(JWT_DELIMITER),r=$s(e[0]),o=$s(e[1]);return{header:r,payload:o}}function xv(s){return[zs(s.header),zs(s.payload),Ev(s.signature)].join(eh)}function lI(s){const e=s.split(JWT_DELIMITER),r=$s(e[0]),o=$s(e[1]),u=Dv(e[2]),d=fromString(e.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:r,payload:o,signature:u,data:d}}function nh(s=(0,Be.randomBytes)(bv)){return Zu._w(s)}async function Sv(s,e,r,o,u=(0,$e.fromMiliseconds)(Date.now())){const d={alg:fv,typ:dv},v=ih(o.publicKey),A=u+r,z={iss:v,sub:s,aud:e,iat:u,exp:A},R=Iv({header:d,payload:z}),W=Zu.Xx(o.secretKey,R);return xv({header:d,payload:z,signature:W})}async function fI(s){const{header:e,payload:r,data:o,signature:u}=decodeJWT(s);if(e.alg!==JWT_IRIDIUM_ALG||e.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const d=decodeIss(r.iss);return ed25519.verify(d,o,u)}var dI=P(42995);const Ov="PARSE_ERROR",Pv="INVALID_REQUEST",Cv="METHOD_NOT_FOUND",Av="INVALID_PARAMS",sh="INTERNAL_ERROR",da="SERVER_ERROR",Rv=[-32700,-32600,-32601,-32602,-32603],pI=null,Wn={[Ov]:{code:-32700,message:"Parse error"},[Pv]:{code:-32600,message:"Invalid Request"},[Cv]:{code:-32601,message:"Method not found"},[Av]:{code:-32602,message:"Invalid params"},[sh]:{code:-32603,message:"Internal error"},[da]:{code:-32e3,message:"Server error"}},oh=da;function gI(s){return s<=SERVER_ERROR_CODE_RANGE[0]&&s>=SERVER_ERROR_CODE_RANGE[1]}function ah(s){return Rv.includes(s)}function Nv(s){return typeof s=="number"}function ch(s){return Object.keys(Wn).includes(s)?Wn[s]:Wn[oh]}function uh(s){const e=Object.values(Wn).find(r=>r.code===s);return e||Wn[oh]}function vI(s){if(typeof s.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof s.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!Nv(s.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${s.error.code}`};if(ah(s.error.code)){const e=uh(s.error.code);if(e.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&s.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${s.error.code}`}}return{valid:!0}}function hh(s,e,r){return s.message.includes("getaddrinfo ENOTFOUND")||s.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):s}var Tv=P(88497);const yI=null;function pa(s=3){const e=Date.now()*Math.pow(10,s),r=Math.floor(Math.random()*Math.pow(10,s));return e+r}function lh(s=6){return BigInt(pa(s))}function _n(s,e,r){return{id:r||pa(),jsonrpc:"2.0",method:s,params:e}}function Hs(s,e){return{id:s,jsonrpc:"2.0",result:e}}function Ks(s,e,r){return{id:s,jsonrpc:"2.0",error:Fv(e,r)}}function Fv(s,e){return typeof s>"u"?ch(sh):(typeof s=="string"&&(s=Object.assign(Object.assign({},ch(da)),{message:s})),typeof e<"u"&&(s.data=e),ah(s.code)&&(s=uh(s.code)),s)}class Uv{}class mI extends null{constructor(e){super()}}class Lv extends Uv{constructor(){super()}}class Mv extends Lv{constructor(e){super()}}const jv="^https?:",Bv="^wss?:";function $v(s){const e=s.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function fh(s,e){const r=$v(s);return typeof r>"u"?!1:new RegExp(e).test(r)}function dh(s){return fh(s,jv)}function ph(s){return fh(s,Bv)}function zv(s){return new RegExp("wss?://localhost(:d{2,5})?").test(s)}function gh(s){return typeof s=="object"&&"id"in s&&"jsonrpc"in s&&s.jsonrpc==="2.0"}function ga(s){return gh(s)&&"method"in s}function Vs(s){return gh(s)&&(vi(s)||Zr(s))}function vi(s){return"result"in s}function Zr(s){return"error"in s}function wI(s){return"error"in s&&s.valid===!1}class yi extends Mv{constructor(e){super(e),this.events=new ce.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(_n(e.method,e.params||[],e.id||lh().toString()),r)}async requestStrict(e,r){return new Promise(async(o,u)=>{if(!this.connection.connected)try{await this.open()}catch(d){u(d)}this.events.on(`${e.id}`,d=>{Zr(d)?u(d.error):o(d.result)});try{await this.connection.send(e,r)}catch(d){u(d)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Vs(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var _I=null,bI=null;const Hv=()=>typeof WebSocket<"u"?WebSocket:typeof P.g<"u"&&typeof P.g.WebSocket<"u"?P.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:P(85783),Kv=()=>typeof WebSocket<"u"||typeof P.g<"u"&&typeof P.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",vh=s=>s.split("?")[0],yh=10,Vv=Hv();class qv{constructor(e){if(this.url=e,this.events=new ce.EventEmitter,this.registering=!1,!ph(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ji(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!ph(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,u)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),u(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return u(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,o)=>{const u=new URLSearchParams(e).get("origin"),d=(0,Tv.isReactNative)()?{headers:{origin:u}}:{rejectUnauthorized:!zv(e)},v=new Vv(e,[],d);Kv()?v.onerror=A=>{const z=A;o(this.emitError(z.error))}:v.on("error",A=>{o(this.emitError(A))}),v.onopen=()=>{this.onOpen(v),r(v)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?qn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const o=this.parseError(r),u=o.message||o.toString(),d=Ks(e,u);this.events.emit("payload",d)}parseError(e,r=this.url){return hh(e,vh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>yh&&this.events.setMaxListeners(yh)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${vh(this.url)}`));return this.events.emit("register_error",r),r}}var kv=P(5899),Wv=P.n(kv),Gv=P(51538),Jv=P.n(Gv);function Yv(s,e){if(s.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var u=0;u<s.length;u++){var d=s.charAt(u),v=d.charCodeAt(0);if(r[v]!==255)throw new TypeError(d+" is ambiguous");r[v]=u}var A=s.length,z=s.charAt(0),R=Math.log(A)/Math.log(256),W=Math.log(256)/Math.log(A);function te(fe){if(fe instanceof Uint8Array||(ArrayBuffer.isView(fe)?fe=new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):Array.isArray(fe)&&(fe=Uint8Array.from(fe))),!(fe instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(fe.length===0)return"";for(var Ce=0,He=0,We=0,Et=fe.length;We!==Et&&fe[We]===0;)We++,Ce++;for(var tt=(Et-We)*W+1>>>0,Ge=new Uint8Array(tt);We!==Et;){for(var Ve=fe[We],wt=0,_t=tt-1;(Ve!==0||wt<He)&&_t!==-1;_t--,wt++)Ve+=256*Ge[_t]>>>0,Ge[_t]=Ve%A>>>0,Ve=Ve/A>>>0;if(Ve!==0)throw new Error("Non-zero carry");He=wt,We++}for(var Tt=tt-He;Tt!==tt&&Ge[Tt]===0;)Tt++;for(var Lr=z.repeat(Ce);Tt<tt;++Tt)Lr+=s.charAt(Ge[Tt]);return Lr}function pe(fe){if(typeof fe!="string")throw new TypeError("Expected String");if(fe.length===0)return new Uint8Array;var Ce=0;if(fe[Ce]!==" "){for(var He=0,We=0;fe[Ce]===z;)He++,Ce++;for(var Et=(fe.length-Ce)*R+1>>>0,tt=new Uint8Array(Et);fe[Ce];){var Ge=r[fe.charCodeAt(Ce)];if(Ge===255)return;for(var Ve=0,wt=Et-1;(Ge!==0||Ve<We)&&wt!==-1;wt--,Ve++)Ge+=A*tt[wt]>>>0,tt[wt]=Ge%256>>>0,Ge=Ge/256>>>0;if(Ge!==0)throw new Error("Non-zero carry");We=Ve,Ce++}if(fe[Ce]!==" "){for(var _t=Et-We;_t!==Et&&tt[_t]===0;)_t++;for(var Tt=new Uint8Array(He+(Et-_t)),Lr=He;_t!==Et;)Tt[Lr++]=tt[_t++];return Tt}}}function Ne(fe){var Ce=pe(fe);if(Ce)return Ce;throw new Error(`Non-${e} character`)}return{encode:te,decodeUnsafe:pe,decode:Ne}}var Qv=Yv,Xv=Qv;const mh=s=>{if(s instanceof Uint8Array&&s.constructor.name==="Uint8Array")return s;if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw new Error("Unknown type, must be binary type")},Zv=s=>new TextEncoder().encode(s),ey=s=>new TextDecoder().decode(s);class ty{constructor(e,r,o){this.name=e,this.prefix=r,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ry{constructor(e,r,o){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=o}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return wh(this,e)}}class iy{constructor(e){this.decoders=e}or(e){return wh(this,e)}decode(e){const r=e[0],o=this.decoders[r];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wh=(s,e)=>new iy({...s.decoders||{[s.prefix]:s},...e.decoders||{[e.prefix]:e}});class ny{constructor(e,r,o,u){this.name=e,this.prefix=r,this.baseEncode=o,this.baseDecode=u,this.encoder=new ty(e,r,o),this.decoder=new ry(e,r,u)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const qs=({name:s,prefix:e,encode:r,decode:o})=>new ny(s,e,r,o),Gn=({prefix:s,name:e,alphabet:r})=>{const{encode:o,decode:u}=Xv(r,e);return qs({prefix:s,name:e,encode:o,decode:d=>mh(u(d))})},sy=(s,e,r,o)=>{const u={};for(let W=0;W<e.length;++W)u[e[W]]=W;let d=s.length;for(;s[d-1]==="=";)--d;const v=new Uint8Array(d*r/8|0);let A=0,z=0,R=0;for(let W=0;W<d;++W){const te=u[s[W]];if(te===void 0)throw new SyntaxError(`Non-${o} character`);z=z<<r|te,A+=r,A>=8&&(A-=8,v[R++]=255&z>>A)}if(A>=r||255&z<<8-A)throw new SyntaxError("Unexpected end of data");return v},oy=(s,e,r)=>{const o=e[e.length-1]==="=",u=(1<<r)-1;let d="",v=0,A=0;for(let z=0;z<s.length;++z)for(A=A<<8|s[z],v+=8;v>r;)v-=r,d+=e[u&A>>v];if(v&&(d+=e[u&A<<r-v]),o)for(;d.length*r&7;)d+="=";return d},fr=({name:s,prefix:e,bitsPerChar:r,alphabet:o})=>qs({prefix:e,name:s,encode(u){return oy(u,o,r)},decode(u){return sy(u,o,r,s)}}),ay=qs({prefix:"\0",name:"identity",encode:s=>ey(s),decode:s=>Zv(s)});var cy=Object.freeze({__proto__:null,identity:ay});const uy=fr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var hy=Object.freeze({__proto__:null,base2:uy});const ly=fr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var fy=Object.freeze({__proto__:null,base8:ly});const dy=Gn({prefix:"9",name:"base10",alphabet:"0123456789"});var py=Object.freeze({__proto__:null,base10:dy});const gy=fr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vy=fr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yy=Object.freeze({__proto__:null,base16:gy,base16upper:vy});const my=fr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wy=fr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_y=fr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),by=fr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ey=fr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dy=fr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Iy=fr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xy=fr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sy=fr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Oy=Object.freeze({__proto__:null,base32:my,base32upper:wy,base32pad:_y,base32padupper:by,base32hex:Ey,base32hexupper:Dy,base32hexpad:Iy,base32hexpadupper:xy,base32z:Sy});const Py=Gn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Cy=Gn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ay=Object.freeze({__proto__:null,base36:Py,base36upper:Cy});const Ry=Gn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ny=Gn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ty=Object.freeze({__proto__:null,base58btc:Ry,base58flickr:Ny});const Fy=fr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Uy=fr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ly=fr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),My=fr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var jy=Object.freeze({__proto__:null,base64:Fy,base64pad:Uy,base64url:Ly,base64urlpad:My});const _h=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),By=_h.reduce((s,e,r)=>(s[r]=e,s),[]),$y=_h.reduce((s,e,r)=>(s[e.codePointAt(0)]=r,s),[]);function zy(s){return s.reduce((e,r)=>(e+=By[r],e),"")}function Hy(s){const e=[];for(const r of s){const o=$y[r.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(o)}return new Uint8Array(e)}const Ky=qs({prefix:"\u{1F680}",name:"base256emoji",encode:zy,decode:Hy});var Vy=Object.freeze({__proto__:null,base256emoji:Ky}),qy=Eh,bh=128,ky=127,Wy=~ky,Gy=Math.pow(2,31);function Eh(s,e,r){e=e||[],r=r||0;for(var o=r;s>=Gy;)e[r++]=s&255|bh,s/=128;for(;s&Wy;)e[r++]=s&255|bh,s>>>=7;return e[r]=s|0,Eh.bytes=r-o+1,e}var Jy=va,Yy=128,Dh=127;function va(s,o){var r=0,o=o||0,u=0,d=o,v,A=s.length;do{if(d>=A)throw va.bytes=0,new RangeError("Could not decode varint");v=s[d++],r+=u<28?(v&Dh)<<u:(v&Dh)*Math.pow(2,u),u+=7}while(v>=Yy);return va.bytes=d-o,r}var Qy=Math.pow(2,7),Xy=Math.pow(2,14),Zy=Math.pow(2,21),em=Math.pow(2,28),tm=Math.pow(2,35),rm=Math.pow(2,42),im=Math.pow(2,49),nm=Math.pow(2,56),sm=Math.pow(2,63),om=function(s){return s<Qy?1:s<Xy?2:s<Zy?3:s<em?4:s<tm?5:s<rm?6:s<im?7:s<nm?8:s<sm?9:10},am={encode:qy,decode:Jy,encodingLength:om},Ih=am;const xh=(s,e,r=0)=>(Ih.encode(s,e,r),e),Sh=s=>Ih.encodingLength(s),ya=(s,e)=>{const r=e.byteLength,o=Sh(s),u=o+Sh(r),d=new Uint8Array(u+r);return xh(s,d,0),xh(r,d,o),d.set(e,u),new cm(s,r,e,d)};class cm{constructor(e,r,o,u){this.code=e,this.size=r,this.digest=o,this.bytes=u}}const Oh=({name:s,code:e,encode:r})=>new um(s,e,r);class um{constructor(e,r,o){this.name=e,this.code=r,this.encode=o}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ya(this.code,r):r.then(o=>ya(this.code,o))}else throw Error("Unknown type, must be binary type")}}const Ph=s=>async e=>new Uint8Array(await crypto.subtle.digest(s,e)),hm=Oh({name:"sha2-256",code:18,encode:Ph("SHA-256")}),lm=Oh({name:"sha2-512",code:19,encode:Ph("SHA-512")});var fm=Object.freeze({__proto__:null,sha256:hm,sha512:lm});const Ch=0,dm="identity",Ah=mh;var pm=Object.freeze({__proto__:null,identity:{code:Ch,name:dm,encode:Ah,digest:s=>ya(Ch,Ah(s))}});new TextEncoder,new TextDecoder;const Rh={...cy,...hy,...fy,...py,...yy,...Oy,...Ay,...Ty,...jy,...Vy};({...fm,...pm});function Nh(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function gm(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Nh(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function Th(s,e,r,o){return{name:s,prefix:e,encoder:{name:s,prefix:e,encode:r},decoder:{decode:o}}}const Fh=Th("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),ma=Th("ascii","a",s=>{let e="a";for(let r=0;r<s.length;r++)e+=String.fromCharCode(s[r]);return e},s=>{s=s.substring(1);const e=gm(s.length);for(let r=0;r<s.length;r++)e[r]=s.charCodeAt(r);return e}),vm={utf8:Fh,"utf-8":Fh,hex:Rh.base16,latin1:ma,ascii:ma,binary:ma,...Rh};function ym(s,e="utf8"){const r=vm[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Nh(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}const Uh="wc",mm=2,wa="core",Fi=`${Uh}@2:${wa}:`,wm={name:wa,logger:"error"},_m={database:":memory:"},bm="crypto",Lh="client_ed25519_seed",Em=$e.ONE_DAY,Dm="keychain",Im="0.3",xm="messages",Sm="0.3",Om=$e.SIX_HOURS,Pm="publisher",Mh="irn",Cm="error",jh="wss://relay.walletconnect.com",Bh="wss://relay.walletconnect.org",Am="relayer",gr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Rm="_subscription",mi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Nm=$e.ONE_SECOND,II={database:":memory:"},Tm="2.11.1",Fm=1e4,Um="0.3",Lm="WALLETCONNECT_CLIENT_ID",ei={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},xI=null,Mm="subscription",jm="0.3",Bm=$e.FIVE_SECONDS*1e3,$m="pairing",zm="0.3",SI=null,Jn={wc_pairingDelete:{req:{ttl:$e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:$e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:$e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:$e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:$e.ONE_DAY,prompt:!1,tag:0},res:{ttl:$e.ONE_DAY,prompt:!1,tag:0}}},Yn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},hi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Hm="history",Km="0.3",Vm="expirer",Kr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},qm="0.3",OI=null,_a="verify-api",bn="https://verify.walletconnect.com",ba="https://verify.walletconnect.org",km=[bn,ba],Wm="echo",Gm="https://echo.walletconnect.com";class Jm{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Dm,this.version=Im,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,u)=>{this.isInitialized(),this.keychain.set(o,u),await this.persist()},this.get=o=>{this.isInitialized();const u=this.keychain.get(o);if(typeof u>"u"){const{message:d}=Se("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(d)}return u},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=e,this.logger=(0,pt.generateChildLogger)(r,this.name)}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ru(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nu(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ym{constructor(e,r,o){this.core=e,this.logger=r,this.name=bm,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=u=>(this.isInitialized(),this.keychain.has(u)),this.getClientId=async()=>{this.isInitialized();const u=await this.getClientSeed(),d=nh(u);return ih(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const u=Jp();return this.setPrivateKey(u.publicKey,u.privateKey)},this.signJWT=async u=>{this.isInitialized();const d=await this.getClientSeed(),v=nh(d),A=ta();return await Sv(A,u,Em,v)},this.generateSharedKey=(u,d,v)=>{this.isInitialized();const A=this.getPrivateKey(u),z=Yp(A,d);return this.setSymKey(z,v)},this.setSymKey=async(u,d)=>{this.isInitialized();const v=d||Qp(u);return await this.keychain.set(v,u),v},this.deleteKeyPair=async u=>{this.isInitialized(),await this.keychain.del(u)},this.deleteSymKey=async u=>{this.isInitialized(),await this.keychain.del(u)},this.encode=async(u,d,v)=>{this.isInitialized();const A=xu(v),z=Ji(d);if(Su(A)){const pe=A.senderPublicKey,Ne=A.receiverPublicKey;u=await this.generateSharedKey(pe,Ne)}const R=this.getSymKey(u),{type:W,senderPublicKey:te}=A;return Zp({type:W,symKey:R,message:z,senderPublicKey:te})},this.decode=async(u,d,v)=>{this.isInitialized();const A=rg(d,v);if(Su(A)){const z=A.receiverPublicKey,R=A.senderPublicKey;u=await this.generateSharedKey(z,R)}try{const z=this.getSymKey(u),R=eg({symKey:z,encoded:d});return qn(R)}catch(z){this.logger.error(`Failed to decode message from topic: '${u}', clientId: '${await this.getClientId()}'`),this.logger.error(z)}},this.getPayloadType=u=>{const d=Ns(u);return zn(d.type)},this.getPayloadSenderPublicKey=u=>{const d=Ns(u);return d.senderPublicKey?wr(d.senderPublicKey,_r):void 0},this.core=e,this.logger=(0,pt.generateChildLogger)(r,this.name),this.keychain=o||new Jm(this.core,this.logger)}get context(){return(0,pt.getLoggerContext)(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Lh)}catch{e=ta(),await this.keychain.set(Lh,e)}return ym(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Qm extends rv{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=xm,this.version=Sm,this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,u)=>{this.isInitialized();const d=ln(u);let v=this.messages.get(o);return typeof v>"u"&&(v={}),typeof v[d]<"u"||(v[d]=u,this.messages.set(o,v),await this.persist()),d},this.get=o=>{this.isInitialized();let u=this.messages.get(o);return typeof u>"u"&&(u={}),u},this.has=(o,u)=>{this.isInitialized();const d=this.get(o),v=ln(u);return typeof d[v]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,pt.generateChildLogger)(e,this.name),this.core=r}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ru(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nu(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Xm extends iv{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new ce.EventEmitter,this.name=Pm,this.queue=new Map,this.publishTimeout=(0,$e.toMiliseconds)($e.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(o,u,d)=>{var v;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:u,opts:d}});try{const A=(d==null?void 0:d.ttl)||Om,z=na(d),R=(d==null?void 0:d.prompt)||!1,W=(d==null?void 0:d.tag)||0,te=(d==null?void 0:d.id)||lh().toString(),pe={topic:o,message:u,opts:{ttl:A,relay:z,prompt:R,tag:W,id:te}},Ne=setTimeout(()=>this.queue.set(te,pe),this.publishTimeout);try{await await Hn(this.rpcPublish(o,u,A,z,R,W,te),this.publishTimeout,`Failed to publish payload, please try again. id:${te} tag:${W}`),this.removeRequestFromQueue(te),this.relayer.events.emit(gr.publish,pe)}catch(fe){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(v=d==null?void 0:d.internal)!=null&&v.throwOnFailedPublish)throw this.removeRequestFromQueue(te),fe;return}finally{clearTimeout(Ne)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:u,opts:d}})}catch(A){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(A),A}},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.relayer=e,this.logger=(0,pt.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,pt.getLoggerContext)(this.logger)}rpcPublish(e,r,o,u,d,v,A){var z,R,W,te;const pe={method:Ts(u.protocol).publish,params:{topic:e,message:r,ttl:o,prompt:d,tag:v},id:A};return br((z=pe.params)==null?void 0:z.prompt)&&((R=pe.params)==null||delete R.prompt),br((W=pe.params)==null?void 0:W.tag)&&((te=pe.params)==null||delete te.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:pe}),this.relayer.request(pe)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:o,opts:u}=e;await this.publish(r,o,u)})}registerEventListeners(){this.relayer.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(gr.connection_stalled);return}this.checkQueue()}),this.relayer.on(gr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Zm{constructor(){this.map=new Map,this.set=(e,r)=>{const o=this.get(e);this.exists(e,r)||this.map.set(e,[...o,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const o=this.get(e);if(!this.exists(e,r))return;const u=o.filter(d=>d!==r);if(!u.length){this.map.delete(e);return}this.map.set(e,u)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var e1=Object.defineProperty,t1=Object.defineProperties,r1=Object.getOwnPropertyDescriptors,$h=Object.getOwnPropertySymbols,i1=Object.prototype.hasOwnProperty,n1=Object.prototype.propertyIsEnumerable,zh=(s,e,r)=>e in s?e1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Qn=(s,e)=>{for(var r in e||(e={}))i1.call(e,r)&&zh(s,r,e[r]);if($h)for(var r of $h(e))n1.call(e,r)&&zh(s,r,e[r]);return s},Ea=(s,e)=>t1(s,r1(e));class s1 extends ov{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new Zm,this.events=new ce.EventEmitter,this.name=Mm,this.version=jm,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Fi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,u)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:u}});try{const d=na(u),v={topic:o,relay:d};this.pending.set(o,v);const A=await this.rpcSubscribe(o,d);return this.onSubscribe(A,v),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:u}}),A}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(o,u)=>{await this.restartToComplete(),this.isInitialized(),typeof(u==null?void 0:u.id)<"u"?await this.unsubscribeById(o,u.id,u):await this.unsubscribeByTopic(o,u)},this.isSubscribed=async o=>{if(this.topics.includes(o))return!0;const u=`${this.pendingSubscriptionWatchLabel}_${o}`;return await new Promise((d,v)=>{const A=new $e.Watch;A.start(u);const z=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(z),A.stop(u),d(!0)),A.elapsed(u)>=Bm&&(clearInterval(z),A.stop(u),v(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,pt.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let o=!1;try{o=this.getSubscription(e).topic===r}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const o=this.topicMap.get(e);await Promise.all(o.map(async u=>await this.unsubscribeById(e,u,r)))}async unsubscribeById(e,r,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:o}});try{const u=na(o);await this.rpcUnsubscribe(e,r,u);const d=Ut("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:o}})}catch(u){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(u),u}}async rpcSubscribe(e,r){const o={method:Ts(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await Hn(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(gr.connection_stalled)}return ln(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,o={method:Ts(r.protocol).batchSubscribe,params:{topics:e.map(u=>u.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await Hn(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(gr.connection_stalled)}}rpcUnsubscribe(e,r,o){const u={method:Ts(o.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u}),this.relayer.request(u)}onSubscribe(e,r){this.setSubscription(e,Ea(Qn({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Qn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,o){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,o),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Qn({},r)),this.topicMap.set(r.topic,e),this.events.emit(ei.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:o}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const o=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(o.topic,e),this.events.emit(ei.deleted,Ea(Qn({},o),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ei.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(ei.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ui(r)&&this.onBatchSubscribe(r.map((o,u)=>Ea(Qn({},e[u]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(gr.connect,async()=>{await this.onConnect()}),this.relayer.on(gr.disconnect,()=>{this.onDisconnect()}),this.events.on(ei.created,async e=>{const r=ei.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(ei.deleted,async e=>{const r=ei.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var o1=Object.defineProperty,Hh=Object.getOwnPropertySymbols,a1=Object.prototype.hasOwnProperty,c1=Object.prototype.propertyIsEnumerable,Kh=(s,e,r)=>e in s?o1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,u1=(s,e)=>{for(var r in e||(e={}))a1.call(e,r)&&Kh(s,r,e[r]);if(Hh)for(var r of Hh(e))c1.call(e,r)&&Kh(s,r,e[r]);return s};class h1 extends nv{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ce.EventEmitter,this.name=Am,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async r=>{this.logger.debug("Publishing Request Payload");const o=r.id,u=this.provider.request(r);this.requestsInFlight.set(o,{promise:u,request:r});try{return await this.toEstablishConnection(),await u}catch(d){throw this.logger.debug("Failed to Publish Request"),this.logger.error(d),d}finally{this.requestsInFlight.delete(o)}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(gr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(gr.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(mi.payload,this.onPayloadHandler),this.provider.on(mi.connect,this.onConnectHandler),this.provider.on(mi.disconnect,this.onDisconnectHandler),this.provider.on(mi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?(0,pt.generateChildLogger)(e.logger,this.name):(0,pt.pino)((0,pt.getDefaultLoggerOptions)({level:e.logger||Cm})),this.messages=new Qm(this.logger,e.core),this.subscriber=new s1(this,this.logger),this.publisher=new Xm(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||jh,this.projectId=e.projectId,this.bundleId=ug(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Bh}...`),await this.restartTransport(Bh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Fm)}get context(){return(0,pt.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,o){this.isInitialized(),await this.publisher.publish(e,r,o),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var o;this.isInitialized();let u=((o=this.subscriber.topicMap.get(e))==null?void 0:o[0])||"";if(u)return u;let d;const v=A=>{A.topic===e&&(this.subscriber.off(ei.created,v),d())};return await Promise.all([new Promise(A=>{d=A,this.subscriber.on(ei.created,v)}),new Promise(async A=>{u=await this.subscriber.subscribe(e,r),A()})]),u}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Hn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(ei.resubscribed,()=>{r()})}),new Promise(async(r,o)=>{try{await Hn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(u){o(u);return}r()})])}catch(r){this.logger.error(r);const o=r;if(!this.isConnectionStalled(o.message))throw r;this.provider.events.emit(mi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ku())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new yi(new qv(gg({sdkVersion:Tm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:o}=e;await this.messages.set(r,o)}async shouldIgnoreMessageEvent(e){const{topic:r,message:o}=e;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const u=this.messages.has(r,o);return u&&this.logger.debug(`Ignoring duplicate message: ${o}`),u}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ga(e)){if(!e.method.endsWith(Rm))return;const r=e.params,{topic:o,message:u,publishedAt:d}=r.data,v={topic:o,message:u,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(u1({type:"event",event:r.id},v)),this.events.emit(r.id,v),await this.acknowledgePayload(e),await this.onMessageEvent(v)}else Vs(e)&&this.events.emit(gr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(gr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Hs(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(mi.payload,this.onPayloadHandler),this.provider.off(mi.connect,this.onConnectHandler),this.provider.off(mi.disconnect,this.onDisconnectHandler),this.provider.off(mi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(gr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await ku();w0(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(gr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},(0,$e.toMiliseconds)(Nm)))}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var l1=Object.defineProperty,Vh=Object.getOwnPropertySymbols,f1=Object.prototype.hasOwnProperty,d1=Object.prototype.propertyIsEnumerable,qh=(s,e,r)=>e in s?l1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,kh=(s,e)=>{for(var r in e||(e={}))f1.call(e,r)&&qh(s,r,e[r]);if(Vh)for(var r of Vh(e))d1.call(e,r)&&qh(s,r,e[r]);return s};class ks extends sv{constructor(e,r,o,u=Fi,d=void 0){super(e,r,o,u),this.core=e,this.logger=r,this.name=o,this.map=new Map,this.version=Um,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(v=>{this.getKey&&v!==null&&!br(v)?this.map.set(this.getKey(v),v):Yg(v)?this.map.set(v.id,v):Qg(v)&&this.map.set(v.topic,v)}),this.cached=[],this.initialized=!0)},this.set=async(v,A)=>{this.isInitialized(),this.map.has(v)?await this.update(v,A):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:v,value:A}),this.map.set(v,A),await this.persist())},this.get=v=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:v}),this.getData(v)),this.getAll=v=>(this.isInitialized(),v?this.values.filter(A=>Object.keys(v).every(z=>Wv()(A[z],v[z]))):this.values),this.update=async(v,A)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:v,update:A});const z=kh(kh({},this.getData(v)),A);this.map.set(v,z),await this.persist()},this.delete=async(v,A)=>{this.isInitialized(),this.map.has(v)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:v,reason:A}),this.map.delete(v),await this.persist())},this.logger=(0,pt.generateChildLogger)(r,this.name),this.storagePrefix=u,this.getKey=d}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:o}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class p1{constructor(e,r){this.core=e,this.logger=r,this.name=$m,this.version=zm,this.events=new(Ee()),this.initialized=!1,this.storagePrefix=Fi,this.ignoredPayloadTypes=[Wi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=ta(),u=await this.core.crypto.setSymKey(o),d=Ur($e.FIVE_MINUTES),v={protocol:Mh},A={topic:u,expiry:d,relay:v,active:!1},z=Fg({protocol:this.core.protocol,version:this.core.version,topic:u,symKey:o,relay:v,expiryTimestamp:d});return await this.pairings.set(u,A),await this.core.relayer.subscribe(u),this.core.expirer.set(u,d),{topic:u,uri:z}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:u,symKey:d,relay:v,expiryTimestamp:A}=Mu(o.uri);let z;if(this.pairings.keys.includes(u)&&(z=this.pairings.get(u),z.active))throw new Error(`Pairing already exists: ${u}. Please try again with a new connection URI.`);const R=A||Ur($e.FIVE_MINUTES),W={topic:u,relay:v,expiry:R,active:!1};return await this.pairings.set(u,W),this.core.expirer.set(u,R),o.activatePairing&&await this.activate({topic:u}),this.events.emit(Yn.create,W),this.core.crypto.keychain.has(u)||(await this.core.crypto.setSymKey(d,u),await this.core.relayer.subscribe(u,{relay:v})),W},this.activate=async({topic:o})=>{this.isInitialized();const u=Ur($e.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:u}),this.core.expirer.set(o,u)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:u}=o;if(this.pairings.keys.includes(u)){const d=await this.sendRequest(u,"wc_pairingPing",{}),{done:v,resolve:A,reject:z}=gn();this.events.once(zt("pairing_ping",d),({error:R})=>{R?z(R):A()}),await v()}},this.updateExpiry=async({topic:o,expiry:u})=>{this.isInitialized(),await this.pairings.update(o,{expiry:u})},this.updateMetadata=async({topic:o,metadata:u})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:u})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:u}=o;this.pairings.keys.includes(u)&&(await this.sendRequest(u,"wc_pairingDelete",Ut("USER_DISCONNECTED")),await this.deletePairing(u))},this.sendRequest=async(o,u,d)=>{const v=_n(u,d),A=await this.core.crypto.encode(o,v),z=Jn[u].req;return this.core.history.set(o,v),this.core.relayer.publish(o,A,z),v.id},this.sendResult=async(o,u,d)=>{const v=Hs(o,d),A=await this.core.crypto.encode(u,v),z=await this.core.history.get(u,o),R=Jn[z.request.method].res;await this.core.relayer.publish(u,A,R),await this.core.history.resolve(v)},this.sendError=async(o,u,d)=>{const v=Ks(o,d),A=await this.core.crypto.encode(u,v),z=await this.core.history.get(u,o),R=Jn[z.request.method]?Jn[z.request.method].res:Jn.unregistered_method.res;await this.core.relayer.publish(u,A,R),await this.core.history.resolve(v)},this.deletePairing=async(o,u)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,Ut("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),u?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(u=>Ti(u.expiry));await Promise.all(o.map(u=>this.deletePairing(u.topic)))},this.onRelayEventRequest=o=>{const{topic:u,payload:d}=o;switch(d.method){case"wc_pairingPing":return this.onPairingPingRequest(u,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(u,d);default:return this.onUnknownRpcMethodRequest(u,d)}},this.onRelayEventResponse=async o=>{const{topic:u,payload:d}=o,v=(await this.core.history.get(u,d.id)).request.method;switch(v){case"wc_pairingPing":return this.onPairingPingResponse(u,d);default:return this.onUnknownRpcMethodResponse(v)}},this.onPairingPingRequest=async(o,u)=>{const{id:d}=u;try{this.isValidPing({topic:o}),await this.sendResult(d,o,!0),this.events.emit(Yn.ping,{id:d,topic:o})}catch(v){await this.sendError(d,o,v),this.logger.error(v)}},this.onPairingPingResponse=(o,u)=>{const{id:d}=u;setTimeout(()=>{vi(u)?this.events.emit(zt("pairing_ping",d),{}):Zr(u)&&this.events.emit(zt("pairing_ping",d),{error:u.error})},500)},this.onPairingDeleteRequest=async(o,u)=>{const{id:d}=u;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(Yn.delete,{id:d,topic:o})}catch(v){await this.sendError(d,o,v),this.logger.error(v)}},this.onUnknownRpcMethodRequest=async(o,u)=>{const{id:d,method:v}=u;try{if(this.registeredMethods.includes(v))return;const A=Ut("WC_METHOD_UNSUPPORTED",v);await this.sendError(d,o,A),this.logger.error(A)}catch(A){await this.sendError(d,o,A),this.logger.error(A)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error(Ut("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{var u;if(!Pr(o)){const{message:v}=Se("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(v)}if(!Jg(o.uri)){const{message:v}=Se("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(v)}const d=Mu(o.uri);if(!((u=d==null?void 0:d.relay)!=null&&u.protocol)){const{message:v}=Se("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(v)}if(!(d!=null&&d.symKey)){const{message:v}=Se("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(v)}if(d!=null&&d.expiryTimestamp&&(0,$e.toMiliseconds)(d==null?void 0:d.expiryTimestamp)<Date.now()){const{message:v}=Se("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(v)}},this.isValidPing=async o=>{if(!Pr(o)){const{message:d}=Se("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(d)}const{topic:u}=o;await this.isValidPairingTopic(u)},this.isValidDisconnect=async o=>{if(!Pr(o)){const{message:d}=Se("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(d)}const{topic:u}=o;await this.isValidPairingTopic(u)},this.isValidPairingTopic=async o=>{if(!ur(o,!1)){const{message:u}=Se("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(u)}if(!this.pairings.keys.includes(o)){const{message:u}=Se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(u)}if(Ti(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:u}=Se("EXPIRED",`pairing topic: ${o}`);throw new Error(u)}},this.core=e,this.logger=(0,pt.generateChildLogger)(r,this.name),this.pairings=new ks(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,pt.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(gr.message,async e=>{const{topic:r,message:o}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const u=await this.core.crypto.decode(r,o);try{ga(u)?(this.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):Vs(u)&&(await this.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.core.history.delete(r,u.id))}catch(d){this.logger.error(d)}})}registerExpirerEvents(){this.core.expirer.on(Kr.expired,async e=>{const{topic:r}=Fu(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Yn.expire,{topic:r}))})}}class g1 extends tv{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new ce.EventEmitter,this.name=Hm,this.version=Km,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,u,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:u,chainId:d}),this.records.has(u.id))return;const v={id:u.id,topic:o,request:{method:u.method,params:u.params||null},chainId:d,expiry:Ur($e.THIRTY_DAYS)};this.records.set(v.id,v),this.events.emit(hi.created,v)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const u=await this.getRecord(o.id);typeof u.response>"u"&&(u.response=Zr(o)?{error:o.error}:{result:o.result},this.records.set(u.id,u),this.events.emit(hi.updated,u))},this.get=async(o,u)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:u}),await this.getRecord(u)),this.delete=(o,u)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:u}),this.values.forEach(d=>{if(d.topic===o){if(typeof u<"u"&&d.id!==u)return;this.records.delete(d.id),this.events.emit(hi.deleted,d)}})},this.exists=async(o,u)=>(this.isInitialized(),this.records.has(u)?(await this.getRecord(u)).topic===o:!1),this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.logger=(0,pt.generateChildLogger)(r,this.name)}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const o={topic:r.topic,request:_n(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(o)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:o}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(hi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(hi.created,e=>{const r=hi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(hi.updated,e=>{const r=hi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(hi.deleted,e=>{const r=hi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{(0,$e.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class v1 extends av{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new ce.EventEmitter,this.name=Vm,this.version=qm,this.cached=[],this.initialized=!1,this.storagePrefix=Fi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const u=this.formatTarget(o);return typeof this.getExpiration(u)<"u"}catch{return!1}},this.set=(o,u)=>{this.isInitialized();const d=this.formatTarget(o),v={target:d,expiry:u};this.expirations.set(d,v),this.checkExpiry(d,v),this.events.emit(Kr.created,{target:d,expiration:v})},this.get=o=>{this.isInitialized();const u=this.formatTarget(o);return this.getExpiration(u)},this.del=o=>{if(this.isInitialized(),this.has(o)){const u=this.formatTarget(o),d=this.getExpiration(u);this.expirations.delete(u),this.events.emit(Kr.deleted,{target:u,expiration:d})}},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.logger=(0,pt.generateChildLogger)(r,this.name)}get context(){return(0,pt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return wg(e);if(typeof e=="number")return _g(e);const{message:r}=Se("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Kr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:o}=Se("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return r}checkExpiry(e,r){const{expiry:o}=r;(0,$e.toMiliseconds)(o)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Kr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(kn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Kr.created,e=>{const r=Kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Kr.expired,e=>{const r=Kr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Kr.deleted,e=>{const r=Kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}}}class y1 extends cv{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=_a,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async o=>{if(this.verifyDisabled||fn()||!dn())return;const u=this.getVerifyUrl(o==null?void 0:o.verifyUrl);this.verifyUrl!==u&&this.removeIframe(),this.verifyUrl=u;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ba;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const u=this.getVerifyUrl(o==null?void 0:o.verifyUrl);let d;try{d=await this.fetchAttestation(o.attestationId,u)}catch(v){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${u}`),this.logger.info(v),d=await this.fetchAttestation(o.attestationId,ba)}return d},this.fetchAttestation=async(o,u)=>{this.logger.info(`resolving attestation: ${o} from url: ${u}`);const d=this.startAbortTimer($e.ONE_SECOND*2),v=await fetch(`${u}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(d),v.status===200?await v.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var u;try{if(!this.iframe)return;(u=this.iframe.contentWindow)==null||u.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const u=d=>{d.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",u),o())};await Promise.race([new Promise(d=>{if(document.getElementById(_a))return d();window.addEventListener("message",u);const v=document.createElement("iframe");v.id=_a,v.src=`${this.verifyUrl}/${this.projectId}`,v.style.display="none",document.body.append(v),this.iframe=v,o=d}),new Promise((d,v)=>setTimeout(()=>{window.removeEventListener("message",u),v("verify iframe load timeout")},(0,$e.toMiliseconds)($e.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=o=>{let u=o||bn;return km.includes(u)||(this.logger.info(`verify url: ${u}, not included in trusted list, assigning default: ${bn}`),u=bn),u},this.logger=(0,pt.generateChildLogger)(r,this.name),this.verifyUrl=bn,this.abortController=new AbortController,this.isDevEnv=ia()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,pt.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,$e.toMiliseconds)(e))}}class m1 extends uv{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=Wm,this.registerDeviceToken=async o=>{const{clientId:u,token:d,notificationType:v,enableEncrypted:A=!1}=o,z=`${Gm}/${this.projectId}/clients`;await Jv()(z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:u,type:v,token:d,always_raw:A})})},this.logger=(0,pt.generateChildLogger)(r,this.context)}}var w1=Object.defineProperty,Wh=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,b1=Object.prototype.propertyIsEnumerable,Gh=(s,e,r)=>e in s?w1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Jh=(s,e)=>{for(var r in e||(e={}))_1.call(e,r)&&Gh(s,r,e[r]);if(Wh)for(var r of Wh(e))b1.call(e,r)&&Gh(s,r,e[r]);return s};class Da extends ev{constructor(e){super(e),this.protocol=Uh,this.version=mm,this.name=wa,this.events=new ce.EventEmitter,this.initialized=!1,this.on=(o,u)=>this.events.on(o,u),this.once=(o,u)=>this.events.once(o,u),this.off=(o,u)=>this.events.off(o,u),this.removeListener=(o,u)=>this.events.removeListener(o,u),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||jh,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,pt.pino)((0,pt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||wm.logger}));this.logger=(0,pt.generateChildLogger)(r,this.name),this.heartbeat=new kn.HeartBeat,this.crypto=new Ym(this,this.logger,e==null?void 0:e.keychain),this.history=new g1(this,this.logger),this.expirer=new v1(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Z0(Jh(Jh({},_m),e==null?void 0:e.storageOptions)),this.relayer=new h1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new p1(this,this.logger),this.verify=new y1(this.projectId||"",this.logger),this.echoClient=new m1(this.projectId||"",this.logger)}static async init(e){const r=new Da(e);await r.initialize();const o=await r.crypto.getClientId();return await r.storage.setItem(Lm,o),r}get context(){return(0,pt.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const E1=Da,Yh="wc",Qh=2,Xh="client",Ia=`${Yh}@${Qh}:${Xh}:`,xa={name:Xh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},PI={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_request_expire:"session_request_expire"},CI={database:":memory:"},Zh="WALLETCONNECT_DEEPLINK_CHOICE",AI={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},RI="history",NI="0.3",D1="proposal",TI=null,el="Proposal expired",I1="session",Ws=$e.SEVEN_DAYS,x1="engine",wi={wc_sessionPropose:{req:{ttl:$e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:$e.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:$e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:$e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:$e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:$e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:$e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:$e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:$e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:$e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:$e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:$e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:$e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:$e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:$e.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:$e.THIRTY_SECONDS,prompt:!1,tag:1115}}},Sa={min:$e.FIVE_MINUTES,max:$e.SEVEN_DAYS},_i={idle:"IDLE",active:"ACTIVE"},S1="request",O1=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var P1=Object.defineProperty,C1=Object.defineProperties,A1=Object.getOwnPropertyDescriptors,tl=Object.getOwnPropertySymbols,R1=Object.prototype.hasOwnProperty,N1=Object.prototype.propertyIsEnumerable,rl=(s,e,r)=>e in s?P1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Er=(s,e)=>{for(var r in e||(e={}))R1.call(e,r)&&rl(s,r,e[r]);if(tl)for(var r of tl(e))N1.call(e,r)&&rl(s,r,e[r]);return s},En=(s,e)=>C1(s,A1(e));class T1 extends lv{constructor(e){super(e),this.name=x1,this.events=new(Ee()),this.initialized=!1,this.ignoredPayloadTypes=[Wi],this.requestQueue={state:_i.idle,queue:[]},this.sessionRequestQueue={state:_i.idle,queue:[]},this.requestQueueDelay=$e.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(wi)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,$e.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const o=En(Er({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:u,requiredNamespaces:d,optionalNamespaces:v,sessionProperties:A,relays:z}=o;let R=u,W,te=!1;if(R&&(te=this.client.core.pairing.pairings.get(R).active),!R||!te){const{topic:Ge,uri:Ve}=await this.client.core.pairing.create();R=Ge,W=Ve}const pe=await this.client.core.crypto.generateKeyPair(),Ne=wi.wc_sessionPropose.req.ttl||$e.FIVE_MINUTES,fe=Ur(Ne),Ce=Er({requiredNamespaces:d,optionalNamespaces:v,relays:z??[{protocol:Mh}],proposer:{publicKey:pe,metadata:this.client.metadata},expiryTimestamp:fe},A&&{sessionProperties:A}),{reject:He,resolve:We,done:Et}=gn(Ne,el);if(this.events.once(zt("session_connect"),async({error:Ge,session:Ve})=>{if(Ge)He(Ge);else if(Ve){Ve.self.publicKey=pe;const wt=En(Er({},Ve),{requiredNamespaces:Ce.requiredNamespaces,optionalNamespaces:Ce.optionalNamespaces});await this.client.session.set(Ve.topic,wt),await this.setExpiry(Ve.topic,Ve.expiry),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:Ve.peer.metadata}),We(wt)}}),!R){const{message:Ge}=Se("NO_MATCHING_KEY",`connect() pairing topic: ${R}`);throw new Error(Ge)}const tt=await this.sendRequest({topic:R,method:"wc_sessionPropose",params:Ce,throwOnFailedPublish:!0});return await this.setProposal(tt,Er({id:tt},Ce)),{uri:W,approval:Et}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:o,relayProtocol:u,namespaces:d,sessionProperties:v}=r,A=this.client.proposal.get(o);let{pairingTopic:z,proposer:R,requiredNamespaces:W,optionalNamespaces:te}=A;z=z||"";const pe=await this.client.core.crypto.generateKeyPair(),Ne=R.publicKey,fe=await this.client.core.crypto.generateSharedKey(pe,Ne);z&&o&&(await this.client.core.pairing.updateMetadata({topic:z,metadata:R.metadata}),await this.sendResult({id:o,topic:z,result:{relay:{protocol:u??"irn"},responderPublicKey:pe}}),await this.client.proposal.delete(o,Ut("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:z}));const Ce=Er({relay:{protocol:u??"irn"},namespaces:d,pairingTopic:z,controller:{publicKey:pe,metadata:this.client.metadata},expiry:Ur(Ws)},v&&{sessionProperties:v});await this.client.core.relayer.subscribe(fe);const He=En(Er({},Ce),{topic:fe,requiredNamespaces:W,optionalNamespaces:te,pairingTopic:z,acknowledged:!1,self:Ce.controller,peer:{publicKey:R.publicKey,metadata:R.metadata},controller:pe});await this.client.session.set(fe,He);try{await this.sendRequest({topic:fe,method:"wc_sessionSettle",params:Ce,throwOnFailedPublish:!0})}catch(We){throw this.client.logger.error(We),this.client.session.delete(fe,Ut("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(fe),We}return await this.setExpiry(fe,Ur(Ws)),{topic:fe,acknowledged:()=>new Promise(We=>setTimeout(()=>We(this.client.session.get(fe)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:o,reason:u}=r,{pairingTopic:d}=this.client.proposal.get(o);d&&(await this.sendError(o,d,u),await this.client.proposal.delete(o,Ut("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:o,namespaces:u}=r,d=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:u}}),{done:v,resolve:A,reject:z}=gn();return this.events.once(zt("session_update",d),({error:R})=>{R?z(R):A()}),await this.client.session.update(o,{namespaces:u}),{acknowledged:v}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:o}=r,u=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:d,resolve:v,reject:A}=gn();return this.events.once(zt("session_extend",u),({error:z})=>{z?A(z):v()}),await this.setExpiry(o,Ur(Ws)),{acknowledged:d}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:o,request:u,topic:d,expiry:v=wi.wc_sessionRequest.req.ttl}=r,A=pa(),{done:z,resolve:R,reject:W}=gn(v,"Request expired. Please try again.");return this.events.once(zt("session_request",A),({error:te,result:pe})=>{te?W(te):R(pe)}),await Promise.all([new Promise(async te=>{await this.sendRequest({clientRpcId:A,topic:d,method:"wc_sessionRequest",params:{request:En(Er({},u),{expiryTimestamp:Ur(v)}),chainId:o},expiry:v,throwOnFailedPublish:!0}).catch(pe=>W(pe)),this.client.events.emit("session_request_sent",{topic:d,request:u,chainId:o,id:A}),te()}),new Promise(async te=>{const pe=await Eg(this.client.core.storage,Zh);bg({id:A,topic:d,wcDeepLink:pe}),te()}),z()]).then(te=>te[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:o,response:u}=r,{id:d}=u;vi(u)?await this.sendResult({id:d,topic:o,result:u.result,throwOnFailedPublish:!0}):Zr(u)&&await this.sendError(d,o,u.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:o}=r;if(this.client.session.keys.includes(o)){const u=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:d,resolve:v,reject:A}=gn();this.events.once(zt("session_ping",u),({error:z})=>{z?A(z):v()}),await d()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:o,event:u,chainId:d}=r;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:u,chainId:d}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:o}=r;if(this.client.session.keys.includes(o))await this.sendRequest({topic:o,method:"wc_sessionDelete",params:Ut("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:o,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(o))await this.client.core.pairing.disconnect({topic:o});else{const{message:u}=Se("MISMATCHED_TOPIC",`Session or pairing topic not found: ${o}`);throw new Error(u)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(o=>Wg(o,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const o=this.client.core.pairing.pairings.get(r.pairingTopic),u=this.client.core.pairing.pairings.getAll().filter(d=>{var v,A;return((v=d.peerMetadata)==null?void 0:v.url)&&((A=d.peerMetadata)==null?void 0:A.url)===r.peer.metadata.url&&d.topic&&d.topic!==o.topic});if(u.length===0)return;this.client.logger.info(`Cleaning up ${u.length} duplicate pairing(s)`),await Promise.all(u.map(d=>this.client.core.pairing.disconnect({topic:d.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async r=>{const{topic:o,expirerHasDeleted:u=!1,emitEvent:d=!0,id:v=0}=r,{self:A}=this.client.session.get(o);await this.client.core.relayer.unsubscribe(o),await this.client.session.delete(o,Ut("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(A.publicKey)&&await this.client.core.crypto.deleteKeyPair(A.publicKey),this.client.core.crypto.keychain.has(o)&&await this.client.core.crypto.deleteSymKey(o),u||this.client.core.expirer.del(o),this.client.core.storage.removeItem(Zh).catch(z=>this.client.logger.warn(z)),this.getPendingSessionRequests().forEach(z=>{z.topic===o&&this.deletePendingSessionRequest(z.id,Ut("USER_DISCONNECTED"))}),d&&this.client.events.emit("session_delete",{id:v,topic:o})},this.deleteProposal=async(r,o)=>{await Promise.all([this.client.proposal.delete(r,Ut("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,o,u=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,o),u?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(d=>d.id!==r),u&&(this.sessionRequestQueue.state=_i.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,o)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:o}),this.client.core.expirer.set(r,o)},this.setProposal=async(r,o)=>{await this.client.proposal.set(r,o),this.client.core.expirer.set(r,Ur(wi.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{const{id:o,topic:u,params:d,verifyContext:v}=r,A=d.request.expiryTimestamp||Ur(wi.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(o,{id:o,topic:u,params:d,verifyContext:v}),A&&this.client.core.expirer.set(o,A)},this.sendRequest=async r=>{const{topic:o,method:u,params:d,expiry:v,relayRpcId:A,clientRpcId:z,throwOnFailedPublish:R}=r,W=_n(u,d,z);if(dn()&&O1.includes(u)){const Ne=ln(JSON.stringify(W));this.client.core.verify.register({attestationId:Ne})}const te=await this.client.core.crypto.encode(o,W),pe=wi[u].req;return v&&(pe.ttl=v),A&&(pe.id=A),this.client.core.history.set(o,W),R?(pe.internal=En(Er({},pe.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,te,pe)):this.client.core.relayer.publish(o,te,pe).catch(Ne=>this.client.logger.error(Ne)),W.id},this.sendResult=async r=>{const{id:o,topic:u,result:d,throwOnFailedPublish:v}=r,A=Hs(o,d),z=await this.client.core.crypto.encode(u,A),R=await this.client.core.history.get(u,o),W=wi[R.request.method].res;v?(W.internal=En(Er({},W.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(u,z,W)):this.client.core.relayer.publish(u,z,W).catch(te=>this.client.logger.error(te)),await this.client.core.history.resolve(A)},this.sendError=async(r,o,u)=>{const d=Ks(r,u),v=await this.client.core.crypto.encode(o,d),A=await this.client.core.history.get(o,r),z=wi[A.request.method].res;this.client.core.relayer.publish(o,v,z),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const r=[],o=[];this.client.session.getAll().forEach(u=>{let d=!1;Ti(u.expiry)&&(d=!0),this.client.core.crypto.keychain.has(u.topic)||(d=!0),d&&r.push(u.topic)}),this.client.proposal.getAll().forEach(u=>{Ti(u.expiryTimestamp)&&o.push(u.id)}),await Promise.all([...r.map(u=>this.deleteSession({topic:u})),...o.map(u=>this.deleteProposal(u))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===_i.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=_i.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=_i.idle},this.processRequest=r=>{const{topic:o,payload:u}=r,d=u.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(o,u);case"wc_sessionSettle":return this.onSessionSettleRequest(o,u);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,u);case"wc_sessionExtend":return this.onSessionExtendRequest(o,u);case"wc_sessionPing":return this.onSessionPingRequest(o,u);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,u);case"wc_sessionRequest":return this.onSessionRequest(o,u);case"wc_sessionEvent":return this.onSessionEventRequest(o,u);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async r=>{const{topic:o,payload:u}=r,d=(await this.client.core.history.get(o,u.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(o,u);case"wc_sessionSettle":return this.onSessionSettleResponse(o,u);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,u);case"wc_sessionExtend":return this.onSessionExtendResponse(o,u);case"wc_sessionPing":return this.onSessionPingResponse(o,u);case"wc_sessionRequest":return this.onSessionRequestResponse(o,u);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:o}=r,{message:u}=Se("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(u)},this.onSessionProposeRequest=async(r,o)=>{const{params:u,id:d}=o;try{this.isValidConnect(Er({},o.params));const v=u.expiryTimestamp||Ur(wi.wc_sessionPropose.req.ttl),A=Er({id:d,pairingTopic:r,expiryTimestamp:v},u);await this.setProposal(d,A);const z=ln(JSON.stringify(o)),R=await this.getVerifyContext(z,A.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:A,verifyContext:R})}catch(v){await this.sendError(d,r,v),this.client.logger.error(v)}},this.onSessionProposeResponse=async(r,o)=>{const{id:u}=o;if(vi(o)){const{result:d}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const v=this.client.proposal.get(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:v});const A=v.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:A});const z=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:z});const R=await this.client.core.crypto.generateSharedKey(A,z);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:R});const W=await this.client.core.relayer.subscribe(R);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:W}),await this.client.core.pairing.activate({topic:r})}else Zr(o)&&(await this.client.proposal.delete(u,Ut("USER_DISCONNECTED")),this.events.emit(zt("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(r,o)=>{const{id:u,params:d}=o;try{this.isValidSessionSettleRequest(d);const{relay:v,controller:A,expiry:z,namespaces:R,sessionProperties:W,pairingTopic:te}=o.params,pe=Er({topic:r,relay:v,expiry:z,namespaces:R,acknowledged:!0,pairingTopic:te,requiredNamespaces:{},optionalNamespaces:{},controller:A.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:A.publicKey,metadata:A.metadata}},W&&{sessionProperties:W});await this.sendResult({id:o.id,topic:r,result:!0}),this.events.emit(zt("session_connect"),{session:pe}),this.cleanupDuplicatePairings(pe)}catch(v){await this.sendError(u,r,v),this.client.logger.error(v)}},this.onSessionSettleResponse=async(r,o)=>{const{id:u}=o;vi(o)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(zt("session_approve",u),{})):Zr(o)&&(await this.client.session.delete(r,Ut("USER_DISCONNECTED")),this.events.emit(zt("session_approve",u),{error:o.error}))},this.onSessionUpdateRequest=async(r,o)=>{const{params:u,id:d}=o;try{const v=`${r}_session_update`,A=Ms.get(v);if(A&&this.isRequestOutOfSync(A,d)){this.client.logger.info(`Discarding out of sync request - ${d}`);return}this.isValidUpdate(Er({topic:r},u)),await this.client.session.update(r,{namespaces:u.namespaces}),await this.sendResult({id:d,topic:r,result:!0}),this.client.events.emit("session_update",{id:d,topic:r,params:u}),Ms.set(v,d)}catch(v){await this.sendError(d,r,v),this.client.logger.error(v)}},this.isRequestOutOfSync=(r,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,o)=>{const{id:u}=o;vi(o)?this.events.emit(zt("session_update",u),{}):Zr(o)&&this.events.emit(zt("session_update",u),{error:o.error})},this.onSessionExtendRequest=async(r,o)=>{const{id:u}=o;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Ur(Ws)),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_extend",{id:u,topic:r})}catch(d){await this.sendError(u,r,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(r,o)=>{const{id:u}=o;vi(o)?this.events.emit(zt("session_extend",u),{}):Zr(o)&&this.events.emit(zt("session_extend",u),{error:o.error})},this.onSessionPingRequest=async(r,o)=>{const{id:u}=o;try{this.isValidPing({topic:r}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_ping",{id:u,topic:r})}catch(d){await this.sendError(u,r,d),this.client.logger.error(d)}},this.onSessionPingResponse=(r,o)=>{const{id:u}=o;setTimeout(()=>{vi(o)?this.events.emit(zt("session_ping",u),{}):Zr(o)&&this.events.emit(zt("session_ping",u),{error:o.error})},500)},this.onSessionDeleteRequest=async(r,o)=>{const{id:u}=o;try{this.isValidDisconnect({topic:r,reason:o.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(gr.publish,async()=>{d(await this.deleteSession({topic:r,id:u}))})}),this.sendResult({id:u,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Ut("USER_DISCONNECTED")})])}catch(d){this.client.logger.error(d)}},this.onSessionRequest=async(r,o)=>{const{id:u,params:d}=o;try{this.isValidRequest(Er({topic:r},d));const v=ln(JSON.stringify(_n("wc_sessionRequest",d,u))),A=this.client.session.get(r),z=await this.getVerifyContext(v,A.peer.metadata),R={id:u,topic:r,params:d,verifyContext:z};await this.setPendingSessionRequest(R),this.addSessionRequestToSessionRequestQueue(R),this.processSessionRequestQueue()}catch(v){await this.sendError(u,r,v),this.client.logger.error(v)}},this.onSessionRequestResponse=(r,o)=>{const{id:u}=o;vi(o)?this.events.emit(zt("session_request",u),{result:o.result}):Zr(o)&&this.events.emit(zt("session_request",u),{error:o.error})},this.onSessionEventRequest=async(r,o)=>{const{id:u,params:d}=o;try{const v=`${r}_session_event_${d.event.name}`,A=Ms.get(v);if(A&&this.isRequestOutOfSync(A,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidEmit(Er({topic:r},d)),this.client.events.emit("session_event",{id:u,topic:r,params:d}),Ms.set(v,u)}catch(v){await this.sendError(u,r,v),this.client.logger.error(v)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=_i.idle,this.processSessionRequestQueue()},(0,$e.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:o})=>{const u=this.client.core.history.pending;u.length>0&&u.filter(d=>d.topic===r&&d.request.method==="wc_sessionRequest").forEach(d=>{this.events.emit(zt("session_request",d.request.id),{error:o})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===_i.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=_i.active,this.client.events.emit("session_request",r)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=r=>{if(r.active)return;const o=this.client.proposal.getAll().find(u=>u.pairingTopic===r.topic);o&&this.onSessionProposeRequest(r.topic,_n("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer,sessionProperties:o.sessionProperties},o.id))},this.isValidConnect=async r=>{if(!Pr(r)){const{message:z}=Se("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(z)}const{pairingTopic:o,requiredNamespaces:u,optionalNamespaces:d,sessionProperties:v,relays:A}=r;if(br(o)||await this.isValidPairingTopic(o),!s0(A,!0)){const{message:z}=Se("MISSING_OR_INVALID",`connect() relays: ${A}`);throw new Error(z)}!br(u)&&mn(u)!==0&&this.validateNamespaces(u,"requiredNamespaces"),!br(d)&&mn(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),br(v)||this.validateSessionProps(v,"sessionProperties")},this.validateNamespaces=(r,o)=>{const u=n0(r,"connect()",o);if(u)throw new Error(u.message)},this.isValidApprove=async r=>{if(!Pr(r))throw new Error(Se("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:o,namespaces:u,relayProtocol:d,sessionProperties:v}=r;await this.isValidProposalId(o);const A=this.client.proposal.get(o),z=Ls(u,"approve()");if(z)throw new Error(z.message);const R=oa(A.requiredNamespaces,u,"approve()");if(R)throw new Error(R.message);if(!ur(d,!0)){const{message:W}=Se("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(W)}br(v)||this.validateSessionProps(v,"sessionProperties")},this.isValidReject=async r=>{if(!Pr(r)){const{message:d}=Se("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(d)}const{id:o,reason:u}=r;if(await this.isValidProposalId(o),!a0(u)){const{message:d}=Se("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(u)}`);throw new Error(d)}},this.isValidSessionSettleRequest=r=>{if(!Pr(r)){const{message:R}=Se("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(R)}const{relay:o,controller:u,namespaces:d,expiry:v}=r;if(!Ku(o)){const{message:R}=Se("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(R)}const A=Xg(u,"onSessionSettleRequest()");if(A)throw new Error(A.message);const z=Ls(d,"onSessionSettleRequest()");if(z)throw new Error(z.message);if(Ti(v)){const{message:R}=Se("EXPIRED","onSessionSettleRequest()");throw new Error(R)}},this.isValidUpdate=async r=>{if(!Pr(r)){const{message:z}=Se("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(z)}const{topic:o,namespaces:u}=r;await this.isValidSessionTopic(o);const d=this.client.session.get(o),v=Ls(u,"update()");if(v)throw new Error(v.message);const A=oa(d.requiredNamespaces,u,"update()");if(A)throw new Error(A.message)},this.isValidExtend=async r=>{if(!Pr(r)){const{message:u}=Se("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionTopic(o)},this.isValidRequest=async r=>{if(!Pr(r)){const{message:z}=Se("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(z)}const{topic:o,request:u,chainId:d,expiry:v}=r;await this.isValidSessionTopic(o);const{namespaces:A}=this.client.session.get(o);if(!Vu(A,d)){const{message:z}=Se("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(z)}if(!c0(u)){const{message:z}=Se("MISSING_OR_INVALID",`request() ${JSON.stringify(u)}`);throw new Error(z)}if(!l0(A,d,u.method)){const{message:z}=Se("MISSING_OR_INVALID",`request() method: ${u.method}`);throw new Error(z)}if(v&&!g0(v,Sa)){const{message:z}=Se("MISSING_OR_INVALID",`request() expiry: ${v}. Expiry must be a number (in seconds) between ${Sa.min} and ${Sa.max}`);throw new Error(z)}},this.isValidRespond=async r=>{var o;if(!Pr(r)){const{message:v}=Se("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(v)}const{topic:u,response:d}=r;try{await this.isValidSessionTopic(u)}catch(v){throw(o=r==null?void 0:r.response)!=null&&o.id&&this.cleanupAfterResponse(r),v}if(!u0(d)){const{message:v}=Se("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw new Error(v)}},this.isValidPing=async r=>{if(!Pr(r)){const{message:u}=Se("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async r=>{if(!Pr(r)){const{message:A}=Se("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(A)}const{topic:o,event:u,chainId:d}=r;await this.isValidSessionTopic(o);const{namespaces:v}=this.client.session.get(o);if(!Vu(v,d)){const{message:A}=Se("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(A)}if(!h0(u)){const{message:A}=Se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(A)}if(!f0(v,d,u.name)){const{message:A}=Se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(A)}},this.isValidDisconnect=async r=>{if(!Pr(r)){const{message:u}=Se("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(r,o)=>{const u={verified:{verifyUrl:o.verifyUrl||bn,validation:"UNKNOWN",origin:o.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:r,verifyUrl:o.verifyUrl});d&&(u.verified.origin=d.origin,u.verified.isScam=d.isScam,u.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.info(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(u)}`),u},this.validateSessionProps=(r,o)=>{Object.values(r).forEach(u=>{if(!ur(u,!1)){const{message:d}=Se("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(u)}`);throw new Error(d)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Se("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(gr.message,async e=>{const{topic:r,message:o}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const u=await this.client.core.crypto.decode(r,o);try{ga(u)?(this.client.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):Vs(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.client.core.history.delete(r,u.id)):this.onRelayEventUnknownPayload({topic:r,payload:u})}catch(d){this.client.logger.error(d)}})}registerExpirerEvents(){this.client.core.expirer.on(Kr.expired,async e=>{const{topic:r,id:o}=Fu(e.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,Se("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(Yn.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!ur(e,!1)){const{message:r}=Se("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Se("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!ur(e,!1)){const{message:r}=Se("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Se("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Se("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Se("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ur(e,!1)){const{message:r}=Se("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Se("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!o0(e)){const{message:r}=Se("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Se("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ti(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Se("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class F1 extends ks{constructor(e,r){super(e,r,D1,Ia),this.core=e,this.logger=r}}class U1 extends ks{constructor(e,r){super(e,r,I1,Ia),this.core=e,this.logger=r}}class L1 extends ks{constructor(e,r){super(e,r,S1,Ia,o=>o.id),this.core=e,this.logger=r}}class Oa extends hv{constructor(e){super(e),this.protocol=Yh,this.version=Qh,this.name=xa.name,this.events=new ce.EventEmitter,this.on=(o,u)=>this.events.on(o,u),this.once=(o,u)=>this.events.once(o,u),this.off=(o,u)=>this.events.off(o,u),this.removeListener=(o,u)=>this.events.removeListener(o,u),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(u){throw this.logger.error(u.message),u}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(u){throw this.logger.error(u.message),u}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(u){throw this.logger.error(u.message),u}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(u){throw this.logger.error(u.message),u}},this.update=async o=>{try{return await this.engine.update(o)}catch(u){throw this.logger.error(u.message),u}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(u){throw this.logger.error(u.message),u}},this.request=async o=>{try{return await this.engine.request(o)}catch(u){throw this.logger.error(u.message),u}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(u){throw this.logger.error(u.message),u}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(u){throw this.logger.error(u.message),u}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(u){throw this.logger.error(u.message),u}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(u){throw this.logger.error(u.message),u}},this.find=o=>{try{return this.engine.find(o)}catch(u){throw this.logger.error(u.message),u}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(e==null?void 0:e.name)||xa.name,this.metadata=(e==null?void 0:e.metadata)||lg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,pt.pino)((0,pt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||xa.logger}));this.core=(e==null?void 0:e.core)||new E1(e),this.logger=(0,pt.generateChildLogger)(r,this.name),this.session=new U1(this.core,this.logger),this.proposal=new F1(this.core,this.logger),this.pendingRequest=new L1(this.core,this.logger),this.engine=new T1(this)}static async init(e){const r=new Oa(e);return await r.initialize(),r}get context(){return(0,pt.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const FI=null,UI=null;var M1=P(52830),il=P.n(M1);const nl={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},sl=10;class ol{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new ce.EventEmitter,this.isAvailable=!1,this.registering=!1,!dh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const o=Ji(e),d=await(await il()(this.url,Object.assign(Object.assign({},nl),{body:o}))).json();this.onPayload({data:d})}catch(o){this.onError(e.id,o)}}async register(e=this.url){if(!dh(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,u)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),u(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return u(new Error("HTTP connection is missing or invalid"));o()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Ji({id:1,jsonrpc:"2.0",method:"test",params:[]});await il()(e,Object.assign(Object.assign({},nl),{body:r}))}this.onOpen()}catch(r){const o=this.parseError(r);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?qn(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const o=this.parseError(r),u=o.message||o.toString(),d=Ks(e,u);this.events.emit("payload",d)}parseError(e,r=this.url){return hh(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>sl&&this.events.setMaxListeners(sl)}}var j1=ol,Yi=j1;const al="error",B1="wss://relay.walletconnect.com",$1="wc",z1="universal_provider",cl=`${$1}@2:${z1}:`,H1="https://rpc.walletconnect.com/v1/",bi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof P.g<"u"?P.g:typeof self<"u"?self:{},Pa={exports:{}};(function(s,e){(function(){var r,o="4.17.21",u=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",A="Invalid `variable` option passed into `_.template`",z="__lodash_hash_undefined__",R=500,W="__lodash_placeholder__",te=1,pe=2,Ne=4,fe=1,Ce=2,He=1,We=2,Et=4,tt=8,Ge=16,Ve=32,wt=64,_t=128,Tt=256,Lr=512,xw=30,Sw="...",Ow=800,Pw=16,_l=1,Cw=2,Aw=3,Xi=1/0,Li=9007199254740991,Rw=17976931348623157e292,Qs=0/0,li=4294967295,Nw=li-1,Tw=li>>>1,Fw=[["ary",_t],["bind",He],["bindKey",We],["curry",tt],["curryRight",Ge],["flip",Lr],["partial",Ve],["partialRight",wt],["rearg",Tt]],Dn="[object Arguments]",Xs="[object Array]",Uw="[object AsyncFunction]",es="[object Boolean]",ts="[object Date]",Lw="[object DOMException]",Zs="[object Error]",eo="[object Function]",bl="[object GeneratorFunction]",ti="[object Map]",rs="[object Number]",Mw="[object Null]",Ei="[object Object]",El="[object Promise]",jw="[object Proxy]",is="[object RegExp]",ri="[object Set]",ns="[object String]",to="[object Symbol]",Bw="[object Undefined]",ss="[object WeakMap]",$w="[object WeakSet]",os="[object ArrayBuffer]",In="[object DataView]",Ma="[object Float32Array]",ja="[object Float64Array]",Ba="[object Int8Array]",$a="[object Int16Array]",za="[object Int32Array]",Ha="[object Uint8Array]",Ka="[object Uint8ClampedArray]",Va="[object Uint16Array]",qa="[object Uint32Array]",zw=/\b__p \+= '';/g,Hw=/\b(__p \+=) '' \+/g,Kw=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dl=/&(?:amp|lt|gt|quot|#39);/g,Il=/[&<>"']/g,Vw=RegExp(Dl.source),qw=RegExp(Il.source),kw=/<%-([\s\S]+?)%>/g,Ww=/<%([\s\S]+?)%>/g,xl=/<%=([\s\S]+?)%>/g,Gw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jw=/^\w*$/,Yw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ka=/[\\^$.*+?()[\]{}|]/g,Qw=RegExp(ka.source),Wa=/^\s+/,Xw=/\s/,Zw=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,e_=/\{\n\/\* \[wrapped with (.+)\] \*/,t_=/,? & /,r_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i_=/[()=,{}\[\]\/\s]/,n_=/\\(\\)?/g,s_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sl=/\w*$/,o_=/^[-+]0x[0-9a-f]+$/i,a_=/^0b[01]+$/i,c_=/^\[object .+?Constructor\]$/,u_=/^0o[0-7]+$/i,h_=/^(?:0|[1-9]\d*)$/,l_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ro=/($^)/,f_=/['\n\r\u2028\u2029\\]/g,io="\\ud800-\\udfff",d_="\\u0300-\\u036f",p_="\\ufe20-\\ufe2f",g_="\\u20d0-\\u20ff",Ol=d_+p_+g_,Pl="\\u2700-\\u27bf",Cl="a-z\\xdf-\\xf6\\xf8-\\xff",v_="\\xac\\xb1\\xd7\\xf7",y_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",m_="\\u2000-\\u206f",w_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Al="A-Z\\xc0-\\xd6\\xd8-\\xde",Rl="\\ufe0e\\ufe0f",Nl=v_+y_+m_+w_,Ga="['\u2019]",__="["+io+"]",Tl="["+Nl+"]",no="["+Ol+"]",Fl="\\d+",b_="["+Pl+"]",Ul="["+Cl+"]",Ll="[^"+io+Nl+Fl+Pl+Cl+Al+"]",Ja="\\ud83c[\\udffb-\\udfff]",E_="(?:"+no+"|"+Ja+")",Ml="[^"+io+"]",Ya="(?:\\ud83c[\\udde6-\\uddff]){2}",Qa="[\\ud800-\\udbff][\\udc00-\\udfff]",xn="["+Al+"]",jl="\\u200d",Bl="(?:"+Ul+"|"+Ll+")",D_="(?:"+xn+"|"+Ll+")",$l="(?:"+Ga+"(?:d|ll|m|re|s|t|ve))?",zl="(?:"+Ga+"(?:D|LL|M|RE|S|T|VE))?",Hl=E_+"?",Kl="["+Rl+"]?",I_="(?:"+jl+"(?:"+[Ml,Ya,Qa].join("|")+")"+Kl+Hl+")*",x_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",S_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vl=Kl+Hl+I_,O_="(?:"+[b_,Ya,Qa].join("|")+")"+Vl,P_="(?:"+[Ml+no+"?",no,Ya,Qa,__].join("|")+")",C_=RegExp(Ga,"g"),A_=RegExp(no,"g"),Xa=RegExp(Ja+"(?="+Ja+")|"+P_+Vl,"g"),R_=RegExp([xn+"?"+Ul+"+"+$l+"(?="+[Tl,xn,"$"].join("|")+")",D_+"+"+zl+"(?="+[Tl,xn+Bl,"$"].join("|")+")",xn+"?"+Bl+"+"+$l,xn+"+"+zl,S_,x_,Fl,O_].join("|"),"g"),N_=RegExp("["+jl+io+Ol+Rl+"]"),T_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,F_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],U_=-1,Ft={};Ft[Ma]=Ft[ja]=Ft[Ba]=Ft[$a]=Ft[za]=Ft[Ha]=Ft[Ka]=Ft[Va]=Ft[qa]=!0,Ft[Dn]=Ft[Xs]=Ft[os]=Ft[es]=Ft[In]=Ft[ts]=Ft[Zs]=Ft[eo]=Ft[ti]=Ft[rs]=Ft[Ei]=Ft[is]=Ft[ri]=Ft[ns]=Ft[ss]=!1;var Nt={};Nt[Dn]=Nt[Xs]=Nt[os]=Nt[In]=Nt[es]=Nt[ts]=Nt[Ma]=Nt[ja]=Nt[Ba]=Nt[$a]=Nt[za]=Nt[ti]=Nt[rs]=Nt[Ei]=Nt[is]=Nt[ri]=Nt[ns]=Nt[to]=Nt[Ha]=Nt[Ka]=Nt[Va]=Nt[qa]=!0,Nt[Zs]=Nt[eo]=Nt[ss]=!1;var L_={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},M_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},j_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},B_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$_=parseFloat,z_=parseInt,ql=typeof Xn=="object"&&Xn&&Xn.Object===Object&&Xn,H_=typeof self=="object"&&self&&self.Object===Object&&self,dr=ql||H_||Function("return this")(),Za=e&&!e.nodeType&&e,Zi=Za&&!0&&s&&!s.nodeType&&s,kl=Zi&&Zi.exports===Za,ec=kl&&ql.process,Vr=function(){try{var K=Zi&&Zi.require&&Zi.require("util").types;return K||ec&&ec.binding&&ec.binding("util")}catch{}}(),Wl=Vr&&Vr.isArrayBuffer,Gl=Vr&&Vr.isDate,Jl=Vr&&Vr.isMap,Yl=Vr&&Vr.isRegExp,Ql=Vr&&Vr.isSet,Xl=Vr&&Vr.isTypedArray;function Mr(K,de,se){switch(se.length){case 0:return K.call(de);case 1:return K.call(de,se[0]);case 2:return K.call(de,se[0],se[1]);case 3:return K.call(de,se[0],se[1],se[2])}return K.apply(de,se)}function K_(K,de,se,Ue){for(var Je=-1,xt=K==null?0:K.length;++Je<xt;){var Gt=K[Je];de(Ue,Gt,se(Gt),K)}return Ue}function qr(K,de){for(var se=-1,Ue=K==null?0:K.length;++se<Ue&&de(K[se],se,K)!==!1;);return K}function V_(K,de){for(var se=K==null?0:K.length;se--&&de(K[se],se,K)!==!1;);return K}function Zl(K,de){for(var se=-1,Ue=K==null?0:K.length;++se<Ue;)if(!de(K[se],se,K))return!1;return!0}function Mi(K,de){for(var se=-1,Ue=K==null?0:K.length,Je=0,xt=[];++se<Ue;){var Gt=K[se];de(Gt,se,K)&&(xt[Je++]=Gt)}return xt}function so(K,de){var se=K==null?0:K.length;return!!se&&Sn(K,de,0)>-1}function tc(K,de,se){for(var Ue=-1,Je=K==null?0:K.length;++Ue<Je;)if(se(de,K[Ue]))return!0;return!1}function Mt(K,de){for(var se=-1,Ue=K==null?0:K.length,Je=Array(Ue);++se<Ue;)Je[se]=de(K[se],se,K);return Je}function ji(K,de){for(var se=-1,Ue=de.length,Je=K.length;++se<Ue;)K[Je+se]=de[se];return K}function rc(K,de,se,Ue){var Je=-1,xt=K==null?0:K.length;for(Ue&&xt&&(se=K[++Je]);++Je<xt;)se=de(se,K[Je],Je,K);return se}function q_(K,de,se,Ue){var Je=K==null?0:K.length;for(Ue&&Je&&(se=K[--Je]);Je--;)se=de(se,K[Je],Je,K);return se}function ic(K,de){for(var se=-1,Ue=K==null?0:K.length;++se<Ue;)if(de(K[se],se,K))return!0;return!1}var k_=nc("length");function W_(K){return K.split("")}function G_(K){return K.match(r_)||[]}function ef(K,de,se){var Ue;return se(K,function(Je,xt,Gt){if(de(Je,xt,Gt))return Ue=xt,!1}),Ue}function oo(K,de,se,Ue){for(var Je=K.length,xt=se+(Ue?1:-1);Ue?xt--:++xt<Je;)if(de(K[xt],xt,K))return xt;return-1}function Sn(K,de,se){return de===de?ob(K,de,se):oo(K,tf,se)}function J_(K,de,se,Ue){for(var Je=se-1,xt=K.length;++Je<xt;)if(Ue(K[Je],de))return Je;return-1}function tf(K){return K!==K}function rf(K,de){var se=K==null?0:K.length;return se?oc(K,de)/se:Qs}function nc(K){return function(de){return de==null?r:de[K]}}function sc(K){return function(de){return K==null?r:K[de]}}function nf(K,de,se,Ue,Je){return Je(K,function(xt,Gt,Rt){se=Ue?(Ue=!1,xt):de(se,xt,Gt,Rt)}),se}function Y_(K,de){var se=K.length;for(K.sort(de);se--;)K[se]=K[se].value;return K}function oc(K,de){for(var se,Ue=-1,Je=K.length;++Ue<Je;){var xt=de(K[Ue]);xt!==r&&(se=se===r?xt:se+xt)}return se}function ac(K,de){for(var se=-1,Ue=Array(K);++se<K;)Ue[se]=de(se);return Ue}function Q_(K,de){return Mt(de,function(se){return[se,K[se]]})}function sf(K){return K&&K.slice(0,uf(K)+1).replace(Wa,"")}function jr(K){return function(de){return K(de)}}function cc(K,de){return Mt(de,function(se){return K[se]})}function as(K,de){return K.has(de)}function of(K,de){for(var se=-1,Ue=K.length;++se<Ue&&Sn(de,K[se],0)>-1;);return se}function af(K,de){for(var se=K.length;se--&&Sn(de,K[se],0)>-1;);return se}function X_(K,de){for(var se=K.length,Ue=0;se--;)K[se]===de&&++Ue;return Ue}var Z_=sc(L_),eb=sc(M_);function tb(K){return"\\"+B_[K]}function rb(K,de){return K==null?r:K[de]}function On(K){return N_.test(K)}function ib(K){return T_.test(K)}function nb(K){for(var de,se=[];!(de=K.next()).done;)se.push(de.value);return se}function uc(K){var de=-1,se=Array(K.size);return K.forEach(function(Ue,Je){se[++de]=[Je,Ue]}),se}function cf(K,de){return function(se){return K(de(se))}}function Bi(K,de){for(var se=-1,Ue=K.length,Je=0,xt=[];++se<Ue;){var Gt=K[se];(Gt===de||Gt===W)&&(K[se]=W,xt[Je++]=se)}return xt}function ao(K){var de=-1,se=Array(K.size);return K.forEach(function(Ue){se[++de]=Ue}),se}function sb(K){var de=-1,se=Array(K.size);return K.forEach(function(Ue){se[++de]=[Ue,Ue]}),se}function ob(K,de,se){for(var Ue=se-1,Je=K.length;++Ue<Je;)if(K[Ue]===de)return Ue;return-1}function ab(K,de,se){for(var Ue=se+1;Ue--;)if(K[Ue]===de)return Ue;return Ue}function Pn(K){return On(K)?ub(K):k_(K)}function ii(K){return On(K)?hb(K):W_(K)}function uf(K){for(var de=K.length;de--&&Xw.test(K.charAt(de)););return de}var cb=sc(j_);function ub(K){for(var de=Xa.lastIndex=0;Xa.test(K);)++de;return de}function hb(K){return K.match(Xa)||[]}function lb(K){return K.match(R_)||[]}var fb=function K(de){de=de==null?dr:Cn.defaults(dr.Object(),de,Cn.pick(dr,F_));var se=de.Array,Ue=de.Date,Je=de.Error,xt=de.Function,Gt=de.Math,Rt=de.Object,hc=de.RegExp,db=de.String,kr=de.TypeError,co=se.prototype,pb=xt.prototype,An=Rt.prototype,uo=de["__core-js_shared__"],ho=pb.toString,Ct=An.hasOwnProperty,gb=0,hf=function(){var t=/[^.]+$/.exec(uo&&uo.keys&&uo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),lo=An.toString,vb=ho.call(Rt),yb=dr._,mb=hc("^"+ho.call(Ct).replace(ka,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fo=kl?de.Buffer:r,$i=de.Symbol,po=de.Uint8Array,lf=fo?fo.allocUnsafe:r,go=cf(Rt.getPrototypeOf,Rt),ff=Rt.create,df=An.propertyIsEnumerable,vo=co.splice,pf=$i?$i.isConcatSpreadable:r,cs=$i?$i.iterator:r,en=$i?$i.toStringTag:r,yo=function(){try{var t=on(Rt,"defineProperty");return t({},"",{}),t}catch{}}(),wb=de.clearTimeout!==dr.clearTimeout&&de.clearTimeout,_b=Ue&&Ue.now!==dr.Date.now&&Ue.now,bb=de.setTimeout!==dr.setTimeout&&de.setTimeout,mo=Gt.ceil,wo=Gt.floor,lc=Rt.getOwnPropertySymbols,Eb=fo?fo.isBuffer:r,gf=de.isFinite,Db=co.join,Ib=cf(Rt.keys,Rt),Jt=Gt.max,vr=Gt.min,xb=Ue.now,Sb=de.parseInt,vf=Gt.random,Ob=co.reverse,fc=on(de,"DataView"),us=on(de,"Map"),dc=on(de,"Promise"),Rn=on(de,"Set"),hs=on(de,"WeakMap"),ls=on(Rt,"create"),_o=hs&&new hs,Nn={},Pb=an(fc),Cb=an(us),Ab=an(dc),Rb=an(Rn),Nb=an(hs),bo=$i?$i.prototype:r,fs=bo?bo.valueOf:r,yf=bo?bo.toString:r;function y(t){if($t(t)&&!Qe(t)&&!(t instanceof ht)){if(t instanceof Wr)return t;if(Ct.call(t,"__wrapped__"))return md(t)}return new Wr(t)}var Tn=function(){function t(){}return function(n){if(!jt(n))return{};if(ff)return ff(n);t.prototype=n;var a=new t;return t.prototype=r,a}}();function Eo(){}function Wr(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}y.templateSettings={escape:kw,evaluate:Ww,interpolate:xl,variable:"",imports:{_:y}},y.prototype=Eo.prototype,y.prototype.constructor=y,Wr.prototype=Tn(Eo.prototype),Wr.prototype.constructor=Wr;function ht(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=li,this.__views__=[]}function Tb(){var t=new ht(this.__wrapped__);return t.__actions__=Rr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Rr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Rr(this.__views__),t}function Fb(){if(this.__filtered__){var t=new ht(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ub(){var t=this.__wrapped__.value(),n=this.__dir__,a=Qe(t),l=n<0,g=a?t.length:0,w=WE(0,g,this.__views__),N=w.start,$=w.end,k=$-N,ve=l?$:N-1,me=this.__iteratees__,_e=me.length,Oe=0,je=vr(k,this.__takeCount__);if(!a||!l&&g==k&&je==k)return zf(t,this.__actions__);var qe=[];e:for(;k--&&Oe<je;){ve+=n;for(var rt=-1,ke=t[ve];++rt<_e;){var ct=me[rt],gt=ct.iteratee,zr=ct.type,xr=gt(ke);if(zr==Cw)ke=xr;else if(!xr){if(zr==_l)continue e;break e}}qe[Oe++]=ke}return qe}ht.prototype=Tn(Eo.prototype),ht.prototype.constructor=ht;function tn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function Lb(){this.__data__=ls?ls(null):{},this.size=0}function Mb(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function jb(t){var n=this.__data__;if(ls){var a=n[t];return a===z?r:a}return Ct.call(n,t)?n[t]:r}function Bb(t){var n=this.__data__;return ls?n[t]!==r:Ct.call(n,t)}function $b(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=ls&&n===r?z:n,this}tn.prototype.clear=Lb,tn.prototype.delete=Mb,tn.prototype.get=jb,tn.prototype.has=Bb,tn.prototype.set=$b;function Di(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function zb(){this.__data__=[],this.size=0}function Hb(t){var n=this.__data__,a=Do(n,t);if(a<0)return!1;var l=n.length-1;return a==l?n.pop():vo.call(n,a,1),--this.size,!0}function Kb(t){var n=this.__data__,a=Do(n,t);return a<0?r:n[a][1]}function Vb(t){return Do(this.__data__,t)>-1}function qb(t,n){var a=this.__data__,l=Do(a,t);return l<0?(++this.size,a.push([t,n])):a[l][1]=n,this}Di.prototype.clear=zb,Di.prototype.delete=Hb,Di.prototype.get=Kb,Di.prototype.has=Vb,Di.prototype.set=qb;function Ii(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function kb(){this.size=0,this.__data__={hash:new tn,map:new(us||Di),string:new tn}}function Wb(t){var n=Uo(this,t).delete(t);return this.size-=n?1:0,n}function Gb(t){return Uo(this,t).get(t)}function Jb(t){return Uo(this,t).has(t)}function Yb(t,n){var a=Uo(this,t),l=a.size;return a.set(t,n),this.size+=a.size==l?0:1,this}Ii.prototype.clear=kb,Ii.prototype.delete=Wb,Ii.prototype.get=Gb,Ii.prototype.has=Jb,Ii.prototype.set=Yb;function rn(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new Ii;++n<a;)this.add(t[n])}function Qb(t){return this.__data__.set(t,z),this}function Xb(t){return this.__data__.has(t)}rn.prototype.add=rn.prototype.push=Qb,rn.prototype.has=Xb;function ni(t){var n=this.__data__=new Di(t);this.size=n.size}function Zb(){this.__data__=new Di,this.size=0}function eE(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function tE(t){return this.__data__.get(t)}function rE(t){return this.__data__.has(t)}function iE(t,n){var a=this.__data__;if(a instanceof Di){var l=a.__data__;if(!us||l.length<u-1)return l.push([t,n]),this.size=++a.size,this;a=this.__data__=new Ii(l)}return a.set(t,n),this.size=a.size,this}ni.prototype.clear=Zb,ni.prototype.delete=eE,ni.prototype.get=tE,ni.prototype.has=rE,ni.prototype.set=iE;function mf(t,n){var a=Qe(t),l=!a&&cn(t),g=!a&&!l&&qi(t),w=!a&&!l&&!g&&Mn(t),N=a||l||g||w,$=N?ac(t.length,db):[],k=$.length;for(var ve in t)(n||Ct.call(t,ve))&&!(N&&(ve=="length"||g&&(ve=="offset"||ve=="parent")||w&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||Pi(ve,k)))&&$.push(ve);return $}function wf(t){var n=t.length;return n?t[Ic(0,n-1)]:r}function nE(t,n){return Lo(Rr(t),nn(n,0,t.length))}function sE(t){return Lo(Rr(t))}function pc(t,n,a){(a!==r&&!si(t[n],a)||a===r&&!(n in t))&&xi(t,n,a)}function ds(t,n,a){var l=t[n];(!(Ct.call(t,n)&&si(l,a))||a===r&&!(n in t))&&xi(t,n,a)}function Do(t,n){for(var a=t.length;a--;)if(si(t[a][0],n))return a;return-1}function oE(t,n,a,l){return zi(t,function(g,w,N){n(l,g,a(g),N)}),l}function _f(t,n){return t&&di(n,lr(n),t)}function aE(t,n){return t&&di(n,Tr(n),t)}function xi(t,n,a){n=="__proto__"&&yo?yo(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}function gc(t,n){for(var a=-1,l=n.length,g=se(l),w=t==null;++a<l;)g[a]=w?r:Jc(t,n[a]);return g}function nn(t,n,a){return t===t&&(a!==r&&(t=t<=a?t:a),n!==r&&(t=t>=n?t:n)),t}function Gr(t,n,a,l,g,w){var N,$=n&te,k=n&pe,ve=n&Ne;if(a&&(N=g?a(t,l,g,w):a(t)),N!==r)return N;if(!jt(t))return t;var me=Qe(t);if(me){if(N=JE(t),!$)return Rr(t,N)}else{var _e=yr(t),Oe=_e==eo||_e==bl;if(qi(t))return Vf(t,$);if(_e==Ei||_e==Dn||Oe&&!g){if(N=k||Oe?{}:ud(t),!$)return k?jE(t,aE(N,t)):ME(t,_f(N,t))}else{if(!Nt[_e])return g?t:{};N=YE(t,_e,$)}}w||(w=new ni);var je=w.get(t);if(je)return je;w.set(t,N),jd(t)?t.forEach(function(ke){N.add(Gr(ke,n,a,ke,t,w))}):Ld(t)&&t.forEach(function(ke,ct){N.set(ct,Gr(ke,n,a,ct,t,w))});var qe=ve?k?Uc:Fc:k?Tr:lr,rt=me?r:qe(t);return qr(rt||t,function(ke,ct){rt&&(ct=ke,ke=t[ct]),ds(N,ct,Gr(ke,n,a,ct,t,w))}),N}function cE(t){var n=lr(t);return function(a){return bf(a,t,n)}}function bf(t,n,a){var l=a.length;if(t==null)return!l;for(t=Rt(t);l--;){var g=a[l],w=n[g],N=t[g];if(N===r&&!(g in t)||!w(N))return!1}return!0}function Ef(t,n,a){if(typeof t!="function")throw new kr(v);return _s(function(){t.apply(r,a)},n)}function ps(t,n,a,l){var g=-1,w=so,N=!0,$=t.length,k=[],ve=n.length;if(!$)return k;a&&(n=Mt(n,jr(a))),l?(w=tc,N=!1):n.length>=u&&(w=as,N=!1,n=new rn(n));e:for(;++g<$;){var me=t[g],_e=a==null?me:a(me);if(me=l||me!==0?me:0,N&&_e===_e){for(var Oe=ve;Oe--;)if(n[Oe]===_e)continue e;k.push(me)}else w(n,_e,l)||k.push(me)}return k}var zi=Jf(fi),Df=Jf(yc,!0);function uE(t,n){var a=!0;return zi(t,function(l,g,w){return a=!!n(l,g,w),a}),a}function Io(t,n,a){for(var l=-1,g=t.length;++l<g;){var w=t[l],N=n(w);if(N!=null&&($===r?N===N&&!$r(N):a(N,$)))var $=N,k=w}return k}function hE(t,n,a,l){var g=t.length;for(a=Xe(a),a<0&&(a=-a>g?0:g+a),l=l===r||l>g?g:Xe(l),l<0&&(l+=g),l=a>l?0:$d(l);a<l;)t[a++]=n;return t}function If(t,n){var a=[];return zi(t,function(l,g,w){n(l,g,w)&&a.push(l)}),a}function pr(t,n,a,l,g){var w=-1,N=t.length;for(a||(a=XE),g||(g=[]);++w<N;){var $=t[w];n>0&&a($)?n>1?pr($,n-1,a,l,g):ji(g,$):l||(g[g.length]=$)}return g}var vc=Yf(),xf=Yf(!0);function fi(t,n){return t&&vc(t,n,lr)}function yc(t,n){return t&&xf(t,n,lr)}function xo(t,n){return Mi(n,function(a){return Ci(t[a])})}function sn(t,n){n=Ki(n,t);for(var a=0,l=n.length;t!=null&&a<l;)t=t[pi(n[a++])];return a&&a==l?t:r}function Sf(t,n,a){var l=n(t);return Qe(t)?l:ji(l,a(t))}function Dr(t){return t==null?t===r?Bw:Mw:en&&en in Rt(t)?kE(t):s3(t)}function mc(t,n){return t>n}function lE(t,n){return t!=null&&Ct.call(t,n)}function fE(t,n){return t!=null&&n in Rt(t)}function dE(t,n,a){return t>=vr(n,a)&&t<Jt(n,a)}function wc(t,n,a){for(var l=a?tc:so,g=t[0].length,w=t.length,N=w,$=se(w),k=1/0,ve=[];N--;){var me=t[N];N&&n&&(me=Mt(me,jr(n))),k=vr(me.length,k),$[N]=!a&&(n||g>=120&&me.length>=120)?new rn(N&&me):r}me=t[0];var _e=-1,Oe=$[0];e:for(;++_e<g&&ve.length<k;){var je=me[_e],qe=n?n(je):je;if(je=a||je!==0?je:0,!(Oe?as(Oe,qe):l(ve,qe,a))){for(N=w;--N;){var rt=$[N];if(!(rt?as(rt,qe):l(t[N],qe,a)))continue e}Oe&&Oe.push(qe),ve.push(je)}}return ve}function pE(t,n,a,l){return fi(t,function(g,w,N){n(l,a(g),w,N)}),l}function gs(t,n,a){n=Ki(n,t),t=dd(t,n);var l=t==null?t:t[pi(Yr(n))];return l==null?r:Mr(l,t,a)}function Of(t){return $t(t)&&Dr(t)==Dn}function gE(t){return $t(t)&&Dr(t)==os}function vE(t){return $t(t)&&Dr(t)==ts}function vs(t,n,a,l,g){return t===n?!0:t==null||n==null||!$t(t)&&!$t(n)?t!==t&&n!==n:yE(t,n,a,l,vs,g)}function yE(t,n,a,l,g,w){var N=Qe(t),$=Qe(n),k=N?Xs:yr(t),ve=$?Xs:yr(n);k=k==Dn?Ei:k,ve=ve==Dn?Ei:ve;var me=k==Ei,_e=ve==Ei,Oe=k==ve;if(Oe&&qi(t)){if(!qi(n))return!1;N=!0,me=!1}if(Oe&&!me)return w||(w=new ni),N||Mn(t)?od(t,n,a,l,g,w):VE(t,n,k,a,l,g,w);if(!(a&fe)){var je=me&&Ct.call(t,"__wrapped__"),qe=_e&&Ct.call(n,"__wrapped__");if(je||qe){var rt=je?t.value():t,ke=qe?n.value():n;return w||(w=new ni),g(rt,ke,a,l,w)}}return Oe?(w||(w=new ni),qE(t,n,a,l,g,w)):!1}function mE(t){return $t(t)&&yr(t)==ti}function _c(t,n,a,l){var g=a.length,w=g,N=!l;if(t==null)return!w;for(t=Rt(t);g--;){var $=a[g];if(N&&$[2]?$[1]!==t[$[0]]:!($[0]in t))return!1}for(;++g<w;){$=a[g];var k=$[0],ve=t[k],me=$[1];if(N&&$[2]){if(ve===r&&!(k in t))return!1}else{var _e=new ni;if(l)var Oe=l(ve,me,k,t,n,_e);if(!(Oe===r?vs(me,ve,fe|Ce,l,_e):Oe))return!1}}return!0}function Pf(t){if(!jt(t)||e3(t))return!1;var n=Ci(t)?mb:c_;return n.test(an(t))}function wE(t){return $t(t)&&Dr(t)==is}function _E(t){return $t(t)&&yr(t)==ri}function bE(t){return $t(t)&&Ho(t.length)&&!!Ft[Dr(t)]}function Cf(t){return typeof t=="function"?t:t==null?Fr:typeof t=="object"?Qe(t)?Nf(t[0],t[1]):Rf(t):Qd(t)}function bc(t){if(!ws(t))return Ib(t);var n=[];for(var a in Rt(t))Ct.call(t,a)&&a!="constructor"&&n.push(a);return n}function EE(t){if(!jt(t))return n3(t);var n=ws(t),a=[];for(var l in t)l=="constructor"&&(n||!Ct.call(t,l))||a.push(l);return a}function Ec(t,n){return t<n}function Af(t,n){var a=-1,l=Nr(t)?se(t.length):[];return zi(t,function(g,w,N){l[++a]=n(g,w,N)}),l}function Rf(t){var n=Mc(t);return n.length==1&&n[0][2]?ld(n[0][0],n[0][1]):function(a){return a===t||_c(a,t,n)}}function Nf(t,n){return Bc(t)&&hd(n)?ld(pi(t),n):function(a){var l=Jc(a,t);return l===r&&l===n?Yc(a,t):vs(n,l,fe|Ce)}}function So(t,n,a,l,g){t!==n&&vc(n,function(w,N){if(g||(g=new ni),jt(w))DE(t,n,N,a,So,l,g);else{var $=l?l(zc(t,N),w,N+"",t,n,g):r;$===r&&($=w),pc(t,N,$)}},Tr)}function DE(t,n,a,l,g,w,N){var $=zc(t,a),k=zc(n,a),ve=N.get(k);if(ve){pc(t,a,ve);return}var me=w?w($,k,a+"",t,n,N):r,_e=me===r;if(_e){var Oe=Qe(k),je=!Oe&&qi(k),qe=!Oe&&!je&&Mn(k);me=k,Oe||je||qe?Qe($)?me=$:Ht($)?me=Rr($):je?(_e=!1,me=Vf(k,!0)):qe?(_e=!1,me=qf(k,!0)):me=[]:bs(k)||cn(k)?(me=$,cn($)?me=zd($):(!jt($)||Ci($))&&(me=ud(k))):_e=!1}_e&&(N.set(k,me),g(me,k,l,w,N),N.delete(k)),pc(t,a,me)}function Tf(t,n){var a=t.length;if(a)return n+=n<0?a:0,Pi(n,a)?t[n]:r}function Ff(t,n,a){n.length?n=Mt(n,function(w){return Qe(w)?function(N){return sn(N,w.length===1?w[0]:w)}:w}):n=[Fr];var l=-1;n=Mt(n,jr(Ke()));var g=Af(t,function(w,N,$){var k=Mt(n,function(ve){return ve(w)});return{criteria:k,index:++l,value:w}});return Y_(g,function(w,N){return LE(w,N,a)})}function IE(t,n){return Uf(t,n,function(a,l){return Yc(t,l)})}function Uf(t,n,a){for(var l=-1,g=n.length,w={};++l<g;){var N=n[l],$=sn(t,N);a($,N)&&ys(w,Ki(N,t),$)}return w}function xE(t){return function(n){return sn(n,t)}}function Dc(t,n,a,l){var g=l?J_:Sn,w=-1,N=n.length,$=t;for(t===n&&(n=Rr(n)),a&&($=Mt(t,jr(a)));++w<N;)for(var k=0,ve=n[w],me=a?a(ve):ve;(k=g($,me,k,l))>-1;)$!==t&&vo.call($,k,1),vo.call(t,k,1);return t}function Lf(t,n){for(var a=t?n.length:0,l=a-1;a--;){var g=n[a];if(a==l||g!==w){var w=g;Pi(g)?vo.call(t,g,1):Oc(t,g)}}return t}function Ic(t,n){return t+wo(vf()*(n-t+1))}function SE(t,n,a,l){for(var g=-1,w=Jt(mo((n-t)/(a||1)),0),N=se(w);w--;)N[l?w:++g]=t,t+=a;return N}function xc(t,n){var a="";if(!t||n<1||n>Li)return a;do n%2&&(a+=t),n=wo(n/2),n&&(t+=t);while(n);return a}function nt(t,n){return Hc(fd(t,n,Fr),t+"")}function OE(t){return wf(jn(t))}function PE(t,n){var a=jn(t);return Lo(a,nn(n,0,a.length))}function ys(t,n,a,l){if(!jt(t))return t;n=Ki(n,t);for(var g=-1,w=n.length,N=w-1,$=t;$!=null&&++g<w;){var k=pi(n[g]),ve=a;if(k==="__proto__"||k==="constructor"||k==="prototype")return t;if(g!=N){var me=$[k];ve=l?l(me,k,$):r,ve===r&&(ve=jt(me)?me:Pi(n[g+1])?[]:{})}ds($,k,ve),$=$[k]}return t}var Mf=_o?function(t,n){return _o.set(t,n),t}:Fr,CE=yo?function(t,n){return yo(t,"toString",{configurable:!0,enumerable:!1,value:Xc(n),writable:!0})}:Fr;function AE(t){return Lo(jn(t))}function Jr(t,n,a){var l=-1,g=t.length;n<0&&(n=-n>g?0:g+n),a=a>g?g:a,a<0&&(a+=g),g=n>a?0:a-n>>>0,n>>>=0;for(var w=se(g);++l<g;)w[l]=t[l+n];return w}function RE(t,n){var a;return zi(t,function(l,g,w){return a=n(l,g,w),!a}),!!a}function Oo(t,n,a){var l=0,g=t==null?l:t.length;if(typeof n=="number"&&n===n&&g<=Tw){for(;l<g;){var w=l+g>>>1,N=t[w];N!==null&&!$r(N)&&(a?N<=n:N<n)?l=w+1:g=w}return g}return Sc(t,n,Fr,a)}function Sc(t,n,a,l){var g=0,w=t==null?0:t.length;if(w===0)return 0;n=a(n);for(var N=n!==n,$=n===null,k=$r(n),ve=n===r;g<w;){var me=wo((g+w)/2),_e=a(t[me]),Oe=_e!==r,je=_e===null,qe=_e===_e,rt=$r(_e);if(N)var ke=l||qe;else ve?ke=qe&&(l||Oe):$?ke=qe&&Oe&&(l||!je):k?ke=qe&&Oe&&!je&&(l||!rt):je||rt?ke=!1:ke=l?_e<=n:_e<n;ke?g=me+1:w=me}return vr(w,Nw)}function jf(t,n){for(var a=-1,l=t.length,g=0,w=[];++a<l;){var N=t[a],$=n?n(N):N;if(!a||!si($,k)){var k=$;w[g++]=N===0?0:N}}return w}function Bf(t){return typeof t=="number"?t:$r(t)?Qs:+t}function Br(t){if(typeof t=="string")return t;if(Qe(t))return Mt(t,Br)+"";if($r(t))return yf?yf.call(t):"";var n=t+"";return n=="0"&&1/t==-Xi?"-0":n}function Hi(t,n,a){var l=-1,g=so,w=t.length,N=!0,$=[],k=$;if(a)N=!1,g=tc;else if(w>=u){var ve=n?null:HE(t);if(ve)return ao(ve);N=!1,g=as,k=new rn}else k=n?[]:$;e:for(;++l<w;){var me=t[l],_e=n?n(me):me;if(me=a||me!==0?me:0,N&&_e===_e){for(var Oe=k.length;Oe--;)if(k[Oe]===_e)continue e;n&&k.push(_e),$.push(me)}else g(k,_e,a)||(k!==$&&k.push(_e),$.push(me))}return $}function Oc(t,n){return n=Ki(n,t),t=dd(t,n),t==null||delete t[pi(Yr(n))]}function $f(t,n,a,l){return ys(t,n,a(sn(t,n)),l)}function Po(t,n,a,l){for(var g=t.length,w=l?g:-1;(l?w--:++w<g)&&n(t[w],w,t););return a?Jr(t,l?0:w,l?w+1:g):Jr(t,l?w+1:0,l?g:w)}function zf(t,n){var a=t;return a instanceof ht&&(a=a.value()),rc(n,function(l,g){return g.func.apply(g.thisArg,ji([l],g.args))},a)}function Pc(t,n,a){var l=t.length;if(l<2)return l?Hi(t[0]):[];for(var g=-1,w=se(l);++g<l;)for(var N=t[g],$=-1;++$<l;)$!=g&&(w[g]=ps(w[g]||N,t[$],n,a));return Hi(pr(w,1),n,a)}function Hf(t,n,a){for(var l=-1,g=t.length,w=n.length,N={};++l<g;){var $=l<w?n[l]:r;a(N,t[l],$)}return N}function Cc(t){return Ht(t)?t:[]}function Ac(t){return typeof t=="function"?t:Fr}function Ki(t,n){return Qe(t)?t:Bc(t,n)?[t]:yd(Pt(t))}var NE=nt;function Vi(t,n,a){var l=t.length;return a=a===r?l:a,!n&&a>=l?t:Jr(t,n,a)}var Kf=wb||function(t){return dr.clearTimeout(t)};function Vf(t,n){if(n)return t.slice();var a=t.length,l=lf?lf(a):new t.constructor(a);return t.copy(l),l}function Rc(t){var n=new t.constructor(t.byteLength);return new po(n).set(new po(t)),n}function TE(t,n){var a=n?Rc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function FE(t){var n=new t.constructor(t.source,Sl.exec(t));return n.lastIndex=t.lastIndex,n}function UE(t){return fs?Rt(fs.call(t)):{}}function qf(t,n){var a=n?Rc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function kf(t,n){if(t!==n){var a=t!==r,l=t===null,g=t===t,w=$r(t),N=n!==r,$=n===null,k=n===n,ve=$r(n);if(!$&&!ve&&!w&&t>n||w&&N&&k&&!$&&!ve||l&&N&&k||!a&&k||!g)return 1;if(!l&&!w&&!ve&&t<n||ve&&a&&g&&!l&&!w||$&&a&&g||!N&&g||!k)return-1}return 0}function LE(t,n,a){for(var l=-1,g=t.criteria,w=n.criteria,N=g.length,$=a.length;++l<N;){var k=kf(g[l],w[l]);if(k){if(l>=$)return k;var ve=a[l];return k*(ve=="desc"?-1:1)}}return t.index-n.index}function Wf(t,n,a,l){for(var g=-1,w=t.length,N=a.length,$=-1,k=n.length,ve=Jt(w-N,0),me=se(k+ve),_e=!l;++$<k;)me[$]=n[$];for(;++g<N;)(_e||g<w)&&(me[a[g]]=t[g]);for(;ve--;)me[$++]=t[g++];return me}function Gf(t,n,a,l){for(var g=-1,w=t.length,N=-1,$=a.length,k=-1,ve=n.length,me=Jt(w-$,0),_e=se(me+ve),Oe=!l;++g<me;)_e[g]=t[g];for(var je=g;++k<ve;)_e[je+k]=n[k];for(;++N<$;)(Oe||g<w)&&(_e[je+a[N]]=t[g++]);return _e}function Rr(t,n){var a=-1,l=t.length;for(n||(n=se(l));++a<l;)n[a]=t[a];return n}function di(t,n,a,l){var g=!a;a||(a={});for(var w=-1,N=n.length;++w<N;){var $=n[w],k=l?l(a[$],t[$],$,a,t):r;k===r&&(k=t[$]),g?xi(a,$,k):ds(a,$,k)}return a}function ME(t,n){return di(t,jc(t),n)}function jE(t,n){return di(t,ad(t),n)}function Co(t,n){return function(a,l){var g=Qe(a)?K_:oE,w=n?n():{};return g(a,t,Ke(l,2),w)}}function Fn(t){return nt(function(n,a){var l=-1,g=a.length,w=g>1?a[g-1]:r,N=g>2?a[2]:r;for(w=t.length>3&&typeof w=="function"?(g--,w):r,N&&Ir(a[0],a[1],N)&&(w=g<3?r:w,g=1),n=Rt(n);++l<g;){var $=a[l];$&&t(n,$,l,w)}return n})}function Jf(t,n){return function(a,l){if(a==null)return a;if(!Nr(a))return t(a,l);for(var g=a.length,w=n?g:-1,N=Rt(a);(n?w--:++w<g)&&l(N[w],w,N)!==!1;);return a}}function Yf(t){return function(n,a,l){for(var g=-1,w=Rt(n),N=l(n),$=N.length;$--;){var k=N[t?$:++g];if(a(w[k],k,w)===!1)break}return n}}function BE(t,n,a){var l=n&He,g=ms(t);function w(){var N=this&&this!==dr&&this instanceof w?g:t;return N.apply(l?a:this,arguments)}return w}function Qf(t){return function(n){n=Pt(n);var a=On(n)?ii(n):r,l=a?a[0]:n.charAt(0),g=a?Vi(a,1).join(""):n.slice(1);return l[t]()+g}}function Un(t){return function(n){return rc(Jd(Gd(n).replace(C_,"")),t,"")}}function ms(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Tn(t.prototype),l=t.apply(a,n);return jt(l)?l:a}}function $E(t,n,a){var l=ms(t);function g(){for(var w=arguments.length,N=se(w),$=w,k=Ln(g);$--;)N[$]=arguments[$];var ve=w<3&&N[0]!==k&&N[w-1]!==k?[]:Bi(N,k);if(w-=ve.length,w<a)return rd(t,n,Ao,g.placeholder,r,N,ve,r,r,a-w);var me=this&&this!==dr&&this instanceof g?l:t;return Mr(me,this,N)}return g}function Xf(t){return function(n,a,l){var g=Rt(n);if(!Nr(n)){var w=Ke(a,3);n=lr(n),a=function($){return w(g[$],$,g)}}var N=t(n,a,l);return N>-1?g[w?n[N]:N]:r}}function Zf(t){return Oi(function(n){var a=n.length,l=a,g=Wr.prototype.thru;for(t&&n.reverse();l--;){var w=n[l];if(typeof w!="function")throw new kr(v);if(g&&!N&&Fo(w)=="wrapper")var N=new Wr([],!0)}for(l=N?l:a;++l<a;){w=n[l];var $=Fo(w),k=$=="wrapper"?Lc(w):r;k&&$c(k[0])&&k[1]==(_t|tt|Ve|Tt)&&!k[4].length&&k[9]==1?N=N[Fo(k[0])].apply(N,k[3]):N=w.length==1&&$c(w)?N[$]():N.thru(w)}return function(){var ve=arguments,me=ve[0];if(N&&ve.length==1&&Qe(me))return N.plant(me).value();for(var _e=0,Oe=a?n[_e].apply(this,ve):me;++_e<a;)Oe=n[_e].call(this,Oe);return Oe}})}function Ao(t,n,a,l,g,w,N,$,k,ve){var me=n&_t,_e=n&He,Oe=n&We,je=n&(tt|Ge),qe=n&Lr,rt=Oe?r:ms(t);function ke(){for(var ct=arguments.length,gt=se(ct),zr=ct;zr--;)gt[zr]=arguments[zr];if(je)var xr=Ln(ke),Hr=X_(gt,xr);if(l&&(gt=Wf(gt,l,g,je)),w&&(gt=Gf(gt,w,N,je)),ct-=Hr,je&&ct<ve){var Kt=Bi(gt,xr);return rd(t,n,Ao,ke.placeholder,a,gt,Kt,$,k,ve-ct)}var oi=_e?a:this,Ri=Oe?oi[t]:t;return ct=gt.length,$?gt=o3(gt,$):qe&&ct>1&&gt.reverse(),me&&k<ct&&(gt.length=k),this&&this!==dr&&this instanceof ke&&(Ri=rt||ms(Ri)),Ri.apply(oi,gt)}return ke}function ed(t,n){return function(a,l){return pE(a,t,n(l),{})}}function Ro(t,n){return function(a,l){var g;if(a===r&&l===r)return n;if(a!==r&&(g=a),l!==r){if(g===r)return l;typeof a=="string"||typeof l=="string"?(a=Br(a),l=Br(l)):(a=Bf(a),l=Bf(l)),g=t(a,l)}return g}}function Nc(t){return Oi(function(n){return n=Mt(n,jr(Ke())),nt(function(a){var l=this;return t(n,function(g){return Mr(g,l,a)})})})}function No(t,n){n=n===r?" ":Br(n);var a=n.length;if(a<2)return a?xc(n,t):n;var l=xc(n,mo(t/Pn(n)));return On(n)?Vi(ii(l),0,t).join(""):l.slice(0,t)}function zE(t,n,a,l){var g=n&He,w=ms(t);function N(){for(var $=-1,k=arguments.length,ve=-1,me=l.length,_e=se(me+k),Oe=this&&this!==dr&&this instanceof N?w:t;++ve<me;)_e[ve]=l[ve];for(;k--;)_e[ve++]=arguments[++$];return Mr(Oe,g?a:this,_e)}return N}function td(t){return function(n,a,l){return l&&typeof l!="number"&&Ir(n,a,l)&&(a=l=r),n=Ai(n),a===r?(a=n,n=0):a=Ai(a),l=l===r?n<a?1:-1:Ai(l),SE(n,a,l,t)}}function To(t){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Qr(n),a=Qr(a)),t(n,a)}}function rd(t,n,a,l,g,w,N,$,k,ve){var me=n&tt,_e=me?N:r,Oe=me?r:N,je=me?w:r,qe=me?r:w;n|=me?Ve:wt,n&=~(me?wt:Ve),n&Et||(n&=~(He|We));var rt=[t,n,g,je,_e,qe,Oe,$,k,ve],ke=a.apply(r,rt);return $c(t)&&pd(ke,rt),ke.placeholder=l,gd(ke,t,n)}function Tc(t){var n=Gt[t];return function(a,l){if(a=Qr(a),l=l==null?0:vr(Xe(l),292),l&&gf(a)){var g=(Pt(a)+"e").split("e"),w=n(g[0]+"e"+(+g[1]+l));return g=(Pt(w)+"e").split("e"),+(g[0]+"e"+(+g[1]-l))}return n(a)}}var HE=Rn&&1/ao(new Rn([,-0]))[1]==Xi?function(t){return new Rn(t)}:tu;function id(t){return function(n){var a=yr(n);return a==ti?uc(n):a==ri?sb(n):Q_(n,t(n))}}function Si(t,n,a,l,g,w,N,$){var k=n&We;if(!k&&typeof t!="function")throw new kr(v);var ve=l?l.length:0;if(ve||(n&=~(Ve|wt),l=g=r),N=N===r?N:Jt(Xe(N),0),$=$===r?$:Xe($),ve-=g?g.length:0,n&wt){var me=l,_e=g;l=g=r}var Oe=k?r:Lc(t),je=[t,n,a,l,g,me,_e,w,N,$];if(Oe&&i3(je,Oe),t=je[0],n=je[1],a=je[2],l=je[3],g=je[4],$=je[9]=je[9]===r?k?0:t.length:Jt(je[9]-ve,0),!$&&n&(tt|Ge)&&(n&=~(tt|Ge)),!n||n==He)var qe=BE(t,n,a);else n==tt||n==Ge?qe=$E(t,n,$):(n==Ve||n==(He|Ve))&&!g.length?qe=zE(t,n,a,l):qe=Ao.apply(r,je);var rt=Oe?Mf:pd;return gd(rt(qe,je),t,n)}function nd(t,n,a,l){return t===r||si(t,An[a])&&!Ct.call(l,a)?n:t}function sd(t,n,a,l,g,w){return jt(t)&&jt(n)&&(w.set(n,t),So(t,n,r,sd,w),w.delete(n)),t}function KE(t){return bs(t)?r:t}function od(t,n,a,l,g,w){var N=a&fe,$=t.length,k=n.length;if($!=k&&!(N&&k>$))return!1;var ve=w.get(t),me=w.get(n);if(ve&&me)return ve==n&&me==t;var _e=-1,Oe=!0,je=a&Ce?new rn:r;for(w.set(t,n),w.set(n,t);++_e<$;){var qe=t[_e],rt=n[_e];if(l)var ke=N?l(rt,qe,_e,n,t,w):l(qe,rt,_e,t,n,w);if(ke!==r){if(ke)continue;Oe=!1;break}if(je){if(!ic(n,function(ct,gt){if(!as(je,gt)&&(qe===ct||g(qe,ct,a,l,w)))return je.push(gt)})){Oe=!1;break}}else if(!(qe===rt||g(qe,rt,a,l,w))){Oe=!1;break}}return w.delete(t),w.delete(n),Oe}function VE(t,n,a,l,g,w,N){switch(a){case In:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case os:return!(t.byteLength!=n.byteLength||!w(new po(t),new po(n)));case es:case ts:case rs:return si(+t,+n);case Zs:return t.name==n.name&&t.message==n.message;case is:case ns:return t==n+"";case ti:var $=uc;case ri:var k=l&fe;if($||($=ao),t.size!=n.size&&!k)return!1;var ve=N.get(t);if(ve)return ve==n;l|=Ce,N.set(t,n);var me=od($(t),$(n),l,g,w,N);return N.delete(t),me;case to:if(fs)return fs.call(t)==fs.call(n)}return!1}function qE(t,n,a,l,g,w){var N=a&fe,$=Fc(t),k=$.length,ve=Fc(n),me=ve.length;if(k!=me&&!N)return!1;for(var _e=k;_e--;){var Oe=$[_e];if(!(N?Oe in n:Ct.call(n,Oe)))return!1}var je=w.get(t),qe=w.get(n);if(je&&qe)return je==n&&qe==t;var rt=!0;w.set(t,n),w.set(n,t);for(var ke=N;++_e<k;){Oe=$[_e];var ct=t[Oe],gt=n[Oe];if(l)var zr=N?l(gt,ct,Oe,n,t,w):l(ct,gt,Oe,t,n,w);if(!(zr===r?ct===gt||g(ct,gt,a,l,w):zr)){rt=!1;break}ke||(ke=Oe=="constructor")}if(rt&&!ke){var xr=t.constructor,Hr=n.constructor;xr!=Hr&&"constructor"in t&&"constructor"in n&&!(typeof xr=="function"&&xr instanceof xr&&typeof Hr=="function"&&Hr instanceof Hr)&&(rt=!1)}return w.delete(t),w.delete(n),rt}function Oi(t){return Hc(fd(t,r,bd),t+"")}function Fc(t){return Sf(t,lr,jc)}function Uc(t){return Sf(t,Tr,ad)}var Lc=_o?function(t){return _o.get(t)}:tu;function Fo(t){for(var n=t.name+"",a=Nn[n],l=Ct.call(Nn,n)?a.length:0;l--;){var g=a[l],w=g.func;if(w==null||w==t)return g.name}return n}function Ln(t){var n=Ct.call(y,"placeholder")?y:t;return n.placeholder}function Ke(){var t=y.iteratee||Zc;return t=t===Zc?Cf:t,arguments.length?t(arguments[0],arguments[1]):t}function Uo(t,n){var a=t.__data__;return ZE(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Mc(t){for(var n=lr(t),a=n.length;a--;){var l=n[a],g=t[l];n[a]=[l,g,hd(g)]}return n}function on(t,n){var a=rb(t,n);return Pf(a)?a:r}function kE(t){var n=Ct.call(t,en),a=t[en];try{t[en]=r;var l=!0}catch{}var g=lo.call(t);return l&&(n?t[en]=a:delete t[en]),g}var jc=lc?function(t){return t==null?[]:(t=Rt(t),Mi(lc(t),function(n){return df.call(t,n)}))}:ru,ad=lc?function(t){for(var n=[];t;)ji(n,jc(t)),t=go(t);return n}:ru,yr=Dr;(fc&&yr(new fc(new ArrayBuffer(1)))!=In||us&&yr(new us)!=ti||dc&&yr(dc.resolve())!=El||Rn&&yr(new Rn)!=ri||hs&&yr(new hs)!=ss)&&(yr=function(t){var n=Dr(t),a=n==Ei?t.constructor:r,l=a?an(a):"";if(l)switch(l){case Pb:return In;case Cb:return ti;case Ab:return El;case Rb:return ri;case Nb:return ss}return n});function WE(t,n,a){for(var l=-1,g=a.length;++l<g;){var w=a[l],N=w.size;switch(w.type){case"drop":t+=N;break;case"dropRight":n-=N;break;case"take":n=vr(n,t+N);break;case"takeRight":t=Jt(t,n-N);break}}return{start:t,end:n}}function GE(t){var n=t.match(e_);return n?n[1].split(t_):[]}function cd(t,n,a){n=Ki(n,t);for(var l=-1,g=n.length,w=!1;++l<g;){var N=pi(n[l]);if(!(w=t!=null&&a(t,N)))break;t=t[N]}return w||++l!=g?w:(g=t==null?0:t.length,!!g&&Ho(g)&&Pi(N,g)&&(Qe(t)||cn(t)))}function JE(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&Ct.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function ud(t){return typeof t.constructor=="function"&&!ws(t)?Tn(go(t)):{}}function YE(t,n,a){var l=t.constructor;switch(n){case os:return Rc(t);case es:case ts:return new l(+t);case In:return TE(t,a);case Ma:case ja:case Ba:case $a:case za:case Ha:case Ka:case Va:case qa:return qf(t,a);case ti:return new l;case rs:case ns:return new l(t);case is:return FE(t);case ri:return new l;case to:return UE(t)}}function QE(t,n){var a=n.length;if(!a)return t;var l=a-1;return n[l]=(a>1?"& ":"")+n[l],n=n.join(a>2?", ":" "),t.replace(Zw,`{
/* [wrapped with `+n+`] */
`)}function XE(t){return Qe(t)||cn(t)||!!(pf&&t&&t[pf])}function Pi(t,n){var a=typeof t;return n=n??Li,!!n&&(a=="number"||a!="symbol"&&h_.test(t))&&t>-1&&t%1==0&&t<n}function Ir(t,n,a){if(!jt(a))return!1;var l=typeof n;return(l=="number"?Nr(a)&&Pi(n,a.length):l=="string"&&n in a)?si(a[n],t):!1}function Bc(t,n){if(Qe(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||$r(t)?!0:Jw.test(t)||!Gw.test(t)||n!=null&&t in Rt(n)}function ZE(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function $c(t){var n=Fo(t),a=y[n];if(typeof a!="function"||!(n in ht.prototype))return!1;if(t===a)return!0;var l=Lc(a);return!!l&&t===l[0]}function e3(t){return!!hf&&hf in t}var t3=uo?Ci:iu;function ws(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||An;return t===a}function hd(t){return t===t&&!jt(t)}function ld(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==r||t in Rt(a))}}function r3(t){var n=$o(t,function(l){return a.size===R&&a.clear(),l}),a=n.cache;return n}function i3(t,n){var a=t[1],l=n[1],g=a|l,w=g<(He|We|_t),N=l==_t&&a==tt||l==_t&&a==Tt&&t[7].length<=n[8]||l==(_t|Tt)&&n[7].length<=n[8]&&a==tt;if(!(w||N))return t;l&He&&(t[2]=n[2],g|=a&He?0:Et);var $=n[3];if($){var k=t[3];t[3]=k?Wf(k,$,n[4]):$,t[4]=k?Bi(t[3],W):n[4]}return $=n[5],$&&(k=t[5],t[5]=k?Gf(k,$,n[6]):$,t[6]=k?Bi(t[5],W):n[6]),$=n[7],$&&(t[7]=$),l&_t&&(t[8]=t[8]==null?n[8]:vr(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=g,t}function n3(t){var n=[];if(t!=null)for(var a in Rt(t))n.push(a);return n}function s3(t){return lo.call(t)}function fd(t,n,a){return n=Jt(n===r?t.length-1:n,0),function(){for(var l=arguments,g=-1,w=Jt(l.length-n,0),N=se(w);++g<w;)N[g]=l[n+g];g=-1;for(var $=se(n+1);++g<n;)$[g]=l[g];return $[n]=a(N),Mr(t,this,$)}}function dd(t,n){return n.length<2?t:sn(t,Jr(n,0,-1))}function o3(t,n){for(var a=t.length,l=vr(n.length,a),g=Rr(t);l--;){var w=n[l];t[l]=Pi(w,a)?g[w]:r}return t}function zc(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var pd=vd(Mf),_s=bb||function(t,n){return dr.setTimeout(t,n)},Hc=vd(CE);function gd(t,n,a){var l=n+"";return Hc(t,QE(l,a3(GE(l),a)))}function vd(t){var n=0,a=0;return function(){var l=xb(),g=Pw-(l-a);if(a=l,g>0){if(++n>=Ow)return arguments[0]}else n=0;return t.apply(r,arguments)}}function Lo(t,n){var a=-1,l=t.length,g=l-1;for(n=n===r?l:n;++a<n;){var w=Ic(a,g),N=t[w];t[w]=t[a],t[a]=N}return t.length=n,t}var yd=r3(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Yw,function(a,l,g,w){n.push(g?w.replace(n_,"$1"):l||a)}),n});function pi(t){if(typeof t=="string"||$r(t))return t;var n=t+"";return n=="0"&&1/t==-Xi?"-0":n}function an(t){if(t!=null){try{return ho.call(t)}catch{}try{return t+""}catch{}}return""}function a3(t,n){return qr(Fw,function(a){var l="_."+a[0];n&a[1]&&!so(t,l)&&t.push(l)}),t.sort()}function md(t){if(t instanceof ht)return t.clone();var n=new Wr(t.__wrapped__,t.__chain__);return n.__actions__=Rr(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function c3(t,n,a){(a?Ir(t,n,a):n===r)?n=1:n=Jt(Xe(n),0);var l=t==null?0:t.length;if(!l||n<1)return[];for(var g=0,w=0,N=se(mo(l/n));g<l;)N[w++]=Jr(t,g,g+=n);return N}function u3(t){for(var n=-1,a=t==null?0:t.length,l=0,g=[];++n<a;){var w=t[n];w&&(g[l++]=w)}return g}function h3(){var t=arguments.length;if(!t)return[];for(var n=se(t-1),a=arguments[0],l=t;l--;)n[l-1]=arguments[l];return ji(Qe(a)?Rr(a):[a],pr(n,1))}var l3=nt(function(t,n){return Ht(t)?ps(t,pr(n,1,Ht,!0)):[]}),f3=nt(function(t,n){var a=Yr(n);return Ht(a)&&(a=r),Ht(t)?ps(t,pr(n,1,Ht,!0),Ke(a,2)):[]}),d3=nt(function(t,n){var a=Yr(n);return Ht(a)&&(a=r),Ht(t)?ps(t,pr(n,1,Ht,!0),r,a):[]});function p3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:Xe(n),Jr(t,n<0?0:n,l)):[]}function g3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:Xe(n),n=l-n,Jr(t,0,n<0?0:n)):[]}function v3(t,n){return t&&t.length?Po(t,Ke(n,3),!0,!0):[]}function y3(t,n){return t&&t.length?Po(t,Ke(n,3),!0):[]}function m3(t,n,a,l){var g=t==null?0:t.length;return g?(a&&typeof a!="number"&&Ir(t,n,a)&&(a=0,l=g),hE(t,n,a,l)):[]}function wd(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var g=a==null?0:Xe(a);return g<0&&(g=Jt(l+g,0)),oo(t,Ke(n,3),g)}function _d(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var g=l-1;return a!==r&&(g=Xe(a),g=a<0?Jt(l+g,0):vr(g,l-1)),oo(t,Ke(n,3),g,!0)}function bd(t){var n=t==null?0:t.length;return n?pr(t,1):[]}function w3(t){var n=t==null?0:t.length;return n?pr(t,Xi):[]}function _3(t,n){var a=t==null?0:t.length;return a?(n=n===r?1:Xe(n),pr(t,n)):[]}function b3(t){for(var n=-1,a=t==null?0:t.length,l={};++n<a;){var g=t[n];l[g[0]]=g[1]}return l}function Ed(t){return t&&t.length?t[0]:r}function E3(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var g=a==null?0:Xe(a);return g<0&&(g=Jt(l+g,0)),Sn(t,n,g)}function D3(t){var n=t==null?0:t.length;return n?Jr(t,0,-1):[]}var I3=nt(function(t){var n=Mt(t,Cc);return n.length&&n[0]===t[0]?wc(n):[]}),x3=nt(function(t){var n=Yr(t),a=Mt(t,Cc);return n===Yr(a)?n=r:a.pop(),a.length&&a[0]===t[0]?wc(a,Ke(n,2)):[]}),S3=nt(function(t){var n=Yr(t),a=Mt(t,Cc);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===t[0]?wc(a,r,n):[]});function O3(t,n){return t==null?"":Db.call(t,n)}function Yr(t){var n=t==null?0:t.length;return n?t[n-1]:r}function P3(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var g=l;return a!==r&&(g=Xe(a),g=g<0?Jt(l+g,0):vr(g,l-1)),n===n?ab(t,n,g):oo(t,tf,g,!0)}function C3(t,n){return t&&t.length?Tf(t,Xe(n)):r}var A3=nt(Dd);function Dd(t,n){return t&&t.length&&n&&n.length?Dc(t,n):t}function R3(t,n,a){return t&&t.length&&n&&n.length?Dc(t,n,Ke(a,2)):t}function N3(t,n,a){return t&&t.length&&n&&n.length?Dc(t,n,r,a):t}var T3=Oi(function(t,n){var a=t==null?0:t.length,l=gc(t,n);return Lf(t,Mt(n,function(g){return Pi(g,a)?+g:g}).sort(kf)),l});function F3(t,n){var a=[];if(!(t&&t.length))return a;var l=-1,g=[],w=t.length;for(n=Ke(n,3);++l<w;){var N=t[l];n(N,l,t)&&(a.push(N),g.push(l))}return Lf(t,g),a}function Kc(t){return t==null?t:Ob.call(t)}function U3(t,n,a){var l=t==null?0:t.length;return l?(a&&typeof a!="number"&&Ir(t,n,a)?(n=0,a=l):(n=n==null?0:Xe(n),a=a===r?l:Xe(a)),Jr(t,n,a)):[]}function L3(t,n){return Oo(t,n)}function M3(t,n,a){return Sc(t,n,Ke(a,2))}function j3(t,n){var a=t==null?0:t.length;if(a){var l=Oo(t,n);if(l<a&&si(t[l],n))return l}return-1}function B3(t,n){return Oo(t,n,!0)}function $3(t,n,a){return Sc(t,n,Ke(a,2),!0)}function z3(t,n){var a=t==null?0:t.length;if(a){var l=Oo(t,n,!0)-1;if(si(t[l],n))return l}return-1}function H3(t){return t&&t.length?jf(t):[]}function K3(t,n){return t&&t.length?jf(t,Ke(n,2)):[]}function V3(t){var n=t==null?0:t.length;return n?Jr(t,1,n):[]}function q3(t,n,a){return t&&t.length?(n=a||n===r?1:Xe(n),Jr(t,0,n<0?0:n)):[]}function k3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:Xe(n),n=l-n,Jr(t,n<0?0:n,l)):[]}function W3(t,n){return t&&t.length?Po(t,Ke(n,3),!1,!0):[]}function G3(t,n){return t&&t.length?Po(t,Ke(n,3)):[]}var J3=nt(function(t){return Hi(pr(t,1,Ht,!0))}),Y3=nt(function(t){var n=Yr(t);return Ht(n)&&(n=r),Hi(pr(t,1,Ht,!0),Ke(n,2))}),Q3=nt(function(t){var n=Yr(t);return n=typeof n=="function"?n:r,Hi(pr(t,1,Ht,!0),r,n)});function X3(t){return t&&t.length?Hi(t):[]}function Z3(t,n){return t&&t.length?Hi(t,Ke(n,2)):[]}function e6(t,n){return n=typeof n=="function"?n:r,t&&t.length?Hi(t,r,n):[]}function Vc(t){if(!(t&&t.length))return[];var n=0;return t=Mi(t,function(a){if(Ht(a))return n=Jt(a.length,n),!0}),ac(n,function(a){return Mt(t,nc(a))})}function Id(t,n){if(!(t&&t.length))return[];var a=Vc(t);return n==null?a:Mt(a,function(l){return Mr(n,r,l)})}var t6=nt(function(t,n){return Ht(t)?ps(t,n):[]}),r6=nt(function(t){return Pc(Mi(t,Ht))}),i6=nt(function(t){var n=Yr(t);return Ht(n)&&(n=r),Pc(Mi(t,Ht),Ke(n,2))}),n6=nt(function(t){var n=Yr(t);return n=typeof n=="function"?n:r,Pc(Mi(t,Ht),r,n)}),s6=nt(Vc);function o6(t,n){return Hf(t||[],n||[],ds)}function a6(t,n){return Hf(t||[],n||[],ys)}var c6=nt(function(t){var n=t.length,a=n>1?t[n-1]:r;return a=typeof a=="function"?(t.pop(),a):r,Id(t,a)});function xd(t){var n=y(t);return n.__chain__=!0,n}function u6(t,n){return n(t),t}function Mo(t,n){return n(t)}var h6=Oi(function(t){var n=t.length,a=n?t[0]:0,l=this.__wrapped__,g=function(w){return gc(w,t)};return n>1||this.__actions__.length||!(l instanceof ht)||!Pi(a)?this.thru(g):(l=l.slice(a,+a+(n?1:0)),l.__actions__.push({func:Mo,args:[g],thisArg:r}),new Wr(l,this.__chain__).thru(function(w){return n&&!w.length&&w.push(r),w}))});function l6(){return xd(this)}function f6(){return new Wr(this.value(),this.__chain__)}function d6(){this.__values__===r&&(this.__values__=Bd(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function p6(){return this}function g6(t){for(var n,a=this;a instanceof Eo;){var l=md(a);l.__index__=0,l.__values__=r,n?g.__wrapped__=l:n=l;var g=l;a=a.__wrapped__}return g.__wrapped__=t,n}function v6(){var t=this.__wrapped__;if(t instanceof ht){var n=t;return this.__actions__.length&&(n=new ht(this)),n=n.reverse(),n.__actions__.push({func:Mo,args:[Kc],thisArg:r}),new Wr(n,this.__chain__)}return this.thru(Kc)}function y6(){return zf(this.__wrapped__,this.__actions__)}var m6=Co(function(t,n,a){Ct.call(t,a)?++t[a]:xi(t,a,1)});function w6(t,n,a){var l=Qe(t)?Zl:uE;return a&&Ir(t,n,a)&&(n=r),l(t,Ke(n,3))}function _6(t,n){var a=Qe(t)?Mi:If;return a(t,Ke(n,3))}var b6=Xf(wd),E6=Xf(_d);function D6(t,n){return pr(jo(t,n),1)}function I6(t,n){return pr(jo(t,n),Xi)}function x6(t,n,a){return a=a===r?1:Xe(a),pr(jo(t,n),a)}function Sd(t,n){var a=Qe(t)?qr:zi;return a(t,Ke(n,3))}function Od(t,n){var a=Qe(t)?V_:Df;return a(t,Ke(n,3))}var S6=Co(function(t,n,a){Ct.call(t,a)?t[a].push(n):xi(t,a,[n])});function O6(t,n,a,l){t=Nr(t)?t:jn(t),a=a&&!l?Xe(a):0;var g=t.length;return a<0&&(a=Jt(g+a,0)),Ko(t)?a<=g&&t.indexOf(n,a)>-1:!!g&&Sn(t,n,a)>-1}var P6=nt(function(t,n,a){var l=-1,g=typeof n=="function",w=Nr(t)?se(t.length):[];return zi(t,function(N){w[++l]=g?Mr(n,N,a):gs(N,n,a)}),w}),C6=Co(function(t,n,a){xi(t,a,n)});function jo(t,n){var a=Qe(t)?Mt:Af;return a(t,Ke(n,3))}function A6(t,n,a,l){return t==null?[]:(Qe(n)||(n=n==null?[]:[n]),a=l?r:a,Qe(a)||(a=a==null?[]:[a]),Ff(t,n,a))}var R6=Co(function(t,n,a){t[a?0:1].push(n)},function(){return[[],[]]});function N6(t,n,a){var l=Qe(t)?rc:nf,g=arguments.length<3;return l(t,Ke(n,4),a,g,zi)}function T6(t,n,a){var l=Qe(t)?q_:nf,g=arguments.length<3;return l(t,Ke(n,4),a,g,Df)}function F6(t,n){var a=Qe(t)?Mi:If;return a(t,zo(Ke(n,3)))}function U6(t){var n=Qe(t)?wf:OE;return n(t)}function L6(t,n,a){(a?Ir(t,n,a):n===r)?n=1:n=Xe(n);var l=Qe(t)?nE:PE;return l(t,n)}function M6(t){var n=Qe(t)?sE:AE;return n(t)}function j6(t){if(t==null)return 0;if(Nr(t))return Ko(t)?Pn(t):t.length;var n=yr(t);return n==ti||n==ri?t.size:bc(t).length}function B6(t,n,a){var l=Qe(t)?ic:RE;return a&&Ir(t,n,a)&&(n=r),l(t,Ke(n,3))}var $6=nt(function(t,n){if(t==null)return[];var a=n.length;return a>1&&Ir(t,n[0],n[1])?n=[]:a>2&&Ir(n[0],n[1],n[2])&&(n=[n[0]]),Ff(t,pr(n,1),[])}),Bo=_b||function(){return dr.Date.now()};function z6(t,n){if(typeof n!="function")throw new kr(v);return t=Xe(t),function(){if(--t<1)return n.apply(this,arguments)}}function Pd(t,n,a){return n=a?r:n,n=t&&n==null?t.length:n,Si(t,_t,r,r,r,r,n)}function Cd(t,n){var a;if(typeof n!="function")throw new kr(v);return t=Xe(t),function(){return--t>0&&(a=n.apply(this,arguments)),t<=1&&(n=r),a}}var qc=nt(function(t,n,a){var l=He;if(a.length){var g=Bi(a,Ln(qc));l|=Ve}return Si(t,l,n,a,g)}),Ad=nt(function(t,n,a){var l=He|We;if(a.length){var g=Bi(a,Ln(Ad));l|=Ve}return Si(n,l,t,a,g)});function Rd(t,n,a){n=a?r:n;var l=Si(t,tt,r,r,r,r,r,n);return l.placeholder=Rd.placeholder,l}function Nd(t,n,a){n=a?r:n;var l=Si(t,Ge,r,r,r,r,r,n);return l.placeholder=Nd.placeholder,l}function Td(t,n,a){var l,g,w,N,$,k,ve=0,me=!1,_e=!1,Oe=!0;if(typeof t!="function")throw new kr(v);n=Qr(n)||0,jt(a)&&(me=!!a.leading,_e="maxWait"in a,w=_e?Jt(Qr(a.maxWait)||0,n):w,Oe="trailing"in a?!!a.trailing:Oe);function je(Kt){var oi=l,Ri=g;return l=g=r,ve=Kt,N=t.apply(Ri,oi),N}function qe(Kt){return ve=Kt,$=_s(ct,n),me?je(Kt):N}function rt(Kt){var oi=Kt-k,Ri=Kt-ve,Xd=n-oi;return _e?vr(Xd,w-Ri):Xd}function ke(Kt){var oi=Kt-k,Ri=Kt-ve;return k===r||oi>=n||oi<0||_e&&Ri>=w}function ct(){var Kt=Bo();if(ke(Kt))return gt(Kt);$=_s(ct,rt(Kt))}function gt(Kt){return $=r,Oe&&l?je(Kt):(l=g=r,N)}function zr(){$!==r&&Kf($),ve=0,l=k=g=$=r}function xr(){return $===r?N:gt(Bo())}function Hr(){var Kt=Bo(),oi=ke(Kt);if(l=arguments,g=this,k=Kt,oi){if($===r)return qe(k);if(_e)return Kf($),$=_s(ct,n),je(k)}return $===r&&($=_s(ct,n)),N}return Hr.cancel=zr,Hr.flush=xr,Hr}var H6=nt(function(t,n){return Ef(t,1,n)}),K6=nt(function(t,n,a){return Ef(t,Qr(n)||0,a)});function V6(t){return Si(t,Lr)}function $o(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new kr(v);var a=function(){var l=arguments,g=n?n.apply(this,l):l[0],w=a.cache;if(w.has(g))return w.get(g);var N=t.apply(this,l);return a.cache=w.set(g,N)||w,N};return a.cache=new($o.Cache||Ii),a}$o.Cache=Ii;function zo(t){if(typeof t!="function")throw new kr(v);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function q6(t){return Cd(2,t)}var k6=NE(function(t,n){n=n.length==1&&Qe(n[0])?Mt(n[0],jr(Ke())):Mt(pr(n,1),jr(Ke()));var a=n.length;return nt(function(l){for(var g=-1,w=vr(l.length,a);++g<w;)l[g]=n[g].call(this,l[g]);return Mr(t,this,l)})}),kc=nt(function(t,n){var a=Bi(n,Ln(kc));return Si(t,Ve,r,n,a)}),Fd=nt(function(t,n){var a=Bi(n,Ln(Fd));return Si(t,wt,r,n,a)}),W6=Oi(function(t,n){return Si(t,Tt,r,r,r,n)});function G6(t,n){if(typeof t!="function")throw new kr(v);return n=n===r?n:Xe(n),nt(t,n)}function J6(t,n){if(typeof t!="function")throw new kr(v);return n=n==null?0:Jt(Xe(n),0),nt(function(a){var l=a[n],g=Vi(a,0,n);return l&&ji(g,l),Mr(t,this,g)})}function Y6(t,n,a){var l=!0,g=!0;if(typeof t!="function")throw new kr(v);return jt(a)&&(l="leading"in a?!!a.leading:l,g="trailing"in a?!!a.trailing:g),Td(t,n,{leading:l,maxWait:n,trailing:g})}function Q6(t){return Pd(t,1)}function X6(t,n){return kc(Ac(n),t)}function Z6(){if(!arguments.length)return[];var t=arguments[0];return Qe(t)?t:[t]}function e2(t){return Gr(t,Ne)}function t2(t,n){return n=typeof n=="function"?n:r,Gr(t,Ne,n)}function r2(t){return Gr(t,te|Ne)}function i2(t,n){return n=typeof n=="function"?n:r,Gr(t,te|Ne,n)}function n2(t,n){return n==null||bf(t,n,lr(n))}function si(t,n){return t===n||t!==t&&n!==n}var s2=To(mc),o2=To(function(t,n){return t>=n}),cn=Of(function(){return arguments}())?Of:function(t){return $t(t)&&Ct.call(t,"callee")&&!df.call(t,"callee")},Qe=se.isArray,a2=Wl?jr(Wl):gE;function Nr(t){return t!=null&&Ho(t.length)&&!Ci(t)}function Ht(t){return $t(t)&&Nr(t)}function c2(t){return t===!0||t===!1||$t(t)&&Dr(t)==es}var qi=Eb||iu,u2=Gl?jr(Gl):vE;function h2(t){return $t(t)&&t.nodeType===1&&!bs(t)}function l2(t){if(t==null)return!0;if(Nr(t)&&(Qe(t)||typeof t=="string"||typeof t.splice=="function"||qi(t)||Mn(t)||cn(t)))return!t.length;var n=yr(t);if(n==ti||n==ri)return!t.size;if(ws(t))return!bc(t).length;for(var a in t)if(Ct.call(t,a))return!1;return!0}function f2(t,n){return vs(t,n)}function d2(t,n,a){a=typeof a=="function"?a:r;var l=a?a(t,n):r;return l===r?vs(t,n,r,a):!!l}function Wc(t){if(!$t(t))return!1;var n=Dr(t);return n==Zs||n==Lw||typeof t.message=="string"&&typeof t.name=="string"&&!bs(t)}function p2(t){return typeof t=="number"&&gf(t)}function Ci(t){if(!jt(t))return!1;var n=Dr(t);return n==eo||n==bl||n==Uw||n==jw}function Ud(t){return typeof t=="number"&&t==Xe(t)}function Ho(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Li}function jt(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function $t(t){return t!=null&&typeof t=="object"}var Ld=Jl?jr(Jl):mE;function g2(t,n){return t===n||_c(t,n,Mc(n))}function v2(t,n,a){return a=typeof a=="function"?a:r,_c(t,n,Mc(n),a)}function y2(t){return Md(t)&&t!=+t}function m2(t){if(t3(t))throw new Je(d);return Pf(t)}function w2(t){return t===null}function _2(t){return t==null}function Md(t){return typeof t=="number"||$t(t)&&Dr(t)==rs}function bs(t){if(!$t(t)||Dr(t)!=Ei)return!1;var n=go(t);if(n===null)return!0;var a=Ct.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&ho.call(a)==vb}var Gc=Yl?jr(Yl):wE;function b2(t){return Ud(t)&&t>=-Li&&t<=Li}var jd=Ql?jr(Ql):_E;function Ko(t){return typeof t=="string"||!Qe(t)&&$t(t)&&Dr(t)==ns}function $r(t){return typeof t=="symbol"||$t(t)&&Dr(t)==to}var Mn=Xl?jr(Xl):bE;function E2(t){return t===r}function D2(t){return $t(t)&&yr(t)==ss}function I2(t){return $t(t)&&Dr(t)==$w}var x2=To(Ec),S2=To(function(t,n){return t<=n});function Bd(t){if(!t)return[];if(Nr(t))return Ko(t)?ii(t):Rr(t);if(cs&&t[cs])return nb(t[cs]());var n=yr(t),a=n==ti?uc:n==ri?ao:jn;return a(t)}function Ai(t){if(!t)return t===0?t:0;if(t=Qr(t),t===Xi||t===-Xi){var n=t<0?-1:1;return n*Rw}return t===t?t:0}function Xe(t){var n=Ai(t),a=n%1;return n===n?a?n-a:n:0}function $d(t){return t?nn(Xe(t),0,li):0}function Qr(t){if(typeof t=="number")return t;if($r(t))return Qs;if(jt(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=jt(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=sf(t);var a=a_.test(t);return a||u_.test(t)?z_(t.slice(2),a?2:8):o_.test(t)?Qs:+t}function zd(t){return di(t,Tr(t))}function O2(t){return t?nn(Xe(t),-Li,Li):t===0?t:0}function Pt(t){return t==null?"":Br(t)}var P2=Fn(function(t,n){if(ws(n)||Nr(n)){di(n,lr(n),t);return}for(var a in n)Ct.call(n,a)&&ds(t,a,n[a])}),Hd=Fn(function(t,n){di(n,Tr(n),t)}),Vo=Fn(function(t,n,a,l){di(n,Tr(n),t,l)}),C2=Fn(function(t,n,a,l){di(n,lr(n),t,l)}),A2=Oi(gc);function R2(t,n){var a=Tn(t);return n==null?a:_f(a,n)}var N2=nt(function(t,n){t=Rt(t);var a=-1,l=n.length,g=l>2?n[2]:r;for(g&&Ir(n[0],n[1],g)&&(l=1);++a<l;)for(var w=n[a],N=Tr(w),$=-1,k=N.length;++$<k;){var ve=N[$],me=t[ve];(me===r||si(me,An[ve])&&!Ct.call(t,ve))&&(t[ve]=w[ve])}return t}),T2=nt(function(t){return t.push(r,sd),Mr(Kd,r,t)});function F2(t,n){return ef(t,Ke(n,3),fi)}function U2(t,n){return ef(t,Ke(n,3),yc)}function L2(t,n){return t==null?t:vc(t,Ke(n,3),Tr)}function M2(t,n){return t==null?t:xf(t,Ke(n,3),Tr)}function j2(t,n){return t&&fi(t,Ke(n,3))}function B2(t,n){return t&&yc(t,Ke(n,3))}function $2(t){return t==null?[]:xo(t,lr(t))}function z2(t){return t==null?[]:xo(t,Tr(t))}function Jc(t,n,a){var l=t==null?r:sn(t,n);return l===r?a:l}function H2(t,n){return t!=null&&cd(t,n,lE)}function Yc(t,n){return t!=null&&cd(t,n,fE)}var K2=ed(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=lo.call(n)),t[n]=a},Xc(Fr)),V2=ed(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=lo.call(n)),Ct.call(t,n)?t[n].push(a):t[n]=[a]},Ke),q2=nt(gs);function lr(t){return Nr(t)?mf(t):bc(t)}function Tr(t){return Nr(t)?mf(t,!0):EE(t)}function k2(t,n){var a={};return n=Ke(n,3),fi(t,function(l,g,w){xi(a,n(l,g,w),l)}),a}function W2(t,n){var a={};return n=Ke(n,3),fi(t,function(l,g,w){xi(a,g,n(l,g,w))}),a}var G2=Fn(function(t,n,a){So(t,n,a)}),Kd=Fn(function(t,n,a,l){So(t,n,a,l)}),J2=Oi(function(t,n){var a={};if(t==null)return a;var l=!1;n=Mt(n,function(w){return w=Ki(w,t),l||(l=w.length>1),w}),di(t,Uc(t),a),l&&(a=Gr(a,te|pe|Ne,KE));for(var g=n.length;g--;)Oc(a,n[g]);return a});function Y2(t,n){return Vd(t,zo(Ke(n)))}var Q2=Oi(function(t,n){return t==null?{}:IE(t,n)});function Vd(t,n){if(t==null)return{};var a=Mt(Uc(t),function(l){return[l]});return n=Ke(n),Uf(t,a,function(l,g){return n(l,g[0])})}function X2(t,n,a){n=Ki(n,t);var l=-1,g=n.length;for(g||(g=1,t=r);++l<g;){var w=t==null?r:t[pi(n[l])];w===r&&(l=g,w=a),t=Ci(w)?w.call(t):w}return t}function Z2(t,n,a){return t==null?t:ys(t,n,a)}function eD(t,n,a,l){return l=typeof l=="function"?l:r,t==null?t:ys(t,n,a,l)}var qd=id(lr),kd=id(Tr);function tD(t,n,a){var l=Qe(t),g=l||qi(t)||Mn(t);if(n=Ke(n,4),a==null){var w=t&&t.constructor;g?a=l?new w:[]:jt(t)?a=Ci(w)?Tn(go(t)):{}:a={}}return(g?qr:fi)(t,function(N,$,k){return n(a,N,$,k)}),a}function rD(t,n){return t==null?!0:Oc(t,n)}function iD(t,n,a){return t==null?t:$f(t,n,Ac(a))}function nD(t,n,a,l){return l=typeof l=="function"?l:r,t==null?t:$f(t,n,Ac(a),l)}function jn(t){return t==null?[]:cc(t,lr(t))}function sD(t){return t==null?[]:cc(t,Tr(t))}function oD(t,n,a){return a===r&&(a=n,n=r),a!==r&&(a=Qr(a),a=a===a?a:0),n!==r&&(n=Qr(n),n=n===n?n:0),nn(Qr(t),n,a)}function aD(t,n,a){return n=Ai(n),a===r?(a=n,n=0):a=Ai(a),t=Qr(t),dE(t,n,a)}function cD(t,n,a){if(a&&typeof a!="boolean"&&Ir(t,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&n===r?(t=0,n=1):(t=Ai(t),n===r?(n=t,t=0):n=Ai(n)),t>n){var l=t;t=n,n=l}if(a||t%1||n%1){var g=vf();return vr(t+g*(n-t+$_("1e-"+((g+"").length-1))),n)}return Ic(t,n)}var uD=Un(function(t,n,a){return n=n.toLowerCase(),t+(a?Wd(n):n)});function Wd(t){return Qc(Pt(t).toLowerCase())}function Gd(t){return t=Pt(t),t&&t.replace(l_,Z_).replace(A_,"")}function hD(t,n,a){t=Pt(t),n=Br(n);var l=t.length;a=a===r?l:nn(Xe(a),0,l);var g=a;return a-=n.length,a>=0&&t.slice(a,g)==n}function lD(t){return t=Pt(t),t&&qw.test(t)?t.replace(Il,eb):t}function fD(t){return t=Pt(t),t&&Qw.test(t)?t.replace(ka,"\\$&"):t}var dD=Un(function(t,n,a){return t+(a?"-":"")+n.toLowerCase()}),pD=Un(function(t,n,a){return t+(a?" ":"")+n.toLowerCase()}),gD=Qf("toLowerCase");function vD(t,n,a){t=Pt(t),n=Xe(n);var l=n?Pn(t):0;if(!n||l>=n)return t;var g=(n-l)/2;return No(wo(g),a)+t+No(mo(g),a)}function yD(t,n,a){t=Pt(t),n=Xe(n);var l=n?Pn(t):0;return n&&l<n?t+No(n-l,a):t}function mD(t,n,a){t=Pt(t),n=Xe(n);var l=n?Pn(t):0;return n&&l<n?No(n-l,a)+t:t}function wD(t,n,a){return a||n==null?n=0:n&&(n=+n),Sb(Pt(t).replace(Wa,""),n||0)}function _D(t,n,a){return(a?Ir(t,n,a):n===r)?n=1:n=Xe(n),xc(Pt(t),n)}function bD(){var t=arguments,n=Pt(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var ED=Un(function(t,n,a){return t+(a?"_":"")+n.toLowerCase()});function DD(t,n,a){return a&&typeof a!="number"&&Ir(t,n,a)&&(n=a=r),a=a===r?li:a>>>0,a?(t=Pt(t),t&&(typeof n=="string"||n!=null&&!Gc(n))&&(n=Br(n),!n&&On(t))?Vi(ii(t),0,a):t.split(n,a)):[]}var ID=Un(function(t,n,a){return t+(a?" ":"")+Qc(n)});function xD(t,n,a){return t=Pt(t),a=a==null?0:nn(Xe(a),0,t.length),n=Br(n),t.slice(a,a+n.length)==n}function SD(t,n,a){var l=y.templateSettings;a&&Ir(t,n,a)&&(n=r),t=Pt(t),n=Vo({},n,l,nd);var g=Vo({},n.imports,l.imports,nd),w=lr(g),N=cc(g,w),$,k,ve=0,me=n.interpolate||ro,_e="__p += '",Oe=hc((n.escape||ro).source+"|"+me.source+"|"+(me===xl?s_:ro).source+"|"+(n.evaluate||ro).source+"|$","g"),je="//# sourceURL="+(Ct.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++U_+"]")+`
`;t.replace(Oe,function(ke,ct,gt,zr,xr,Hr){return gt||(gt=zr),_e+=t.slice(ve,Hr).replace(f_,tb),ct&&($=!0,_e+=`' +
__e(`+ct+`) +
'`),xr&&(k=!0,_e+=`';
`+xr+`;
__p += '`),gt&&(_e+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),ve=Hr+ke.length,ke}),_e+=`';
`;var qe=Ct.call(n,"variable")&&n.variable;if(!qe)_e=`with (obj) {
`+_e+`
}
`;else if(i_.test(qe))throw new Je(A);_e=(k?_e.replace(zw,""):_e).replace(Hw,"$1").replace(Kw,"$1;"),_e="function("+(qe||"obj")+`) {
`+(qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_e+`return __p
}`;var rt=Yd(function(){return xt(w,je+"return "+_e).apply(r,N)});if(rt.source=_e,Wc(rt))throw rt;return rt}function OD(t){return Pt(t).toLowerCase()}function PD(t){return Pt(t).toUpperCase()}function CD(t,n,a){if(t=Pt(t),t&&(a||n===r))return sf(t);if(!t||!(n=Br(n)))return t;var l=ii(t),g=ii(n),w=of(l,g),N=af(l,g)+1;return Vi(l,w,N).join("")}function AD(t,n,a){if(t=Pt(t),t&&(a||n===r))return t.slice(0,uf(t)+1);if(!t||!(n=Br(n)))return t;var l=ii(t),g=af(l,ii(n))+1;return Vi(l,0,g).join("")}function RD(t,n,a){if(t=Pt(t),t&&(a||n===r))return t.replace(Wa,"");if(!t||!(n=Br(n)))return t;var l=ii(t),g=of(l,ii(n));return Vi(l,g).join("")}function ND(t,n){var a=xw,l=Sw;if(jt(n)){var g="separator"in n?n.separator:g;a="length"in n?Xe(n.length):a,l="omission"in n?Br(n.omission):l}t=Pt(t);var w=t.length;if(On(t)){var N=ii(t);w=N.length}if(a>=w)return t;var $=a-Pn(l);if($<1)return l;var k=N?Vi(N,0,$).join(""):t.slice(0,$);if(g===r)return k+l;if(N&&($+=k.length-$),Gc(g)){if(t.slice($).search(g)){var ve,me=k;for(g.global||(g=hc(g.source,Pt(Sl.exec(g))+"g")),g.lastIndex=0;ve=g.exec(me);)var _e=ve.index;k=k.slice(0,_e===r?$:_e)}}else if(t.indexOf(Br(g),$)!=$){var Oe=k.lastIndexOf(g);Oe>-1&&(k=k.slice(0,Oe))}return k+l}function TD(t){return t=Pt(t),t&&Vw.test(t)?t.replace(Dl,cb):t}var FD=Un(function(t,n,a){return t+(a?" ":"")+n.toUpperCase()}),Qc=Qf("toUpperCase");function Jd(t,n,a){return t=Pt(t),n=a?r:n,n===r?ib(t)?lb(t):G_(t):t.match(n)||[]}var Yd=nt(function(t,n){try{return Mr(t,r,n)}catch(a){return Wc(a)?a:new Je(a)}}),UD=Oi(function(t,n){return qr(n,function(a){a=pi(a),xi(t,a,qc(t[a],t))}),t});function LD(t){var n=t==null?0:t.length,a=Ke();return t=n?Mt(t,function(l){if(typeof l[1]!="function")throw new kr(v);return[a(l[0]),l[1]]}):[],nt(function(l){for(var g=-1;++g<n;){var w=t[g];if(Mr(w[0],this,l))return Mr(w[1],this,l)}})}function MD(t){return cE(Gr(t,te))}function Xc(t){return function(){return t}}function jD(t,n){return t==null||t!==t?n:t}var BD=Zf(),$D=Zf(!0);function Fr(t){return t}function Zc(t){return Cf(typeof t=="function"?t:Gr(t,te))}function zD(t){return Rf(Gr(t,te))}function HD(t,n){return Nf(t,Gr(n,te))}var KD=nt(function(t,n){return function(a){return gs(a,t,n)}}),VD=nt(function(t,n){return function(a){return gs(t,a,n)}});function eu(t,n,a){var l=lr(n),g=xo(n,l);a==null&&!(jt(n)&&(g.length||!l.length))&&(a=n,n=t,t=this,g=xo(n,lr(n)));var w=!(jt(a)&&"chain"in a)||!!a.chain,N=Ci(t);return qr(g,function($){var k=n[$];t[$]=k,N&&(t.prototype[$]=function(){var ve=this.__chain__;if(w||ve){var me=t(this.__wrapped__),_e=me.__actions__=Rr(this.__actions__);return _e.push({func:k,args:arguments,thisArg:t}),me.__chain__=ve,me}return k.apply(t,ji([this.value()],arguments))})}),t}function qD(){return dr._===this&&(dr._=yb),this}function tu(){}function kD(t){return t=Xe(t),nt(function(n){return Tf(n,t)})}var WD=Nc(Mt),GD=Nc(Zl),JD=Nc(ic);function Qd(t){return Bc(t)?nc(pi(t)):xE(t)}function YD(t){return function(n){return t==null?r:sn(t,n)}}var QD=td(),XD=td(!0);function ru(){return[]}function iu(){return!1}function ZD(){return{}}function e5(){return""}function t5(){return!0}function r5(t,n){if(t=Xe(t),t<1||t>Li)return[];var a=li,l=vr(t,li);n=Ke(n),t-=li;for(var g=ac(l,n);++a<t;)n(a);return g}function i5(t){return Qe(t)?Mt(t,pi):$r(t)?[t]:Rr(yd(Pt(t)))}function n5(t){var n=++gb;return Pt(t)+n}var s5=Ro(function(t,n){return t+n},0),o5=Tc("ceil"),a5=Ro(function(t,n){return t/n},1),c5=Tc("floor");function u5(t){return t&&t.length?Io(t,Fr,mc):r}function h5(t,n){return t&&t.length?Io(t,Ke(n,2),mc):r}function l5(t){return rf(t,Fr)}function f5(t,n){return rf(t,Ke(n,2))}function d5(t){return t&&t.length?Io(t,Fr,Ec):r}function p5(t,n){return t&&t.length?Io(t,Ke(n,2),Ec):r}var g5=Ro(function(t,n){return t*n},1),v5=Tc("round"),y5=Ro(function(t,n){return t-n},0);function m5(t){return t&&t.length?oc(t,Fr):0}function w5(t,n){return t&&t.length?oc(t,Ke(n,2)):0}return y.after=z6,y.ary=Pd,y.assign=P2,y.assignIn=Hd,y.assignInWith=Vo,y.assignWith=C2,y.at=A2,y.before=Cd,y.bind=qc,y.bindAll=UD,y.bindKey=Ad,y.castArray=Z6,y.chain=xd,y.chunk=c3,y.compact=u3,y.concat=h3,y.cond=LD,y.conforms=MD,y.constant=Xc,y.countBy=m6,y.create=R2,y.curry=Rd,y.curryRight=Nd,y.debounce=Td,y.defaults=N2,y.defaultsDeep=T2,y.defer=H6,y.delay=K6,y.difference=l3,y.differenceBy=f3,y.differenceWith=d3,y.drop=p3,y.dropRight=g3,y.dropRightWhile=v3,y.dropWhile=y3,y.fill=m3,y.filter=_6,y.flatMap=D6,y.flatMapDeep=I6,y.flatMapDepth=x6,y.flatten=bd,y.flattenDeep=w3,y.flattenDepth=_3,y.flip=V6,y.flow=BD,y.flowRight=$D,y.fromPairs=b3,y.functions=$2,y.functionsIn=z2,y.groupBy=S6,y.initial=D3,y.intersection=I3,y.intersectionBy=x3,y.intersectionWith=S3,y.invert=K2,y.invertBy=V2,y.invokeMap=P6,y.iteratee=Zc,y.keyBy=C6,y.keys=lr,y.keysIn=Tr,y.map=jo,y.mapKeys=k2,y.mapValues=W2,y.matches=zD,y.matchesProperty=HD,y.memoize=$o,y.merge=G2,y.mergeWith=Kd,y.method=KD,y.methodOf=VD,y.mixin=eu,y.negate=zo,y.nthArg=kD,y.omit=J2,y.omitBy=Y2,y.once=q6,y.orderBy=A6,y.over=WD,y.overArgs=k6,y.overEvery=GD,y.overSome=JD,y.partial=kc,y.partialRight=Fd,y.partition=R6,y.pick=Q2,y.pickBy=Vd,y.property=Qd,y.propertyOf=YD,y.pull=A3,y.pullAll=Dd,y.pullAllBy=R3,y.pullAllWith=N3,y.pullAt=T3,y.range=QD,y.rangeRight=XD,y.rearg=W6,y.reject=F6,y.remove=F3,y.rest=G6,y.reverse=Kc,y.sampleSize=L6,y.set=Z2,y.setWith=eD,y.shuffle=M6,y.slice=U3,y.sortBy=$6,y.sortedUniq=H3,y.sortedUniqBy=K3,y.split=DD,y.spread=J6,y.tail=V3,y.take=q3,y.takeRight=k3,y.takeRightWhile=W3,y.takeWhile=G3,y.tap=u6,y.throttle=Y6,y.thru=Mo,y.toArray=Bd,y.toPairs=qd,y.toPairsIn=kd,y.toPath=i5,y.toPlainObject=zd,y.transform=tD,y.unary=Q6,y.union=J3,y.unionBy=Y3,y.unionWith=Q3,y.uniq=X3,y.uniqBy=Z3,y.uniqWith=e6,y.unset=rD,y.unzip=Vc,y.unzipWith=Id,y.update=iD,y.updateWith=nD,y.values=jn,y.valuesIn=sD,y.without=t6,y.words=Jd,y.wrap=X6,y.xor=r6,y.xorBy=i6,y.xorWith=n6,y.zip=s6,y.zipObject=o6,y.zipObjectDeep=a6,y.zipWith=c6,y.entries=qd,y.entriesIn=kd,y.extend=Hd,y.extendWith=Vo,eu(y,y),y.add=s5,y.attempt=Yd,y.camelCase=uD,y.capitalize=Wd,y.ceil=o5,y.clamp=oD,y.clone=e2,y.cloneDeep=r2,y.cloneDeepWith=i2,y.cloneWith=t2,y.conformsTo=n2,y.deburr=Gd,y.defaultTo=jD,y.divide=a5,y.endsWith=hD,y.eq=si,y.escape=lD,y.escapeRegExp=fD,y.every=w6,y.find=b6,y.findIndex=wd,y.findKey=F2,y.findLast=E6,y.findLastIndex=_d,y.findLastKey=U2,y.floor=c5,y.forEach=Sd,y.forEachRight=Od,y.forIn=L2,y.forInRight=M2,y.forOwn=j2,y.forOwnRight=B2,y.get=Jc,y.gt=s2,y.gte=o2,y.has=H2,y.hasIn=Yc,y.head=Ed,y.identity=Fr,y.includes=O6,y.indexOf=E3,y.inRange=aD,y.invoke=q2,y.isArguments=cn,y.isArray=Qe,y.isArrayBuffer=a2,y.isArrayLike=Nr,y.isArrayLikeObject=Ht,y.isBoolean=c2,y.isBuffer=qi,y.isDate=u2,y.isElement=h2,y.isEmpty=l2,y.isEqual=f2,y.isEqualWith=d2,y.isError=Wc,y.isFinite=p2,y.isFunction=Ci,y.isInteger=Ud,y.isLength=Ho,y.isMap=Ld,y.isMatch=g2,y.isMatchWith=v2,y.isNaN=y2,y.isNative=m2,y.isNil=_2,y.isNull=w2,y.isNumber=Md,y.isObject=jt,y.isObjectLike=$t,y.isPlainObject=bs,y.isRegExp=Gc,y.isSafeInteger=b2,y.isSet=jd,y.isString=Ko,y.isSymbol=$r,y.isTypedArray=Mn,y.isUndefined=E2,y.isWeakMap=D2,y.isWeakSet=I2,y.join=O3,y.kebabCase=dD,y.last=Yr,y.lastIndexOf=P3,y.lowerCase=pD,y.lowerFirst=gD,y.lt=x2,y.lte=S2,y.max=u5,y.maxBy=h5,y.mean=l5,y.meanBy=f5,y.min=d5,y.minBy=p5,y.stubArray=ru,y.stubFalse=iu,y.stubObject=ZD,y.stubString=e5,y.stubTrue=t5,y.multiply=g5,y.nth=C3,y.noConflict=qD,y.noop=tu,y.now=Bo,y.pad=vD,y.padEnd=yD,y.padStart=mD,y.parseInt=wD,y.random=cD,y.reduce=N6,y.reduceRight=T6,y.repeat=_D,y.replace=bD,y.result=X2,y.round=v5,y.runInContext=K,y.sample=U6,y.size=j6,y.snakeCase=ED,y.some=B6,y.sortedIndex=L3,y.sortedIndexBy=M3,y.sortedIndexOf=j3,y.sortedLastIndex=B3,y.sortedLastIndexBy=$3,y.sortedLastIndexOf=z3,y.startCase=ID,y.startsWith=xD,y.subtract=y5,y.sum=m5,y.sumBy=w5,y.template=SD,y.times=r5,y.toFinite=Ai,y.toInteger=Xe,y.toLength=$d,y.toLower=OD,y.toNumber=Qr,y.toSafeInteger=O2,y.toString=Pt,y.toUpper=PD,y.trim=CD,y.trimEnd=AD,y.trimStart=RD,y.truncate=ND,y.unescape=TD,y.uniqueId=n5,y.upperCase=FD,y.upperFirst=Qc,y.each=Sd,y.eachRight=Od,y.first=Ed,eu(y,function(){var t={};return fi(y,function(n,a){Ct.call(y.prototype,a)||(t[a]=n)}),t}(),{chain:!1}),y.VERSION=o,qr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){y[t].placeholder=y}),qr(["drop","take"],function(t,n){ht.prototype[t]=function(a){a=a===r?1:Jt(Xe(a),0);var l=this.__filtered__&&!n?new ht(this):this.clone();return l.__filtered__?l.__takeCount__=vr(a,l.__takeCount__):l.__views__.push({size:vr(a,li),type:t+(l.__dir__<0?"Right":"")}),l},ht.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),qr(["filter","map","takeWhile"],function(t,n){var a=n+1,l=a==_l||a==Aw;ht.prototype[t]=function(g){var w=this.clone();return w.__iteratees__.push({iteratee:Ke(g,3),type:a}),w.__filtered__=w.__filtered__||l,w}}),qr(["head","last"],function(t,n){var a="take"+(n?"Right":"");ht.prototype[t]=function(){return this[a](1).value()[0]}}),qr(["initial","tail"],function(t,n){var a="drop"+(n?"":"Right");ht.prototype[t]=function(){return this.__filtered__?new ht(this):this[a](1)}}),ht.prototype.compact=function(){return this.filter(Fr)},ht.prototype.find=function(t){return this.filter(t).head()},ht.prototype.findLast=function(t){return this.reverse().find(t)},ht.prototype.invokeMap=nt(function(t,n){return typeof t=="function"?new ht(this):this.map(function(a){return gs(a,t,n)})}),ht.prototype.reject=function(t){return this.filter(zo(Ke(t)))},ht.prototype.slice=function(t,n){t=Xe(t);var a=this;return a.__filtered__&&(t>0||n<0)?new ht(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),n!==r&&(n=Xe(n),a=n<0?a.dropRight(-n):a.take(n-t)),a)},ht.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ht.prototype.toArray=function(){return this.take(li)},fi(ht.prototype,function(t,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),g=y[l?"take"+(n=="last"?"Right":""):n],w=l||/^find/.test(n);g&&(y.prototype[n]=function(){var N=this.__wrapped__,$=l?[1]:arguments,k=N instanceof ht,ve=$[0],me=k||Qe(N),_e=function(ct){var gt=g.apply(y,ji([ct],$));return l&&Oe?gt[0]:gt};me&&a&&typeof ve=="function"&&ve.length!=1&&(k=me=!1);var Oe=this.__chain__,je=!!this.__actions__.length,qe=w&&!Oe,rt=k&&!je;if(!w&&me){N=rt?N:new ht(this);var ke=t.apply(N,$);return ke.__actions__.push({func:Mo,args:[_e],thisArg:r}),new Wr(ke,Oe)}return qe&&rt?t.apply(this,$):(ke=this.thru(_e),qe?l?ke.value()[0]:ke.value():ke)})}),qr(["pop","push","shift","sort","splice","unshift"],function(t){var n=co[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",l=/^(?:pop|shift)$/.test(t);y.prototype[t]=function(){var g=arguments;if(l&&!this.__chain__){var w=this.value();return n.apply(Qe(w)?w:[],g)}return this[a](function(N){return n.apply(Qe(N)?N:[],g)})}}),fi(ht.prototype,function(t,n){var a=y[n];if(a){var l=a.name+"";Ct.call(Nn,l)||(Nn[l]=[]),Nn[l].push({name:n,func:a})}}),Nn[Ao(r,We).name]=[{name:"wrapper",func:r}],ht.prototype.clone=Tb,ht.prototype.reverse=Fb,ht.prototype.value=Ub,y.prototype.at=h6,y.prototype.chain=l6,y.prototype.commit=f6,y.prototype.next=d6,y.prototype.plant=g6,y.prototype.reverse=v6,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=y6,y.prototype.first=y.prototype.head,cs&&(y.prototype[cs]=p6),y},Cn=fb();Zi?((Zi.exports=Cn)._=Cn,Za._=Cn):dr._=Cn}).call(Xn)})(Pa,Pa.exports);var K1=Object.defineProperty,V1=Object.defineProperties,q1=Object.getOwnPropertyDescriptors,ul=Object.getOwnPropertySymbols,k1=Object.prototype.hasOwnProperty,W1=Object.prototype.propertyIsEnumerable,hl=(s,e,r)=>e in s?K1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Gs=(s,e)=>{for(var r in e||(e={}))k1.call(e,r)&&hl(s,r,e[r]);if(ul)for(var r of ul(e))W1.call(e,r)&&hl(s,r,e[r]);return s},G1=(s,e)=>V1(s,q1(e));function Ui(s,e,r){var o;const u=wu(s);return((o=e.rpcMap)==null?void 0:o[u.reference])||`${H1}?chainId=${u.namespace}:${u.reference}&projectId=${r}`}function Qi(s){return s.includes(":")?s.split(":")[1]:s}function ll(s){return s.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function J1(s,e){const r=Object.keys(e.namespaces).filter(u=>u.includes(s));if(!r.length)return[];const o=[];return r.forEach(u=>{const d=e.namespaces[u].accounts;o.push(...d)}),o}function fl(s={},e={}){const r=dl(s),o=dl(e);return Pa.exports.merge(r,o)}function dl(s){var e,r,o,u;const d={};if(!mn(s))return d;for(const[v,A]of Object.entries(s)){const z=Fs(v)?[v]:A.chains,R=A.methods||[],W=A.events||[],te=A.rpcMap||{},pe=yn(v);d[pe]=G1(Gs(Gs({},d[pe]),A),{chains:ci(z,(e=d[pe])==null?void 0:e.chains),methods:ci(R,(r=d[pe])==null?void 0:r.methods),events:ci(W,(o=d[pe])==null?void 0:o.events),rpcMap:Gs(Gs({},te),(u=d[pe])==null?void 0:u.rpcMap)})}return d}function Y1(s){return s.includes(":")?s.split(":")[2]:s}function Q1(s){const e={};for(const[r,o]of Object.entries(s)){const u=o.methods||[],d=o.events||[],v=o.accounts||[],A=Fs(r)?[r]:o.chains?o.chains:ll(o.accounts);e[r]={chains:A,methods:u,events:d,accounts:v}}return e}function Ca(s){return typeof s=="number"?s:s.includes("0x")?parseInt(s,16):(s=s.includes(":")?s.split(":")[1]:s,isNaN(Number(s))?s:Number(s))}const pl={},Lt=s=>pl[s],Aa=(s,e)=>{pl[s]=e};class X1{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Qi(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class Z1{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const o=r||Ui(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new ol(o,Lt("disableProviderPing")))}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=parseInt(Qi(r));e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,o;let u=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;const d=parseInt(u,16);if(this.isChainApproved(d))this.setDefaultChain(`${d}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:u}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${d}`);else throw new Error(`Failed to switch to chain 'eip155:${d}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class ew{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Qi(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class tw{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Qi(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class rw{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const o=this.getCardanoRPCUrl(r),u=Qi(r);e[u]=this.createHttpProvider(u,o)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||this.getCardanoRPCUrl(e);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class iw{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Qi(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class nw{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Qi(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new yi(new Yi(o,Lt("disableProviderPing")))}}class sw{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Lt("events"),this.client=Lt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const o=r||Ui(`${this.name}:${e}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,o)}this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;e[r]=this.createHttpProvider(r,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||Ui(e,this.namespace);return typeof o>"u"?void 0:new yi(new Yi(o,Lt("disableProviderPing")))}}var ow=Object.defineProperty,aw=Object.defineProperties,cw=Object.getOwnPropertyDescriptors,gl=Object.getOwnPropertySymbols,uw=Object.prototype.hasOwnProperty,hw=Object.prototype.propertyIsEnumerable,vl=(s,e,r)=>e in s?ow(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Js=(s,e)=>{for(var r in e||(e={}))uw.call(e,r)&&vl(s,r,e[r]);if(gl)for(var r of gl(e))hw.call(e,r)&&vl(s,r,e[r]);return s},Ra=(s,e)=>aw(s,cw(e));class Na{constructor(e){this.events=new(Ee()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,pt.pino)((0,pt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||al})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Na(e);return await r.initialize(),r}async request(e,r,o){const[u,d]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(u).request({request:Js({},e),chainId:`${u}:${d}`,topic:this.session.topic,expiry:o})}sendAsync(e,r,o,u){const d=new Date().getTime();this.request(e,o,u).then(v=>r(null,Hs(d,v))).catch(v=>r(v,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Ut("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:u}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await u().then(d=>{this.session=d;const v=Q1(d.namespaces);this.namespaces=fl(this.namespaces,v),this.persist("namespaces",this.namespaces)}).catch(d=>{if(d.message!==el)throw d;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[o,u]=this.validateChain(e);this.getProvider(o).setDefaultChain(u,r)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ui(r)){for(const o of r)e.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Oa.init({logger:this.providerOpts.logger||al,relayUrl:this.providerOpts.relayUrl||B1,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>yn(r)))];Aa("client",this.client),Aa("events",this.events),Aa("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const o=J1(r,this.session),u=ll(o),d=fl(this.namespaces,this.optionalNamespaces),v=Ra(Js({},d[r]),{accounts:o,chains:u});switch(r){case"eip155":this.rpcProviders[r]=new Z1({namespace:v});break;case"solana":this.rpcProviders[r]=new ew({namespace:v});break;case"cosmos":this.rpcProviders[r]=new tw({namespace:v});break;case"polkadot":this.rpcProviders[r]=new X1({namespace:v});break;case"cip34":this.rpcProviders[r]=new rw({namespace:v});break;case"elrond":this.rpcProviders[r]=new iw({namespace:v});break;case"multiversx":this.rpcProviders[r]=new nw({namespace:v});break;case"near":this.rpcProviders[r]=new sw({namespace:v});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:o}=r;if(o.name==="accountsChanged"){const u=o.data;u&&ui(u)&&this.events.emit("accountsChanged",u.map(Y1))}else if(o.name==="chainChanged"){const u=r.chainId,d=r.event.data,v=yn(u),A=Ca(u)!==Ca(d)?`${v}:${Ca(d)}`:u;this.onChainChanged(A)}else this.events.emit(o.name,o.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var o;const{namespaces:u}=r,d=(o=this.client)==null?void 0:o.session.get(e);this.session=Ra(Js({},d),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ra(Js({},Ut("USER_DISCONNECTED")),{data:e.topic}))}),this.on(bi.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:o,sessionProperties:u}=e;r&&Object.keys(r).length&&(this.namespaces=r),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=u,this.persist("namespaces",r),this.persist("optionalNamespaces",o)}validateChain(e){const[r,o]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,o];if(r&&!Object.keys(this.namespaces||{}).map(v=>yn(v)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&o)return[r,o];const u=yn(Object.keys(this.namespaces)[0]),d=this.rpcProviders[u].getDefaultChain();return[u,d]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[o,u]=this.validateChain(e);u&&(r||this.getProvider(o).setDefaultChain(u),this.namespaces[o]?this.namespaces[o].defaultChain=u:this.namespaces[`${o}:${u}`]?this.namespaces[`${o}:${u}`].defaultChain=u:this.namespaces[`${o}:${u}`]={defaultChain:u},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${cl}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${cl}/${e}`)}}const lw=Na,fw="wc",dw="ethereum_provider",pw=`${fw}@2:${dw}:`,gw="https://rpc.walletconnect.com/v1/",Ta=["eth_sendTransaction","personal_sign"],vw=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Fa=["chainChanged","accountsChanged"],yw=["chainChanged","accountsChanged","message","disconnect","connect"];var mw=Object.defineProperty,ww=Object.defineProperties,_w=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertySymbols,bw=Object.prototype.hasOwnProperty,Ew=Object.prototype.propertyIsEnumerable,ml=(s,e,r)=>e in s?mw(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Zn=(s,e)=>{for(var r in e||(e={}))bw.call(e,r)&&ml(s,r,e[r]);if(yl)for(var r of yl(e))Ew.call(e,r)&&ml(s,r,e[r]);return s},wl=(s,e)=>ww(s,_w(e));function Ys(s){return Number(s[0].split(":")[1])}function Ua(s){return`0x${s.toString(16)}`}function Dw(s){const{chains:e,optionalChains:r,methods:o,optionalMethods:u,events:d,optionalEvents:v,rpcMap:A}=s;if(!ui(e))throw new Error("Invalid chains");const z={chains:e,methods:o||Ta,events:d||Fa,rpcMap:Zn({},e.length?{[Ys(e)]:A[Ys(e)]}:{})},R=d==null?void 0:d.filter(Ne=>!Fa.includes(Ne)),W=o==null?void 0:o.filter(Ne=>!Ta.includes(Ne));if(!r&&!v&&!u&&!(R!=null&&R.length)&&!(W!=null&&W.length))return{required:e.length?z:void 0};const te=(R==null?void 0:R.length)&&(W==null?void 0:W.length)||!r,pe={chains:[...new Set(te?z.chains.concat(r||[]):r)],methods:[...new Set(z.methods.concat(u!=null&&u.length?u:vw))],events:[...new Set(z.events.concat(v!=null&&v.length?v:yw))],rpcMap:A};return{required:e.length?z:void 0,optional:r.length?pe:void 0}}class La{constructor(){this.events=new ce.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=pw,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new La;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,o){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),o)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:o}=Dw(this.rpc);try{const u=await new Promise(async(v,A)=>{var z;this.rpc.showQrModal&&((z=this.modal)==null||z.subscribeModal(R=>{!R.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),A(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(wl(Zn({namespaces:Zn({},r&&{[this.namespace]:r})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(R=>{v(R)}).catch(R=>{A(new Error(R.message))})});if(!u)return;const d=qp(u.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:d),this.setAccounts(d),this.events.emit("connect",{chainId:Ua(this.chainId)})}catch(u){throw this.signer.logger.error(u),u}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:o}=r;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Ua(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",wl(Zn({},Ut("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,o;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(o=this.modal)==null||o.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Ua(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,o,u]=e.split(":");return{chainId:`${r}:${o}`,address:u}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,o;const u=(r=e==null?void 0:e.chains)!=null?r:[],d=(o=e==null?void 0:e.optionalChains)!=null?o:[],v=u.concat(d);if(!v.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const A=u.length?(e==null?void 0:e.methods)||Ta:[],z=u.length?(e==null?void 0:e.events)||Fa:[],R=(e==null?void 0:e.optionalMethods)||[],W=(e==null?void 0:e.optionalEvents)||[],te=(e==null?void 0:e.rpcMap)||this.buildRpcMap(v,e.projectId),pe=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:u==null?void 0:u.map(Ne=>this.formatChainId(Ne)),optionalChains:d.map(Ne=>this.formatChainId(Ne)),methods:A,events:z,optionalMethods:R,optionalEvents:W,rpcMap:te,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:pe,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const o={};return e.forEach(u=>{o[u]=this.getRpcUrl(u,r)}),o}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Ys(this.rpc.chains):Ys(this.rpc.optionalChains),this.signer=await lw.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:o}=await P.e(5983).then(P.bind(P,5983));r=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Zn({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:o,rpcMap:u}=e;r&&ui(r)&&(this.rpc.chains=r.map(d=>this.formatChainId(d)),r.forEach(d=>{this.rpc.rpcMap[d]=(u==null?void 0:u[d])||this.getRpcUrl(d)})),o&&ui(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(d=>this.formatChainId(d)),o.forEach(d=>{this.rpc.rpcMap[d]=(u==null?void 0:u[d])||this.getRpcUrl(d)}))}getRpcUrl(e,r){var o;return((o=this.rpc.rpcMap)==null?void 0:o[e])||`${gw}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const Iw=La},36900:function(Ae,p,P){"use strict";P.d(p,{q:function(){return B}});class B{}},15890:function(Ae,p,P){"use strict";P.r(p),P.d(p,{IEvents:function(){return B.q}});var B=P(36900)},15782:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HEARTBEAT_EVENTS=p.HEARTBEAT_INTERVAL=void 0;const B=P(46196);p.HEARTBEAT_INTERVAL=B.FIVE_SECONDS,p.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},95635:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),P(92234).__exportStar(P(15782),p)},20538:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.HeartBeat=void 0;const B=P(92234),oe=P(72100),ue=P(46196),ge=P(88490),M=P(95635);class Y extends ge.IHeartBeat{constructor(T){super(T),this.events=new oe.EventEmitter,this.interval=M.HEARTBEAT_INTERVAL,this.interval=(T==null?void 0:T.interval)||M.HEARTBEAT_INTERVAL}static init(T){return B.__awaiter(this,void 0,void 0,function*(){const C=new Y(T);return yield C.init(),C})}init(){return B.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(T,C){this.events.on(T,C)}once(T,C){this.events.once(T,C)}off(T,C){this.events.off(T,C)}removeListener(T,C){this.events.removeListener(T,C)}initialize(){return B.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ue.toMiliseconds(this.interval))})}pulse(){this.events.emit(M.HEARTBEAT_EVENTS.pulse)}}p.HeartBeat=Y},37875:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});const B=P(92234);B.__exportStar(P(20538),p),B.__exportStar(P(88490),p),B.__exportStar(P(95635),p)},54554:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IHeartBeat=void 0;const B=P(15890);class oe extends B.IEvents{constructor(ge){super()}}p.IHeartBeat=oe},88490:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),P(92234).__exportStar(P(54554),p)},42392:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.PINO_CUSTOM_CONTEXT_KEY=p.PINO_LOGGER_DEFAULTS=void 0,p.PINO_LOGGER_DEFAULTS={level:"info"},p.PINO_CUSTOM_CONTEXT_KEY="custom_context"},71315:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.pino=void 0;const B=P(92234),oe=B.__importDefault(P(86984));Object.defineProperty(p,"pino",{enumerable:!0,get:function(){return oe.default}}),B.__exportStar(P(42392),p),B.__exportStar(P(48992),p)},48992:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.generateChildLogger=p.formatChildLoggerContext=p.getLoggerContext=p.setBrowserLoggerContext=p.getBrowserLoggerContext=p.getDefaultLoggerOptions=void 0;const B=P(42392);function oe(T){return Object.assign(Object.assign({},T),{level:(T==null?void 0:T.level)||B.PINO_LOGGER_DEFAULTS.level})}p.getDefaultLoggerOptions=oe;function ue(T,C=B.PINO_CUSTOM_CONTEXT_KEY){return T[C]||""}p.getBrowserLoggerContext=ue;function ge(T,C,F=B.PINO_CUSTOM_CONTEXT_KEY){return T[F]=C,T}p.setBrowserLoggerContext=ge;function M(T,C=B.PINO_CUSTOM_CONTEXT_KEY){let F="";return typeof T.bindings>"u"?F=ue(T,C):F=T.bindings().context||"",F}p.getLoggerContext=M;function Y(T,C,F=B.PINO_CUSTOM_CONTEXT_KEY){const ee=M(T,F);return ee.trim()?`${ee}/${C}`:C}p.formatChildLoggerContext=Y;function j(T,C,F=B.PINO_CUSTOM_CONTEXT_KEY){const ee=Y(T,C,F),ae=T.child({context:ee});return ge(ae,ee,F)}p.generateChildLogger=j},87993:function(){},42995:function(){},98319:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});const B=P(92234);B.__exportStar(P(93497),p),B.__exportStar(P(72879),p)},93497:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_THOUSAND=p.ONE_HUNDRED=void 0,p.ONE_HUNDRED=100,p.ONE_THOUSAND=1e3},72879:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.ONE_YEAR=p.FOUR_WEEKS=p.THREE_WEEKS=p.TWO_WEEKS=p.ONE_WEEK=p.THIRTY_DAYS=p.SEVEN_DAYS=p.FIVE_DAYS=p.THREE_DAYS=p.ONE_DAY=p.TWENTY_FOUR_HOURS=p.TWELVE_HOURS=p.SIX_HOURS=p.THREE_HOURS=p.ONE_HOUR=p.SIXTY_MINUTES=p.THIRTY_MINUTES=p.TEN_MINUTES=p.FIVE_MINUTES=p.ONE_MINUTE=p.SIXTY_SECONDS=p.THIRTY_SECONDS=p.TEN_SECONDS=p.FIVE_SECONDS=p.ONE_SECOND=void 0,p.ONE_SECOND=1,p.FIVE_SECONDS=5,p.TEN_SECONDS=10,p.THIRTY_SECONDS=30,p.SIXTY_SECONDS=60,p.ONE_MINUTE=p.SIXTY_SECONDS,p.FIVE_MINUTES=p.ONE_MINUTE*5,p.TEN_MINUTES=p.ONE_MINUTE*10,p.THIRTY_MINUTES=p.ONE_MINUTE*30,p.SIXTY_MINUTES=p.ONE_MINUTE*60,p.ONE_HOUR=p.SIXTY_MINUTES,p.THREE_HOURS=p.ONE_HOUR*3,p.SIX_HOURS=p.ONE_HOUR*6,p.TWELVE_HOURS=p.ONE_HOUR*12,p.TWENTY_FOUR_HOURS=p.ONE_HOUR*24,p.ONE_DAY=p.TWENTY_FOUR_HOURS,p.THREE_DAYS=p.ONE_DAY*3,p.FIVE_DAYS=p.ONE_DAY*5,p.SEVEN_DAYS=p.ONE_DAY*7,p.THIRTY_DAYS=p.ONE_DAY*30,p.ONE_WEEK=p.SEVEN_DAYS,p.TWO_WEEKS=p.ONE_WEEK*2,p.THREE_WEEKS=p.ONE_WEEK*3,p.FOUR_WEEKS=p.ONE_WEEK*4,p.ONE_YEAR=p.ONE_DAY*365},46196:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});const B=P(92234);B.__exportStar(P(20728),p),B.__exportStar(P(51215),p),B.__exportStar(P(88244),p),B.__exportStar(P(98319),p)},88244:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),P(92234).__exportStar(P(74218),p)},74218:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.IWatch=void 0;class P{}p.IWatch=P},40658:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.fromMiliseconds=p.toMiliseconds=void 0;const B=P(98319);function oe(ge){return ge*B.ONE_THOUSAND}p.toMiliseconds=oe;function ue(ge){return Math.floor(ge/B.ONE_THOUSAND)}p.fromMiliseconds=ue},52993:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.delay=void 0;function P(B){return new Promise(oe=>{setTimeout(()=>{oe(!0)},B)})}p.delay=P},20728:function(Ae,p,P){"use strict";Object.defineProperty(p,"__esModule",{value:!0});const B=P(92234);B.__exportStar(P(52993),p),B.__exportStar(P(40658),p)},51215:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.Watch=void 0;class P{constructor(){this.timestamps=new Map}start(oe){if(this.timestamps.has(oe))throw new Error(`Watch already started for label: ${oe}`);this.timestamps.set(oe,{started:Date.now()})}stop(oe){const ue=this.get(oe);if(typeof ue.elapsed<"u")throw new Error(`Watch already stopped for label: ${oe}`);const ge=Date.now()-ue.started;this.timestamps.set(oe,{started:ue.started,elapsed:ge})}get(oe){const ue=this.timestamps.get(oe);if(typeof ue>"u")throw new Error(`No timestamp found for label: ${oe}`);return ue}elapsed(oe){const ue=this.get(oe);return ue.elapsed||Date.now()-ue.started}}p.Watch=P,p.default=P},73079:function(Ae,p){"use strict";Object.defineProperty(p,"__esModule",{value:!0}),p.getLocalStorage=p.getLocalStorageOrThrow=p.getCrypto=p.getCryptoOrThrow=p.getLocation=p.getLocationOrThrow=p.getNavigator=p.getNavigatorOrThrow=p.getDocument=p.getDocumentOrThrow=p.getFromWindowOrThrow=p.getFromWindow=void 0;function P(ae){let G;return typeof window<"u"&&typeof window[ae]<"u"&&(G=window[ae]),G}p.getFromWindow=P;function B(ae){const G=P(ae);if(!G)throw new Error(`${ae} is not defined in Window`);return G}p.getFromWindowOrThrow=B;function oe(){return B("document")}p.getDocumentOrThrow=oe;function ue(){return P("document")}p.getDocument=ue;function ge(){return B("navigator")}p.getNavigatorOrThrow=ge;function M(){return P("navigator")}p.getNavigator=M;function Y(){return B("location")}p.getLocationOrThrow=Y;function j(){return P("location")}p.getLocation=j;function T(){return B("crypto")}p.getCryptoOrThrow=T;function C(){return P("crypto")}p.getCrypto=C;function F(){return B("localStorage")}p.getLocalStorageOrThrow=F;function ee(){return P("localStorage")}p.getLocalStorage=ee},42669:function(Ae,p,P){"use strict";var B;B={value:!0},p.D=void 0;const oe=P(73079);function ue(){let ge,M;try{ge=oe.getDocumentOrThrow(),M=oe.getLocationOrThrow()}catch{return null}function Y(){const ce=ge.getElementsByTagName("link"),Ee=[];for(let be=0;be<ce.length;be++){const Re=ce[be],Be=Re.getAttribute("rel");if(Be&&Be.toLowerCase().indexOf("icon")>-1){const Le=Re.getAttribute("href");if(Le)if(Le.toLowerCase().indexOf("https:")===-1&&Le.toLowerCase().indexOf("http:")===-1&&Le.indexOf("//")!==0){let ye=M.protocol+"//"+M.host;if(Le.indexOf("/")===0)ye+=Le;else{const we=M.pathname.split("/");we.pop();const m=we.join("/");ye+=m+"/"+Le}Ee.push(ye)}else if(Le.indexOf("//")===0){const ye=M.protocol+Le;Ee.push(ye)}else Ee.push(Le)}}return Ee}function j(...ce){const Ee=ge.getElementsByTagName("meta");for(let be=0;be<Ee.length;be++){const Re=Ee[be],Be=["itemprop","property","name"].map(Le=>Re.getAttribute(Le)).filter(Le=>Le?ce.includes(Le):!1);if(Be.length&&Be){const Le=Re.getAttribute("content");if(Le)return Le}}return""}function T(){let ce=j("name","og:site_name","og:title","twitter:title");return ce||(ce=ge.title),ce}function C(){return j("description","og:description","twitter:description","keywords")}const F=T(),ee=C(),ae=M.origin,G=Y();return{description:ee,url:ae,icons:G,name:F}}p.D=ue},52830:function(Ae,p){var P=typeof self<"u"?self:this,B=function(){function ue(){this.fetch=!1,this.DOMException=P.DOMException}return ue.prototype=P,new ue}();(function(ue){var ge=function(M){var Y={searchParams:"URLSearchParams"in ue,iterable:"Symbol"in ue&&"iterator"in Symbol,blob:"FileReader"in ue&&"Blob"in ue&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in ue,arrayBuffer:"ArrayBuffer"in ue};function j(D){return D&&DataView.prototype.isPrototypeOf(D)}if(Y.arrayBuffer)var T=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],C=ArrayBuffer.isView||function(D){return D&&T.indexOf(Object.prototype.toString.call(D))>-1};function F(D){if(typeof D!="string"&&(D=String(D)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(D))throw new TypeError("Invalid character in header field name");return D.toLowerCase()}function ee(D){return typeof D!="string"&&(D=String(D)),D}function ae(D){var E={next:function(){var I=D.shift();return{done:I===void 0,value:I}}};return Y.iterable&&(E[Symbol.iterator]=function(){return E}),E}function G(D){this.map={},D instanceof G?D.forEach(function(E,I){this.append(I,E)},this):Array.isArray(D)?D.forEach(function(E){this.append(E[0],E[1])},this):D&&Object.getOwnPropertyNames(D).forEach(function(E){this.append(E,D[E])},this)}G.prototype.append=function(D,E){D=F(D),E=ee(E);var I=this.map[D];this.map[D]=I?I+", "+E:E},G.prototype.delete=function(D){delete this.map[F(D)]},G.prototype.get=function(D){return D=F(D),this.has(D)?this.map[D]:null},G.prototype.has=function(D){return this.map.hasOwnProperty(F(D))},G.prototype.set=function(D,E){this.map[F(D)]=ee(E)},G.prototype.forEach=function(D,E){for(var I in this.map)this.map.hasOwnProperty(I)&&D.call(E,this.map[I],I,this)},G.prototype.keys=function(){var D=[];return this.forEach(function(E,I){D.push(I)}),ae(D)},G.prototype.values=function(){var D=[];return this.forEach(function(E){D.push(E)}),ae(D)},G.prototype.entries=function(){var D=[];return this.forEach(function(E,I){D.push([I,E])}),ae(D)},Y.iterable&&(G.prototype[Symbol.iterator]=G.prototype.entries);function ie(D){if(D.bodyUsed)return Promise.reject(new TypeError("Already read"));D.bodyUsed=!0}function ce(D){return new Promise(function(E,I){D.onload=function(){E(D.result)},D.onerror=function(){I(D.error)}})}function Ee(D){var E=new FileReader,I=ce(E);return E.readAsArrayBuffer(D),I}function be(D){var E=new FileReader,I=ce(E);return E.readAsText(D),I}function Re(D){for(var E=new Uint8Array(D),I=new Array(E.length),x=0;x<E.length;x++)I[x]=String.fromCharCode(E[x]);return I.join("")}function Be(D){if(D.slice)return D.slice(0);var E=new Uint8Array(D.byteLength);return E.set(new Uint8Array(D)),E.buffer}function Le(){return this.bodyUsed=!1,this._initBody=function(D){this._bodyInit=D,D?typeof D=="string"?this._bodyText=D:Y.blob&&Blob.prototype.isPrototypeOf(D)?this._bodyBlob=D:Y.formData&&FormData.prototype.isPrototypeOf(D)?this._bodyFormData=D:Y.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)?this._bodyText=D.toString():Y.arrayBuffer&&Y.blob&&j(D)?(this._bodyArrayBuffer=Be(D.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(D)||C(D))?this._bodyArrayBuffer=Be(D):this._bodyText=D=Object.prototype.toString.call(D):this._bodyText="",this.headers.get("content-type")||(typeof D=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Y.searchParams&&URLSearchParams.prototype.isPrototypeOf(D)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Y.blob&&(this.blob=function(){var D=ie(this);if(D)return D;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ie(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ee)}),this.text=function(){var D=ie(this);if(D)return D;if(this._bodyBlob)return be(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Re(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Y.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}var ye=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function we(D){var E=D.toUpperCase();return ye.indexOf(E)>-1?E:D}function m(D,E){E=E||{};var I=E.body;if(D instanceof m){if(D.bodyUsed)throw new TypeError("Already read");this.url=D.url,this.credentials=D.credentials,E.headers||(this.headers=new G(D.headers)),this.method=D.method,this.mode=D.mode,this.signal=D.signal,!I&&D._bodyInit!=null&&(I=D._bodyInit,D.bodyUsed=!0)}else this.url=String(D);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new G(E.headers)),this.method=we(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&I)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(I)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})};function h(D){var E=new FormData;return D.trim().split("&").forEach(function(I){if(I){var x=I.split("="),_=x.shift().replace(/\+/g," "),S=x.join("=").replace(/\+/g," ");E.append(decodeURIComponent(_),decodeURIComponent(S))}}),E}function b(D){var E=new G,I=D.replace(/\r?\n[\t ]+/g," ");return I.split(/\r?\n/).forEach(function(x){var _=x.split(":"),S=_.shift().trim();if(S){var Q=_.join(":").trim();E.append(S,Q)}}),E}Le.call(m.prototype);function q(D,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new G(E.headers),this.url=E.url||"",this._initBody(D)}Le.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new G(this.headers),url:this.url})},q.error=function(){var D=new q(null,{status:0,statusText:""});return D.type="error",D};var O=[301,302,303,307,308];q.redirect=function(D,E){if(O.indexOf(E)===-1)throw new RangeError("Invalid status code");return new q(null,{status:E,headers:{location:D}})},M.DOMException=ue.DOMException;try{new M.DOMException}catch{M.DOMException=function(E,I){this.message=E,this.name=I;var x=Error(E);this.stack=x.stack},M.DOMException.prototype=Object.create(Error.prototype),M.DOMException.prototype.constructor=M.DOMException}function H(D,E){return new Promise(function(I,x){var _=new m(D,E);if(_.signal&&_.signal.aborted)return x(new M.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function Q(){S.abort()}S.onload=function(){var J={status:S.status,statusText:S.statusText,headers:b(S.getAllResponseHeaders()||"")};J.url="responseURL"in S?S.responseURL:J.headers.get("X-Request-URL");var re="response"in S?S.response:S.responseText;I(new q(re,J))},S.onerror=function(){x(new TypeError("Network request failed"))},S.ontimeout=function(){x(new TypeError("Network request failed"))},S.onabort=function(){x(new M.DOMException("Aborted","AbortError"))},S.open(_.method,_.url,!0),_.credentials==="include"?S.withCredentials=!0:_.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&Y.blob&&(S.responseType="blob"),_.headers.forEach(function(J,re){S.setRequestHeader(re,J)}),_.signal&&(_.signal.addEventListener("abort",Q),S.onreadystatechange=function(){S.readyState===4&&_.signal.removeEventListener("abort",Q)}),S.send(typeof _._bodyInit>"u"?null:_._bodyInit)})}return H.polyfill=!0,ue.fetch||(ue.fetch=H,ue.Headers=G,ue.Request=m,ue.Response=q),M.Headers=G,M.Request=m,M.Response=q,M.fetch=H,Object.defineProperty(M,"__esModule",{value:!0}),M}({})})(B),B.fetch.ponyfill=!0,delete B.fetch.polyfill;var oe=B;p=oe.fetch,p.default=oe.fetch,p.fetch=oe.fetch,p.Headers=oe.Headers,p.Request=oe.Request,p.Response=oe.Response,Ae.exports=p},54525:function(Ae){"use strict";var p="%[a-f0-9]{2}",P=new RegExp("("+p+")|([^%]+?)","gi"),B=new RegExp("("+p+")+","gi");function oe(M,Y){try{return[decodeURIComponent(M.join(""))]}catch{}if(M.length===1)return M;Y=Y||1;var j=M.slice(0,Y),T=M.slice(Y);return Array.prototype.concat.call([],oe(j),oe(T))}function ue(M){try{return decodeURIComponent(M)}catch{for(var Y=M.match(P)||[],j=1;j<Y.length;j++)M=oe(Y,j).join(""),Y=M.match(P)||[];return M}}function ge(M){for(var Y={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},j=B.exec(M);j;){try{Y[j[0]]=decodeURIComponent(j[0])}catch{var T=ue(j[0]);T!==j[0]&&(Y[j[0]]=T)}j=B.exec(M)}Y["%C2"]="\uFFFD";for(var C=Object.keys(Y),F=0;F<C.length;F++){var ee=C[F];M=M.replace(new RegExp(ee,"g"),Y[ee])}return M}Ae.exports=function(M){if(typeof M!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof M+"`");try{return M=M.replace(/\+/g," "),decodeURIComponent(M)}catch{return ge(M)}}},1469:function(Ae){"use strict";Ae.exports=function(p,P){for(var B={},oe=Object.keys(p),ue=Array.isArray(P),ge=0;ge<oe.length;ge++){var M=oe[ge],Y=p[M];(ue?P.indexOf(M)!==-1:P(M,Y,p))&&(B[M]=Y)}return B}},51538:function(Ae,p,P){Ae.exports=self.fetch||(self.fetch=P(9868).default||P(9868))},57828:function(Ae){"use strict";function p(B){try{return JSON.stringify(B)}catch{return'"[Circular]"'}}Ae.exports=P;function P(B,oe,ue){var ge=ue&&ue.stringify||p,M=1;if(typeof B=="object"&&B!==null){var Y=oe.length+M;if(Y===1)return B;var j=new Array(Y);j[0]=ge(B);for(var T=1;T<Y;T++)j[T]=ge(oe[T]);return j.join(" ")}if(typeof B!="string")return B;var C=oe.length;if(C===0)return B;for(var F="",ee=1-M,ae=-1,G=B&&B.length||0,ie=0;ie<G;){if(B.charCodeAt(ie)===37&&ie+1<G){switch(ae=ae>-1?ae:0,B.charCodeAt(ie+1)){case 100:case 102:if(ee>=C||oe[ee]==null)break;ae<ie&&(F+=B.slice(ae,ie)),F+=Number(oe[ee]),ae=ie+2,ie++;break;case 105:if(ee>=C||oe[ee]==null)break;ae<ie&&(F+=B.slice(ae,ie)),F+=Math.floor(Number(oe[ee])),ae=ie+2,ie++;break;case 79:case 111:case 106:if(ee>=C||oe[ee]===void 0)break;ae<ie&&(F+=B.slice(ae,ie));var ce=typeof oe[ee];if(ce==="string"){F+="'"+oe[ee]+"'",ae=ie+2,ie++;break}if(ce==="function"){F+=oe[ee].name||"<anonymous>",ae=ie+2,ie++;break}F+=ge(oe[ee]),ae=ie+2,ie++;break;case 115:if(ee>=C)break;ae<ie&&(F+=B.slice(ae,ie)),F+=String(oe[ee]),ae=ie+2,ie++;break;case 37:ae<ie&&(F+=B.slice(ae,ie)),F+="%",ae=ie+2,ie++,ee--;break}++ee}++ie}return ae===-1?B:(ae<G&&(F+=B.slice(ae)),F)}},9868:function(Ae,p,P){"use strict";P.r(p),P.d(p,{default:function(){return B}});function B(oe,ue){return ue=ue||{},new Promise(function(ge,M){var Y=new XMLHttpRequest,j=[],T=[],C={},F=function(){return{ok:(Y.status/100|0)==2,statusText:Y.statusText,status:Y.status,url:Y.responseURL,text:function(){return Promise.resolve(Y.responseText)},json:function(){return Promise.resolve(Y.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([Y.response]))},clone:F,headers:{keys:function(){return j},entries:function(){return T},get:function(ae){return C[ae.toLowerCase()]},has:function(ae){return ae.toLowerCase()in C}}}};for(var ee in Y.open(ue.method||"get",oe,!0),Y.onload=function(){Y.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(ae,G,ie){j.push(G=G.toLowerCase()),T.push([G,ie]),C[G]=C[G]?C[G]+","+ie:ie}),ge(F())},Y.onerror=M,Y.withCredentials=ue.credentials=="include",ue.headers)Y.setRequestHeader(ee,ue.headers[ee]);Y.send(ue.body||null)})}},85783:function(Ae){"use strict";Ae.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},38887:function(Ae,p,P){var B=P(61533);function oe(ue,ge){var M=typeof Symbol<"u"&&ue[Symbol.iterator]||ue["@@iterator"];if(!M){if(Array.isArray(ue)||(M=B(ue))||ge&&ue&&typeof ue.length=="number"){M&&(ue=M);var Y=0,j=function(){};return{s:j,n:function(){return Y>=ue.length?{done:!0}:{done:!1,value:ue[Y++]}},e:function(ae){throw ae},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T=!0,C=!1,F;return{s:function(){M=M.call(ue)},n:function(){var ae=M.next();return T=ae.done,ae},e:function(ae){C=!0,F=ae},f:function(){try{!T&&M.return!=null&&M.return()}finally{if(C)throw F}}}}Ae.exports=oe,Ae.exports.__esModule=!0,Ae.exports.default=Ae.exports},86984:function(Ae,p,P){"use strict";const B=P(57828);Ae.exports=M;const oe=we().console||{},ue={mapHttpRequest:ce,mapHttpResponse:ce,wrapRequestSerializer:Ee,wrapResponseSerializer:Ee,wrapErrorSerializer:Ee,req:ce,res:ce,err:G};function ge(m,h){return Array.isArray(m)?m.filter(function(q){return q!=="!stdSerializers.err"}):m===!0?Object.keys(h):!1}function M(m){m=m||{},m.browser=m.browser||{};const h=m.browser.transmit;if(h&&typeof h.send!="function")throw Error("pino: transmit option must have a send function");const b=m.browser.write||oe;m.browser.write&&(m.browser.asObject=!0);const q=m.serializers||{},O=ge(m.browser.serialize,q);let H=m.browser.serialize;Array.isArray(m.browser.serialize)&&m.browser.serialize.indexOf("!stdSerializers.err")>-1&&(H=!1);const D=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),m.enabled===!1&&(m.level="silent");const E=m.level||"info",I=Object.create(b);I.log||(I.log=be),Object.defineProperty(I,"levelVal",{get:_}),Object.defineProperty(I,"level",{get:S,set:Q});const x={transmit:h,serialize:O,asObject:m.browser.asObject,levels:D,timestamp:ie(m)};I.levels=M.levels,I.level=E,I.setMaxListeners=I.getMaxListeners=I.emit=I.addListener=I.on=I.prependListener=I.once=I.prependOnceListener=I.removeListener=I.removeAllListeners=I.listeners=I.listenerCount=I.eventNames=I.write=I.flush=be,I.serializers=q,I._serialize=O,I._stdErrSerialize=H,I.child=J,h&&(I._logEvent=ae());function _(){return this.level==="silent"?1/0:this.levels.values[this.level]}function S(){return this._level}function Q(re){if(re!=="silent"&&!this.levels.values[re])throw Error("unknown level "+re);this._level=re,Y(x,I,"error","log"),Y(x,I,"fatal","error"),Y(x,I,"warn","error"),Y(x,I,"info","log"),Y(x,I,"debug","log"),Y(x,I,"trace","log")}function J(re,Pe){if(!re)throw new Error("missing bindings for child Pino");Pe=Pe||{},O&&re.serializers&&(Pe.serializers=re.serializers);const le=Pe.serializers;if(O&&le){var De=Object.assign({},q,le),Ie=m.browser.serialize===!0?Object.keys(De):O;delete re.serializers,C([re],Ie,De,this._stdErrSerialize)}function Te(Me){this._childLevel=(Me._childLevel|0)+1,this.error=F(Me,re,"error"),this.fatal=F(Me,re,"fatal"),this.warn=F(Me,re,"warn"),this.info=F(Me,re,"info"),this.debug=F(Me,re,"debug"),this.trace=F(Me,re,"trace"),De&&(this.serializers=De,this._serialize=Ie),h&&(this._logEvent=ae([].concat(Me._logEvent.bindings,re)))}return Te.prototype=this,new Te(this)}return I}M.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},M.stdSerializers=ue,M.stdTimeFunctions=Object.assign({},{nullTime:Re,epochTime:Be,unixTime:Le,isoTime:ye});function Y(m,h,b,q){const O=Object.getPrototypeOf(h);h[b]=h.levelVal>h.levels.values[b]?be:O[b]?O[b]:oe[b]||oe[q]||be,j(m,h,b)}function j(m,h,b){!m.transmit&&h[b]===be||(h[b]=function(q){return function(){const H=m.timestamp(),D=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===oe?oe:this;for(var I=0;I<D.length;I++)D[I]=arguments[I];if(m.serialize&&!m.asObject&&C(D,this._serialize,this.serializers,this._stdErrSerialize),m.asObject?q.call(E,T(this,b,D,H)):q.apply(E,D),m.transmit){const x=m.transmit.level||h.level,_=M.levels.values[x],S=M.levels.values[b];if(S<_)return;ee(this,{ts:H,methodLevel:b,methodValue:S,transmitLevel:x,transmitValue:M.levels.values[m.transmit.level||h.level],send:m.transmit.send,val:h.levelVal},D)}}}(h[b]))}function T(m,h,b,q){m._serialize&&C(b,m._serialize,m.serializers,m._stdErrSerialize);const O=b.slice();let H=O[0];const D={};q&&(D.time=q),D.level=M.levels.values[h];let E=(m._childLevel|0)+1;if(E<1&&(E=1),H!==null&&typeof H=="object"){for(;E--&&typeof O[0]=="object";)Object.assign(D,O.shift());H=O.length?B(O.shift(),O):void 0}else typeof H=="string"&&(H=B(O.shift(),O));return H!==void 0&&(D.msg=H),D}function C(m,h,b,q){for(const O in m)if(q&&m[O]instanceof Error)m[O]=M.stdSerializers.err(m[O]);else if(typeof m[O]=="object"&&!Array.isArray(m[O]))for(const H in m[O])h&&h.indexOf(H)>-1&&H in b&&(m[O][H]=b[H](m[O][H]))}function F(m,h,b){return function(){const q=new Array(1+arguments.length);q[0]=h;for(var O=1;O<q.length;O++)q[O]=arguments[O-1];return m[b].apply(this,q)}}function ee(m,h,b){const q=h.send,O=h.ts,H=h.methodLevel,D=h.methodValue,E=h.val,I=m._logEvent.bindings;C(b,m._serialize||Object.keys(m.serializers),m.serializers,m._stdErrSerialize===void 0?!0:m._stdErrSerialize),m._logEvent.ts=O,m._logEvent.messages=b.filter(function(x){return I.indexOf(x)===-1}),m._logEvent.level.label=H,m._logEvent.level.value=D,q(H,m._logEvent,E),m._logEvent=ae(I)}function ae(m){return{ts:0,messages:[],bindings:m||[],level:{label:"",value:0}}}function G(m){const h={type:m.constructor.name,msg:m.message,stack:m.stack};for(const b in m)h[b]===void 0&&(h[b]=m[b]);return h}function ie(m){return typeof m.timestamp=="function"?m.timestamp:m.timestamp===!1?Re:Be}function ce(){return{}}function Ee(m){return m}function be(){}function Re(){return!1}function Be(){return Date.now()}function Le(){return Math.round(Date.now()/1e3)}function ye(){return new Date(Date.now()).toISOString()}function we(){function m(h){return typeof h<"u"&&h}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return m(self)||m(window)||m(this)||{}}}}}]);
